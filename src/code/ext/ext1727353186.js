var UDOC={};UDOC.B=function(){var N=new Uint8Array(4),z=N.buffer,t=new Int16Array(z),M=new Uint16Array(z),c=new Int32Array(z),s=new Uint32Array(z),h=new Float32Array(z);
return{readShort:function(R,p){N[0]=R[p];N[1]=R[p+1];return t[0]},readUshort:function(R,p){N[0]=R[p];
N[1]=R[p+1];return M[0]},readInt:function(R,p){N[0]=R[p];N[1]=R[p+1];N[2]=R[p+2];N[3]=R[p+3];return c[0]},readUint:function(R,p){N[0]=R[p];
N[1]=R[p+1];N[2]=R[p+2];N[3]=R[p+3];return s[0]},readUintBE:function(R,p){N[3]=R[p];N[2]=R[p+1];N[1]=R[p+2];
N[0]=R[p+3];return s[0]},readFloat:function(R,p){N[0]=R[p];N[1]=R[p+1];N[2]=R[p+2];N[3]=R[p+3];return h[0]},readASCII:function(R,p,W){var r="";
for(var K=0;K<W;K++)r+=String.fromCharCode(R[p+K]);return r}}}();UDOC.G={concat:function(N,z){for(var t=0;
t<z.cmds.length;t++)N.cmds.push(z.cmds[t]);for(var t=0;t<z.crds.length;t++)N.crds.push(z.crds[t])},getBB:function(N){var z=1e99,t=1e99,M=-z,c=-t;
for(var s=0;s<N.length;s+=2){var h=N[s],R=N[s+1];if(h<z)z=h;if(h>M)M=h;if(R<t)t=R;if(R>c)c=R}return[z,t,M,c]},rectToPath:function(N){return{cmds:["M","L","L","L","Z"],crds:[N[0],N[1],N[2],N[1],N[2],N[3],N[0],N[3]]}},insideBox:function(N,z){return z[0]<=N[0]&&z[1]<=N[1]&&N[2]<=z[2]&&N[3]<=z[3]},isBox:function(N,z){var t=function(x,X){for(var U=0;
U<8;U+=2){var w=!0;for(var B=0;B<8;B++)if(Math.abs(X[B]-x[B+U&7])>=2){w=!1;break}if(w)return!0}return!1},s=!1;
if(N.cmds.length>10)return!1;var M=N.cmds.join(""),c=N.crds;if(M=="MLLLZ"&&c.length==8||(M=="MLLLLZ"||M=="MLLLL")&&c.length==10){if(c.length==10)c=c.slice(0,8);
if(z==null){z=[c[0],c[1],c[0],c[1]];for(var h=0;h<c.length;h+=2){var R=c[h],W=c[h+1];if(R<z[0])z[0]=R;
if(W<z[1])z[1]=W;if(z[2]<R)z[2]=R;if(z[3]<W)z[3]=W}}var r=z[0],n=z[1],K=z[2],D=z[3];if(!s)s=t(c,[r,n,K,n,K,D,r,D]);
if(!s)s=t(c,[r,D,K,D,K,n,r,n])}return s},boxArea:function(N){var z=N[2]-N[0],t=N[3]-N[1];return z*t},newPath:function(N){N.pth={cmds:[],crds:[]}},moveTo:function(N,z,t){var M=UDOC.M.multPoint(N.ctm,[z,t]),c=N.pth,s=c.cmds.length;
if(s!=0&&c.cmds[s-1]=="M"){c.cmds.pop();c.crds.pop();c.crds.pop()}N.pth.cmds.push("M");N.pth.crds.push(M[0],M[1]);
N.cpos=M},lineTo:function(N,z,t){var M=UDOC.M.multPoint(N.ctm,[z,t]);if(N.cpos[0]==M[0]&&N.cpos[1]==M[1])return;
N.pth.cmds.push("L");N.pth.crds.push(M[0],M[1]);N.cpos=M},curveTo:function(N,z,t,M,c,s,h){var R;if(N.pth.cmds.length==0)UDOC.G.moveTo(N,0,0);
R=UDOC.M.multPoint(N.ctm,[z,t]);z=R[0];t=R[1];R=UDOC.M.multPoint(N.ctm,[M,c]);M=R[0];c=R[1];R=UDOC.M.multPoint(N.ctm,[s,h]);
s=R[0];h=R[1];N.cpos=R;N.pth.cmds.push("C");N.pth.crds.push(z,t,M,c,s,h)},quadCurveTo:function(N,z,t,M,c){var s;
if(N.pth.cmds.length==0)UDOC.G.moveTo(N,0,0);s=UDOC.M.multPoint(N.ctm,[z,t]);z=s[0];t=s[1];s=UDOC.M.multPoint(N.ctm,[M,c]);
M=s[0];c=s[1];N.cpos=s;N.pth.cmds.push("Q");N.pth.crds.push(z,t,M,c)},closePath:function(N){N.pth.cmds.push("Z")},arc:function(N,z,t,M,c,s,h){if(h)while(s>c)s-=2*Math.PI;
else while(s<c)s+=2*Math.PI;var R=(s-c)/4,p=Math.cos(R/2),W=-Math.sin(R/2),r=(4-p)/3,n=W==0?W:(1-p)*(3-p)/(3*W),K=r,D=-n,x=p,Y=-W,X=[p,W],w=[r,n],B=[K,D],u=[x,Y],d={cmds:[N.pth.cmds.length==0?"M":"L"],crds:[p,W]},L=[1,0,0,1,0,0];
for(var q=0;q<4;q++){w=UDOC.M.multPoint(L,w);B=UDOC.M.multPoint(L,B);u=UDOC.M.multPoint(L,u);d.crds.push(w[0],w[1],B[0],B[1],u[0],u[1]);
d.cmds.push("C");if(q==0)UDOC.M.rotate(L,-R)}var $=[M,0,0,M,z,t];UDOC.M.rotate(L,-c+R/2);UDOC.M.concat(L,$);
UDOC.M.multArray(L,d.crds);UDOC.M.multArray(N.ctm,d.crds);UDOC.G.concat(N.pth,d);var t=d.crds.pop();
z=d.crds.pop();N.cpos=[z,t]},drawRect:function(N,z,t,M,c){UDOC.G.moveTo(N,z,t);UDOC.G.lineTo(N,z+M,t);
UDOC.G.lineTo(N,z+M,t+c);UDOC.G.lineTo(N,z,t+c);UDOC.G.closePath(N)},toPoly:function(N){if(N.cmds[0]!="M"||N.cmds[N.cmds.length-1]!="Z")return null;
for(var z=1;z<N.cmds.length-1;z++)if(N.cmds[z]!="L")return null;var t=[],M=N.crds.length;if(N.crds[0]==N.crds[M-2]&&N.crds[1]==N.crds[M-1])M-=2;
for(var z=0;z<M;z+=2)t.push([N.crds[z],N.crds[z+1]]);if(UDOC.G.polyArea(N.crds)<0)t.reverse();return t},fromPoly:function(N){var z={cmds:[],crds:[]};
for(var t=0;t<N.length;t++){z.crds.push(N[t][0],N[t][1]);z.cmds.push(t==0?"M":"L")}z.cmds.push("Z");
return z},polyArea:function(N){if(N.length<6)return 0;var z=N.length-2,t=(N[0]-N[z])*(N[z+1]+N[1]);for(var M=0;
M<z;M+=2)t+=(N[M+2]-N[M])*(N[M+1]+N[M+3]);return-t*.5},polyClip:function(N,z){var t,M,c,s,h=function(K){return(M[0]-t[0])*(K[1]-t[1])>(M[1]-t[1])*(K[0]-t[0])},R=function(){var K=[t[0]-M[0],t[1]-M[1]],D=[c[0]-s[0],c[1]-s[1]],x=t[0]*M[1]-t[1]*M[0],Y=c[0]*s[1]-c[1]*s[0],X=1/(K[0]*D[1]-K[1]*D[0]);
return[(x*D[0]-Y*K[0])*X,(x*D[1]-Y*K[1])*X]},p=N,W,r;t=z[z.length-1];for(r in z){var M=z[r],n=p;p=[];
c=n[n.length-1];for(W in n){var s=n[W];if(h(s)){if(!h(c)){p.push(R())}p.push(s)}else if(h(c)){p.push(R())}c=s}t=M}return p}};
UDOC.M={getScale:function(N){return Math.sqrt(Math.abs(N[0]*N[3]-N[1]*N[2]))},translate:function(N,z,t){UDOC.M.concat(N,[1,0,0,1,z,t])},rotate:function(N,z){UDOC.M.concat(N,[Math.cos(z),-Math.sin(z),Math.sin(z),Math.cos(z),0,0])},scale:function(N,z,t){UDOC.M.concat(N,[z,0,0,t,0,0])},concat:function(N,z){var t=N[0],M=N[1],c=N[2],s=N[3],h=N[4],R=N[5];
N[0]=t*z[0]+M*z[2];N[1]=t*z[1]+M*z[3];N[2]=c*z[0]+s*z[2];N[3]=c*z[1]+s*z[3];N[4]=h*z[0]+R*z[2]+z[4];
N[5]=h*z[1]+R*z[3]+z[5]},invert:function(N){var z=N[0],t=N[1],M=N[2],c=N[3],s=N[4],h=N[5],R=z*c-t*M;
N[0]=c/R;N[1]=-t/R;N[2]=-M/R;N[3]=z/R;N[4]=(M*h-c*s)/R;N[5]=(t*s-z*h)/R},multPoint:function(N,z){var t=z[0],M=z[1];
return[t*N[0]+M*N[2]+N[4],t*N[1]+M*N[3]+N[5]]},multArray:function(N,z){for(var t=0;t<z.length;t+=2){var M=z[t],c=z[t+1];
z[t]=M*N[0]+c*N[2]+N[4];z[t+1]=M*N[1]+c*N[3]+N[5]}}};UDOC.C={srgbGamma:function(N){return N<.0031308?12.92*N:1.055*Math.pow(N,1/2.4)-.055},cmykToRgb:function(N){var z=N[0],M=N[1],c=N[2],s=N[3],h=255+z*(-4.387332384609988*z+54.48615194189176*M+18.82290502165302*c+212.25662451639585*s+-285.2331026137004)+M*(1.7149763477362134*M-5.6096736904047315*c+-17.873870861415444*s-5.497006427196366)+c*(-2.5217340131683033*c-21.248923337353073*s+17.5119270841813)+s*(-21.86122147463605*s-189.48180835922747),R=255+z*(8.841041422036149*z+60.118027045597366*M+6.871425592049007*c+31.159100130055922*s+-79.2970844816548)+M*(-15.310361306967817*M+17.575251261109482*c+131.35250912493976*s-190.9453302588951)+c*(4.444339102852739*c+9.8632861493405*s-24.86741582555878)+s*(-20.737325471181034*s-187.80453709719578),p=255+z*(.8842522430003296*z+8.078677503112928*M+30.89978309703729*c-.23883238689178934*s+-14.183576799673286)+M*(10.49593273432072*M+63.02378494754052*c+50.606957656360734*s-112.23884253719248)+c*(.03296041114873217*c+115.60384449646641*s+-193.58209356861505)+s*(-22.33816807309886*s-180.12613974708367);
return[Math.max(0,Math.min(1,h/255)),Math.max(0,Math.min(1,R/255)),Math.max(0,Math.min(1,p/255))]},labToRgb:function(N){var z=903.3,t=.008856,M=N[0],s=N[1],h=N[2],R=(M+16)/116,p=R*R*R,W=R-h/200,n=W*W*W,K=s/500+R,D=K*K*K,x=n>t?n:(116*W-16)/z,Y=p>t?p:(116*R-16)/z,X=D>t?D:(116*K-16)/z,U=X*96.72,w=Y*100,B=x*81.427,u=[U/100,w/100,B/100],d=[3.1338561,-1.6168667,-.4906146,-.9787684,1.9161415,.033454,.0719453,-.2289914,1.4052427],L=[d[0]*u[0]+d[1]*u[1]+d[2]*u[2],d[3]*u[0]+d[4]*u[1]+d[5]*u[2],d[6]*u[0]+d[7]*u[1]+d[8]*u[2]];
for(var O=0;O<3;O++)L[O]=Math.max(0,Math.min(1,UDOC.C.srgbGamma(L[O])));return L}};UDOC.getState=function(N){return{font:UDOC.getFont(),dd:{flat:1},ca:1,colr:[0,0,0],space:"/DeviceGray",CA:1,COLR:[0,0,0],sspace:"/DeviceGray",bmode:"/Normal",SA:!1,OPM:0,AIS:!1,OP:!1,op:!1,SMask:"/None",lwidth:1,lcap:0,ljoin:0,mlimit:10,SM:.1,doff:0,dash:[],ctm:[1,0,0,1,0,0],cpos:[0,0],pth:{cmds:[],crds:[]},cpth:N?UDOC.G.rectToPath(N):null,cpstack:[]}};
UDOC.getFont=function(){return{Tc:0,Tw:0,Th:100,Tl:0,Tf:"Helvetica-Bold",Tfs:1,Tmode:0,Trise:0,Tk:0,Tal:0,Tun:0,Tm:[1,0,0,1,0,0],Tlm:[1,0,0,1,0,0],Trm:[1,0,0,1,0,0]}};
function FromPS(){}FromPS.Parse=function(N,z){N=new Uint8Array(N);var t=0,s=null,h=null,X=!0;while(!(N[t]==37&&N[t+1]==33))t++;
var M=FromPS.B.readASCII(N,t,N.length-t),c=M.split(/[\n\r]+/);for(var R=0;R<c.length;R++){var p=c[R].trim();
if(p.charAt(0)=="%"){p=p.slice(1);while(p.charAt(0)=="%")p=p.slice(1);var W=p.split(":");if(W[0]=="BoundingBox"){s=W[1].trim().split(/[ ]+/).map(parseFloat)}if(p.indexOf("!PS-Adobe-3.0 EPSF-3.0")!=-1)h=p;
if(p.indexOf("!PS-Adobe-2.0 EPSF-1.2")!=-1)h=p}}if(h==null||s==null)s=[0,0,595,842];var r=[],n=FromPS._getDictStack([],{}),K=[{typ:"file",val:{buff:N,off:t}}],D=[],x=FromPS._getEnv(s),Y=Date.now();
while(X)X=FromPS.step(r,n,K,D,x,z);if(x.pgOpen)z.ShowPage();z.Done();console.log(Date.now()-Y)};FromPS._getDictStack=function(N,z){var t="def undef known begin end currentfile currentdict currentpacking setpacking currentoverprint setoverprint currentglobal setglobal gcheck currentsystemparams setsystemparams currentuserparams setuserparams currentpagedevice setpagedevice currentflat currentlinewidth currentdash currentpoint currentscreen setscreen currenthalftone currentblackgeneration currentundercolorremoval currentcolortransfer internaldict dict string readstring readhexstring readline getinterval putinterval token array aload astore length maxlength matrix count mark counttomark cleartomark dictstack countdictstack makepattern makefont scalefont stringwidth setfont currentcolorspace setcolorspace setcolor _setHSB_ currentgray currentrgbcolor currentcmykcolor setlinewidth setstrokeadjust setflat setlinecap setlinejoin setmiterlimit setdash clip eoclip clippath pathbbox newpath stroke fill eofill shfill closepath flattenpath showpage print _drawRect_ moveto lineto curveto arc arcn show ashow xshow yshow xyshow widthshow awidthshow charpath cshow rmoveto rlineto rcurveto translate rotate scale concat concatmatrix invertmatrix currentmatrix defaultmatrix setmatrix limitcheck save restore clipsave cliprestore gsave grestore grestorePDF grestoreall usertime readtime flush flushfile readonly executeonly findresource resourcestatus defineresource undefineresource resourceforall image imagemask colorimage xcheck status cachestatus setcachelimit type if ifelse exec stopped stop dup exch copy roll index anchorsearch pop put get load where store repeat for forall pathforall loop exit bind cvi cvr cvs cvx cvn cvlit add sub mul div idiv bitshift mod exp atan neg abs floor ceiling round truncate sqrt ln sin cos srand rand == transform itransform dtransform idtransform eq ge gt le lt ne and or not filter begincmap endcmap begincodespacerange endcodespacerange beginbfrange endbfrange beginbfchar endbfchar".split(" ").concat(N),M="image colorimage repeat for forall loop".split(" ");
for(var c=0;c<M.length;c++)t.push(M[c]+"---");FromPS._myOps=FromPS.makeProcs({CIDSystemInfo:"/CIDSystemInfo",findfont:"/Font findresource",definefont:"/Font defineresource",undefinefont:"/Font undefineresource",selectfont:"exch findfont exch scalefont setfont",rectfill:"gsave newpath _drawRect_  fill   grestore",rectstroke:"gsave newpath _drawRect_  stroke grestore",rectclip:"newpath _drawRect_  clip newpath",setgray:"/DeviceGray setcolorspace setcolor",setrgbcolor:"/DeviceRGB  setcolorspace setcolor",sethsbcolor:"/DeviceRGB  setcolorspace _setHSB_",setcmykcolor:"/DeviceCMYK setcolorspace setcolor",setpattern:"/Pattern    setcolorspace setcolor"});
for(var s in FromPS._myOps)t.push(s);var h=z,R={},W={},r={},n={};R.systemdict={typ:"dict",val:R};R.globaldict={typ:"dict",val:W};
R.userdict={typ:"dict",val:r};R.statusdict={typ:"dict",val:n};R.GlobalFontDirectory=R.SharedFontDirectory={typ:"dict",val:{}};
R.FontDirectory={typ:"dict",val:{}};R.$error={typ:"dict",val:{}};R.errordict={typ:"dict",val:FromPS.makeProcs({handleerror:""})};
R.null={typ:"null",val:null};R.true={typ:"boolean",val:!0};R.false={typ:"boolean",val:!1};R.product={typ:"string",val:FromPS.makeStr("Photopea")};
R.version={typ:"string",val:[51]};R.languagelevel={typ:"integer",val:3};for(var c=0;c<t.length;c++)R[t[c]]={typ:"operator",val:t[c]};
for(var K in h)R[K]=h[K];return[R,W,r]};FromPS._getEnv=function(N){var z={bb:N,gst:UDOC.getState(N),packing:!1,overprint:!1,global:!1,systemparams:{MaxPatternCache:{type:"integer",val:5e3}},userparams:{},pagedevice:{PageSize:{typ:"array",val:[{typ:"real",val:N[2]},{typ:"real",val:N[3]}]}},cmnum:0,fnt:null,res:{},pgOpen:!1,funs:FromPS.makeProcs({blackgeneration:"",undercolorremoval:"pop 0"})},t;
t="Font CIDFont CMap FontSet Form Pattern ProcSet Halftone ColorRendering IdiomSet InkParams TrapParams OutputDevice ControlLanguage Localization PDL HWOptions".split(" ");
for(var M=0;M<t.length;M++)z.res[t[M]]={typ:"dict",val:{},maxl:1e3};t=["Encoding","ColorSpace"];for(var M=0;
M<t.length;M++)z.res[t[M]]={typ:"array",val:[]};z.res.Category={typ:"dict",val:z.res};z.res.ColorSpace.val=[{typ:"array",val:[{typ:"name",val:"/DeviceRGB"}]},{typ:"array",val:[{typ:"name",val:"/DeviceCMYK"}]},{typ:"array",val:[{typ:"name",val:"/DeviceGray"}]}];
for(var M=0;M<t.length;M++)z.res[t[M]]={typ:"dict",val:{},maxl:1e3};return z};FromPS.makeProcs=function(N){var z={};
for(var t in N){var M=N[t].replace(/  +/g," ").split(" ");z[t]={typ:"procedure",val:[]};for(var c=0;
c<M.length;c++)z[t].val.push({typ:"name",val:M[c]})}return z};FromPS.addProc=function(N,z){if(N.val.length==0)return;
if(N.typ!="procedure"){console.log(N);throw N.typ}z.push({typ:"procedure",val:N.val,off:0})};FromPS.stepC=0;
FromPS._f32=new Float32Array(1);FromPS.step=function(N,z,t,M,c,s,h,R){var p=Date.now(),W=FromPS._f32,r=FromPS.getToken,n=c.gst,K=r(t,z),Y=!1;
if(K==null)return!1;if(R&&K.typ=="string"&&FromPS.readStr(K.val)=="def")K={typ:"operator",val:"def"};
var D=K.typ,x=K.val;if(x=="NaN"||x=="INF")D="integer";if(isNaN(n.cpos[0]))throw"e";if(Y)console.log(K,N.slice(0));
if("integer real dict boolean string array procedure null file".split(" ").indexOf(D)!=-1){N.push(K);
return!0}if(D!="name"&&D!="operator")throw"e";if(x.charAt(0)=="/"){N.push(K)}else if(x=="undefined")return!0;
else if(x.startsWith("II*"))return!1;else if(x=="{"){var X=[],U={typ:"procedure",val:[]},w=r(t,z);while(!0){if(w.val=="{"){var B={typ:"procedure",val:[]};
U.val.push(B);X.push(U);U=B}else if(w.val=="}"){if(X.length==0)break;U=X.pop()}else U.val.push(w);w=r(t,z)}N.push(U)}else if(x=="["||x=="<<")N.push({typ:"mark"});
else if(x=="]"||x==">>"){var u=[];while(N.length!=0){var d=N.pop();if(d.typ=="mark")break;u.push(d)}u.reverse();
if(x=="]")N.push({typ:"array",val:u});else{var L={};for(var O=0;O<u.length;O+=2)L[u[O].val.slice(1)]=u[O+1];
N.push({typ:"dict",val:L,maxl:1e3})}}else{var T=FromPS.getFromStacks(x,z);if(Y)console.log("---",T);
if(T==null){if(R||x=="endstream")return!1;else{console.log("unknown operator",x,N,z);throw"e"}}else if(T.typ=="procedure")FromPS.addProc(T,t);
else if("array string dict null integer real boolean state name file".split(" ").indexOf(T.typ)!=-1)N.push(T);
else if(T.typ=="operator"){var q=T.val,$="known if ifelse currentpacking setpacking dict dup begin end put bind def undef where pop get exec ge stop stopped cvr string not and".split(" ");
if(FromPS._myOps[q]){FromPS.addProc(FromPS._myOps[q],t)}else if(q=="flattenpath"||q=="limitcheck"){}else if(q=="def"){var g=N.pop(),y=N.pop();
if(y==null&&R)return!1;y=FromPS.getDKey(y);z[z.length-1][y]=g}else if(q=="undef"||q=="known"){var b=FromPS.getDKey(N.pop()),f=N.pop(),E=f.val;
if(q=="undef")delete E[b];else N.push({typ:"boolean",val:f.typ!="null"&&E[b]!=null})}else if(q=="internaldict"){var H=N.pop().val;
N.push({typ:"dict",val:{},maxl:1e3})}else if(q=="dict"){var H=N.pop().val;N.push({typ:"dict",val:{},maxl:H})}else if(q=="string"){var H=N.pop().val;
N.push({typ:"string",val:new Array(H)})}else if(q=="readstring"||q=="readhexstring"){var Q=N.pop(),H=Q.val.length,V=N.pop(),I=FromPS.GetFile(V).val;
if(q=="readstring"){for(var O=0;O<H;O++)Q.val[O]=I.buff[I.off+O];I.off+=H}else FromPS.readHex(I,H,Q.val);
N.push(Q,{typ:"boolean",val:!0})}else if(q=="readline"){var Q=N.pop(),I=FromPS.GetFile(N.pop()).val,O=0;
if(FromPS.isEOL(I.buff[I.off]))I.off++;while(O<Q.val.length){var Z=I.buff[I.off];I.off++;if(Z==null)throw"e";
if(FromPS.isEOL(Z)){if(I.buff[I.off]==10)I.off++;break}Q.val[O]=Z;O++}N.push({typ:"string",val:Q.val.slice(0,O)});
N.push({typ:"boolean",val:!0})}else if(q=="getinterval"){var bB=N.pop().val,bN=N.pop().val,aq=N.pop(),j=[];
if(aq.typ=="string"||aq.typ=="array")for(var O=0;O<bB;O++)j.push(aq.val[bN+O]);else throw"e";N.push({typ:aq.typ,val:j})}else if(q=="putinterval"){var aq=N.pop(),bN=N.pop().val,at=N.pop();
if(bN+aq.val.length>=at.val.length){}else if(aq.typ=="string")for(var O=0;O<aq.val.length;O++)at.val[bN+O]=aq.val[O];
else throw"e"}else if(q=="token"){var aq=N.pop();if(aq.typ!="string")throw"e";var u=[];for(var O=0;O<aq.val.length;
O++){var a5=aq.val[O];if(a5==null)break;u.push(a5)}var bK={buff:new Uint8Array(u),off:0},K=r([{typ:"file",val:bK}],z),bZ=[];
for(var O=bK.off;O<u.length;O++)bZ.push(u[O]);N.push({typ:"string",val:bZ},K,{typ:"boolean",val:!0})}else if(q=="array"){var H=N.pop().val;
N.push({typ:"array",val:new Array(H)})}else if(q=="aload"){var d=N.pop(),u=d.val;for(var O=0;O<u.length;
O++)N.push(u[O]);N.push(d)}else if(q=="astore"){var d=N.pop(),u=d.val;for(var O=0;O<u.length;O++)u[u.length-1-O]=N.pop();
N.push(d)}else if(q=="length"){var d=N.pop(),D=d.typ,H=0;if(D=="array")H=d.val.length;else if(D=="procedure")H=d.val.length;
else if(D=="dict")H=Object.keys(d.val).length;else if(D=="string")H=d.val.length;else{console.log(d);
throw"e"}N.push({typ:"integer",val:H})}else if(q=="maxlength"){var bL=N.pop();N.push({typ:"integer",val:bL.maxl})}else if(q=="matrix"){N.push({typ:"array",val:FromPS.makeArr([1,0,0,1,0,0],"real")})}else if(q=="count"){N.push({typ:"integer",val:N.length})}else if(q=="mark"){N.push({typ:"mark"})}else if(q=="counttomark"||q=="cleartomark"){var aY=0;
while(aY<N.length&&N[N.length-1-aY].typ!="mark")aY++;if(q=="cleartomark")for(var O=0;O<aY+1;O++)N.pop();
else N.push({typ:"integer",val:aY})}else if(q=="dictstack"){var u=N.pop();for(var O=0;O<z.length;O++)u.val[O]={typ:"dict",val:z[O],maxl:1e3};
N.push(u)}else if(q=="countdictstack"){var b2=0;for(var O=0;O<N.length;O++)if(N[O].typ=="dict")b2++;
N.push({typ:"integer",val:b2})}else if(q=="begin"){var d=N.pop(),E=d.val;if(E==null||d.typ!="dict"){console.log(d,z);
throw"e"}z.push(E)}else if(q=="end"){z.pop();if(z.length==3&&R)return!1}else if(q=="currentfile"){var aH;
for(var O=t.length-1;O>=0;O--)if(t[O].typ=="file"){aH=t[O];break}N.push({typ:"file",val:aH.val})}else if(q=="currentdict"){var E=z[z.length-1];
N.push({typ:"dict",val:E,maxl:1e3})}else if("currentpacking currentoverprint currentglobal currentsystemparams currentuserparams currentpagedevice".split(" ").indexOf(q)!=-1){var g=c[q.slice(7)];
N.push({typ:typeof g=="boolean"?"boolean":"dict",val:g})}else if(q=="gcheck"){var aS=N.pop();N.push({typ:"boolean",val:!1})}else if("setpacking setoverprint setglobal setsystemparams setuserparams setpagedevice".split(" ").indexOf(q)!=-1){c[q.slice(3)]=N.pop().val}else if(q=="currentflat"){N.push({typ:"real",val:1})}else if(q=="currentlinewidth"){N.push({typ:"real",val:n.lwidth})}else if(q=="currentdash"){N.push({typ:"array",val:FromPS.makeArr(n.dash,"integer")},{typ:"real",val:n.doff})}else if(q=="currentpoint"){var bJ=n.ctm.slice(0);
UDOC.M.invert(bJ);var aM=UDOC.M.multPoint(bJ,n.cpos);N.push({typ:"real",val:aM[0]},{typ:"real",val:aM[1]})}else if(q=="currentscreen"){N.push({typ:"int",val:60},{typ:"real",val:0},{typ:"real",val:0})}else if(q=="setscreen"){N.pop();
N.pop();N.pop()}else if(q=="currenthalftone"){N.push({typ:"dict",val:{},maxl:1e3})}else if(q=="currentblackgeneration"||q=="currentundercolorremoval"){N.push(c.funs[q.slice(7)])}else if(q=="currentcolortransfer"){for(var O=0;
O<4;O++)N.push(c.funs.blackgeneration)}else if(q=="findresource"){var cC=N.pop().val.slice(1),cy=N.pop(),b=cy.val.slice(1),am;
if(cC=="Font"){c.res[cC].val[b]={typ:"dict",val:{FontType:{typ:"integer",val:1},FontMatrix:{typ:"array",val:FromPS.makeArr([1,0,0,1,0,0],"real")},FontName:cy,FID:{typ:"fontID",val:Math.floor(Math.random()*16777215)},Encoding:{typ:"array",val:[]},FontBBox:{typ:"array",val:FromPS.makeArr([0,0,1,1],"real")},PaintType:{typ:"integer",val:0}}}}if(cC=="Category"&&b=="Generic")am={typ:"dict",val:{},maxl:1e3};
else if((cC=="ProcSet"||cC=="Procset")&&b=="CIDInit")am={typ:"dict",val:{},maxl:1e3};else am=c.res[cC].val[b];
if(am==null)throw"e";N.push(am)}else if(q=="resourcestatus"){var cC=N.pop().val.slice(1),b=N.pop().val.slice(1),am=c.res[cC].val[b];
if(am){N.push({typ:"integer",val:1});N.push({typ:"integer",val:Object.keys(am.val).length})}N.push({typ:"boolean",val:am!=null})}else if(q=="defineresource"){var cC=N.pop().val.slice(1),ao=N.pop();
if(N.length==0)return;var b=N.pop().val.slice(1);c.res[cC].val[b]=ao;N.push(ao)}else if(q=="undefineresource"){var cC=N.pop().val.slice(1),b=N.pop().val.slice(1);
delete c.res[cC].val[b]}else if(q=="resourceforall"){var cC=N.pop().val.slice(1),cz=N.pop().val,az=N.pop(),bM=N.pop().val;
if(bM.length!=1||bM[0]!=42)throw"e";var cn=c.res[cC].val;for(var b in cn){var Q=cz.slice(0);for(var O=0;
O<b.length;O++)Q[O]=b[O];FromPS.addProc(az,t);FromPS.addProc({typ:"procedure",val:[{typ:"string",val:Q}]},t)}}else if(q=="image"||q=="colorimage"){var a4,c9,a_,bi,cb=1,cs=!1,bk=[],top=N.pop();
N.push(top);if(q=="image"&&top.typ=="dict"){var a9=N.pop().val;a4=a9.Width.val;c9=a9.Height.val;a_=a9.BitsPerComponent.val;
bi=FromPS.readArr(a9.ImageMatrix.val);cb=a9.NComponents?a9.NComponents.val:1;cs=a9.MultipleDataSources?a9.MultipleDataSources.val:!1;
bk=a9.DataSource.val;if(a9.DataSource.typ=="file")bk=[a9.DataSource]}else{if(q=="colorimage"){cb=N.pop().val;
cs=N.pop().val}if(cs){bk[2]=N.pop();bk[1]=N.pop();bk[0]=N.pop()}else bk=[N.pop()];var bi=FromPS.readArr(N.pop().val),a_=N.pop().val,c9=N.pop().val,a4=N.pop().val}if(cb!=1&&cb!=3&&cb!=4)throw"unsupported number of channels "+cb;
if(a_!=8)throw"unsupported bits per channel: "+a_;var cw=new Uint8Array(a4*c9*4);for(var O=0;O<cw.length;
O++)cw[O]=255;t.push({typ:"name",val:q+"---",ctx:[a4,c9,a_,bi,cb,cs,cw,0,bk]});if(bk[0].typ=="procedure")for(var O=0;
O<bk.length;O++)FromPS.addProc(bk[O],t)}else if(q=="image---"||q=="colorimage---"){var c7=K.ctx,a4=c7[0],c9=c7[1],a_=c7[2],bi=c7[3],cb=c7[4],cs=c7[5],cw=c7[6],ae=c7[7],bk=c7[8],aJ=0;
if(cs){for(O=0;O<cb;O++){var aX=bk[O];if(aX.typ=="procedure")aX=N.pop().val;else aX=aX.val;aJ=aX.length;
if(cb==4)for(var ag=0;ag<aJ;ag++)cw[(ae+ag)*4+3-O]=aX[ag];if(cb==3)for(var ag=0;ag<aJ;ag++)cw[(ae+ag)*4+2-O]=aX[ag]}}else{var aX;
if(bk[0].typ=="file")aX=FromPS.GetFile(bk[0]).val.buff;else aX=N.pop().val;aJ=Math.floor(aX.length/3);
for(var ag=0;ag<aJ;ag++){var ck=ag*3,aL=(ae+ag)*4;cw[aL+0]=aX[ck+0];cw[aL+1]=aX[ck+1];cw[aL+2]=aX[ck+2]}}ae+=aJ;
FromPS.checkPageStarted(c,s);if(ae==a4*c9){var bt=1/255;if(n.space=="/DeviceCMYK")for(var O=0;O<cw.length;
O+=4){var b8=[cw[O]*bt,cw[O+1]*bt,cw[O+2]*bt,cw[O+3]*bt],bQ=UDOC.C.cmykToRgb(b8);cw[O]=bQ[0]*255;cw[O+1]=bQ[1]*255;
cw[O+2]=bQ[2]*255;cw[O+3]=255}var c0=n.ctm.slice(),be=bi.slice(0);UDOC.M.invert(be);var bG=[a4,0,0,-c9,0,c9];
UDOC.M.concat(bG,be);UDOC.M.concat(n.ctm,bG);s.PutImage(n,cw,a4,c9);n.ctm=c0}else{c7[7]=ae;t.push(K);
if(bk[0].typ=="procedure")for(var O=0;O<bk.length;O++)FromPS.addProc(bk[O],t)}}else if(q=="makepattern"){var S=N.pop().val,bL=N.pop().val;
N.push({typ:"array",val:[bL,JSON.parse(JSON.stringify(S))]})}else if(q=="makefont"||q=="scalefont"){var ad=q=="makefont",c7=N.pop().val;
if(ad)c7=FromPS.readArr(c7);var bT=JSON.parse(JSON.stringify(N.pop())),aa=FromPS.readArr(bT.val.FontMatrix.val);
if(ad)UDOC.M.concat(aa,c7);else UDOC.M.scale(aa,c7,c7);bT.val.FontMatrix.val=FromPS.makeArr(aa);N.push(bT)}else if(q=="stringwidth"||q=="charpath"){if(q=="charpath")N.pop();
var aW=N.pop().val,Q=FromPS.readStr(aW),bR=UDOC.M.getScale(n.font.Tm)/UDOC.M.getScale(n.ctm),aZ=.55*bR*Q.length;
if(q=="stringwidth")N.push({typ:"real",val:aZ},{typ:"real",val:0});else UDOC.G.drawRect(n,0,0,aZ,bR)}else if(q=="setfont"){var bT=N.pop().val;
n.font.Tf=bT.FontName.val.slice(1);n.font.Tm=FromPS.readArr(bT.FontMatrix.val)}else if(q=="setlinewidth")n.lwidth=N.pop().val;
else if(q=="setstrokeadjust")n.SA=N.pop().val;else if(q=="setlinecap")n.lcap=N.pop().val;else if(q=="setlinejoin")n.ljoin=N.pop().val;
else if(q=="setmiterlimit")n.mlimit=N.pop().val;else if(q=="setflat")n.dd.flat=N.pop();else if(q=="setdash"){n.doff=N.pop().val;
n.dash=FromPS.readArr(N.pop().val)}else if(q=="show"||q=="ashow"||q=="xshow"||q=="yshow"||q=="xyshow"||q=="widthshow"||q=="awidthshow"){if(q=="xshow"||q=="xyshow"||q=="yshow")N.pop();
var aW=N.pop().val,Q=FromPS.readStr(aW);if(q=="awidthshow"){N.pop();N.pop();N.pop();N.pop()}if(q=="widthshow"){N.pop();
N.pop();N.pop()}if(q=="ashow"){N.pop();N.pop()}var bd=n.ctm;n.ctm=bd.slice(0);n.ctm[4]=n.cpos[0];n.ctm[5]=n.cpos[1];
FromPS.checkPageStarted(c,s);s.PutText(n,Q,Q.length*.55);n.cpos[0]+=Q.length*UDOC.M.getScale(bd)*UDOC.M.getScale(n.font.Tm)*.55;
n.ctm=bd}else if(q=="cshow"){N.pop();N.pop()}else if(q=="currentcolorspace"){N.push({typ:"array",val:[{typ:"name",val:n.space}]})}else if(q=="setcolorspace"){var ai=N.pop();
n.space=ai.val;if(ai.typ=="array")n.space=ai.val[0].val;else if(ai.typ=="name")n.space=ai.val;else{console.log(ai);
throw"e"}}else if(q=="setcolor"||q=="_setHSB_"){var al;if(n.space=="/Pattern"){var b8=N.pop();if(b8.typ!="array")throw"e";
var aM=b8.val,S=FromPS.readArr(aM[1]);UDOC.M.concat(S,n.ctm);al=FromPS.getPSShadingFill(aM[0].Shading,S)}else if(n.space=="/DeviceGray"){var cm=FromPS.nrm(N.pop().val);
al=[cm,cm,cm]}else if(q=="_setHSB_"){var aS=N.pop().val,bb=N.pop().val,c9=N.pop().val,a3,cm,c6,O,bz,aM,bs,a6;
O=Math.floor(c9*6);bz=c9*6-O;aM=aS*(1-bb);bs=aS*(1-bz*bb);a6=aS*(1-(1-bz)*bb);switch(O%6){case 0:a3=aS,cm=a6,c6=aM;
break;case 1:a3=bs,cm=aS,c6=aM;break;case 2:a3=aM,cm=aS,c6=a6;break;case 3:a3=aM,cm=bs,c6=aS;break;case 4:a3=a6,cm=aM,c6=aS;
break;case 5:a3=aS,cm=aM,c6=bs;break}al=[FromPS.nrm(a3),FromPS.nrm(cm),FromPS.nrm(c6)]}else if(n.space=="/DeviceRGB"){var c6=N.pop().val,cm=N.pop().val,a3=N.pop().val;
al=[FromPS.nrm(a3),FromPS.nrm(cm),FromPS.nrm(c6)]}else if(n.space=="/DeviceCMYK"){var b7=N.pop().val,aA=N.pop().val,S=N.pop().val,ab=N.pop().val;
al=UDOC.C.cmykToRgb([ab,S,aA,b7])}else throw n.space;if(al)n.colr=n.COLR=al}else if(q=="currentrgbcolor"){for(var O=0;
O<3;O++)N.push({typ:"real",val:n.colr[O]})}else if(q=="currentcmykcolor"){for(var O=0;O<3;O++)N.push({typ:"real",val:1-n.colr[O]});
N.push({typ:"real",val:0})}else if(q=="currentgray"){N.push({typ:"real",val:(n.colr[0]+n.colr[1]+n.colr[2])/3})}else if(q=="clip"||q=="eoclip"){var bv=UDOC.G.getBB(n.pth.crds),cv=UDOC.G.getBB(n.cpth.crds);
if(UDOC.G.isBox(n.pth,bv)&&UDOC.G.insideBox(cv,bv)){}else if(UDOC.G.isBox(n.cpth,cv)&&UDOC.G.insideBox(bv,cv)){n.cpth=JSON.parse(JSON.stringify(n.pth))}else if(UDOC.G.isBox(n.pth,bv)&&UDOC.G.isBox(n.cpth,cv)){var a2=Math.min(bv[0],cv[0]),b_=Math.min(bv[1],cv[1]),aI=Math.min(bv[2],cv[2]),cf=Math.min(bv[3],cv[3]);
n.cpth={cmds:["M","L","L","L","Z"],crds:[a2,b_,aI,b_,aI,cf,a2,cf]}}else{n.cpth=JSON.parse(JSON.stringify(n.pth.crds.length>n.cpth.crds.length?n.pth:n.cpth))}}else if(q=="clippath"){n.pth=JSON.parse(JSON.stringify(n.cpth))}else if(q=="pathbbox"){var c8=n.pth.crds,aB=UDOC.G.getBB(c8);
c8=[aB[0],aB[1],aB[2],aB[1],aB[0],aB[3],aB[2],aB[3]];var bJ=n.ctm.slice(0);UDOC.M.invert(bJ);UDOC.M.multArray(bJ,c8);
aB=UDOC.G.getBB(c8);W[0]=aB[0];aB[0]=W[0];W[0]=aB[1];aB[1]=W[0];W[0]=aB[2];aB[2]=W[0];W[0]=aB[3];aB[3]=W[0];
aB=FromPS.makeArr(aB,"real");N.push(aB[0],aB[1],aB[2],aB[3])}else if(q=="newpath")UDOC.G.newPath(n);
else if(q=="stroke"){FromPS.checkPageStarted(c,s);s.Stroke(n);UDOC.G.newPath(n)}else if(q=="shfill"){var ci=n.colr,bC=n.pth,aM=N.pop().val,S=n.ctm.slice(0);
n.colr=FromPS.getPSShadingFill({typ:"dict",val:aM,maxl:1e3},S);FromPS.checkPageStarted(c,s);n.pth=n.cpth;
n.cpth=UDOC.G.rectToPath(c.bb);s.Fill(n);n.colr=ci;n.pth=bC}else if(q=="fill"||q=="eofill"){FromPS.checkPageStarted(c,s);
s.Fill(n,q=="eofill");UDOC.G.newPath(n)}else if(q=="showpage"){FromPS.checkPageStarted(c,s);s.ShowPage();
var aD=n.font;n=c.gst=UDOC.getState(c.bb);n.font=aD;c.pgOpen=!1}else if(q=="print"){var aW=N.pop().val,Q=FromPS.readStr(aW);
s.Print(Q)}else if(q=="_drawRect_"){var c9=N.pop();if(c9.typ!="real"&&c9.typ!="integer")throw"e";c9=c9.val;
var a4=N.pop().val,aA=N.pop().val,bO=N.pop().val;UDOC.G.drawRect(n,bO,aA,a4,c9)}else if(q=="closepath")UDOC.G.closePath(n);
else if(q=="moveto"||q=="lineto"){var aA=N.pop().val,bO=N.pop().val;if(q=="moveto")UDOC.G.moveTo(n,bO,aA);
else UDOC.G.lineTo(n,bO,aA)}else if(q=="rmoveto"||q=="rlineto"){var aA=N.pop().val,bO=N.pop().val,bJ=n.ctm.slice(0);
UDOC.M.invert(bJ);var aM=UDOC.M.multPoint(bJ,n.cpos);aA+=aM[1];bO+=aM[0];if(q=="rmoveto")UDOC.G.moveTo(n,bO,aA);
else UDOC.G.lineTo(n,bO,aA)}else if(q=="curveto"){var bg=N.pop().val,c2=N.pop().val,ch=N.pop().val,bc=N.pop().val,cf=N.pop().val,aI=N.length==0?0:N.pop().val;
UDOC.G.curveTo(n,aI,cf,bc,ch,c2,bg)}else if(q=="arc"||q=="arcn"){var an=N.pop().val,bY=N.pop().val,a3=N.pop().val,aA=N.pop().val,bO=N.pop().val;
UDOC.G.arc(n,bO,aA,a3,bY*Math.PI/180,an*Math.PI/180,q=="arcn")}else if(q=="concat"){var S=FromPS.readArr(N.pop().val);
UDOC.M.concat(S,n.ctm);n.ctm=S}else if(["translate","scale","rotate"].indexOf(q)!=-1){var aS=N.pop(),S,bO,aA;
if(aS.typ=="array"){S=FromPS.readArr(aS.val);aA=N.pop().val}else{S=[1,0,0,1,0,0];aA=aS.val}if(q!="rotate")bO=N.pop().val;
if(q=="translate")UDOC.M.translate(S,bO,aA);if(q=="scale")UDOC.M.scale(S,bO,aA);if(q=="rotate")UDOC.M.rotate(S,-aA*Math.PI/180);
if(aS.typ=="array")N.push({typ:"array",val:FromPS.makeArr(S,"real")});else{UDOC.M.concat(S,n.ctm);n.ctm=S}}else if(q=="concatmatrix"){var b5=FromPS.readArr,c1=b5(N.pop().val),br=b5(N.pop().val),ak=b5(N.pop().val),S=ak.slice(0);
UDOC.M.concat(S,br);S=FromPS.makeArr(S,"real");N.push({typ:"array",val:S})}else if(q=="invertmatrix"){var b5=FromPS.readArr,br=b5(N.pop().val),ak=b5(N.pop().val),S=ak.slice(0);
UDOC.M.invert(S);S=FromPS.makeArr(S,"real");N.push({typ:"array",val:S})}else if(q=="currentmatrix"||q=="defaultmatrix"){var S=N.pop(),b9=FromPS.makeArr(q=="currentmatrix"?n.ctm:[1,0,0,1,0,0],"real");
for(var O=0;O<6;O++)S.val[O]=b9[O];N.push(S)}else if(q=="setmatrix"){n.ctm=FromPS.readArr(N.pop().val)}else if(q=="cvi"){var d=N.pop(),aS=d.val,j=0;
if(d.typ=="real")j=Math.round(aS);else if(d.typ=="integer")j=aS;else throw"unknown type "+d.typ;N.push({typ:"integer",val:j})}else if(q=="cvr"){var d=N.pop(),aS=d.val,j=0;
if(d.typ=="real")j=aS;else if(d.typ=="integer")j=aS;else if(d.typ=="string")j=parseFloat(FromPS.readStr(aS));
else throw"unknown type "+d.typ;N.push({typ:"real",val:j})}else if(q=="cvs"){var Q=N.pop(),aN=N.pop(),g="";
Q.val=[];N.push(Q);if(aN.typ=="real"||aN.typ=="integer"){if(Math.abs(Math.round(aN.val)-aN.val)<1e-6)g=Math.round(aN.val)+".0";
else g=(Math.round(aN.val*1e6)/1e6).toString()}else if(aN.typ=="name")g=aN.val;else throw"unknown var type: "+aN.typ;
for(var O=0;O<g.length;O++)Q.val[O]=g.charCodeAt(O)}else if(q=="cvx"){var d=N.pop(),ce;if(d.typ=="array")ce={typ:"procedure",val:d.val};
else if(d.typ=="name")ce={typ:"name",val:d.val.slice(1)};else if(d.typ=="string"){ce={typ:"file",val:{off:0,buff:new Uint8Array(d.val)}}}else{console.log(d);
throw d.typ}N.push(ce)}else if(q=="cvlit"){var T=N.pop();if(T.typ=="procedure")N.push({typ:"array",val:T.val});
else N.push(T)}else if(q=="cvn"){N.push({typ:"name",val:FromPS.readStr(N.pop().val)})}else if("add sub mul div idiv bitshift mod exp atan".split(" ").indexOf(q)!=-1){var aR=N.pop(),aO=N.pop(),G=aO.val,by=aR.val,j=0,m="";
if(q=="add"||q=="sub"||q=="mul")m=aO.typ=="real"||aR.typ=="real"?"real":"integer";else if(q=="div"||q=="atan"||q=="exp")m="real";
else if(q=="mod"||q=="idiv"||q=="bitshift")m="integer";if(aO.typ=="real"){W[0]=G;G=W[0]}if(aR.typ=="real"){W[0]=by;
by=W[0]}if(q=="add")j=G+by;if(q=="sub")j=G-by;if(q=="mul")j=G*by;if(q=="div")j=G/by;if(q=="idiv")j=~~(G/by);
if(q=="bitshift")j=by>0?G<<by:G>>>-by;if(q=="mod")j=G%by;if(q=="exp")j=Math.pow(G,by);if(q=="atan")j=Math.atan2(G,by)*180/Math.PI;
if(m=="real"){W[0]=j;j=W[0]}N.push({typ:m,val:j})}else if("neg abs floor ceiling round truncate sqrt ln sin cos".split(" ").indexOf(q)!=-1){var aO=N.pop(),G=aO.val,j=0,m="";
if(q=="neg"||q=="abs"||q=="truncate"||q=="floor"||q=="ceiling"||q=="round")m=aO.typ;else if(q=="sqrt"||q=="sin"||q=="cos"||q=="ln")m="real";
if(aO.typ=="real"){W[0]=G;G=W[0]}if(q=="neg")j=-G;if(q=="abs")j=Math.abs(G);if(q=="floor")j=Math.floor(G);
if(q=="ceiling")j=Math.ceil(G);if(q=="round")j=Math.round(G);if(q=="truncate")j=Math.trunc(G);if(q=="sqrt")j=Math.sqrt(G);
if(q=="ln")j=Math.log(G);if(q=="sin")j=Math.sin(G*Math.PI/180);if(q=="cos")j=Math.cos(G*Math.PI/180);
if(q=="ln"&&G<=0)throw"e";if(m=="real"){W[0]=j;j=W[0]}N.push({typ:m,val:j})}else if("eq ge gt le lt ne".split(" ").indexOf(q)!=-1){var aR=N.pop(),aO=N.pop(),i=aO.typ,av=aR.typ,G=aO.val,by=aR.val,j=!1;
if(q=="eq"||q=="ne"){var ca=aO.typ==aR.typ;if(ca&&["integer","real","name","null","dict"].indexOf(i)!=-1)j=G==by;
else if(i=="real"&&av=="integer"||av=="real"&&i=="integer")j=G==by;else if(!ca&&(aO.typ=="null"||aR.typ=="null"))j=!1;
else if(ca&&aO.typ=="string"){if(G.length!=by.length)j=!1;else{j=!0;for(var O=0;O<G.length;O++)if(G[O]!=by[O])j=!1}}else{console.log(q,aO,aR,aO.val==aR.val);
throw"e"}if(q=="ne")j=!j}else if(q=="ge")j=G>=by;else if(q=="gt")j=G>by;else if(q=="le")j=G<=by;else if(q=="lt")j=G<by;
N.push({typ:"boolean",val:j})}else if(["and","or"].indexOf(q)!=-1){var F=N.pop(),P=N.pop(),by=P.val,l=F.val,J=P.typ=="integer",j;
if(q=="and")j=J?by&l:by&&l;if(q=="or")j=J?by|l:by||l;N.push({typ:J?"integer":"boolean",val:j})}else if(q=="not"){var c6=N.pop(),aS=c6.val,J=c6.typ=="integer",j=J?~aS:!aS;
N.push({typ:J?"integer":"boolean",val:j})}else if(q=="if"){var az=N.pop(),A=N.pop().val;if(A)FromPS.addProc(az,t)}else if(q=="ifelse"){var bm=N.pop(),bq=N.pop(),A=N.pop().val;
FromPS.addProc(A?bq:bm,t)}else if(q=="exec"||q=="stopped"){var T=N.pop();if(q=="stopped")FromPS.addProc({typ:"procedure",val:[{typ:"boolean",val:!1}]},t);
if(T.typ=="procedure")FromPS.addProc(T,t);else if(T.typ=="name"||T.typ=="operator"||T.typ=="integer"||T.typ=="real"||T.typ=="array")FromPS.addProc({typ:"procedure",val:[T]},t);
else{console.log(T);throw"unknown executable type: "+T.typ}}else if(q=="stop"){var o=t[t.length-1];if(o.typ=="procedure"&&o.off!=0)t.pop()}else if(q=="dup"){var aS=N.pop();
N.push(aS,aS)}else if(q=="exch"){N.push(N.pop(),N.pop())}else if(q=="copy"){var b2=N.pop();if(b2.typ=="integer"){var b$=[];
for(var O=0;O<b2.val;O++)b$[b2.val-1-O]=N.pop();for(var O=0;O<b2.val;O++)N.push(b$[O]);for(var O=0;O<b2.val;
O++)N.push(b$[O])}else if(b2.typ=="array"){var S=N.pop().val;for(var O=0;O<S.length;O++){b2.val[O]=S[O];
if(S[O].val==null){console.log(z);throw"e"}}N.push(b2)}else if(b2.typ=="dict"){var S=N.pop().val;for(var C in S){b2.val[C]=S[C]}N.push(b2)}else throw"e"}else if(q=="roll"){var ag=N.pop().val,b2=N.pop().val,b$=[];
for(var O=0;O<b2;O++)b$.push(N.pop());b$.reverse();ag=(b2+ag)%b2;for(var O=0;O<ag;O++)b$.unshift(b$.pop());
for(var O=0;O<b2;O++)N.push(b$[O])}else if(q=="index"){var b2=N.pop().val;N.push(N[N.length-1-b2])}else if(q=="anchorsearch"){var k=N.pop(),bA=N.pop(),cp=k.val,Q=bA.val,a1=!0;
if(cp.length<=Q.length){for(var O=0;O<cp.length;O++)if(cp[O]!=Q[O])a1=!1}else a1=!1;if(a1)N.push({typ:"string",val:Q.slice(cp.length)},k);
else N.push(bA);N.push({typ:"boolean",val:a1})}else if(q=="transform"||q=="itransform"||q=="dtransform"||q=="idtransform"){var S=N.pop(),aA=0,bO=0;
if(S.typ=="array"){S=FromPS.readArr(S.val);aA=N.pop().val}else{aA=S.val;S=n.ctm.slice(0)}if(q=="itransform"||q=="idtransform"){UDOC.M.invert(S)}bO=N.pop().val;
if(q.endsWith("dtransform")){S[4]=0;S[5]=0}var b4=UDOC.M.multPoint(S,[bO,aA]);N.push({typ:"real",val:b4[0]},{typ:"real",val:b4[1]})}else if(q=="pop"||q=="srand"||q=="=="){N.pop()}else if(q=="rand"){N.push({typ:"integer",val:Math.floor(Math.random()*2147483647)})}else if(q=="put"){var x=N.pop(),d=N.pop(),T=N.pop(),m=T.typ;
if(m=="array"){if(d.typ!="integer")throw"e";T.val[d.val]=x}else if(m=="dict"){var y=FromPS.getDKey(d);
T.val[y]=x}else if(m=="string")T.val[d.val]=x.val;else throw m+" e"}else if(q=="get"){var d=N.pop(),T=N.pop(),m=T.typ;
if(m=="string")N.push({typ:"integer",val:T.val[d.val]});else if(m=="array"){var g=T.val[d.val];if(g==null)throw"e";
N.push(g)}else if(m=="dict"){var b7=FromPS.getDKey(d),aS=T.val[b7];if(aS==null){throw"e"}else N.push(aS)}else throw"getting from unknown type "+T.typ}else if(q=="load"){var b=N.pop().val.slice(1),x=FromPS.getFromStacks(b,z);
if(x==null){console.log(b,z);throw"e"}N.push(x)}else if(q=="where"){var b=N.pop().val.slice(1),E=FromPS.where(b,z);
if(E!=null)N.push({typ:"dict",val:E,maxl:1e3});N.push({typ:"boolean",val:E!=null})}else if(q=="store"){var x=N.pop(),b=N.pop().val.slice(1),E=FromPS.where(b,z);
if(E==null)E=z[z.length-1];E[b]=x}else if(q=="repeat"){var az=N.pop(),au=N.pop().val;t.push({typ:"name",val:q+"---",ctx:{proc:az,cur:0,cnt:au}})}else if(q=="repeat---"){var a=K.ctx;
if(a.cur<a.cnt){t.push(K);FromPS.addProc(a.proc,t);a.cur++}}else if(q=="for"){var az=N.pop(),cj=N.pop(),b0=N.pop(),bF=N.pop();
t.push({typ:"name",val:q+"---",ctx:{proc:az,isInt:bF.typ=="integer"&&b0.typ=="integer",init:bF.val,inc:b0.val,limit:cj.val}})}else if(q=="for---"){var a=K.ctx;
if(a.isInt){if(a.inc>0&&a.init<=a.limit||a.inc<0&&a.init>=a.limit){t.push(K);FromPS.addProc(a.proc,t);
N.push({typ:"integer",val:a.init});a.init+=a.inc}}else{var _=new Float32Array(1);_[0]=a.limit;a.limit=_[0];
_[0]=a.inc;a.inc=_[0];_[0]=a.init;if(a.inc>0&&_[0]<=a.limit||a.inc<0&&_[0]>=a.limit){t.push(K);FromPS.addProc(a.proc,t);
N.push({typ:"real",val:_[0]});_[0]+=a.inc;a.init=_[0]}}}else if(q=="loop"){var az=N.pop();t.push({typ:"name",val:q+"---",ctx:{proc:az}})}else if(q=="loop---"){var a=K.ctx;
t.push(K);FromPS.addProc(a.proc,t)}else if(q=="pathforall"){var v=N.pop(),c5=N.pop(),cd=N.pop(),cl=N.pop()}else if(q=="forall"){var az=N.pop(),T=N.pop(),a=[az,T,0];
t.push({typ:"name",val:q+"---",ctx:a})}else if(q=="forall---"){var a=K.ctx,az=a[0],T=a[1],O=a[2];if(T.typ=="dict"){var af=Object.keys(T.val);
if(O<af.length){t.push(K);FromPS.addProc(az,t);N.push({typ:"name",val:"/"+af[O]});var g=T.val[af[O]];
if(g==null)throw"e";N.push(g==null?{typ:"null",val:null}:g);a[2]++}}else if(T.typ=="procedure"||T.typ=="array"){if(O<T.val.length){t.push(K);
FromPS.addProc(az,t);var as=T.val[O];N.push(as==null?{typ:"null",val:null}:as);a[2]++}}else{console.log(az,T);
throw"forall: unknown type: "+T.typ}}else if(q=="exit"){var O=t.length-1;while(O!=0&&(t[O].typ!="name"||!t[O].val.endsWith("---")))O--;
if(O!=0)while(t.length>O)t.pop()}else if(q=="bind"){}else if(q=="xcheck"){var T=N.pop(),D=T.typ;N.push({typ:"boolean",val:D=="procedure"})}else if(q=="status"){var Q=N.pop();
N.push({typ:"boolean",val:!1})}else if(q=="cachestatus"){for(var O=0;O<7;O++)N.push({typ:"integer",val:5e3})}else if(q=="setcachelimit"){N.pop()}else if(q=="type"){var d=N.pop(),a0={name:"nametype",dict:"dicttype",boolean:"booleantype",procedure:"operatortype",string:"stringtype",null:"nulltype",integer:"integertype",array:"arraytype",operator:"operatortype",real:"realtype"};
if(a0[d.typ]==null){console.log(d);throw d.typ}N.push({typ:"name",val:"/"+a0[d.typ]})}else if(q=="save"){N.push({typ:"state",val:JSON.parse(JSON.stringify(n))})}else if(q=="restore"){n=c.gst=N.pop().val}else if(q=="clipsave"){n.cpstack.push(JSON.parse(JSON.stringify(n.cpth)))}else if(q=="cliprestore"){n.cpath=n.cpstack.pop()}else if(q=="gsave"){M.push(JSON.parse(JSON.stringify(n)))}else if(q=="grestore"||q=="grestorePDF"){var bP=n.pth;
if(M.length!=0)n=c.gst=M.pop();else n=UDOC.getState();if(q=="grestorePDF")n.pth=bP}else if(q=="grestoreall"){while(M.length!=0)n=c.gst=M.pop()}else if(q=="usertime"||q=="realtime")N.push({typ:"integer",val:q=="usertime"?Date.now()-p:Date.now()});
else if(q=="flush"||q=="readonly"||q=="executeonly"){}else if(q=="flushfile"){FromPS.GetFile(N.pop())}else if(q=="filter"){var bj=N.pop().val,bn;
if(bj=="/SubFileDecode"){var Q=N.pop();if(Q.typ!="string")throw"e";var bB=N.pop().val;Q=Q.val;bn=[bj,Q,bB]}else bn=[bj];
var aC=N.pop();N.push({typ:"file",val:{buff:new Uint8Array,off:0},_flt:bn,_src:aC})}else if(q=="begincmap"||q=="endcmap"){}else if(q=="begincodespacerange"||q=="beginbfrange"||q=="beginbfchar"){c.cmnum=N.pop().val}else if(q=="endcodespacerange"||q=="endbfrange"||q=="endbfchar"){var v=q=="endbfrange"?3:2,b6=q.slice(3),E=z[z.length-1],a_=0;
if(E[b6]==null)E[b6]=[];for(var O=0;O<c.cmnum;O++){var aF=[];for(var ag=v-1;ag>=0;ag--){var ah=N.pop(),g;
if(ah==null&&R)return!1;var ct=ah.val;if(ah.typ=="string"){g=FromPS.strToInt(ct);if(ag==0)a_=ct.length}else{g=[];
for(var b7=0;b7<ct.length;b7++)g.push(FromPS.strToInt(ct[b7].val))}aF[ag]=g}E[b6]=E[b6].concat(aF)}if(q!="endcodespacerange")E.bpc=a_}else if(h)h(q,N,z,t,M,c,s);
else{console.log(x,q);console.log(z,N);throw"e"}}else throw T.typ}return!0};FromPS.strToInt=function(N){var z=0;
for(var t=0;t<N.length;t++)z=z<<8|N[t];return z};FromPS.getDKey=function(N){if(N.typ=="name")return N.val.slice(1);
if(N.typ=="string")return FromPS.readStr(N.val);return N.val};FromPS.GetFile=function(N){if(N._flt==null||N.val.off<N.val.buff.length)return N;
FromPS.GetFile(N._src);var z=N._src.val,t=N._flt,M=t[0],c;if(M=="/ASCII85Decode")c=FromPS.F.ASCII85Decode(z);
else if(M=="/RunLengthDecode")c=FromPS.F.RunLengthDecode(z);else if(M=="/FlateDecode")c=FromPS.F.FlateDecode(z);
else if(M=="/LZWDecode")c=FromPS.F.LZWDecode(z);else if(M=="/SubFileDecode"){var h=t[1],R=t[2],p=z.off,W=0;
while(p<z.buff.length){var r=0;while(r<h.length&&z.buff[p+r]==h[r])r++;if(r==h.length){if(W==R)break;
W++}p++}c=z.buff.slice(z.off,p);z.off=p}else throw M;N.val={buff:c,off:0};return N};FromPS.checkPageStarted=function(N,z){if(!N.pgOpen){z.StartPage(N.bb[0],N.bb[1],N.bb[2],N.bb[3]);
N.pgOpen=!0}};FromPS.getPSShadingFill=function(N,z){function t(c){var s,h=c.typ,R=c.val;if(h=="dict"){s={};
for(var p in R)s["/"+p]=t(R[p])}else if(h=="array"){s=[];for(var W=0;W<R.length;W++)s.push(t(R[W]))}else if(h=="string"){s="";
for(var W=0;W<R.length;W++)s+=String.fromCharCode(R[W])}else if(["boolean","integer","real","name"].indexOf(h)!=-1)s=R;
else if(h=="procedure"){var r="";for(var W=0;W<R.length;W++)r+=R[W].val+" ";r="{ "+r+"}";var n=new Uint8Array(r.length);
for(var W=0;W<r.length;W++)n[W]=r.charCodeAt(W);s={"/FunctionType":4,"/Domain":[0,1],"/Range":[0,1,0,1,0,1,0,1],"/Length":r.length,stream:n}}else{console.log(c);
throw"e"}return s}var M=t(N);return FromPS.getShadingFill(M,z)};FromPS.F={HexDecode:function(N){var z=[];
FromPS.readHex(N,1e9,z);return new Uint8Array(z)},ASCII85Decode:function(N){var z=[85*85*85*85,85*85*85,85*85,85,1],t=[],M=0,c=0,s=0,h=N.off,R=N.buff,W=R.length;
while(!0){var r=R[h++];if(FromPS.isWhite(r)){}else if(r==126){if(c!=0){for(var n=c;n<5;n++)s+=84*z[c];
for(var n=1;n<c;n++)t.push(s>>>32-n*8&255)}N.off=h+1;return new Uint8Array(t)}else if(r==122){t.push(0);
t.push(0);t.push(0);t.push(0)}else{s+=(r-33)*z[c];c++;if(c==5){t.push(s>>>24&255);t.push(s>>>16&255);
t.push(s>>>8&255);t.push(s>>>0&255);c=0;s=0}}}},RunLengthDecode:function(N){var z=[],t=N.off,M=N.buff.length;
while(t<M){var c=N.buff[t];t++;if(c==128){break}if(c<128){for(var s=0;s<c+1;s++)z.push(N.buff[t+s]);
t+=c+1}else{for(var s=0;s<257-c;s++)z.push(N.buff[t]);t++}}N.off=t;return new Uint8Array(z)},FlateDecode:function(N){var z=N.buff;
if(z.length==0)return z;var t=new Uint8Array(z.buffer,z.byteOffset+N.off+2,z.length-2),M=pako.inflateRaw(t);
return M},LZWDecode:function(N){var z=new Uint8Array((N.buff.length-N.off)*20),t=UTIF.decode._decodeLZW(N.buff,N.off,N.buff.length-N.off,z,0,8);
return z.slice(0,t)},_myLZW:function(){var N={},z=function(M,c,s,h,R){for(var W=0;W<R;W+=4){s[h+W]=M[c+W];
s[h+W+1]=M[c+W+1];s[h+W+2]=M[c+W+2];s[h+W+3]=M[c+W+3]}},t=function(M,c,s,h){if(!N.c){var R=new Uint32Array(65535),W=new Uint16Array(65535),r=new Uint8Array(2e6);
for(var n=0;n<256;n++){r[n<<2]=n;R[n]=n<<2;W[n]=1}N.c=[R,W,r]}var K=N.c[0],D=N.c[1],r=N.c[2],Y=258,X=258<<2,U=9,w=c<<3,B=256,u=257,d=0,L=0,$=0;
while(!0){d=M[w>>>3]<<16|M[w+8>>>3]<<8|M[w+16>>>3];L=d>>24-(w&7)-U&(1<<U)-1;w+=U;if(L==u)break;if(L==B){U=9;
Y=258;X=258<<2;d=M[w>>>3]<<16|M[w+8>>>3]<<8|M[w+16>>>3];L=d>>24-(w&7)-U&(1<<U)-1;w+=U;if(L==u)break;
s[h]=L;h++}else if(L<Y){var b=K[L],f=D[L];z(r,b,s,h,f);h+=f;if($>=Y){K[Y]=X;r[K[Y]]=b[0];D[Y]=1;X=X+1+3&~3;
Y++}else{K[Y]=X;var H=K[$],Q=D[$];z(r,H,r,X,Q);r[X+Q]=r[b];Q++;D[Y]=Q;Y++;X=X+Q+3&~3}if(Y+1==1<<U)U++}else{if($>=Y){K[Y]=X;
D[Y]=0;Y++}else{K[Y]=X;var H=K[$],Q=D[$];z(r,H,r,X,Q);r[X+Q]=r[X];Q++;D[Y]=Q;Y++;z(r,X,s,h,Q);h+=Q;X=X+Q+3&~3}if(Y+1==1<<U)U++}$=L}return h};
return t}()};FromPS.B={readUshort:function(N,z){return N[z]<<8|N[z+1]},readUint:function(N,z){return N[z]*(256*256*256)+(N[z+1]<<16|N[z+2]<<8|N[z+3])},readASCII:function(N,z,t){var M="";
for(var c=0;c<t;c++)M+=String.fromCharCode(N[z+c]);return M}};FromPS.nrm=function(N){return Math.max(0,Math.min(1,N))};
FromPS.makeArr=function(N,z){var t=[];for(var M=0;M<N.length;M++)t.push({typ:z,val:N[M]});return t};
FromPS.readArr=function(N){var z=[];for(var t=0;t<N.length;t++)z.push(N[t].val);return z};FromPS.makeStr=function(N){var z=[];
for(var t=0;t<N.length;t++)z.push(N.charCodeAt(t));return z};FromPS.readStr=function(N){var z="";for(var t=0;
t<N.length;t++)z+=String.fromCharCode(N[t]);return z};FromPS.getFromStacks=function(N,z){var t=z.length-1;
while(t>=0){if(z[t][N]!=null)return z[t][N];t--}return null};FromPS.where=function(N,z){var t=z.length-1;
while(t>=0){if(z[t][N]!=null)return z[t];t--}return null};FromPS.skipWhite=function(N){var z=N.off,t=N.buff,M=FromPS.isWhite;
while(M(t[z])||t[z]==37){while(M(t[z]))z++;if(t[z]==37){while(z<t.length&&!FromPS.isEOL(t[z]))z++;z++}}N.off=z};
FromPS.getToken=function(N,z){if(N.length==0)return null;var t=N[N.length-1];if(t.typ=="procedure"){var M=t.val[t.off];
t.off++;if(t.off==t.val.length)N.pop();return M}if(t.typ=="name"){N.pop();return t}var c=FromPS.getFToken(t.val,z);
while(c==null&&N.length>1){N.pop();if(N.length!=0)c=FromPS.getFToken(N[N.length-1].val,z)}return c};
FromPS.getFToken=function(N,z){FromPS.skipWhite(N);var t=FromPS.isWhite,M=FromPS.isSpecl,c=N.off,s=N.buff,h=null;
if(c>=s.length)return null;var R=s[c],W=String.fromCharCode(R);c++;if(W=="("){var r=0,n=c;while(!(s[n]==41&&r==0)){var K=s[n];
if(K==40)r++;else if(K==41)r--;else if(K==92)n++;n++}var D=[];for(var x=0;x<n-c;x++)D.push(s[c+x]);c=n+1;
D=FromPS.getString(D);h={typ:"string",val:D}}else if(W=="{"||W=="}"||W=="["||W=="]"){h={typ:"name",val:W}}else if(W=="<"&&s[c]==60||W==">"&&s[c]==62){h={typ:"name",val:W=="<"?"<<":">>"};
c++}else if(W=="<"){var D;if(s[c]=="~".charCodeAt(0)){N.off=c+1;var Y=FromPS.F.ASCII85Decode(N);D=[];
for(var x=0;x<Y.length;x++)D.push(Y[x]);c=N.off}else{var n=c;while(s[n]!=62)n++;var D=[];FromPS.readHex({buff:s,off:c},1e9,D);
c=n+1}h={typ:"string",val:D}}else{var n=c;while(n<s.length&&!t(s[n])&&(!M(s[n])||s[n]==47&&s[n-1]==47&&n==c&&z))n++;
var X=FromPS.B.readASCII(s,c-1,n-c+1);c=n;var U=parseFloat(X);if(!1){}else if(X=="true"||X=="false")h={typ:"boolean",val:X=="true"};
else if(!isNaN(U)){var w=new Float32Array(1);w[0]=U;U=w[0];h={typ:X.indexOf(".")==-1?"integer":"real",val:U}}else{if(X.slice(0,2)=="//"&&z){var B=X.slice(2),u=FromPS.getFromStacks(B,z);
if(u!=null)h=u;else h={typ:"name",val:X}}else h={typ:"name",val:X}}}N.off=c;return h};FromPS.isSpecl=function(N){return[40,41,60,62,91,93,123,125,37,47].indexOf(N)!=-1};
FromPS.isWhite=function(N){return N==0||N==9||N==10||N==12||N==13||N==32};FromPS.isEOL=function(N){return N==10||N==13};
FromPS.getString=function(N){var z=[],t="n,r,t,b,f,\\,(,), ,/".split(","),M=["\n","\r","\t","\b","\f","\\","(",")"," ","/"];
for(var c=0;c<N.length;c++){var s=N[c],h=String.fromCharCode(s);if(h=="\\"){var R=String.fromCharCode(N[c+1]);
c++;if(R=="\r"||R=="\n")continue;var W=t.indexOf(R);if(W!=-1)z.push(M[W].charCodeAt(0));else{var r=R+String.fromCharCode(N[c+1])+String.fromCharCode(N[c+2]);
c+=2;z.push(parseInt(r,8))}}else z.push(s)}return z};FromPS.makeString=function(N){var z="n r t b f \\ ( )".split(" "),t=["\n","\r","\t","\b","\f","\\","(",")"],M=[];
for(var c=0;c<N.length;c++){var s=N[c],h=t.indexOf(String.fromCharCode(s));if(h==-1)M.push(s);else M.push(92,z[h].charCodeAt(0))}return M};
FromPS.readHex=function(N,z,t){var M=0,c=-1,s=N.off,h=N.buff.length;while(M!=z&&s<h){var R=N.buff[s],r=0;
s++;if(47<R&&R<58)r=R-48;else if(96<R&&R<103)r=10+R-97;else if(64<R&&R<71)r=10+R-65;else if(R==62)break;
else if(FromPS.isWhite(R))continue;else throw"e";if(c==-1)c=r;else{t[M]=c<<4|r;c=-1;M++}}N.off=s};FromPS.getShadingFill=function(N,z,t){var M=N["/ShadingType"],c=N["/ColorSpace"],s=N["/Extend"],h=N["/Coords"]?N["/Coords"].slice(0):null,R="",r;
if(s==null)s=[!1,!1];if(M==2)R="lin";else if(M==3)R="rad";else{console.log("Unknown shading type",M);
return}var p=N["/Function"],W=t?t["/Function"]:null;if(p instanceof Array){var n=p.length,K;for(var x=0;
x<n;x++){var Y=FromPS.getGrad(p[x],"/DeviceGray");if(x==0)K=Y;else{var X=K.length;for(var U=0;U<X;U++)K[U][1][x]=Y[U][1][0]}}if(c=="/DeviceCMYK")for(var x=0;
x<K.length;x++)K[x][1]=UDOC.C.cmykToRgb(K[x][1]);r=K}else r=FromPS.getGrad(p,c,W);if(R=="rad"&&h[2]>h[5]){h=h.slice(3).concat(h.slice(0,3));
s.reverse();r.reverse();for(var x=0;x<r.length;x++)r[x][0]=1-r[x][0]}if(!s[0]&&R!="rad"){var w=r[0];
w[0]+=.002;r.unshift([.001,w[1].slice(),0,.5])}if(!s[1]){var w=r[r.length-1];w[0]-=.002;r.push([.999,w[1].slice(),0,.5])}var B={typ:R,mat:z,grad:r,crds:h};
return B};FromPS.getGrad=function(N,z,t){var M=FromPS._normColor,c=N["/Functions"],s=N["/FunctionType"],h=N["/Bounds"],R=N["/Encode"],p=t?t["/Functions"]:null,W;
if(s==0){W=[];var r=Math.min(4,N["/Size"][0]);for(var n=0;n<=r;n++)W.push([n/r,M(N,[n/r],z),1,.5])}else if(s==2)W=[[0,M(N,[0],z),1,.5],[1,M(N,[1],z),1,.5]];
else if(s==3){var K=[];if(h.length==0||h[0]>0)K.push([0,0,R[0]]);for(var n=0;n<h.length;n++)K.push([h[n],n,R[2*n+1]]);
if(h.length==0||h[h.length-1]<1)K.push([1,c.length-1,R[R.length-1]]);W=[];for(var n=0;n<K.length;n++){var x=K[n],Y=c[x[1]],X=.5,U=Y["/N"];
if(U!=null){X=Math.pow(.5,1/U);if(x[2]==0)X=1-X}W.push([x[0],M(Y,[x[2]],z),p?M(p[x[1]],[x[2]],"/DeviceGray")[0]:1,X])}for(var n=1;
n<W.length;n++)W[n-1][3]=W[n][3]}else if(s==4){W=[];for(var n=0;n<5;n++)W.push([n/5,M(N,[n/5],z),1,.5])}return W};
FromPS._normColor=function(N,z,t){var M="/DeviceCMYK",c="/DeviceRGB",s,h=N?FromPS.Func(N,z):z;if(t[3]&&t[3]["/Length"]){h=FromPS.Func(t[3],h);
if(t[2]==M||h.length==4)s=M;else if(t[2]==c)s=c;else if(t[2]&&t[2][0]=="/Lab")s="/Lab";else if(t[2]&&t[2][1]&&t[2][1]["/Alternate"]&&t[2][1]["/Alternate"][0]=="/Lab")s="/Lab";
else if(t[2]&&t[2][1]&&t[2][1]["/Alternate"]&&t[2][1]["/Alternate"]==c)s=c;else if(t[2]&&t[2][1]&&t[2][1]["/N"]&&t[2][1]["/N"]==3)s=c;
else{console.log(h,t);throw"unknown color profile"}}else if(t[0]=="/ICCBased"&&t[1]){var R=t[1]["/N"];
if(R==4)s=M;else if(R==3)s=c;else throw R}else if(t[0]=="/Separation"){h=FromPS._readSeparation(t,h[0]);
s=c}else if(t.length==1)s=t[0];else if(t[0]=="/Lab")s="/Lab";else if(t[2]==M)s=M;else s=t;if(s==c)h=h;
else if(s==M)h=UDOC.C.cmykToRgb(h);else if(s=="/DeviceGray")h=[h[0],h[0],h[0]];else if(s=="/Lab")h=UDOC.C.labToRgb(h);
else throw"Unknown color space "+s;return h};FromPS._readSeparation=function(N,z){var t=FromPS.Func(N[3],[z]),M;
if(N&&N[2]=="/DeviceCMYK")M=UDOC.C.cmykToRgb(t);else if(N&&N[2]=="/DeviceGray")M=[t[0],t[0],t[0]];else if(N&&N[2]&&N[2][0]&&N[2][0]=="/Lab")M=UDOC.C.labToRgb(t);
else{M=t}return M};FromPS.Func=function(N,z){var t=FromPS.intp,M=N["/Domain"],c=N["/Range"],h=N["/FunctionType"],R=[];
for(var p=0;p<z.length;p++)z[p]=Math.max(M[2*p],Math.min(M[2*p+1],z[p]));if(h==0){var W=N["/Encode"],r=N["/Size"],n=N["/Decode"],K=c.length/2;
if(W==null)W=[0,r[0]-1];if(n==null)n=c;for(var p=0;p<z.length;p++){var x=t(z[p],M[2*p],M[2*p+1],W[2*p],W[2*p+1]);
z[p]=Math.max(0,Math.min(r[p]-1,x))}var Y=N["/DataSource"];for(var X=0;X<K;X++){var U=Math.round(z[0]),w;
if(Y)w=Y.charCodeAt(K*U+X);else w=FromPS.GS(N)[K*U+X];w=t(w,0,255,n[2*X],n[2*X+1]);R.push(w)}}else if(h==2){var B=N["/C0"],u=N["/C1"],d=N["/N"];
if(B==null)B=[0];if(u==null)u=[1];var U=z[0];for(var p=0;p<B.length;p++)R[p]=B[p]+Math.pow(U,d)*(u[p]-B[p])}else if(h==4){var L=FromPS._getEnv([0,0,0,0]),g=!0;
L.pgOpen=!0;var T=[],q=[],Y=FromPS._getDictStack([],{}),$=[];$.push({typ:"file",val:{buff:FromPS.GS(N),off:0}});
while(g)g=FromPS.step(q,Y,$,T,L,{},FromPS.operator);var y=q.pop();y.off=0;$.push(y);for(var p=0;p<z.length;
p++)q.push({typ:"real",val:z[p]});g=!0;while(g)g=FromPS.step(q,Y,$,T,L,{},FromPS.operator);for(var p=0;
p<q.length;p++)R.push(q[p].val)}if(c)for(var p=0;p<R.length;p++)R[p]=Math.max(c[2*p],Math.min(c[2*p+1],R[p]));
return R};FromPS.intp=function(N,z,t,M,c){return M+(N-z)*(c-M)/(t-z)};FromPS.GS=function(N){if(N.stream==null){var z=N.buff;
delete N.buff;var t=N["/Filter"],M=N["/DecodeParms"];if(t!=null){var c=typeof t=="string"?[t]:t,s=!1;
for(var h=0;h<c.length;h++){var R=c[h],W={buff:z,off:0};if(R=="/FlateDecode"||R=="/Fl"){z=FromPS.F.FlateDecode(W)}else if(R=="/RunLengthDecode"){z=FromPS.F.RunLengthDecode(W)}else if(R=="/LZWDecode"){z=FromPS.F.LZWDecode(W)}else if(R=="/ASCIIHexDecode"){z=FromPS.F.HexDecode(W)}else if(R=="/ASCII85Decode"||R=="/A85"){z=FromPS.F.ASCII85Decode(W)}else if(R=="/DCTDecode"||R=="/CCITTFaxDecode"||R=="/JPXDecode"||R=="/JBIG2Decode"){s=!0}else{console.log(R,z);
throw"e"}}if(!s)delete N["/Filter"]}if(M!=null){if(M instanceof Array)M=M[0];if(M&&M["/Predictor"]!=null&&M["/Predictor"]!=1){var r=M["/Columns"],n=M["/Colors"]?M["/Colors"]:1,K=n*r,D=z.length/(K+1);
FromPS._filterZero(z,0,r,D,n);z=z.slice(0,D*K)}}N.stream=z}return N.stream};FromPS._filterZero=function(N,z,t,M,c){var s=c*t,h=FromPS._paeth;
for(var p=0;p<M;p++){var W=z+p*s,r=W+p+1,n=N[r-1];if(n==0)for(var K=0;K<s;K++)N[W+K]=N[r+K];else if(n==1){for(var K=0;
K<c;K++)N[W+K]=N[r+K];for(var K=c;K<s;K++)N[W+K]=N[r+K]+N[W+K-c]&255}else if(p==0){for(var K=0;K<c;K++)N[W+K]=N[r+K];
if(n==2)for(var K=c;K<s;K++)N[W+K]=N[r+K]&255;if(n==3)for(var K=c;K<s;K++)N[W+K]=N[r+K]+(N[W+K-c]>>1)&255;
if(n==4)for(var K=c;K<s;K++)N[W+K]=N[r+K]+h(N[W+K-c],0,0)&255}else{if(n==2){for(var K=0;K<s;K++)N[W+K]=N[r+K]+N[W+K-s]&255}if(n==3){for(var K=0;
K<c;K++)N[W+K]=N[r+K]+(N[W+K-s]>>1)&255;for(var K=c;K<s;K++)N[W+K]=N[r+K]+(N[W+K-s]+N[W+K-c]>>1)&255}if(n==4){for(var K=0;
K<c;K++)N[W+K]=N[r+K]+h(0,N[W+K-s],0)&255;for(var K=c;K<s;K++)N[W+K]=N[r+K]+h(N[W+K-c],N[W+K-s],N[W+K-c-s])&255}}}return N};
FromPS._paeth=function(N,z,t){var M=N+z-t,c=Math.abs(M-N),s=Math.abs(M-z),h=Math.abs(M-t);if(c<=s&&c<=h)return N;
else if(s<=h)return z;return t};function FromPDF(){}FromPDF.indexOfXref=function(N){var z=N.length-3;
while(FromPS.B.readASCII(N,z,3)!="%%E")z--;while(N[z-1]==37)z--;var t=z;z--;while(FromPS.isEOL(N[z])||N[z]==32)z--;
while(!FromPS.isEOL(N[z])&&N[z]!=32)z--;z++;var M=parseInt(FromPS.B.readASCII(N,z,t-z));if(isNaN(M))throw"no xref";
return M};FromPDF.Parse=function(N,z){N=new Uint8Array(N);var t=0;while(N[t]==32)t++;if(t!=0)N=new Uint8Array(N.buffer,N.byteOffset+t,N.length-t);
var M=FromPDF.indexOfXref(N),c=[],s=FromPDF.readXrefTrail(N,M,c),h=-1;for(var R=0;R<c.length;R++)if(c[R]==null)h=R;
if(s==null||h!=-1||typeof s["/Root"]!="object"){console.log("PDF is broken, trying to rebuild");while(c.length!=0)c.pop();
s=FromPDF.brokenXrefTrail(N,c)}if(s["/Encrypt"]){alert("Encrypted PDFs are not supported yet.");return}var W={buff:N,off:0},r=s["/Root"];
if(r.typ=="ref")s["/Root"]=FromPDF.getIndirect(r.ind,r.gen,W,c);var n=s["/Root"]["/Pages"];if(n.typ=="ref")s["/Root"]["/Pages"]=FromPDF.getIndirect(n.ind,n.gen,W,c);
var K=[s["/Root"]["/Pages"]];while(K.length!=0){var D=K.pop();if(D["/Kids"]){var x=D["/Kids"];for(var R=0;
R<x.length;R++){if(x[R].typ=="ref")x[R]=FromPDF.getIndirect(x[R].ind,x[R].gen,W,c);FromPDF.solveIndirects(x[R],W,c,0);
K.push(x[R])}}}var Y=Date.now();FromPDF.render(s["/Root"],z,s);z.Done()};FromPDF.solveIndirects=function(N,z,t,M){if(M>50)return;
if(typeof N=="object")for(var c in N)if(c.startsWith("/")){if(N[c]&&N[c].typ=="ref"&&t[N[c].ind])N[c]=FromPDF.getIndirect(N[c].ind,N[c].gen,z,t);
FromPDF.solveIndirects(N[c],z,t,M+1)}};FromPDF.render=function(N,z,t){var M="CS cs SCN scn SC sc sh Do gs ID EI cm y v B B* BT ET Tj TJ Tf Tm Td T* Tc Tw Tz TL Tr Ts MP DP BMC BDC EMC BX EX ri TRGR trgr _reset_".split(" "),c={J:"setlinecap",j:"setlinejoin",w:"setlinewidth",d:"setdash",M:"setmiterlimit",i:"setflat",q:"gsave",Q:"grestorePDF",m:"moveto",l:"lineto",c:"curveto",h:"closepath",re:"_drawRect_",W:"clip","W*":"eoclip",f:"fill",F:"fill","f*":"eofill",S:"stroke",b:"h B","b*":"h B*",n:"newpath",RG:"/DeviceRGB  CS SCN",rg:"/DeviceRGB  cs scn",G:"/DeviceGray CS SCN",g:"/DeviceGray cs scn",K:"/DeviceCMYK CS SCN",k:"/DeviceCMYK cs scn",TD:"dup neg TL Td","\"":"exch Tc exch Tw '","'":"T* Tj",s:"h S",BI:"/BI"},h=0;
c=FromPS.makeProcs(c);var s=[N["/Pages"]];while(s.length!=0){var R=s.pop();if(R["/Kids"]){var p=R["/Kids"];
for(var W=p.length-1;W>=0;W--)s.push(p[W]);continue}var r=R["/MediaBox"];if(r==null)r=N["/Pages"]["/MediaBox"];
if(r==null)r=R["/Parent"]["/MediaBox"];h+=(r[2]-r[0])*(r[3]-r[1])}var s=[N["/Pages"]],n=-1,K=[-1e9,1e9];
while(s.length!=0){var R=s.pop();if(R["/Kids"]){var p=R["/Kids"];for(var W=p.length-1;W>=0;W--)s.push(p[W]);
continue}n++;if(n<K[0])continue;if(R["/Resources"]==null)R["/Resources"]=N["/Pages"]["/Resources"];if(R["/Resources"]==null)R["/Resources"]=R["/Parent"]["/Resources"];
var D=R["/Contents"];if(D==null)continue;if(D.length==null)D=[D];var x=N["/Pages"]["/Rotate"];if(x==null)x=R["/Rotate"];
var Y=x!=null&&(x+36e3)%360==90,r=R["/MediaBox"];if(r==null)r=N["/Pages"]["/MediaBox"];if(r==null)r=R["/Parent"]["/MediaBox"];
if(Y)r=[r[0],r[1],r[3],r[2]];var X=FromPS._getEnv(r);X.pgOpen=!0;var U=[],w=[],B=FromPS._getDictStack(M,c),u=[];
if(Y){UDOC.M.rotate(X.gst.ctm,Math.PI/2);UDOC.M.translate(X.gst.ctm,0,r[3])}z.StartPage(r[0],r[1],r[2],r[3],h);
if(t["/Encrypt"]){if(s.length==0)alert("Encrypted PDF is not supported yet.")}else for(var d=0;d<D.length;
d++){if(D[d].buff==null||D[d]["/Length"]==0)continue;var L=FromPS.GS(D[d]),O=L.length-1,T=!0;while(L[O]==0)O--;
L=new Uint8Array(L.buffer,L.byteOffset,O+1);u.push({typ:"file",val:{buff:L,off:0,extra:R}});while(T){T=FromPS.step(w,B,u,U,X,z,FromPDF.operator)}}z.ShowPage();
if(n>=K[1])break}};FromPDF.addCmd=function(N,z,t){var M=N.length,c=new Uint8Array(M);for(var s=0;s<M;
s++)c[s]=N.charCodeAt(s);z.push({typ:"file",val:{buff:c,off:0,extra:t}})};FromPDF._pushForm=function(N,z,t,M){var c=FromPS.GS(z);
if(c==null)return;var s=z["/Matrix"];if(t)FromPDF.addCmd("Q TRGR",N,z);if(M)FromPDF.addCmd("Q",N,z);
if(s){var h=s.slice(0);UDOC.M.invert(h);FromPDF.addCmd(h.join(" ")+" cm",N,z)}N.push({typ:"file",val:{buff:c,off:0,extra:z}});
if(s)FromPDF.addCmd(s.join(" ")+" cm",N,z);if(M)FromPDF.addCmd("q",N,z);if(t)FromPDF.addCmd("trgr q _reset_",N,z)};
FromPDF.operator=function(N,z,t,M,c,s,h){var R=s.gst,p=M.length-1;while(M[p].typ!="file")p--;var W=M[p].val,r=W.extra["/Resources"];
if(N=="Do"){var n=z.pop().val,K=r["/XObject"][n],D=K["/Subtype"];if(D=="/Form"){var x=K["/Group"],Y=x&&x["/S"]=="/Transparency"&&(R.ca!=1||R.bmode!="/Normal");
if(K["/Resources"]==null)K["/Resources"]=r;FromPDF._pushForm(M,K,Y)}else if(D=="/Image"){var X=K["/Width"],U=K["/Height"],w=K["/ColorSpace"],B=K["/SMask"],u=FromPDF.getImage(K),d=FromPDF.getJBIG2Glob(K),O,T;
if(B&&B["/Width"]){var q=B["/Width"],$=B["/Height"],g=new Uint32Array(u.buffer.slice(u.byteOffset,u.byteOffset+8));
if((q!=X||$!=U)&&g[0]==g[1]){var y=new Uint32Array(q*$);y.fill(g[0]);X=q;U=$;u=new Uint8Array(y.buffer)}if(q==X&&$==U){O=FromPDF.getImage(K["/SMask"]);
T=FromPDF.getJBIG2Glob(K["/SMask"])}}if(K["/ImageMask"]==!0){O=u;T=d;u=new Uint8Array(X*U*4);d=null;
var b=R.colr[0]*255,f=R.colr[1]*255,E=R.colr[2]*255;for(var H=0;H<X*U*4;H+=4){u[H]=b;u[H+1]=f;u[H+2]=E;
u[H+3]=255}}if(u&&u.byteOffset!=0)u=u.slice(0);if(O&&O.byteOffset!=0)O=O.slice(0);h.PutImage(R,u,X,U,O,d,T)}else console.log("Unknown XObject",D)}else if(N=="trgr"){h.StartTGroup(R)}else if(N=="TRGR")h.EndTGroup();
else if(N=="_reset_"){R.ca=R.CA=1;R.bmode="/Normal"}else if(N=="gs"){if(z.length==0)return;var Q=z.pop().val,V=r["/ExtGState"][Q];
for(var I in V){var Z=V[I];if(I=="/Type")continue;else if(I=="/CA")R.CA=Z;else if(I=="/ca")R.ca=Z;else if(I=="/BM")R.bmode=Z;
else if(I=="/LC")R.lcap=Z;else if(I=="/LJ")R.ljoin=Z;else if(I=="/LW")R.lwidth=Z;else if(I=="/ML")R.mlimit=Z;
else if(I=="/SA")R.SA=Z;else if(I=="/OPM")R.OPM=Z;else if(I=="/AIS")R.AIS=Z;else if(I=="/OP")R.OP=Z;
else if(I=="/op")R.op=Z;else if(I=="/SMask"){if(typeof Z=="string")R.SMask=Z;else if(Z["/G"]){var bB=Z["/G"]["/Resources"];
if(bB){var bN=bB["/Shading"];for(var aq in bN){bN=bN[aq];break}R.SMask=bN}}else throw"e"}else if(I=="/SM")R.SM=Z;
else if(I=="/HT"||I=="/TR"){}else console.log("Unknown gstate property: ",I,Z)}}else if(N=="ID"){var j={};
while(!0){var Z=z.pop().val;if(Z=="/BI")break;j[z.pop().val]=Z}W.off++;var X=j["/W"],U=j["/H"],at=j["/F"],a5=X*U,u=new Uint8Array(a5*4),w=j["/CS"],bK=j["/BPC"];
if(w==null)w="/G";var bZ=W.off,bL=W.buff;while(!FromPS.isWhite(bL[bZ])||bL[bZ+1]!=69||bL[bZ+2]!=73||!FromPS.isWhite(bL[bZ+3]))bZ++;
var aY=bL.slice(W.off,bZ);W.off+=aY.length;if(at&&at!="/CCF"){var b2=[];if(typeof at=="string")b2=[at];
else for(var H=0;H<at.length;H++)b2.push(at[H].val);var aH={buff:aY,"/Filter":b2};if(j["/DP"]){var aS=aH["/DecodeParms"]={},bJ=["Predictor","Columns","Colors"];
for(var H=0;H<3;H++)if(j["/DP"][bJ[H]])aS["/"+bJ[H]]=j["/DP"][bJ[H]].val}aY=FromPS.GS(aH);delete j["/F"];
delete j["/DP"]}if(w=="/G"){var aM=[0,0,0,255,255,255],cC=new Uint8Array(a5*4);if(j["/ImageMask"]==!0)aM.reverse();
FromPDF.plteImage(aY,0,u,bK==1?aM:null,X,U,bK)}else if(w=="/RGB"&&aY.length==X*U*3){for(var H=0;H<a5;
H++){var cy=H*3,am=H*4;u[am]=aY[cy];u[am+1]=aY[cy+1];u[am+2]=aY[cy+2];u[am+3]=255}}else if(w&&w[0].typ!=null){FromPDF.plteImage(aY,0,u,w[3].val,X,U,bK)}else u=aY;
h.PutImage(R,u,X,U)}else if(N=="n"||N=="BT"||N=="EI"){}else if(N=="ET"){R.font.Tm=[1,0,0,1,0,0];R.font.Tlm=R.font.Tm.slice(0)}else if(N=="y"||N=="v"){var ao=R.ctm.slice(0);
UDOC.M.invert(ao);var I=UDOC.M.multPoint(ao,R.cpos),cz=z.pop().val,az=z.pop().val,bM=z.pop().val,cn=z.pop().val;
if(N=="y")UDOC.G.curveTo(R,cn,bM,az,cz,az,cz);else UDOC.G.curveTo(R,I[0],I[1],cn,bM,az,cz)}else if(N=="B"||N=="B*"){h.Fill(R,N=="B*");
h.Stroke(R);UDOC.G.newPath(R)}else if(N=="cm"||N=="Tm"){var a4=[];for(var H=0;H<6;H++)a4.push(z.pop().val);
a4.reverse();if(N=="cm"){UDOC.M.concat(a4,R.ctm);R.ctm=a4}else{R.font.Tm=a4;R.font.Tlm=a4.slice(0)}}else if(N=="Td"||N=="T*"){var c9=0,a_=0;
if(N=="T*"){c9=0;a_=-R.font.Tl}else{a_=z.pop().val;c9=z.pop().val}var bi=[1,0,0,1,c9,a_];UDOC.M.concat(bi,R.font.Tlm);
R.font.Tm=bi;R.font.Tlm=bi.slice(0)}else if(N=="Tf"){var cb=z.pop().val,cs=z.pop().val;R.font.Tf=cs;
R.font.Tfs=cb}else if(N=="Tj"||N=="TJ"){var bk=z.pop();if(bk.typ=="string")bk=[bk];else bk=bk.val;var a9=R.font.Tf,cs=r["/Font"][a9];
if(cs==null)cs=r["/Font"][a9.replace("_","#5F")];var cw=M[0].val.extra["/Resources"]["/Font"];if(cs==null&&cw)cs=cw[a9];
if(cs==null&&cw)for(var c7 in cw){cs=cw[c7];break}if(cs==null)return;var ae=R.font.Tfs/1e3,aJ=function(ai,al){var cm=[1,0,0,1,al,0];
UDOC.M.concat(cm,ai.Tm);ai.Tm=cm};for(var H=0;H<bk.length;H++){if(bk[H].typ!="string"){if(H==0)aJ(R.font,-ae*bk[H].val);
continue}var aX=FromPDF.getString(bk[H].val,cs);if(bk[H+1]&&bk[H+1].typ!="string"){var ag=bk[H+1].val;
aX[1]+=-ag;if(-900<ag&&ag<-100)aX[0]+=" "}R.font.Tf=aX[2];h.PutText(R,aX[0],aX[1]/1e3);R.font.Tf=a9;
aJ(R.font,ae*aX[1])}}else if(N=="Tc")R.font.Tc=z.pop().val;else if(N=="Tw")R.font.Tw=z.pop().val;else if(N=="Tz")R.font.Th=z.pop().val;
else if(N=="TL")R.font.Tl=z.pop().val;else if(N=="Tr")R.font.Tmode=z.pop().val;else if(N=="Ts")R.font.Trise=z.pop().val;
else if(N=="CS"||N=="cs"){var w=z.pop().val;if(N=="CS")R.sspace=w;else R.space=w}else if(N=="SCN"||N=="scn"||N=="SC"||N=="sc"){var ck=N=="SCN"||N=="SC",aL=ck?R.sspace:R.space,w,bt=null,b8=r?r["/ColorSpace"]:null;
if(b8!=null&&b8[aL]!=null){if(b8[aL][1]&&b8[aL][1]["/Alternate"])w=b8[aL][1]["/Alternate"];else w=typeof b8[aL]=="string"?b8[aL]:b8[aL][0]}else w=aL;
if(w=="/DeviceN"){var bQ=b8[aL],c0=bQ[1].length;for(var H=0;H<c0;H++)z.pop();bt=[1,0,0]}else if(w=="/Lab"||w=="/DeviceRGB"||w=="/CalRGB"||w=="/ICCBased"&&b8[aL][1]["/N"]==3){bt=[z.pop().val,z.pop().val,z.pop().val];
bt.reverse()}else if(w=="/DeviceCMYK"||w=="/ICCBased"&&b8[aL][1]["/N"]==4){var be=[z.pop().val,z.pop().val,z.pop().val,z.pop().val];
be.reverse();bt=UDOC.C.cmykToRgb(be)}else if(w=="/DeviceGray"||w=="/CalGray"||w=="/ICCBased"&&b8[aL][1]["/N"]==1){var S=FromPS.nrm(z.pop().val);
bt=[S,S,S]}else if(w=="/Separation"){bt=FromPS._readSeparation(b8[aL],z.pop().val)}else if(w=="/Indexed"){var aM=FromPDF.getPalette(b8[aL]),ad=z.pop().val*3;
bt=[aM[ad]/255,aM[ad+1]/255,aM[ad+2]/255]}else if(w=="/Pattern"){var bT=r["/Pattern"][z.pop().val],aa=bT["/PatternType"];
if(aa==1){console.log("tile pattern");FromPDF._pushForm(M,bT,!1,!0);return}var aW=bT["/Matrix"];if(aW==null)aW=[1,0,0,1,0,0];
var bR=R.SMask=="/None"?null:R.SMask;bt=FromPS.getShadingFill(bT["/Shading"],aW,bR);if(bt==null)bt=[0,0,0]}else{console.log(aL,w,b8,r);
bt=[1,1,1]}if(ck)R.COLR=bt;else R.colr=bt}else if(N=="sh"){var bN=r["/Shading"][z.pop().val],bR=R.SMask=="/None"?null:R.SMask,aZ=R.colr,bd=R.pth;
R.pth=R.cpth;R.cpth=UDOC.G.rectToPath(s.bb);R.colr=FromPS.getShadingFill(bN,R.ctm.slice(0),bR);if(R.colr==null)R.colr=[0,0,0];
h.Fill(R);R.colr=aZ;R.pth=bd}else if(N=="MP"||N=="BMC"||N=="ri"){z.pop()}else if(N=="DP"||N=="BDC"){z.pop();
z.pop()}else if(N=="EMC"||N=="BX"||N=="EX"){}else throw"Unknown operator",N};FromPDF.getJBIG2Glob=function(N){var z=N;
z=z["/DecodeParms"];if(z==null)return null;if(z.length!=null)z=z[0];if(z==null)return null;z=z["/JBIG2Globals"];
if(z==null)return null;return FromPS.GS(z)};FromPDF.getImage=function(N){var z=N["/Width"],t=N["/Height"],M=z*t,c=FromPS.GS(N),s=N["/Filter"],h=N["/ColorSpace"],p=N["/BitsPerComponent"],W=N["/Matte"],r=N.image;
if(r==null){var n=N["/Mask"];if(h&&h[0]=="/Indexed"){var K=FromPDF.getPalette(h),D=new Uint8Array(M*4);
FromPDF.plteImage(c,0,D,K,z,t,p,n);r=D}else if(s==null&&(h==null||h=="/DeviceGray")){var K=[0,0,0,255,255,255],D=new Uint8Array(M*4);
if(N["/Decode"]&&N["/Decode"][0]==1){K.reverse()}if(N["/ImageMask"]==!0)K.reverse();FromPDF.plteImage(c,0,D,p==1?K:null,z,t,p,n);
r=D}else if(s==null&&h&&(h=="/DeviceCMYK"||h[0]=="/ICCBased"&&h[1]&&h[1]["/N"]==4)){var D=new Uint8Array(M*4),x=[0,0,0,0];
for(var Y=0;Y<M;Y++){var X=Y*4;x[0]=c[X]*(1/255);x[1]=c[X+1]*(1/255);x[2]=c[X+2]*(1/255);x[3]=c[X+3]*(1/255);
var U=UDOC.C.cmykToRgb(x);D[X]=~~(U[0]*255+.5);D[X+1]=~~(U[1]*255+.5);D[X+2]=~~(U[2]*255+.5);D[X+3]=255}r=D}else if(s==null){var w=Math.round(255/((1<<p)-1)),B=Math.ceil(z*3*p/8),D=new Uint8Array(M*4);
D.fill(255);var w=Math.round(255/((1<<p)-1));for(var u=0;u<t;u++){var d=B*u;for(var O=0;O<z;O++){var X=(u*z+O)*4,q=3*O;
D[X]=FromPDF.getBitNum(c,d,q,p)*w;D[X+1]=FromPDF.getBitNum(c,d,q+1,p)*w;D[X+2]=FromPDF.getBitNum(c,d,q+2,p)*w}}r=D}else{r=c}if(W&&W.join("")!="000"){var $=Math.round(W[0]*255),g=Math.round(W[1]*255),y=Math.round(W[2]*255);
for(var Y=0;Y<r.length;Y+=4){r[Y]=Math.max(r[Y],$);r[Y+1]=Math.max(r[Y+1],g);r[Y+2]=Math.max(r[Y+2],y)}}N.image=r}return r};
FromPDF.getPalette=function(N){var z;if(N[3].length!=null){var t=N[3];z=new Uint8Array(256*3);for(var M=0;
M<t.length;M++)z[M]=t.charCodeAt(M)}else z=FromPS.GS(N[3]);if(N[1]=="/DeviceCMYK"||N[1]&&N[1][1]&&N[1][1]["/N"]==4){var c=z,z=new Uint8Array(256*3);
for(var M=0;M<256;M++){var s=M<<2,h=s-M,R=UDOC.C.cmykToRgb([c[s]/255,c[s+1]/255,c[s+2]/255,c[s+3]/255]);
z[h]=R[0]*255;z[h+1]=R[1]*255;z[h+2]=R[2]*255}}return z};FromPDF.plteImage=function(N,z,t,M,c,s,h,p){var W=Math.round(255/((1<<h)-1)),r=Math.ceil(c*h/8);
for(var n=0;n<s;n++){var K=z+r*n;for(var D=0;D<c;D++){var x=FromPDF.getBitNum(N,K,D,h),Y=n*c+D<<2;if(M){var X=x*3;
t[Y]=M[X];t[Y+1]=M[X+1];t[Y+2]=M[X+2]}else{var U=x*W;t[Y]=U;t[Y+1]=U;t[Y+2]=U}t[Y+3]=255;if(p&&p[0]<=x&&x<=p[1])t[Y+3]=0}}};
FromPDF.getBitNum=function(N,z,t,M){var c=0;if(M==8)c=N[z+t];else if(M==4)c=N[z+(t>>1)]>>(1-(t&1)<<2)&15;
else if(M==2)c=N[z+(t>>2)]>>(3-(t&3)<<1)&3;else if(M==1)c=N[z+(t>>3)]>>(7-(t&7)<<0)&1;return c};FromPDF.getString=function(N,z){function t(V,I){console.log("approximating word widths");
var Z=0,bB=.4;for(var B=0;B<V.length;B++){var b=V.charCodeAt(B);if(64<=b&&b<=90)Z+=1.3;else Z++}if(I.indexOf("Courier")!=-1)bB=.59;
if(I=="Helvetica"||I=="Helvetica-Oblique")bB=.44;if(I=="Helvetica-Bold")bB=.46;return Z*1e3*bB}var M=z["/Subtype"],c="",s=0,h=null,R=z["/ToUnicode"],p=z["/Encoding"],W=z,q;
if(R!=null&&typeof R!="object")R=null;if(M=="/Type0")W=z["/DescendantFonts"][0];if(R!=null)c=FromPDF.toUnicode(N,R);
else if(p=="/WinAnsiEncoding")c=FromPDF.encFromMap(N,FromPDF._win1252);else if(p=="/MacRomanEncoding")c=FromPDF.encFromMap(N,FromPDF._macRoman);
else if(M=="/Type0"){var r=0,n=W["/CIDSystemInfo"]["/Ordering"];if(n=="Identity")r=0;else if(n=="Japan1")r=31;
else if(n=="GB1")r=31;else if(n=="CNS1")r=31;else if(n=="Korea1")r=31;else{console.log("unknown ordering",n);
r=0}for(var D=0;D<N.length;D+=2){var x=N[D]<<8|N[D+1];c+=String.fromCharCode(x+r)}}else if(p!=null&&p["/Type"]=="/Encoding"){var Y=p["/Differences"],X=p["/BaseEncoding"],U=null,c="";
if(X=="/WinAnsiEncoding")U=FromPDF._win1252;if(X=="/MacRomanEncoding")U=FromPDF._macRoman;for(var B=0;
B<N.length;B++){var u=N[B],d=-5,L=!1;if(Y)for(var D=0;D<Y.length;D++){if(typeof Y[D]=="string"){if(u==d){c+=FromPDF.fromCName(Y[D].slice(1));
L=!0;break}d++}else d=Y[D]}if(!L&&U!=null){var O=U.indexOf(u);if(O!=-1)u=String.fromCharCode(U[O+1]);
c+=String.fromCharCode(u)}else if(!L)c+=String.fromCharCode(u)}}else{c=FromPS.readStr(N)}var T=W["/FontDescriptor"],$=["","2","3"];
for(var B=0;B<3;B++)if(T&&T["/FontFile"+$[B]])q="/FontFile"+$[B];if(T){if(T.psName)h=T.psName;else if(q){var g=FromPS.GS(T[q]);
if(q!=null&&g&&FromPS.B.readUint(g,0)==65536)h=T.psName=FromPDF._psName(g)}}if(h==null&&z["/BaseFont"])h=z["/BaseFont"].slice(1);
if(h==null||h=="")h="DejaVuSans";if(M=="/Type0"){var y=W["/W"];if(y&&y.length==0)y=null;if(y==null){s=t(c,h)}else for(var B=0;
B<N.length;B+=2){var b=N[B]<<8|N[B+1],f=!1;for(var D=0;D<y.length;D+=2){var E=y[D],H=y[D+1];if(H.length){if(0<=b-E&&b-E<H.length){s+=H[b-E];
f=!0}}else{if(E<=b&&b<=H){s+=y[D+2];f=!0}D++}}if(!f)s+=y[1].length?y[1][0]:y[2]}}else if(M=="/Type1"||M=="/Type3"||M=="/TrueType"||M=="/MMType1"){var Q=z["/FirstChar"],y=z["/Widths"];
if(y)for(var B=0;B<N.length;B++)s+=y[N[B]-Q];else{s=t(c,h)}}else throw"unknown font type";return[c,s,h]};
FromPDF._psName=function(N){var z=FromPS.B.readUshort,t=z(N,4),M=0;for(var c=0;c<t;c++){var s=FromPS.B.readASCII(N,12+c*16,4),h=FromPS.B.readUint(N,12+c*16+8);
if(s=="name"){M=h;break}}if(M==0)return null;var R=z(N,M+2),W=M+6,r=M+6;for(var c=0;c<R;c++){var n=z(N,r),K=z(N,r+2),D=z(N,r+4),x=z(N,r+6),Y=z(N,r+8),X=z(N,r+10),U;
r+=12;var B=W+R*12+X;if(K==1||K==10||K==3||n==3&&K==0){U="";for(var u=1;u<Y;u+=2)U+=String.fromCharCode(N[B+u])}else if(K==0||K==2)U=FromPS.B.readASCII(N,B,Y);
if(x==6&&U!=null&&U.slice(0,3)!="OTS")return U.replace(/\s/g,"")}return null};FromPDF.encFromMap=function(N,z){var t="";
for(var M=0;M<N.length;M++){var c=N[M],s=z.indexOf(c);if(s!=-1)c=z[s+1];t+=String.fromCharCode(c)}return t};
FromPDF._win1252=[128,8364,130,8218,131,402,132,8222,133,8230,134,8224,135,8225,136,710,137,8240,138,352,139,8249,140,338,142,381,145,8216,146,8217,147,8220,148,8221,149,8226,150,8211,151,8212,152,732,153,8482,154,353,155,8250,156,339,158,382,159,376];
FromPDF._macRoman=[128,196,129,197,130,199,131,201,132,209,133,214,134,220,135,225,136,224,137,226,138,228,139,227,140,229,141,231,142,233,143,232,144,234,145,235,146,237,147,236,148,238,149,239,150,241,151,243,152,242,153,244,154,246,155,245,156,250,157,249,158,251,159,252,160,8224,161,176,162,162,163,163,164,167,165,8226,166,182,167,223,168,174,169,169,170,8482,171,180,172,168,173,9824,174,198,175,216,176,8734,177,177,178,8804,179,8805,180,165,181,181,182,8706,183,8721,184,8719,185,960,186,8747,187,170,188,186,189,937,190,230,191,248,192,191,193,161,194,172,195,8730,196,402,197,8776,198,8710,199,171,200,187,201,8230,202,160,203,192,204,195,205,213,206,338,207,339,208,8211,209,8212,210,8220,211,8221,212,8216,213,8217,214,247,215,9674,216,255,217,376,218,8260,219,8364,220,8249,221,8250,222,64257,223,64258,224,8225,225,183,226,8218,227,8222,228,8240,229,194,230,202,231,193,232,203,233,200,234,205,235,206,236,207,237,204,238,211,239,212,240,63743,241,210,242,218,243,219,244,217,245,305,246,710,247,732,248,175,249,728,250,729,251,730,252,184,253,733,254,731,255,711];
FromPDF.fromCName=function(N){if(N=="f_f_i")return"ffi";if(N.length==1)return N;if(N.slice(0,3)=="uni")return String.fromCharCode(parseInt(N.slice(3),16));
var z={space:32,exclam:33,quotedbl:34,numbersign:35,dollar:36,percent:37,ampersand:38,quotesingle:39,parenleft:40,parenright:41,asterisk:42,plus:43,comma:44,hyphen:45,period:46,slash:47,zero:48,one:49,two:50,three:51,four:52,five:53,six:54,seven:55,eight:56,nine:57,colon:58,semicolon:59,less:60,equal:61,at:64,bracketleft:91,bracketright:93,underscore:95,braceleft:123,braceright:125,dieresis:168,circlecopyrt:169,copyright:169,registered:174,degree:176,plusminus:177,mu:181,periodcentered:183,Eacute:201,Adieresis:196,adieresis:228,Udieresis:220,germandbls:223,udieresis:252,Odieresis:214,agrave:224,ntilde:241,odieresis:246,Cacute:262,cacute:263,Ccaron:268,ccaron:269,Dcroat:272,dcroat:273,Ecaron:283,ecaron:283,dotlessi:305,Scaron:352,scaron:353,Tcaron:356,tcaron:357,Zcaron:381,zcaron:382,alpha:945,phi:966,endash:8211,emdash:8212,asteriskmath:8727,quoteright:8217,quotedblbase:8222,ellipsis:8230,quotedblleft:8220,quotedblright:8221,bullet:8226,minus:8706,fi:64257,fl:64258},t=z[N];
if(t==null){if(N.charAt(0)!="g")console.log("unknown character "+N);return N}return String.fromCharCode(t)};
FromPDF.toUnicode=function(N,z){var t=z.cmap,M="",c;if(t==null){var s={buff:FromPS.GS(z),off:0},h=[],R=FromPS._getDictStack({}),p=[{typ:"file",val:s}],W=[],r=FromPS._getEnv([0,0,1,1]),n=!0;
r.pgOpen=!0;while(n)n=FromPS.step(h,R,p,W,r,null,FromPS.operator,!0);t=r.res.CMap.val;z.cmap=t}for(var K in t){t=t[K].val;
break}var D=t.bfrange,x=t.bfchar,X=t.bpc;for(var U=0;U<N.length;U+=X){var B=N[U],u=!1;if(X==2)B=B<<8|N[U+1];
if(!u&&D)for(var d=0;d<D.length;d+=3){var L=D[d],O=D[d+1],T=D[d+2];if(L<=B&&B<=O){if(L==O&&T==0){}else if(T.length==null)B+=T-L;
else B=T[B-L];u=!0;break}}if(!u&&x)for(var d=0;d<x.length;d+=2)if(x[d]==B){B=x[d+1];u=!0;break}if(B>65535)M+=String.fromCharCode(B>>>16);
M+=String.fromCharCode(B)}return M};FromPDF.brokenXrefTrail=function(N,z){function t(D,x){var Y=x;while(48<=D[x]&&D[x]<=57)x++;
return FromPS.B.readASCII(D,Y,x-Y)}var M,c=N.length;for(var s=0;s<c;s++){if(FromPS.isEOL(N[s])){var h=s;
while(FromPS.isWhite(N[h]))h++;var R=t(N,h);if(R!=""){h+=R.length;while(FromPS.isWhite(N[h]))h++;var W=t(N,h);
if(W!=""){h+=W.length;while(FromPS.isWhite(N[h]))h++;if(FromPS.B.readASCII(N,h,3)=="obj"){var r=parseInt(R),n=parseInt(W);
z[r]={off:s+1,gen:n,chr:"n"};s=h}}}else if(N[h]==116&&N[h+1]==114&&FromPS.B.readASCII(N,h,7)=="trailer"){if(M==null)M=FromPDF._readTrailer(N,h+7,z)}else if(N[h]==115&&N[h+1]==116&&FromPS.B.readASCII(N,h,9)=="startxref"){h+=10;
while(FromPS.isWhite(N[h]))h++;var K=parseInt(t(N,h));if(K!=0&&M==null)M=FromPDF.readXrefTrail(N,K,z)}}}return M};
FromPDF._readTrailer=function(N,z,t){var M={buff:N,off:z},c=FromPDF.readObject(M,M,t);if(c["/Prev"])FromPDF.readXrefTrail(N,c["/Prev"],t);
return c};FromPDF.readXrefTrail=function(N,z,t){var M=FromPS.B.readASCII(N,z,4);if(M=="xref"){var c=z+4;
if(N[c]==13)c++;if(N[c]==10)c++;while(!0){if(FromPS.B.readASCII(N,c,7)=="trailer"){c+=7;if(N[c]==13)c++;
if(N[c]==10)c++;break}var s=c;while(!FromPS.isEOL(N[c]))c++;var h=FromPS.B.readASCII(N,s,c-s);h=h.split(" ");
var R=parseInt(h[0]),p=parseInt(h[1]);if(N[c]==13)c++;if(N[c]==10)c++;for(var W=0;W<p;W++){var r=R+W;
if(t[r]==null)t[r]={off:parseInt(FromPS.B.readASCII(N,c,10)),gen:parseInt(FromPS.B.readASCII(N,c+11,5)),chr:FromPS.B.readASCII(N,c+17,1),val:null,opn:!1};
if(N[c+16]!=32)return null;c+=20}}return FromPDF._readTrailer(N,c,t)}else{var c=z,n=c+32;while(c<n&&FromPS.B.readASCII(N,c,2)!="<<")c++;
if(FromPS.B.readASCII(N,c,2)=="<<"){var K={buff:N,off:c},x=FromPDF.readObject(K,K,null,!0),Y=0,X=FromPS.GS(x),U=x["/W"],w=x["/Index"],B=[],W=0;
if(X==null)return null;if(w){for(W=0;W<w.length;W+=2){for(var u=0;u<w[W+1];u++)B.push(w[W]+u)}}W=0;while(Y<X.length){var d=FromPDF.getInt(X,Y,U[0]),c=0,q=0,$="n";
Y+=U[0];var O=FromPDF.getInt(X,Y,U[1]);Y+=U[1];var T=FromPDF.getInt(X,Y,U[2]);Y+=U[2];if(d==0){c=O;q=T;
$="f"}if(d==1){c=O;q=T;$="n"}if(d==2){c=O;q=T;$="s"}t[w?B[W]:W]={off:c,gen:q,chr:$,val:null,opn:!1};
W++}if(x["/Prev"])FromPDF.readXrefTrail(N,x["/Prev"],t);if(x["/Encrypt"])return x;var g={buff:N,off:0},y=["/Root","/Info"];
for(W=0;W<y.length;W++){var b=y[W],f=x[b];if(f&&f.typ=="ref")x[b]=FromPDF.getIndirect(f.ind,f.gen,g,t)}return x}else return null}};
FromPDF.getInt=function(N,t,M){if(M==0)return 0;if(M==1)return N[t];if(M==2)return N[t]<<8|N[t+1];if(M==3)return N[t]<<16|N[t+1]<<8|N[t+2];
if(M==4)return N[t]<<24|N[t+1]<<16|N[t+2]<<8|N[t+3];while(M>4){M--;t++}return N[t]<<24|N[t+1]<<16|N[t+2]<<8|N[t+3]};
FromPDF.getIndirect=function(N,z,t,M){var c=M[N],R;if(c.chr=="f")return null;if(c.val!=null)return c.val;
if(c.opn)return{typ:"ref",ind:N,gen:z};c.opn=!0;var s=t.off;if(c.chr=="s"){var W=FromPDF.getIndirect(c.off,c.gen,t,M),r={buff:FromPS.GS(W),off:0},n=0,K=0;
while(n!=N){n=FromPS.getFToken(r).val;K=FromPS.getFToken(r).val}r.off=K+W["/First"];R=FromPDF.readObject(r,t,M)}else{t.off=c.off;
var D=FromPS.getFToken(t);if(D.val!="<<"){var x=FromPS.getFToken(t),Y=FromPS.getFToken(t)}else t.off-=2;
R=FromPDF.readObject(t,t,M,!0)}c.val=R;t.off=s;c.opn=!1;return R};FromPDF.readObject=function(N,z,t,M){var c=FromPS.getFToken(N);
if(c.typ=="integer"){var s=N.off,h=FromPS.getFToken(N);if(h&&h.typ=="integer"){FromPS.skipWhite(N);if(N.buff[N.off]==82){N.off++;
if(t&&t[c.val])return FromPDF.getIndirect(c.val,h.val,z,t);else return{typ:"ref",ind:c.val,gen:h.val}}}N.off=s}if(c.val=="<<")return FromPDF.readDict(N,z,t,M);
if(c.val=="[")return FromPDF.readArra(N,z,t);if(c.typ=="string"){var R="";for(var p=0;p<c.val.length;
p++)R+=String.fromCharCode(c.val[p]);return R}if(c.typ=="name"&&c.val==">>"){console.log(JSON.stringify(PUtils.readASCII(N.buff,N.off-32,128)));
console.log(N.off);throw"e"}return c.val};FromPDF.readDict=function(N,z,t,M){var c={};while(!0){var s=N.off,h=FromPS.getFToken(N);
if(h.typ=="name"&&h.val==">>")break;N.off=s;var R=FromPDF.readObject(N,z,t),p=FromPDF.readObject(N,z,t);
c[R]=p}if(c["/Length"]!=null&&M){var W=c["/Length"],r=c["/Filter"];if(W.typ&&W.typ=="ref")throw"e";var K=FromPS.getFToken(N);
if(N.buff[N.off]==32)N.off++;if(N.buff[N.off]==13)N.off++;if(N.buff[N.off]==10)N.off++;if(N.off+W>N.buff.length){console.log("too big /Length of a stream",W,N.buff.length-N.off,N.off);
W=N.buff.length-N.off}if(r){r=typeof r=="string"?[r]:r;if(r[0]=="/ASCII85Decode")while(N.buff[N.off+W-2]!=126||N.buff[N.off+W-1]!=62)W++}for(var D=0;
D<32;D++){var Y=N.off+W-D;if(N.buff[Y]!=101)continue;var X=FromPS.B.readASCII(N.buff,Y,9);if(X=="endstream"){W-=D;
break}}c.buff=new Uint8Array(N.buff.buffer,N.buff.byteOffset+N.off,W);N.off+=W;FromPS.getFToken(N)}return c};
FromPDF.readArra=function(N,z,t){var M=[];while(!0){var c=N.off,s=FromPS.getFToken(N);if(s.typ=="name"&&s.val=="]")return M;
N.off=c;var h=FromPDF.readObject(N,z,t);M.push(h)}};var FromWMF=function(){var N=0,z=53,t=55,M=258,c=259,s=260,h=261,R=262,p=263,W=264,r=295,n=313,K=322,D=329,x=513,Y=521,X=529,U=531,w=532,B=544,u=552,d=561,L=564,O=804,T=805,q=522,$=523,g=524,y=525,b=526,f=527,E=1040,H=1042,Q=1045,V=1046,I=1048,Z=1049,bB=1065,bN=1078,aq=1313,j=1336,at=1352,a5=1051,bK=1055,bZ=1564,bL=1565,aY=30,b2=2074,aH=2851,aS=1574,bJ=298,aM=299,cC=300,cy=301,am=302,ao=2071,cz=2096,az=2338,bM=2610,cn=3379,a4=2368,c9=2881,a_=3907,bi=496,cb=247,cs=505,bk=762,a9=763,cw=764,c7=1791,ae=1,aJ=2,aX=3,ag=4,ck=5,aL=6,bt=7,b8=8,bQ=9,c0=10,be=11,bG=12,S=13,ad=14,bT=15,aa=16,aW=17,bR=18,aZ=19,bd=20,ai=21,al=22,cm=23,bb=24,a3=25,c6=26,bz=27,bs=28,a6=29,b7=30,aA=31,ab=32,bv=33,cv=34,a2=35,b_=37,aI=38,cf=42,c8=256,aB=258,ci=512,bC=513,aD=514,bO=2049,bg=3073,c2=4096,ch=4097,bc=4098,an=4110,bY=4111,b5=4112,c1=4115,br=4116,ak=4117,b9=4118,aN=4119,ce=4120,aR=4121,aO=4122,e=4568,G=UDOC.B;
function by(F,P){F=new Uint8Array(F);var l=0,J={fill:!1,strk:!1,bb:[0,0,600,600],lbb:[0,0,600,600],scl:1,fnt:{nam:"Arial",hgh:25,und:!1,orn:0,chrst:0},tclr:[0,0,0],talg:0},A=G.readShort,bm=G.readUshort,bq=G.readUint,o=bq(F,0),cj=0;
if(o==2596720087){l=6;var b$=A(F,l+8);J.scl=120/b$;for(var C=0;C<4;C++){J.bb[C]=Math.round(A(F,l)*J.scl);
l+=2}l+=2;l+=6}P.StartPage(J.bb[0],J.bb[1],J.bb[2],J.bb[3]);var k=UDOC.getState(J.bb),bA=bm(F,l);l+=2;
var cp=bm(F,l);l+=2;var cx=bm(F,l);l+=2;var a1=bq(F,l);l+=4;var b4=bm(F,l);l+=2;var au=bq(F,l);l+=4;
var b4=bm(F,l);l+=2;var a=[];while(!0){var b0=bq(F,l)<<1,c5=null;l+=4;var bF=bm(F,l);l+=2;var _=bF,v=l;
if(!1){}else if(_==N)break;else if(_==aS){var cd=bm(F,l);v+=2;var cl=cd;console.log(_,cl)}else if(_==c||_==R||_==M){}else if(_==cy){var af=bm(F,v);
v+=2;var as=a[af];if(as.t=="br"){J.fill=as.stl!=1;if(as.stl==0){}else if(as.stl==1){}else throw as.stl+" e";
k.colr=as.clr}else if(as.t=="pn"){var a0=as.stl&7;J.strk=a0!=5;if(a0==0||a0==6)k.lwidth=as.px;else if(a0==5){}else throw a0+" e";
if((as.stl&4096)!=0)k.ljoin=2;else if((as.stl&8192)!=0)k.ljoin=0;else k.ljoin=1;k.COLR=as.clr}else if(as.t=="fn"){J.fnt=as;
k.font.Tf=as.nam;k.font.Tfs=Math.abs(as.hgh);k.font.Tun=as.und}else throw"e"}else if(_==bi){var af=bm(F,v);
v+=2;a[af]=null}else if(_==$||_==g){var bP=_==$?0:2;J.lbb[bP+1]=A(F,v);v+=2;J.lbb[bP]=A(F,v);v+=2;i(J,k)}else if(_==cw){c5={t:"br"};
c5.stl=bm(F,v);v+=2;c5.clr=[F[v]/255,F[v+1]/255,F[v+2]/255];v+=4;c5.htc=bm(F,v);v+=2}else if(_==bk){c5={t:"pn"};
c5.stl=bm(F,v);v+=2;c5.px=A(F,v);v+=2;c5.py=A(F,v);v+=2;c5.clr=[F[v]/255,F[v+1]/255,F[v+2]/255];v+=4}else if(_==a9){c5={t:"fn",nam:""};
c5.hgh=A(F,v);v+=2;v+=2*2;c5.orn=A(F,v)/10;v+=2;var bj=A(F,v);v+=2;c5.und=F[v+1];v+=2;c5.stk=F[v];c5.chrst=F[l+1];
v+=2;v+=4;while(F[v]!=0){c5.nam+=String.fromCharCode(F[v]);v++}if(bj>500)c5.nam+="-Bold"}else if(_==cb){c5={t:"pl"}}else if(_==Y)J.tclr=[F[v]/255,F[v+1]/255,F[v+2]/255];
else if(_==am)J.talg=bm(F,v);else if(_==w){UDOC.G.moveTo(k,A(F,v+2),A(F,v))}else if(_==U){if(k.pth.cmds.length==0){var bn=k.ctm.slice(0);
UDOC.M.invert(bn);var aC=UDOC.M.multPoint(bn,k.cpos);UDOC.G.moveTo(k,aC[0],aC[1])}UDOC.G.lineTo(k,A(F,v+2),A(F,v));
var b6=J.fill;J.fill=!1;av(P,k,J);J.fill=b6}else if(_==j){var aF=bm(F,v);v+=2;var ah=v;v+=aF*2;for(var C=0;
C<aF;C++){var ct=bm(F,ah+C*2);v=ca(F,v,ct,k,!0)}av(P,k,J)}else if(_==O||_==T){var ct=bm(F,v);v+=2;v=ca(F,v,ct,k,_==O);
var b6=J.fill;J.fill=b6&&_==O;av(P,k,J);J.fill=b6}else if(_==a5||_==I){var cq=A(F,v);v+=2;var aG=A(F,v);
v+=2;var bS=A(F,v);v+=2;var ac=A(F,v);v+=2;if(_==a5){UDOC.G.moveTo(k,ac,bS);UDOC.G.lineTo(k,aG,bS);UDOC.G.lineTo(k,aG,cq);
UDOC.G.lineTo(k,ac,cq)}else{var bW=(ac+aG)/2,ay=(bS+cq)/2;UDOC.G.arc(k,bW,ay,(cq-bS)/2,0,2*Math.PI,!1)}UDOC.G.closePath(k);
var b6=J.fill;J.fill=!0;av(P,k,J);J.fill=b6}else if(_==a_||_==c9||_==a4){var bH=bq(F,v),bh,bu;v+=4;if(_==a_){var aQ=bm(F,v);
v+=2}if(_!=a4){bu=A(F,v);v+=2;bh=A(F,v);v+=2}var aK=A(F,v);v+=2;var c3=A(F,v);v+=2;var a$=A(F,v);v+=2;
var a8=A(F,v);v+=2;var ap=A(F,v);v+=2;var bf=A(F,v);v+=2;if(_==a4){bh=a8;bu=a$}var ar=m(F,v);if(ar.length>bh*bu*4)ar=ar.slice(0,bh*bu*4);
var cu=k.ctm.slice(0);k.ctm=[1,0,0,1,0,0];UDOC.M.scale(k.ctm,a8,-a$);UDOC.M.translate(k.ctm,bf,ap+a$);
UDOC.M.concat(k.ctm,cu);P.PutImage(k,ar,bh,bu);k.ctm=cu}else if(_==bM){var cc=A(F,v),cr="";v+=2;var a7=A(F,v);
v+=2;k.font.Tm=[1,0,0,-1,0,0];UDOC.M.rotate(k.font.Tm,J.fnt.orn*Math.PI/180);UDOC.M.translate(k.font.Tm,a7,cc);
var bI=J.talg;if((bI&6)==6)k.font.Tal=2;else if((bI&7)==0)k.font.Tal=0;else throw bI+" e";if((bI&24)==24){}else if((bI&24)==0)UDOC.M.translate(k.font.Tm,0,k.font.Tfs);
else throw"e";var aP=bm(F,v);v+=2;var aj=bm(F,v);v+=2;if(aj&4)v+=8;for(var C=0;C<aP;C++){var cA=F[v+C];
if(cA>127){C++;cA=cA<<8|F[v+C]}cr+=String.fromCharCode(cA)}var bl=k.colr;k.colr=J.tclr;P.PutText(k,cr,cr.length*k.font.Tfs*.5);
k.colr=bl}else if(_==bC){}else{console.log(_.toString(16),b0)}if(c5!=null){var bw=0;while(a[bw]!=null)bw++;
a[bw]=c5}l+=b0-6}P.ShowPage();P.Done()}function m(F,P){var l=G.readShort,J=G.readUshort,A=G.readUint,bm=A(F,P),bq,o,b$;
P+=4;if(bm==12)throw"e";else{bq=A(F,P);P+=4;o=A(F,P);P+=4;var C=J(F,P);P+=2;if(C!=1)throw"e";var k=J(F,P);
P+=2;if(k!=1&&k!=24&&k!=32)throw k+" e";var bA=A(F,P);P+=4;if(bA!=0)throw"e";var cp=A(F,P);P+=4;var cx=A(F,P);
P+=4;var a1=A(F,P);P+=4;b$=A(F,P);P+=4;var b4=A(F,P);P+=4}var au=bq*o,a=new Uint8Array(au*4),cj=Math.floor((bq*C*k+31&~31)/8);
if(k==1)for(var b0=0;b0<o;b0++){var bF=P+b$*4+(o-1-b0)*cj;for(var _=0;_<bq;_++){var v=b0*bq+_<<2,c5=F[bF+(_>>>3)]>>>7-(_&7)&1;
a[v]=F[P+c5*4+2];a[v+1]=F[P+c5*4+1];a[v+2]=F[P+c5*4+0];a[v+3]=255}}if(k==24){for(var b0=0;b0<o;b0++)for(var _=0;
_<bq;_++){var v=b0*bq+_<<2,cd=P+(o-1-b0)*cj+_*3;a[v]=F[cd+2];a[v+1]=F[cd+1];a[v+2]=F[cd+0];a[v+3]=255}}if(k==32){for(var b0=0;
b0<o;b0++)for(var _=0;_<bq;_++){var v=b0*bq+_<<2,cd=P+(o-1-b0)*cj+_*4;a[v]=F[cd+2];a[v+1]=F[cd+1];a[v+2]=F[cd+0];
a[v+3]=F[cd+3]}}return a}function i(F,P){var l=[1,0,0,1,0,0],J=F.lbb,A=F.bb;UDOC.M.translate(l,-J[0],-J[1]);
UDOC.M.scale(l,1/J[2],1/J[3]);UDOC.M.scale(l,A[2]-A[0],A[3]-A[1]);UDOC.M.translate(l,A[0],A[1]);P.ctm=l}function av(F,P,l){if(l.fill)F.Fill(P,!1);
if(l.strk&&P.lwidth!=0)F.Stroke(P,!1);UDOC.G.newPath(P)}function ca(F,P,l,J,A){var bm=G.readShort;for(var bq=0;
bq<l;bq++){var o=bm(F,P);P+=2;var b$=bm(F,P);P+=2;if(bq==0)UDOC.G.moveTo(J,o,b$);else UDOC.G.lineTo(J,o,b$)}if(A)UDOC.G.closePath(J);
return P}return{Parse:by}}(),FromEMF=function(){var N=1,z=2,t=3,M=4,c=5,s=6,h=7,R=8,p=9,W=10,r=11,n=12,K=13,D=14,x=15,Y=16,X=17,U=18,w=19,B=20,u=21,d=22,L=23,O=24,T=25,q=26,$=27,g=28,y=29,b=30,f=31,E=32,H=33,Q=34,V=35,I=36,Z=37,bB=38,bN=39,aq=40,j=41,at=42,a5=43,bK=44,bZ=45,bL=46,aY=47,b2=48,aH=49,aS=50,bJ=51,aM=52,cC=53,cy=54,am=55,ao=56,cz=57,az=58,bM=59,cn=60,a4=61,c9=62,a_=63,bi=64,cb=65,cs=66,bk=67,a9=68,cw=70,c7=71,ae=72,aJ=73,aX=74,ag=75,ck=76,aL=77,bt=78,b8=79,bQ=80,c0=81,be=82,bG=83,S=84,ad=85,bT=86,aa=87,aW=88,bR=89,aZ=90,bd=91,ai=92,al=93,cm=94,bb=95,a3=96,c6=97,bz=98,bs=99,a6=100,b7=101,aA=102,ab=103,bv=104,cv=105,a2=106,b_=108,aI=109,cf=110,c8=111,aB=112,ci=113,bC=114,aD=115,bO=116,bg=118,c2=119,ch=120,bc=121,an=122,bY=UDOC.B,b5=null,c1=13369376,br=15597702,ak=8913094;
function b9(e,G){e=new Uint8Array(e);var by=0,m={fill:!1,strk:!1,bb:[0,0,1,1],wbb:[0,0,1,1],fnt:{nam:"Arial",hgh:25,und:!1,orn:0},tclr:[0,0,0],talg:0},i,av=[],ca=[],F=bY.readShort,P=bY.readUshort,l=bY.readInt,J=bY.readUint,A=bY.readFloat,bm=0;
while(!0){var bq=J(e,by),k=null,bA=0;by+=4;var o=bq,b$=J(e,by);by+=4;var C=by;if(!1){}else if(o==D){break}else if(o==N){m.bb=aN(e,C);
C+=16;G.StartPage(m.bb[0],m.bb[1],m.bb[2],m.bb[3]);i=UDOC.getState(m.bb)}else if(o==H)ca.push(JSON.stringify(i),JSON.stringify(m));
else if(o==Q){var cp=l(e,C);C+=4;while(cp<-1){ca.pop();ca.pop();cp++}m=JSON.parse(ca.pop());i=JSON.parse(ca.pop())}else if(o==bk){i.cpth=JSON.parse(JSON.stringify(i.pth))}else if(o==b){var cx=aN(e,C);
C+=16;var a1=i.pth;i.pth={cmds:[],crds:[]};UDOC.G.drawRect(i,cx[0],cx[1],cx[2]-cx[0],cx[3]-cx[1]);i.cpth=i.pth;
i.pth=a1}else if([X,w,U,bz,B,ag].indexOf(o)!=-1){}else if(o==az)i.mlimit=J(e,C);else if(o==O)m.tclr=[e[C]/255,e[C+1]/255,e[C+2]/255];
else if(o==d)m.talg=J(e,C);else if(o==r||o==n){if(m.vbb==null)m.vbb=[];var au=o==n?0:2;m.vbb[au]=l(e,C);
C+=4;m.vbb[au+1]=l(e,C);C+=4;if(o==r)ce(m,i)}else if(o==p||o==W){var au=o==W?0:2;m.wbb[au]=l(e,C);C+=4;
m.wbb[au+1]=l(e,C);C+=4;if(o==p)ce(m,i)}else if(o==cw){var a=J(e,C);C+=4}else if(o==Z){var cj=J(e,C);
C+=4;if(cj==2147483648){m.fill=!0;i.colr=[1,1,1]}else if(cj==2147483653){m.fill=!1}else if(cj==2147483655){m.strk=!0;
m.lwidth=1;i.COLR=[0,0,0]}else if(cj==2147483656){m.strk=!1}else if(cj==2147483661){}else if(cj==2147483662){}else{var b0=av[cj];
if(b0.t=="b"){m.fill=b0.stl!=1;if(b0.stl==0){}else if(b0.stl==1){}else throw b0.stl+" e";i.colr=b0.clr}else if(b0.t=="p"){m.strk=b0.stl!=5;
i.lwidth=b0.wid;i.COLR=b0.clr}else if(b0.t=="f"){m.fnt=b0;i.font.Tf=b0.nam;i.font.Tfs=Math.abs(b0.hgh);
i.font.Tun=b0.und}else throw"e"}}else if(o==aq){var cj=J(e,C);C+=4;if(av[cj]!=null)av[cj]=null;else throw"e"}else if(o==bN){bA=J(e,C);
C+=4;k={t:"b"};k.stl=J(e,C);C+=4;k.clr=[e[C]/255,e[C+1]/255,e[C+2]/255];C+=4;k.htc=J(e,C);C+=4}else if(o==cm){bA=J(e,C);
C+=4;console.log("unsupported pattern brush");k={t:"b"};k.stl=0}else if(o==bB||o==bb){bA=J(e,C);C+=4;
k={t:"p"};if(o==bb){C+=16;k.stl=J(e,C);C+=4;k.wid=J(e,C);C+=4;C+=4}else{k.stl=J(e,C);C+=4;k.wid=J(e,C);
C+=4;C+=4}k.clr=[e[C]/255,e[C+1]/255,e[C+2]/255];C+=4}else if(o==be){bA=J(e,C);C+=4;k={t:"f",nam:""};
k.hgh=l(e,C);C+=4;C+=4*2;k.orn=l(e,C)/10;C+=4;var bF=J(e,C);C+=4;k.und=e[C+1];k.stk=e[C+2];C+=4*2;while(P(e,C)!=0){k.nam+=String.fromCharCode(P(e,C));
C+=2}if(bF>500)k.nam+="-Bold"}else if(o==S){C+=16;var _=J(e,C),aC="";C+=4;var v=A(e,C);C+=4;var c5=A(e,C);
C+=4;var cd=l(e,C);C+=4;var cl=l(e,C);C+=4;var af=i.ctm.slice(0);if(_==1)i.ctm=[1,0,0,1,0,0];i.font.Tm=[1,0,0,-1,0,0];
UDOC.M.rotate(i.font.Tm,m.fnt.orn*Math.PI/180);UDOC.M.translate(i.font.Tm,cd,cl);var as=m.talg;if((as&6)==6)i.font.Tal=2;
else if((as&7)==0)i.font.Tal=0;else throw as+" e";if((as&24)==24){}else if((as&24)==0)UDOC.M.translate(i.font.Tm,0,i.font.Tfs);
else console.log("unknown alignment",as);var a0=J(e,C);C+=4;var bP=J(e,C);C+=4;var bj=J(e,C);C+=4;C+=16;
var bn=J(e,C);C+=4;bP+=by-8;for(var b6=0;b6<a0;b6++){var aF=P(e,bP+b6*2);aC+=String.fromCharCode(aF)}var ah=i.colr;
i.colr=m.tclr;G.PutText(i,aC,aC.length*i.font.Tfs*.5);i.colr=ah;i.ctm=af}else if(o==bM){UDOC.G.newPath(i)}else if(o==cn){}else if(o==a4)UDOC.G.closePath(i);
else if(o==$){UDOC.G.moveTo(i,l(e,C),l(e,C+4))}else if(o==cy){if(i.pth.cmds.length==0){var ct=i.ctm.slice(0);
UDOC.M.invert(ct);var cq=UDOC.M.multPoint(ct,i.cpos);UDOC.G.moveTo(i,cq[0],cq[1])}UDOC.G.lineTo(i,l(e,C),l(e,C+4))}else if(o==t||o==bT||o==M||o==aa||o==s||o==bR){C+=16;
var aG=o==t||o==bT,bS=o==s||o==bR,ac=J(e,C);C+=4;if(!bS)UDOC.G.newPath(i);C=aO(e,C,ac,i,o==bT||o==aa||o==bR?2:4,aG,bS);
if(!bS)aR(G,i,m,aG)}else if(o==bd){C+=16;var aG=!0,bS=!1,bW=J(e,C);C+=4;C+=4;var ay=C;C+=bW*4;if(!bS)UDOC.G.newPath(i);
for(var b6=0;b6<bW;b6++){var bH=P(e,ay+b6*4);C=aO(e,C,bH,i,2,aG,bS)}if(!bS)aR(G,i,m,aG)}else if(o==z||o==ad||o==c||o==aW){C+=16;
var aQ=o==ad||o==aW,bh=aQ?F:l,bu=aQ?2:4,ac=J(e,C);C+=4;if(!(o==c||o==aW)){UDOC.G.moveTo(i,bh(e,C),bh(e,C+bu));
C+=2*bu;ac--}while(ac>0){UDOC.G.curveTo(i,bh(e,C),bh(e,C+bu),bh(e,C+2*bu),bh(e,C+3*bu),bh(e,C+4*bu),bh(e,C+5*bu));
C+=6*bu;ac-=3}}else if(o==a5||o==at){UDOC.G.newPath(i);var cx=aN(e,C);if(o==a5){UDOC.G.drawRect(i,cx[0],cx[1],cx[2]-cx[0],cx[3]-cx[1])}else{var aK=(cx[0]+cx[2])/2,c3=(cx[1]+cx[3])/2;
UDOC.G.arc(i,aK,c3,(cx[2]-cx[0])/2,0,2*Math.PI,!1)}UDOC.G.closePath(i);aR(G,i,m,!0)}else if(o==c9)G.Fill(i,!1);
else if(o==bi)G.Stroke(i);else if(o==a_){G.Fill(i,!1);G.Stroke(i)}else if(o==V||o==I){var a$=[];for(var b6=0;
b6<6;b6++)a$.push(A(e,C+b6*4));C+=24;if(o==V)i.ctm=a$;else{var _=J(e,C);C+=4;if(_==2){var a8=i.ctm;i.ctm=a$;
UDOC.M.concat(i.ctm,a8)}else if(_==4)i.ctm=a$;else throw _}}else if(o==u){var ap=J(e,C);C+=4}else if(o==c0){var cx=aN(e,C);
C+=16;var bf=l(e,C);C+=4;var ar=l(e,C);C+=4;var cu=l(e,C);C+=4;var cc=l(e,C);C+=4;var a7=l(e,C);C+=4;
var bI=l(e,C);C+=4;var aj=J(e,C)+by-8;C+=4;var cr=J(e,C);C+=4;var cA=J(e,C)+by-8;C+=4;var bl=J(e,C);
C+=4;var bw=J(e,C);C+=4;if(bw!=0)throw"e";var bo=J(e,C);C+=4;if(bo!=c1&&bo!=br&&bo!=ak)throw bo.toString(16);
var aU=l(e,C);C+=4;var cg=l(e,C);C+=4;var aw=J(e,aj);aj+=4;if(aw!=40)throw aw;var b1=J(e,aj);aj+=4;var bU=J(e,aj);
aj+=4;if(b1!=a7||bU!=bI)throw"e";var c4=P(e,aj);aj+=2;if(c4!=1)throw"e";var ax=P(e,aj);aj+=2;if(ax!=1&&ax!=4&&ax!=8&&ax!=16&&ax!=24&&ax!=32)throw ax+" e";
var aE=J(e,aj);aj+=4;if(aE!=0)throw aE+" e";var bx=J(e,aj);aj+=4;var aV=J(e,aj);aj+=4;var ba=J(e,aj);
aj+=4;var aT=J(e,aj);aj+=4;var bV=J(e,aj);aj+=4;if(bV!=0)throw bV;var cB=Math.floor((b1*c4*ax+31&~31)/8),bE=new Uint8Array(b1*bU*4);
if(ax==1){for(var c3=0;c3<bU;c3++)for(var aK=0;aK<b1;aK++){var bX=c3*b1+aK<<2,cj=(e[cA+(bU-1-c3)*cB+(aK>>>3)]>>>7-(aK&7)&1)<<2;
bE[bX]=e[aj+cj+2];bE[bX+1]=e[aj+cj+1];bE[bX+2]=e[aj+cj+0];bE[bX+3]=255}}else if(ax==8){for(var c3=0;
c3<bU;c3++)for(var aK=0;aK<b1;aK++){var bX=c3*b1+aK<<2,cj=e[cA+(bU-1-c3)*cB+aK]<<2;bE[bX]=e[aj+cj+2];
bE[bX+1]=e[aj+cj+1];bE[bX+2]=e[aj+cj+0];bE[bX+3]=255}}else if(ax==16){for(var c3=0;c3<bU;c3++)for(var aK=0;
aK<b1;aK++){var bX=c3*b1+aK<<2,bD=cA+(bU-1-c3)*cB+aK*2,b3=e[bD+1]<<8|e[bD];bE[bX]=(b3>>>10&31)*(255/31);
bE[bX+1]=(b3>>>5&31)*(255/31);bE[bX+2]=(b3>>>0&31)*(255/31);bE[bX+3]=255}}else if(ax==24){for(var c3=0;
c3<bU;c3++)for(var aK=0;aK<b1;aK++){var bX=c3*b1+aK<<2,bD=cA+(bU-1-c3)*cB+aK*3;bE[bX]=e[bD+2];bE[bX+1]=e[bD+1];
bE[bX+2]=e[bD+0];bE[bX+3]=255}}else if(ax==32){for(var c3=0;c3<bU;c3++)for(var aK=0;aK<b1;aK++){var bX=c3*b1+aK<<2,bD=cA+(bU-1-c3)*cB+aK*4;
bE[bX]=e[bD+2];bE[bX+1]=e[bD+1];bE[bX+2]=e[bD+0];bE[bX+3]=e[bD+3]}}else console.log("unsupported bit depth",ax,b1,bU);
var bp=i.ctm.slice(0);i.ctm=[1,0,0,1,0,0];UDOC.M.scale(i.ctm,aU,-cg);UDOC.M.translate(i.ctm,bf,ar+cg);
UDOC.M.concat(i.ctm,bp);if(bo==br)b5=bE;else if(bo==ak)G.PutImage(i,bE,b1,bU,b5);else G.PutImage(i,bE,b1,bU);
i.ctm=bp}else{console.log("unknown command",o,b$)}if(k!=null)av[bA]=k;by+=b$-8}G.ShowPage();G.Done()}function aN(e,G){var by=[];
for(var m=0;m<4;m++)by[m]=bY.readInt(e,G+m*4);return by}function ce(e,G){var by=[1,0,0,1,0,0],m=e.wbb,i=e.bb,av=e.vbb&&e.vbb.length==4?e.vbb:e.bb;
UDOC.M.translate(by,-m[0],-m[1]);UDOC.M.scale(by,1/m[2],1/m[3]);UDOC.M.scale(by,av[2],av[3]);G.ctm=by}function aR(e,G,by,m){if(by.fill&&m)e.Fill(G,!1);
if(by.strk&&G.lwidth!=0)e.Stroke(G)}function aO(e,G,by,m,i,av,ca){var F=i==2?bY.readShort:bY.readInt;
for(var P=0;P<by;P++){var l=F(e,G);G+=i;var J=F(e,G);G+=i;if(P==0&&!ca)UDOC.G.moveTo(m,l,J);else UDOC.G.lineTo(m,l,J)}if(av)UDOC.G.closePath(m);
return G}return{Parse:b9}}(),FromDXF=function(){var N=function(){this.bb=[1e9,1e9,-1e9,-1e9]};N.prototype={StartPage:function(){},PutText:function(){},PutImage:function(){},Stroke:function(R){this.checkPath(R.pth.crds)},Fill:function(R){this.checkPath(R.pth.crds)},PutText:function(R,p,W,r){var n=[0,0,W*R.font.Tfs,0,0,-R.font.Tfs,0,R.font.Tfs];
if(r){n[2]=r[0];n[5]=-r[1]}UDOC.M.multArray(R.ctm,n);UDOC.M.multArray(R.font.Tm,n);this.checkPath(n)},checkPath:function(R){var p=this.bb;
for(var W=0;W<R.length;W+=2){var r=R[W],n=R[W+1];p[0]=Math.min(p[0],r);p[1]=Math.min(p[1],n);p[2]=Math.max(p[2],r);
p[3]=Math.max(p[3],n)}},ShowPage:function(){},Done:function(){}};function z(R,p){R=new Uint8Array(R);
var W=0,r=new TextDecoder().decode(R),n=r.split("\n"),Y=2e3,X=100;for(var K=0;K<n.length;K++)n[K]=n[K].trim();
while(n[n.length-1]=="")n.pop();var D=new N;t(n,D);var x=D.bb,U=(Y-X*2)/(x[2]-x[0]),w=Math.round((x[3]-x[1])*U+X*2),B=[0,0,Y,w],u=UDOC.getState(B);
u.lwidth=1/U;u.ctm=[U,0,0,-U,X-x[0]*U,-X+x[1]*U+w];t(n,p,u,B)}function t(R,p,W,r){if(W==null){r=[0,0,1e3,1e3];
W=UDOC.getState(r)}p.StartPage(r[0],r[1],r[2],r[3]);var n={tabs:{LTYPE:{}},blocks:{}};c(R,p,W,n,0,R.length);
p.ShowPage();p.Done()}function M(R,p){if(R.startsWith("%%u")){R=R.slice(3);p.font.Tun=1}R=R.split("\\P").join("\n");
R=R.split("%%d").join("'");R=R.split("{").join("");R=R.split("}").join("");while(!0){var W=R.indexOf("\\U+");
if(W==-1)break;R=R.slice(0,W)+String.fromCharCode(parseInt(R.slice(W+3,W+7),16))+R.slice(W+7)}while(!0){var W=R.indexOf("\\"),r=R.indexOf(";");
if(W==-1||r==-1)break;var n=R.slice(W+1,r);if(n.startsWith("pi"))n=" ".repeat(.5*parseFloat(n.slice(2)));
else n="";R=R.slice(0,W)+n+R.slice(r+1)}return R}function c(R,p,W,r,n,K,D){var x,Y,X,U=!1;while(n<K){var w=parseInt(R[n++]),B=R[n++],u=[10,11,12,13,14,20,21,22,23,24,30,31,32,33,34,40,41,42,43,44,45,46,47,48,49,50,51,52,53,62,70,71,72,73,74,90,370].indexOf(w)!=-1,d=x=="LWPOLYLINE"&&(w==10||w==20||w==30)||x=="LTYPE"&&w==49||x=="SPLINE"&&(w==10||w==20||w==30||w==40)||x=="OLE2FRAME"&&w==310;
if(u)B=parseFloat(B);if(w==999){}else if(B[0]=="$")U=!0;else if(U)U=!1;else if(B=="SECTION")D=-1;else if(B=="ENDSEC"){}else if(D==-1)D=B;
else if(B=="EOF"){}else if(D=="HEADER"){}else if(D=="CLASSES"){}else if(D=="TABLES"||D=="BLOCKS"){if(B=="ENDBLK"){X[1]=n-2;
X=null}if(w==0){x=B;Y={};continue}if(d){if(Y[w]==null)Y[w]=[];Y[w].push(B)}else{Y[w]=B}if(R[n]!="0")continue;
if(x=="LTYPE"){if(r.tabs[x][Y[2]]!=null)throw"e";r.tabs[x][Y[2]]=Y}else if(x=="BLOCK"){X=r.blocks[Y[2]]=[n]}}else if(D=="ENTITIES"){if(w==0){x=B;
Y={}}else{if(d){if(Y[w]==null)Y[w]=[];Y[w].push(B)}else{Y[w]=B}}if(R[n]!="0")continue;if(X==null){W.colr=[0,0,0];
W.ca=1;W.COLR=[0,0,0];W.dash=[];if(Y[62]!=null&&Y[62]!=256){var L={c0:[0,0,0],c1:[1,0,0],c2:[1,1,0],c4:[0,1,1],c5:[0,0,1],c7:[0,0,0],c8:[0,0,0],c242:[.64,0,.16],c250:[0,0,0]}["c"+Y[62]];
if(L)W.COLR=L;else{W.COLR=[0,1,0];console.log(x+" "+Y[62])}}if(Y[6]!=null){var O=r.tabs.LTYPE[Y[6]];
if(O[49]!=null){var T=O[49].slice(0);for(var q=0;q<T.length;q++)T[q]=Math.abs(T[q])*(Y[48]?Y[48]:1);
W.dash=T}}if(Y[8]=="H")W.dash=[.1,.02];UDOC.G.newPath(W)}var $=-1/3.17;if(x=="LINE"){var g=(Y[30]?Y[30]:0)*$,y=(Y[31]?Y[31]:0)*$;
UDOC.G.moveTo(W,Y[10]+g,Y[20]-g);UDOC.G.lineTo(W,Y[11]+y,Y[21]-y);p.Stroke(W,!1)}else if(x=="POLYLINE"){X=[Y,[]]}else if(x=="VERTEX"){X[1].push(Y)}else if(x=="SEQEND"){if(X==null)continue;
var b=X[0],f=X[1],E=f.length,H=b[70]==1?E+1:E;UDOC.G.moveTo(W,f[0][10],f[0][20]);for(var q=1;q<H;q++){var Q=f[q%E][10],V=f[q%E][20],I=f[q-1][42];
if(I==null)I=0;if(I==0)UDOC.G.lineTo(W,Q,V);else{var Z=f[q-1],bB=Z[10],bN=Z[20],j=Q-bB,at=V-bN,a5=-I*Math.PI/2,bK=.42,bZ=Math.sin(a5),bL=Math.cos(a5),aY=bL*j-bZ*at,b2=bZ*j+bL*at,aH=bL*j+bZ*at,aS=-bZ*j+bL*at;
UDOC.G.curveTo(W,bB+bK*aY,bN+bK*b2,Q-bK*aH,V-bK*aS,Q,V)}}p.Stroke(W,!1);X=null}else if(x=="OLE2FRAME"){var bJ=57,aM=295,cC=Y[310].join(""),cy=aM*bJ,am=new Uint8Array(cC.length>>>1);
for(var q=0;q<am.length;q++)am[q]=parseInt(cC.slice(q*2,q*2+2),16);var ao=new Float64Array(am.slice(2,2+12*8).buffer),cz=new Uint8Array(cy*4);
new Uint32Array(cz.buffer).fill(4281563135);var az=W.ctm,bM=[1,0,0,1,0,0],cn=Y[11]-Y[10],a4=Y[21]-Y[20];
UDOC.M.scale(bM,cn,a4);UDOC.M.translate(bM,Y[10],Y[20]);UDOC.M.concat(bM,W.ctm);W.ctm=bM;p.PutImage(W,cz,aM,bJ);
W.ctm=az}else if(x=="INSERT"){var c9=r.blocks[Y[2]],a_=W.ctm.slice(0),bM=[1,0,0,1,0,0];if(Y[50]!=null)UDOC.M.rotate(bM,Y[50]*Math.PI/180);
if(Y[41]!=null)UDOC.M.scale(bM,Y[41],Y[42]);UDOC.M.translate(bM,Y[10],Y[20]);UDOC.M.concat(bM,W.ctm);
W.ctm=bM;c(R,p,W,r,c9[0],c9[1],D);W.ctm=a_}else if(x=="--VIEWPORT"){console.log(Y);W.COLR=[1,0,0];UDOC.G.moveTo(W,Y[10],Y[20]);
UDOC.G.lineTo(W,Y[10]+5,Y[20]+5);p.Stroke(W,!1)}else if(x=="--DIMENSION"){var bi=Y[70]&7;if(bi==0){console.log(Y);
W.COLR=[0,.3,.6];var j=0,at=0;UDOC.G.moveTo(W,Y[13]+j,Y[23]+at);UDOC.G.lineTo(W,Y[14]+j,Y[24]+at);p.Stroke(W,!1)}}else if(x=="3DFACE"||x=="SOLID"){var g=Y[30]*$,y=Y[31]*$,cb=Y[32]*$,cs=Y[33]*$;
UDOC.G.moveTo(W,Y[10]+g,Y[20]-g);UDOC.G.lineTo(W,Y[11]+y,Y[21]-y);UDOC.G.lineTo(W,Y[12]+cb,Y[22]-cb);
UDOC.G.lineTo(W,Y[13]+cs,Y[23]-cs);UDOC.G.closePath(W);if(x=="3DFACE"){W.colr=[Math.random(),Math.random(),Math.random()];
W.ca=.5}p.Fill(W,!1)}else if(x=="LWPOLYLINE"){for(var q=0;q<Y[90];q++){var bk=q==0?UDOC.G.moveTo:UDOC.G.lineTo;
bk(W,Y[10][q],Y[20][q])}if(Y[70]==1)UDOC.G.closePath(W);p.Stroke(W,!1)}else if(x=="CIRCLE"){UDOC.G.arc(W,Y[10],Y[20],Y[40],0,Math.PI*2);
p.Stroke(W,!1)}else if(x=="ELLIPSE"){var a9=W.ctm.slice(0),cw=Y[10],c7=Y[20],j=Y[11],at=Y[21],ae=Math.sqrt(j*j+at*at),bM=[1,0,0,1,0,0];
UDOC.M.scale(bM,1,Y[40]);UDOC.M.rotate(bM,-Math.atan2(at,j));UDOC.M.translate(bM,cw,c7);UDOC.M.concat(bM,W.ctm);
W.ctm=bM;UDOC.G.arc(W,0,0,ae,Y[41],Y[42]);p.Stroke(W,!1);W.ctm=a9}else if(x=="ARC"){UDOC.G.arc(W,Y[10],Y[20],Y[40],Y[50]*Math.PI/180,Y[51]*Math.PI/180);
p.Stroke(W,!1)}else if(x=="SPLINE"){var aJ=Y[10],aX=Y[20],ag=Y[40].slice(0),ck=aJ.length-1;UDOC.G.moveTo(W,aJ[0],aX[0]);
if(Y[71]==3&&Y[73]==4){UDOC.G.curveTo(W,aJ[1],aX[1],aJ[2],aX[2],aJ[3],aX[3])}else{var aL=-1e6,bt=1e6;
for(var q=0;q<ag.length;q++){var b8=ag[q];if(b8<bt)bt=b8;if(b8>aL)aL=b8}for(var q=0;q<ag.length;q++){ag[q]=(ag[q]-bt)/(aL-bt)}var E=aJ.length*10;
for(var bQ=1;bQ<E;bQ++){var c0=bQ/E,be=s(aJ,aX,Y[71],ag,c0);UDOC.G.lineTo(W,be[0],be[1])}UDOC.G.lineTo(W,aJ[aJ.length-1],aX[aX.length-1])}if(Y[70]&1)UDOC.G.closePath(W);
p.Stroke(W,!1)}else if(x=="--ATTDEF"||x=="ATTRIB"||x=="TEXT"||x=="MTEXT"){W.font.Tun=0;W.font.Tal=0;
W.font.Tm=[1,0,0,1,0,0];if(Y[50])UDOC.M.rotate(W.font.Tm,-Y[50]*Math.PI/180);UDOC.M.translate(W.font.Tm,Y[10],Y[20]);
W.font.Tfs=Y[40];var cC=Y[x=="ATTDEF"?3:1],S=null;cC=M(cC,W);var bG=Y[71]==null?0:(Y[71]-1)%3;W.font.Tal=[0,2,1][bG];
if(x=="MTEXT"&&Y[41]!=null&&Y[41]!=0){var ad=cC.length*W.font.Tfs/Y[41];ad=Math.max(ad,cC.split("\n").length);
S=[Y[41],ad*W.font.Tfs*1.5];if(bG==0){}else if(bG==2){UDOC.M.translate(W.font.Tm,-Y[41],0)}else if(bG==1){UDOC.M.translate(W.font.Tm,-Y[41]/2,0)}else console.log("unknown align",Y)}else if(x=="MTEXT"&&Y[71]!=null){if(Y[71]<=3)UDOC.M.translate(W.font.Tm,0,-W.font.Tfs*.8);
else if(Y[71]<=6)UDOC.M.translate(W.font.Tm,0,-W.font.Tfs*.4)}p.PutText(W,cC,cC.length*.5,S)}else console.log("unknown command",x)}else if(D=="OBJECTS"){}else if(D=="ACDSDATA"){}else{console.log(D,w,B);
throw D}}}function s(R,p,W,r,n){var K=0,D=0;for(var x=0;x<R.length;x++){var Y=h(x,W,r,n);K+=R[x]*Y;D+=p[x]*Y}return[K,D]}function h(R,W,r,n){var K=new Float64Array(W+1),D,x,X=r.Length-1;
if(R==0&&n==r[0]||R==X-W-1&&n==r[X])return 1;if(n<r[R]||n>=r[R+W+1])return 0;for(var U=0;U<=W;U++){if(n>=r[R+U]&&n<r[R+U+1])K[U]=1;
else K[U]=0}for(var w=1;w<=W;w++){if(K[0]==0)D=0;else D=(n-r[R])*K[0]/(r[R+w]-r[R]);for(var U=0;U<W-w+1;
U++){var B=r[R+U+1],d=r[R+U+w+1];if(K[U+1]==0){K[U]=D;D=0}else{x=K[U+1]/(d-B);K[U]=D+(d-n)*x;D=(n-B)*x}}}return K[0]}return{Parse:z}}(),ToPDF=function(){function N(){this._res={"/Font":{},"/XObject":{},"/ExtGState":{},"/Pattern":{}};
this._xr=[null,{"/Type":"/Catalog","/Pages":{typ:"ref",ind:2}},{"/Type":"/Pages","/Kids":[],"/Count":0},this._res];
this._bnds=[];this._cont="";this._annt=[];this._gst=z();this._gmap={smsk:"/None"};this._stck=[]}function z(){return{colr:"[0,0,0]",COLR:"[0,0,0]",lcap:"0",ljoin:"0",lwidth:"1",mlimit:"10",dash:"[]",doff:"0",bmode:"/Normal",CA:"1",ca:"1"}}N.prototype.StartTGroup=function($){this.setGState($,!1);
this._stck.push(this._cont,this._gst);this._cont="";this._gst=z()};N.prototype.EndTGroup=function(){var $={"/Type":"/XObject","/Subtype":"/Form","/Group":{"/Type":"/Group","/S":"/Transparency"},stream:this._cont},g=this._res["/XObject"],y=x($,g,this._xr);
this._gst=this._stck.pop();this._cont=this._stck.pop();this._cont+=y+" Do \n"};N.prototype.StartPage=function($,g,y,b){this._bnds=[$,g,y,b]};
N.prototype.AddAnnot=function($,g){this._annt.push([$,g])};N.prototype.Stroke=function($){if($.CA==0)return;
var g=null;if($.cpth){this._cont+=" q "+D($.cpth)+" W  n  ";g=JSON.stringify(this._gst)}this.setGState($,!0);
this._cont+=" S\n";this._cont+=W(this._gmap,this._res["/ExtGState"]);if($.cpth){this._cont+=" Q ";this._gst=JSON.parse(g)}};
N.prototype.Fill=function($,g){if($.ca==0)return;var y=null;if($.cpth){this._cont+=" q "+D($.cpth)+" W  n  ";
y=JSON.stringify(this._gst)}this.setGState($,!0);this._cont+=" f"+(g?"*":"")+"\n";this._cont+=W(this._gmap,this._res["/ExtGState"]);
if($.cpth){this._cont+=" Q ";this._gst=JSON.parse(y)}};function t($){return""+parseFloat($.toFixed(2))}function M($){return""+parseFloat($.toFixed(3))}function c($){return Math.sqrt(Math.abs($[0]*$[3]-$[1]*$[2]))}function s($){var g=$.map(t).join(" ");
if(g=="1 0 0 1 0 0")return"";return g+" cm "}function h($,g){if($.length!=g.length)return!1;for(var y=0;
y<$.length;y++)if($[y]!=g[y])return!1;return!0}function R($){var g=[[255,216,255],[0,0,0,12,106,80,32,32],[0,0,0,0,48,0,1,0]],y=["/DCTDecode","/JPXDecode","/JBIG2Decode"];
for(var b=0;b<g.length;b++){var f=g[b],E=!0;for(var H=0;H<f.length;H++)E=E&&$[H]==f[H];if(E)return y[b]}}N.prototype.setGState=function($,g){var y=this._gst,b={};
for(var f in $)if(f!="pth"&&f!="cpth")b[f]=typeof $[f]=="string"?$[f]:JSON.stringify($[f]);var E=c($.ctm),H=$.dash.slice(0);
for(var Q=0;Q<H.length;Q++)H[Q]=t(H[Q]*E);var V=this._cont;if(y.lcap!=b.lcap)V+=$.lcap+" J ";if(y.ljoin!=b.ljoin)V+=$.ljoin+" j ";
if(y.lwidth!=b.lwidth)V+=t($.lwidth*E)+" w ";if(y.mlimit!=b.mlimit)V+=t($.mlimit)+" M ";if(y.dash!=b.dash||y.doff!=b.doff)V+="["+H.join(" ")+"] "+$.doff+" d ";
var I=this._res["/ExtGState"];if(y.COLR!=b.COLR)V+=p($.COLR,!1,this._res,this._xr,this._gmap);if(y.colr!=b.colr)V+=p($.colr,!0,this._res,this._xr,this._gmap);
if(y.bmode!=b.bmode){var Z=b.bmode;if(I[Z]==null)I[Z]={"/Type":"/ExtGState","/BM":$.bmode};V+=Z+" gs "}if(y.CA!=b.CA){var Z="/CA"+Math.round(255*b.CA);
if(I[Z]==null)I[Z]={"/Type":"/ExtGState","/CA":$.CA};V+=Z+" gs "}if(y.ca!=b.ca){var Z="/ca"+Math.round(255*b.ca);
if(I[Z]==null)I[Z]={"/Type":"/ExtGState","/ca":$.ca};V+=Z+" gs "}if(g)V+=D($.pth);this._cont=V;this._gst=b};
function p($,g,y,b,f){var E=y["/ExtGState"];if($.length!=null){return $.map(M).join(" ")+" "+(g?"rg":"RG")+" \n"}else{var H=y["/XObject"],Q=y["/Pattern"],V=$,I=r(V,H,b,f),Z="/P"+(Y(Q)+1);
Q[Z]={"/Type":"/Pattern","/PatternType":2,"/Matrix":V.mat,"/Shading":I[0]};var bB="/Pattern "+(g?"cs "+Z+" scn ":"CS "+Z+" SCN ");
if(I[1]){var bN="q   0 g   "+s(V.mat)+"   BX /Sh0 sh EX Q",aq={"/Subtype":"/Form","/BBox":[-32768,32767,32767,-32768],"/Resources":{"/Shading":{"/Sh0":I[1]}},stream:bN},j=x(aq,H,b),at=Z+"m";
E[at]={"/Type":"/ExtGState","/SMask":{"/Type":"/Mask","/S":"/Luminosity","/G":H[j]}};f.smsk="custom";
return at+" gs "+bB}return bB}}function W($,g){if($.smsk=="/None")return"";$.smsk="/None";if(g["/Nmsk"]==null)g["/Nmsk"]={"/Type":"/ExtGState","/SMask":"/None"};
return"/Nmsk gs "}function r($,g,y,b){var f=JSON.stringify([$.typ,$.grad,$.crds]),E=1;if(b[f])return b[f];
for(var H=0;H<$.grad.length;H++)E=Math.min(E,$.grad[H][2]);var Q=b[f]=[],V=n($.grad);for(var H=0;H<2;
H++){var I={"/ShadingType":$.typ=="lin"?2:3,"/ColorSpace":H==0?"/DeviceRGB":"/DeviceGray","/Extend":[!0,!0],"/Function":V[H],"/Coords":$.crds};
Q.push({typ:"ref",ind:y.length});y.push(I);if(E==1)break}return Q}function n($){$=$.slice(0);if($[0][0]!=0)$.unshift(JSON.parse(JSON.stringify($[0])));
if($[$.length-1][0]!=1)$.push(JSON.parse(JSON.stringify($[$.length-1])));$[0][0]=0;$[$.length-1][0]=1;
var g=[],y=[],b=[],f=[],E=K;E($[0],$[1],f,y,b);for(var H=1;H<$.length-1;H++){g.push($[H][0]);E($[H],$[H+1],f,y,b)}return[y.length==1?y[0]:{"/FunctionType":3,"/Encode":f,"/Domain":[0,1],"/Bounds":g,"/Functions":y},g.length==1?g[0]:{"/FunctionType":3,"/Encode":f,"/Domain":[0,1],"/Bounds":g,"/Functions":b}]}function K($,g,y,b,f){var E=$[3];
if(E<.5){E=1-E;var H=$;$=g;g=H;y.push(1,0)}else y.push(0,1);var Q=Math.log(.5)/Math.log(E);b.push({"/FunctionType":2,"/C0":$[1],"/C1":g[1],"/Domain":[0,1],"/N":Q});
f.push({"/FunctionType":2,"/C0":[$[2]],"/C1":[g[2]],"/Domain":[0,1],"/N":Q})}function D($){var g=0,y="",b=t,f=$.crds,H=$.cmds,Q=0,V=0,I=0,Z=0;
for(var bB=0;bB<H.length;bB++){var bN=H[bB];if(bN=="M"){for(var aq=0;aq<2;aq++)y+=b(f[g++])+" ";y+="m "}else if(bN=="L"){for(var aq=0;
aq<2;aq++)y+=b(f[g++])+" ";y+="l "}else if(bN=="Q"){var j=f[g++],at=f[g++],a5=f[g++],bK=f[g++],bZ=[(2*j+I)/3,(2*at+Z)/3,(2*j+a5)/3,(2*at+bK)/3,a5,bK];
for(var aq=0;aq<6;aq++)y+=b(bZ[aq])+" ";y+="c "}else if(bN=="C"){for(var aq=0;aq<6;aq++)y+=b(f[g++])+" ";
y+="c "}else if(bN=="Z"){y+="h "}else throw bN;if(bN=="Z"){I=Q;Z=V}else{I=f[g-2];Z=f[g-1];if(bN=="M"){Q=I;
V=Z}}}return y}N.prototype.PutText=function($,g,y,b){this.setGState($,!1);var f=this.addFont($.font.Tf,b);
this._cont+="q ";if($.cpth)this._cont+=D($.cpth)+" W  n  ";this._cont+=s($.ctm);this._cont+=s($.font.Tm);
this._cont+="BT  "+f+" "+t($.font.Tfs)+" Tf  0 0 Td  (";var E=[];if(b==null){var H=[128,8364,130,8218,131,402,132,8222,133,8230,134,8224,135,8225,136,710,137,8240,138,352,139,8249,140,338,142,381,145,8216,146,8217,147,8220,148,8221,149,8226,150,8211,151,8212,152,732,153,8482,154,353,155,8250,156,339,158,382,159,376];
for(var Q=0;Q<g.length;Q++){var V=g.charCodeAt(Q);if(V>255){var I=H.indexOf(V);E.push(I==-1?32:H[I-1])}else E.push(V)}}else{for(var Q=0;
Q<g.length;Q++){var V=g.charCodeAt(Q);E.push(V&255)}}E=FromPS.makeString(E);for(var Q=0;Q<E.length;Q++)this._cont+=String.fromCharCode(E[Q]);
this._cont+=") Tj  ET ";this._cont+=" Q\n"};N.prototype.PutImage=function($,g,y,b,f){if(g.length==y*b*4&&f==null){var E=y*b,H=new Uint8Array(E),Q=255;
for(var V=0;V<E;V++){H[V]=g[(V<<2)+3];Q&=g[(V<<2)+3]}if(Q!=255)f=H}var I=this.addImage(g,y,b,f);this.setGState($,!1);
this._cont+="q ";if($.cpth){this._cont+=D($.cpth)+" W  n  "}this._cont+=s($.ctm);this._cont+=I+" Do  Q\n"};
N.prototype.ShowPage=function(){w(this._xr,this._cont,this._bnds,this._annt);this._cont="";this._annt=[];
this._gst=z()};N.prototype.Print=function($){};N.prototype.Done=function(){var $=this._res;for(var g in $)if(Object.keys($[g])==0)delete $[g];
this.buffer=B(this._xr)};N.prototype.addImage=function($,g,y,b){var f,E;if(b){E=b;if(b.length==g*y*4){E=new Uint8Array(g*y);
for(var H=0;H<E.length;H++)E[H]=b[(H<<2)+1]}f=this.addImage(E,g,y,null)}var Q=R($),V=$;if($.length==g*y*4){V=new Uint8Array(g*y*3);
for(var H=0;H<$.length;H+=4){var I=3*(H>>2);V[I]=$[H+0];V[I+1]=$[H+1];V[I+2]=$[H+2]}}var Z=this._res["/XObject"],bB=f!=null?1:0;
for(var bN in Z){var aq=this._xr[Z[bN].ind],j=aq["/SMask"],at=j!=null?1:0;if(!h(aq.stream,V)||at+bB==1)continue;
if(at+bB==2&&!h(this._xr[j.ind].stream,E))continue;return bN}var a5={"/Type":"/XObject","/Subtype":"/Image","/BitsPerComponent":8,"/ColorSpace":$.length==g*y||Q=="/DCTDecode"&&X($)&&X($).comps==1?"/DeviceGray":"/DeviceRGB","/Height":y,"/Width":g,stream:V};
if(Q!=null)a5["/Filter"]=R($);if(b){a5["/SMask"]=Z[f]}return x(a5,Z,this._xr)};function x($,g,y){var b="/I"+(Y(g)+1);
g[b]={typ:"ref",ind:y.length};y.push($);return b}function Y($){var g;for(var y in $)g=y;return g==null?0:parseInt(g.slice(2))}function X($){var g=0;
while(g<$.length){while($[g]==255)g++;var y=$[g];g++;if(y==216)continue;if(y==217)break;if(208<=y&&y<=215)continue;
if(y==1)continue;var b=($[g]<<8|$[g+1])-2;g+=2;if(y==192)return{bpp:$[g],w:$[g+1]<<8|$[g+2],h:$[g+3]<<8|$[g+4],comps:$[g+5]};
g+=b}}function U($){var g=$.toLowerCase(),y="Helvetica Helvetica-Bold Helvetica-Oblique Helvetica-BoldOblique Times-Roman Times-Bold Times-Italic Times-BoldItalic".split(" "),b=0;
if(g.indexOf("sans")!=-1)b=0;else if(g.indexOf("serif")!=-1)b=4;var f=g.indexOf("bold")!=-1,E=g.indexOf("italic")!=-1||g.indexOf("oblique")!=-1||g.endsWith("-it");
if(f&&E)b+=3;else if(E)b+=2;else if(f)b+=1;return y[b]}N.prototype.addFont=function($,g){$=U($);$="/"+$;
var y=this._res["/Font"];for(var b in y)if(y[b]["/BaseFont"]==$)return b;var b="/F"+(Y(y)+1),f={"/Type":"/Font","/Subtype":"/Type1","/BaseFont":$,"/Encoding":"/WinAnsiEncoding"};
if(g!=null){var E="/CIDInit /ProcSet findresource begin \t12 dict begin \tbegincmap \t/CIDSystemInfo \t<<  /Registry (Adobe) \t/Ordering (UCS) \t/Supplement 0 \t>> def \t/CMapName /Adobe-Identity-UCS def \t/CMapType 2 def \t1 begincodespacerange \t<0000> <FFFF> \tendcodespacerange \t1 beginbfchar \t<0001> <200B> \tendbfchar \tendcmap \tCMapName currentdict /CMap defineresource pop \tend \tend",H=new Uint8Array(E.length);
for(var Q=0;Q<E.length;Q++)H[Q]=E.charCodeAt(Q);f["/Subtype"]="/TrueType";delete f["/Encoding"];f["/FirstChar"]=0;
f["/Widths"]=[];for(var Q=0;Q<256;Q++)f["/Widths"].push(500);f["/LastChar"]=f["/Widths"].length-1;f["/FontDescriptor"]={"/Ascent":905,"/CapHeight":1010,"/Descent":211,"/Flags":4,"/FontBBox":[-627,-376,2e3,1011],"/FontName":$,"/ItalicAngle":0,"/StemV":80,"/Type":"/FontDescriptor","/FontFile2":{stream:new Uint8Array(g)}}}y[b]=f;
return b};function w($,g,y,b){var f=[];for(var E=0;E<b.length;E++){var H=b[E];$.push({"/Type":"/Annot","/Subtype":"/Link","/F":4,"/Border":[0,0,0],"/Rect":H[0],"/A":{"/Type":"/Action","/S":"/URI","/URI":"("+H[1]+")"}});
f.push({typ:"ref",ind:$.length-1})}var E=$.length;$[2]["/Kids"].push({typ:"ref",ind:E});$[2]["/Count"]++;
$.push({"/Type":"/Page","/Parent":{typ:"ref",ind:2},"/Resources":{typ:"ref",ind:3},"/MediaBox":y,"/Annots":f,"/Contents":{typ:"ref",ind:E+1}});
$.push({stream:g})}function B($){var g={file:new q,off:0},y=u,b=[];y(g,"%PDF-1.1\n");for(var f=1;f<$.length;
f++){b.push(g.off);y(g,f+" 0 obj\n");O(g,$[f],0);y(g,"\nendobj\n")}var H=g.off;y(g,"xref\n");y(g,"0 "+$.length+"\n");
y(g,"0000000000 65535 f \n");for(var f=0;f<b.length;f++){var Q=b[f]+"";while(Q.length<10)Q="0"+Q;y(g,Q+" 00000 n \n")}y(g,"trailer\n");
O(g,{"/Root":{typ:"ref",ind:1},"/Size":$.length},0);y(g,"\nstartxref\n"+H+"\n%%EOF\n");return g.file.data.buffer.slice(0,g.off)}function u($,g){$.file.req($.off,g.length);
for(var y=0;y<g.length;y++)$.file.data[$.off+y]=g.charCodeAt(y);$.off+=g.length}function d($){var g="";
for(var y=0;y<$;y++)g+="    ";return g}function L($,g,y){var b=u;if(!1){}else if(typeof g=="string")b($,g);
else if(typeof g=="number")b($,""+parseFloat(g.toFixed(3)));else if(typeof g=="boolean")b($,""+g);else if(g.typ!=null)b($,g.ind+" 0 R");
else if(g instanceof Array)T($,g,y+1);else if(g instanceof Object)O($,g,y+1);else{console.log(g);throw"e"}}function O($,g,y){var b=u,f=d,H=g.stream;
if(H){if(typeof H=="string"){var Q=new Uint8Array(H.length);for(var V=0;V<H.length;V++)Q[V]=H.charCodeAt(V);
H=Q}if(g["/Filter"]==null){g["/Filter"]="/FlateDecode";H=pako.deflate(H)}}b($,"<<\n");for(var I in g){if(I.charAt(0)!="/")continue;
b($,f(y+1)+I+" ");L($,g[I],y);b($,"\n")}if(H)b($,f(y+1)+"/Length "+H.length+"\n");b($,f(y)+">>");if(H){b($,f(y)+"\nstream\n");
$.file.req($.off,H.length);for(var V=0;V<H.length;V++)$.file.data[$.off+V]=H[V];$.off+=H.length;b($,f(y)+"\nendstream")}}function T($,g,y){var b=u;
b($,"[ ");for(var f=0;f<g.length;f++){L($,g[f],y+1);if(f!=g.length-1)b($," ")}b($," ]")}var q=function(){this.size=16;
this.data=new Uint8Array(16)};q.prototype.req=function($,g){if($+g<=this.size)return;var y=this.size;
while($+g>this.size)this.size*=2;var b=new Uint8Array(this.size);for(var f=0;f<y;f++)b[f]=this.data[f];
this.data=b};return N}();function ToEMF(){this._file={file:new ToEMF.MFile,off:0};this._lstw=0;this._curx=0;
this._curh=0;this._recs=0;this._lenp=0;this._objs={};this._tabl=1;this._stkf=0;this._tclr=0;this._curt={p:-1,b:-1,t:-1};
this._inited=!1}ToEMF.prototype.StartTGroup=function(){};ToEMF.prototype.EndTGroup=function(){};ToEMF.prototype.StartPage=function(N,z,t,M){this._check();
var c=this._file,h=ToEMF.B.writeUint,R=ToEMF.B.writeInt;this._curh=Math.max(this._curh,M*10);if(!this._inited){this._inited=!0;
this._addRec("HEADER",88);ToEMF._writeHeadBox(c,[N,z,t,M]);c.off+=32;ToEMF.B.writeASCII(c.file,c.off," EMF");
c.off+=4;h(c.file,c.off,65536);c.off+=4;this._lenp=c.off;c.off+=4+4+4;c.off+=4+4+4;R(c.file,c.off,1440);
c.off+=4;R(c.file,c.off,900);c.off+=4;R(c.file,c.off,508);c.off+=4;R(c.file,c.off,318);c.off+=4;this._trsf([.1,0,0,.1,0,0]);
this._addRec("SETBKMODE",12);h(c.file,c.off,1);c.off+=4;this._addRec("SETTEXTALIGN",12);h(c.file,c.off,24);
c.off+=4}else{this._curx+=this._lstw;ToEMF._writeHeadBox(c,[0,0,this._curx+t,Math.round(this._curh/10)])}this._lstw=t};
ToEMF.prototype.Stroke=function(N){this._draw(N,1)};ToEMF.prototype.Fill=function(N,z){this._draw(N,2)};
ToEMF.prototype.PutImage=function(N,z,t,M,c){var s=z.length;if((s&3)!=0)s+=4-(s&3);var h=[1,0,0,-1,0,1];
UDOC.M.concat(h,N.ctm);UDOC.M.scale(h,10,10);UDOC.M.scale(h,1,-1);UDOC.M.translate(h,this._curx,this._curh);
this._trsf(h);var p=this._file,W=ToEMF.B.writeUint,r=ToEMF.B.writeInt,n=ToEMF.B.writeUshort,D=8+16+14*4;
this._addRec("STRETCHDIBITS",D+40+s);p.off+=16;r(p.file,p.off,Math.round(0));p.off+=4;r(p.file,p.off,Math.round(0));
p.off+=4;p.off+=8;r(p.file,p.off,t);p.off+=4;r(p.file,p.off,M);p.off+=4;W(p.file,p.off,D);p.off+=4;W(p.file,p.off,40);
p.off+=4;W(p.file,p.off,D+40);p.off+=4;W(p.file,p.off,z.length);p.off+=4;p.off+=4;W(p.file,p.off,13369376);
p.off+=4;r(p.file,p.off,Math.round(1));p.off+=4;r(p.file,p.off,Math.round(1));p.off+=4;r(p.file,p.off,40);
p.off+=4;r(p.file,p.off,t);p.off+=4;r(p.file,p.off,M);p.off+=4;n(p.file,p.off,1);p.off+=2;n(p.file,p.off,32);
p.off+=2;r(p.file,p.off,0);p.off+=4;r(p.file,p.off,z.length);p.off+=4;r(p.file,p.off,3800);p.off+=4;
r(p.file,p.off,3800);p.off+=4;p.off+=8;p.file.req(p.off,z.length);if(z.length==t*M*4){for(var x=0;x<M;
x++)for(var Y=0;Y<t;Y++){var X=x*t+Y<<2,U=p.off+((M-1-x)*t+Y<<2);p.file.data[U]=z[X+2];p.file.data[U+1]=z[X+1];
p.file.data[U+2]=z[X];p.file.data[U+3]=z[X+3]}}else for(var w=0;w<z.length;w++)p.file.data[p.off+w]=z[w];
p.off+=s;UDOC.M.invert(h);this._trsf(h)};ToEMF.prototype.PutText=function(N,z,t){var M=z.length,x;if((M&1)==1)M++;
this._check();var c=this._file,h=ToEMF.B.writeUint,R=ToEMF.B.writeInt,p=ToEMF.B.writeUshort,W=ToEMF.B.writeFloat,r=ToEMF._color(N.colr);
if(r!=this._tclr){this._addRec("SETTEXTCOLOR",12);h(c.file,c.off,r);c.off+=4;this._tclr=r}this._setTool("f",[N.font.Tf,Math.round(N.font.Tfs*10)]);
var n=10*(N.ctm[4]+this._curx),K=this._curh-10*N.ctm[5],D=Math.abs(N.ctm[1])>.05;if(D){x=N.ctm.slice(0);
x[1]*=-1;x[2]*=-1;x[4]=n;x[5]=K;n=K=0;this._trsf(x)}var Y=8+16+12+4*6+16;this._addRec("EXTTEXTOUTW",Y+M*2);
c.off+=16;h(c.file,c.off,2);c.off+=4;W(c.file,c.off,31.25);c.off+=4;W(c.file,c.off,31.25);c.off+=4;R(c.file,c.off,Math.round(n));
c.off+=4;R(c.file,c.off,Math.round(K));c.off+=4;h(c.file,c.off,z.length);c.off+=4;h(c.file,c.off,Y);
c.off+=4;h(c.file,c.off,0);c.off+=4;c.off+=16;h(c.file,c.off,0);c.off+=4;for(var X=0;X<z.length;X++)p(c.file,c.off+X*2,z.charCodeAt(X));
c.off+=2*M;if(D){UDOC.M.invert(x);this._trsf(x)}};ToEMF.prototype.ShowPage=function(){this._check()};
ToEMF.prototype.Done=function(){this._check();var N=this._file,z=ToEMF.B.writeUint;this._addRec("EOF",20);
z(N.file,N.off,0);N.off+=4;z(N.file,N.off,16);N.off+=4;z(N.file,N.off,20);N.off+=4;z(N.file,this._lenp,N.off);
z(N.file,this._lenp+4,this._recs);z(N.file,this._lenp+8,this._tabl);this.buffer=N.file.data.buffer.slice(0,N.off)};
ToEMF.prototype._check=function(){var N=this._file,z=this._stkf;if(z==0)return;if(z==1)this._addRec("STROKEPATH",24);
if(z==2)this._addRec("FILLPATH",24);if(z==3)this._addRec("STROKEANDFILLPATH",24);N.off+=16;this._stkf=0};
ToEMF.prototype._addRec=function(N,z){var t=this._file,M=ToEMF.B.writeUint;this._recs++;M(t.file,t.off,ToEMF.C["EMR_"+N]);
t.off+=4;M(t.file,t.off,z);t.off+=4};ToEMF.prototype._trsf=function(N){var z=this._file,t=ToEMF.B.writeInt;
this._addRec("MODIFYWORLDTRANSFORM",36);for(var M=0;M<N.length;M++){ToEMF.B.writeFloat(z.file,z.off,N[M]);
z.off+=4}t(z.file,z.off,2);z.off+=4};ToEMF._writeHeadBox=function(N,z){var t=N.off;N.off=8;ToEMF._writeBox(N,z);
var M=1/72*25.4*100;ToEMF._writeBox(N,[0,0,Math.round((z[2]-z[0])*M),Math.round((z[3]-z[1])*M)]);N.off=t};
ToEMF._writeBox=function(N,z){for(var t=0;t<4;t++){ToEMF.B.writeInt(N.file,N.off,z[t]);N.off+=4}};ToEMF.prototype._draw=function(N,z){var t=this._file,M=ToEMF.B.writeUint,c=ToEMF.B.writeInt,h=N.pth,R=JSON.stringify(h);
if(this._cpth!=R)this._check();if(z==1)this._setTool("p",[N.COLR,N.lwidth,N.ljoin]);else this._setTool("b",[N.colr]);
if(this._cpth==R){this._stkf+=z}else{var p={M:["MOVETOEX",1],L:["LINETO",1],Q:["POLYBEZIERTO",3],C:["POLYBEZIERTO",3],Z:["CLOSEFIGURE",0]},W=0,r=h.cmds.length;
this._addRec("BEGINPATH",8);for(var n=0;n<r;n++){var K=h.cmds[n],D=p[K],U=1;if(D==null)throw K+" e";
var x=D[1]*2,Y=D[0],X=8+4*x;while(!0){if(n+U<r&&h.cmds[n+U]==K)U++;else break}var w=K=="C"||K=="Q"||K=="L"&&U>1;
if(w){if(K=="L")Y="POLYLINETO";X=8+20+4*x*U}this._addRec(Y,X);if(w){t.off+=16;M(t.file,t.off,U*D[1]);
t.off+=4;n+=U-1}for(var B=0;B<U;B++){var u=h.crds,d=W;if(K=="Q"){var L=u[d-2],T=u[d-1],q=u[d++],$=u[d++],g=u[d++],y=u[d++];
u=[(2*q+L)/3,(2*$+T)/3,(2*q+g)/3,(2*$+y)/3,g,y];d=0;W-=2}for(var b=0;b<x;b+=2){c(t.file,t.off,Math.round(10*(u[d]+this._curx)));
t.off+=4;d++;c(t.file,t.off,Math.round(this._curh-10*u[d]));t.off+=4;d++}W+=x}}this._addRec("ENDPATH",8);
this._cpth=R;this._stkf=z}};ToEMF.prototype._setTool=function(N,z){var t=this._file,M=ToEMF.B.writeUint,c=ToEMF.B.writeInt,h=N+JSON.stringify(z),R=this._objs[h];
if(R==null){R=this._objs[h]=this._tabl;this._tabl++;if(N=="b")this._addRec("CREATEBRUSHINDIRECT",24);
if(N=="p")this._addRec("CREATEPEN",28);if(N=="f")this._addRec("EXTCREATEFONTINDIRECTW",104);M(t.file,t.off,R);
t.off+=4;if(N=="b"||N=="p"){if(N=="p"){M(t.file,t.off,0);t.off+=4;var p=Math.round(z[1]*10);M(t.file,t.off,p);
t.off+=4;M(t.file,t.off,p);t.off+=4}else{M(t.file,t.off,0);t.off+=4}M(t.file,t.off,ToEMF._color(z[0]));
t.off+=4;if(N=="b"){M(t.file,t.off,0);t.off+=4}}if(N=="f"){var W=z[0],r=W.toLowerCase().indexOf("bold")!=-1;
if(W.endsWith("-Bold"))W=W.slice(0,W.length-5);c(t.file,t.off,-z[1]);t.off+=4;t.off+=12;M(t.file,t.off,r?700:400);
t.off+=4;M(t.file,t.off,0);t.off+=4;M(t.file,t.off,262151);t.off+=4;for(var n=0;n<W.length;n++)ToEMF.B.writeUshort(t.file,t.off+n*2,W.charCodeAt(n));
t.off+=64}}if(this._curt[N]!=R){this._addRec("SELECTOBJECT",12);M(t.file,t.off,R);t.off+=4;this._curt[N]=R}};
ToEMF._color=function(N){var z=N.grad;if(z)N=z[Math.floor(z.length/2)][1];var t=Math.round(N[0]*255),M=Math.round(N[1]*255),c=Math.round(N[2]*255);
return c<<16|M<<8|t<<0};ToEMF.B=function(){var N=new Uint8Array(4),z=N.buffer,t=new Int16Array(z),M=new Uint16Array(z),c=new Int32Array(z),s=new Uint32Array(z),h=new Float32Array(z);
return{writeShort:function(R,p,W){t[0]=W;R.req(p,2);var r=R.data;r[p]=N[0];r[p+1]=N[1]},writeUshort:function(R,p,W){M[0]=W;
R.req(p,2);var r=R.data;r[p]=N[0];r[p+1]=N[1]},writeInt:function(R,p,W){c[0]=W;R.req(p,4);var r=R.data;
r[p]=N[0];r[p+1]=N[1];r[p+2]=N[2];r[p+3]=N[3]},writeUint:function(R,p,W){s[0]=W;R.req(p,4);var r=R.data;
r[p]=N[0];r[p+1]=N[1];r[p+2]=N[2];r[p+3]=N[3]},writeFloat:function(R,p,W){h[0]=W;R.req(p,4);var r=R.data;
r[p]=N[0];r[p+1]=N[1];r[p+2]=N[2];r[p+3]=N[3]},writeASCII:function(R,p,W){R.req(p,W.length);for(var r=0;
r<W.length;r++)R.data[p+r]=W.charCodeAt(r)}}}();ToEMF.MFile=function(){this.size=16;this.data=new Uint8Array(16)};
ToEMF.MFile.prototype.req=function(N,z){if(N+z<=this.size)return;var t=this.size;while(N+z>this.size)this.size*=2;
var M=new Uint8Array(this.size);for(var c=0;c<t;c++)M[c]=this.data[c];this.data=M};ToEMF.C={EMR_HEADER:1,EMR_POLYBEZIER:2,EMR_POLYGON:3,EMR_POLYLINE:4,EMR_POLYBEZIERTO:5,EMR_POLYLINETO:6,EMR_POLYPOLYLINE:7,EMR_POLYPOLYGON:8,EMR_SETWINDOWEXTEX:9,EMR_SETWINDOWORGEX:10,EMR_SETVIEWPORTEXTEX:11,EMR_SETVIEWPORTORGEX:12,EMR_SETBRUSHORGEX:13,EMR_EOF:14,EMR_SETPIXELV:15,EMR_SETMAPPERFLAGS:16,EMR_SETMAPMODE:17,EMR_SETBKMODE:18,EMR_SETPOLYFILLMODE:19,EMR_SETROP2:20,EMR_SETSTRETCHBLTMODE:21,EMR_SETTEXTALIGN:22,EMR_SETCOLORADJUSTMENT:23,EMR_SETTEXTCOLOR:24,EMR_SETBKCOLOR:25,EMR_OFFSETCLIPRGN:26,EMR_MOVETOEX:27,EMR_SETMETARGN:28,EMR_EXCLUDECLIPRECT:29,EMR_INTERSECTCLIPRECT:30,EMR_SCALEVIEWPORTEXTEX:31,EMR_SCALEWINDOWEXTEX:32,EMR_SAVEDC:33,EMR_RESTOREDC:34,EMR_SETWORLDTRANSFORM:35,EMR_MODIFYWORLDTRANSFORM:36,EMR_SELECTOBJECT:37,EMR_CREATEPEN:38,EMR_CREATEBRUSHINDIRECT:39,EMR_DELETEOBJECT:40,EMR_ANGLEARC:41,EMR_ELLIPSE:42,EMR_RECTANGLE:43,EMR_ROUNDRECT:44,EMR_ARC:45,EMR_CHORD:46,EMR_PIE:47,EMR_SELECTPALETTE:48,EMR_CREATEPALETTE:49,EMR_SETPALETTEENTRIES:50,EMR_RESIZEPALETTE:51,EMR_REALIZEPALETTE:52,EMR_EXTFLOODFILL:53,EMR_LINETO:54,EMR_ARCTO:55,EMR_POLYDRAW:56,EMR_SETARCDIRECTION:57,EMR_SETMITERLIMIT:58,EMR_BEGINPATH:59,EMR_ENDPATH:60,EMR_CLOSEFIGURE:61,EMR_FILLPATH:62,EMR_STROKEANDFILLPATH:63,EMR_STROKEPATH:64,EMR_FLATTENPATH:65,EMR_WIDENPATH:66,EMR_SELECTCLIPPATH:67,EMR_ABORTPATH:68,EMR_COMMENT:70,EMR_FILLRGN:71,EMR_FRAMERGN:72,EMR_INVERTRGN:73,EMR_PAINTRGN:74,EMR_EXTSELECTCLIPRGN:75,EMR_BITBLT:76,EMR_STRETCHBLT:77,EMR_MASKBLT:78,EMR_PLGBLT:79,EMR_SETDIBITSTODEVICE:80,EMR_STRETCHDIBITS:81,EMR_EXTCREATEFONTINDIRECTW:82,EMR_EXTTEXTOUTA:83,EMR_EXTTEXTOUTW:84,EMR_POLYBEZIER16:85,EMR_POLYGON16:86,EMR_POLYLINE16:87,EMR_POLYBEZIERTO16:88,EMR_POLYLINETO16:89,EMR_POLYPOLYLINE16:90,EMR_POLYPOLYGON16:91,EMR_POLYDRAW16:92,EMR_CREATEMONOBRUSH:93,EMR_CREATEDIBPATTERNBRUSHPT:94,EMR_EXTCREATEPEN:95,EMR_POLYTEXTOUTA:96,EMR_POLYTEXTOUTW:97,EMR_SETICMMODE:98,EMR_CREATECOLORSPACE:99,EMR_SETCOLORSPACE:100,EMR_DELETECOLORSPACE:101,EMR_GLSRECORD:102,EMR_GLSBOUNDEDRECORD:103,EMR_PIXELFORMAT:104,EMR_DRAWESCAPE:105,EMR_EXTESCAPE:106,EMR_SMALLTEXTOUT:108,EMR_FORCEUFIMAPPING:109,EMR_NAMEDESCAPE:110,EMR_COLORCORRECTPALETTE:111,EMR_SETICMPROFILEA:112,EMR_SETICMPROFILEW:113,EMR_ALPHABLEND:114,EMR_SETLAYOUT:115,EMR_TRANSPARENTBLT:116,EMR_GRADIENTFILL:118,EMR_SETLINKEDUFIS:119,EMR_SETTEXTJUSTIFICATION:120,EMR_COLORMATCHTOTARGETW:121,EMR_CREATECOLORSPACEW:122};
ToEMF.K=[];(function(){var N,z,t;N=ToEMF.C;z=ToEMF.K;t=4;for(var M in N)z[N[M]]=M.slice(t)}());var ToDXF=function(){var N;
function z(){this.buffer=null}z.prototype.StartTGroup=function(){};z.prototype.EndTGroup=function(){};
z.prototype.StartPage=function(){if(N==null)N=[0,"SECTION",2,"ENTITIES"]};z.prototype.ShowPage=function(){};
z.prototype.Done=function(){N.push(0,"ENDSEC",0,"EOF","");var t=N.join("\n"),M=new Uint8Array(t.length);
this.buffer=M.buffer;for(var c=0;c<t.length;c++)M[c]=t.charCodeAt(c);N=null};z.prototype.PutImage=function(){};
z.prototype.PutText=function(t,M,c){while(M.endsWith("\n"))M=M.slice(0,M.length-1);N.push(0,"MTEXT");
N.push(40,t.font.Tfs);N.push(10,t.ctm[4],20,t.ctm[5]);N.push(1,M)};z.prototype.Fill=function(t){this.Stroke(t)};
z.prototype.Stroke=function(t){var M=t.pth.cmds,c=t.pth.crds,s=0,h=0,R=0,p=0,W=0;for(var r=0;r<M.length;
r++){var n=M[r];if(n=="M"){R=c[W++];p=c[W++];s=R;h=p}else if(n=="L"||n=="Z"){if(n=="Z"&&R==s&&p==h)continue;
N.push(0,"LINE",10,R,20,p);if(n=="L"){R=c[W++];p=c[W++]}else{R=s;p=h}N.push(11,R,21,p)}else if(n=="C"){N.push(0,"SPLINE");
N.push(210,0,220,0,230,0);N.push(70,8,71,3,72,8,73,4,74,0,42,0,43,0);for(var K=0;K<8;K++)N.push(40,K<4?0:1);
N.push(10,R,20,p);for(var K=0;K<3;K++){R=c[W++];p=c[W++];N.push(10,R,20,p)}}}};return z}();

/* pako 1.0.5 nodeca/pako */
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.pako=t()}}(function(){return function t(e,a,i){function n(s,o){if(!a[s]){if(!e[s]){var l="function"==typeof require&&require;if(!o&&l)return l(s,!0);if(r)return r(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var d=a[s]={exports:{}};e[s][0].call(d.exports,function(t){var a=e[s][1][t];return n(a?a:t)},d,d.exports,t,e,a,i)}return a[s].exports}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)n(i[s]);return n}({1:[function(t,e,a){"use strict";function i(t){if(!(this instanceof i))return new i(t);this.options=l.assign({level:w,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:p,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var a=o.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(a!==b)throw new Error(d[a]);if(e.header&&o.deflateSetHeader(this.strm,e.header),e.dictionary){var n;if(n="string"==typeof e.dictionary?h.string2buf(e.dictionary):"[object ArrayBuffer]"===_.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,a=o.deflateSetDictionary(this.strm,n),a!==b)throw new Error(d[a]);this._dict_set=!0}}function n(t,e){var a=new i(e);if(a.push(t,!0),a.err)throw a.msg||d[a.err];return a.result}function r(t,e){return e=e||{},e.raw=!0,n(t,e)}function s(t,e){return e=e||{},e.gzip=!0,n(t,e)}var o=t("./zlib/deflate"),l=t("./utils/common"),h=t("./utils/strings"),d=t("./zlib/messages"),f=t("./zlib/zstream"),_=Object.prototype.toString,u=0,c=4,b=0,g=1,m=2,w=-1,p=0,v=8;i.prototype.push=function(t,e){var a,i,n=this.strm,r=this.options.chunkSize;if(this.ended)return!1;i=e===~~e?e:e===!0?c:u,"string"==typeof t?n.input=h.string2buf(t):"[object ArrayBuffer]"===_.call(t)?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;do{if(0===n.avail_out&&(n.output=new l.Buf8(r),n.next_out=0,n.avail_out=r),a=o.deflate(n,i),a!==g&&a!==b)return this.onEnd(a),this.ended=!0,!1;0!==n.avail_out&&(0!==n.avail_in||i!==c&&i!==m)||("string"===this.options.to?this.onData(h.buf2binstring(l.shrinkBuf(n.output,n.next_out))):this.onData(l.shrinkBuf(n.output,n.next_out)))}while((n.avail_in>0||0===n.avail_out)&&a!==g);return i===c?(a=o.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===b):i!==m||(this.onEnd(b),n.avail_out=0,!0)},i.prototype.onData=function(t){this.chunks.push(t)},i.prototype.onEnd=function(t){t===b&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},a.Deflate=i,a.deflate=n,a.deflateRaw=r,a.gzip=s},{"./utils/common":3,"./utils/strings":4,"./zlib/deflate":8,"./zlib/messages":13,"./zlib/zstream":15}],2:[function(t,e,a){"use strict";function i(t){if(!(this instanceof i))return new i(t);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0===(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var a=s.inflateInit2(this.strm,e.windowBits);if(a!==h.Z_OK)throw new Error(d[a]);this.header=new _,s.inflateGetHeader(this.strm,this.header)}function n(t,e){var a=new i(e);if(a.push(t,!0),a.err)throw a.msg||d[a.err];return a.result}function r(t,e){return e=e||{},e.raw=!0,n(t,e)}var s=t("./zlib/inflate"),o=t("./utils/common"),l=t("./utils/strings"),h=t("./zlib/constants"),d=t("./zlib/messages"),f=t("./zlib/zstream"),_=t("./zlib/gzheader"),u=Object.prototype.toString;i.prototype.push=function(t,e){var a,i,n,r,d,f,_=this.strm,c=this.options.chunkSize,b=this.options.dictionary,g=!1;if(this.ended)return!1;i=e===~~e?e:e===!0?h.Z_FINISH:h.Z_NO_FLUSH,"string"==typeof t?_.input=l.binstring2buf(t):"[object ArrayBuffer]"===u.call(t)?_.input=new Uint8Array(t):_.input=t,_.next_in=0,_.avail_in=_.input.length;do{if(0===_.avail_out&&(_.output=new o.Buf8(c),_.next_out=0,_.avail_out=c),a=s.inflate(_,h.Z_NO_FLUSH),a===h.Z_NEED_DICT&&b&&(f="string"==typeof b?l.string2buf(b):"[object ArrayBuffer]"===u.call(b)?new Uint8Array(b):b,a=s.inflateSetDictionary(this.strm,f)),a===h.Z_BUF_ERROR&&g===!0&&(a=h.Z_OK,g=!1),a!==h.Z_STREAM_END&&a!==h.Z_OK)return this.onEnd(a),this.ended=!0,!1;_.next_out&&(0!==_.avail_out&&a!==h.Z_STREAM_END&&(0!==_.avail_in||i!==h.Z_FINISH&&i!==h.Z_SYNC_FLUSH)||("string"===this.options.to?(n=l.utf8border(_.output,_.next_out),r=_.next_out-n,d=l.buf2string(_.output,n),_.next_out=r,_.avail_out=c-r,r&&o.arraySet(_.output,_.output,n,r,0),this.onData(d)):this.onData(o.shrinkBuf(_.output,_.next_out)))),0===_.avail_in&&0===_.avail_out&&(g=!0)}while((_.avail_in>0||0===_.avail_out)&&a!==h.Z_STREAM_END);return a===h.Z_STREAM_END&&(i=h.Z_FINISH),i===h.Z_FINISH?(a=s.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===h.Z_OK):i!==h.Z_SYNC_FLUSH||(this.onEnd(h.Z_OK),_.avail_out=0,!0)},i.prototype.onData=function(t){this.chunks.push(t)},i.prototype.onEnd=function(t){t===h.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},a.Inflate=i,a.inflate=n,a.inflateRaw=r,a.ungzip=n},{"./utils/common":3,"./utils/strings":4,"./zlib/constants":6,"./zlib/gzheader":9,"./zlib/inflate":11,"./zlib/messages":13,"./zlib/zstream":15}],3:[function(t,e,a){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;a.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var a=e.shift();if(a){if("object"!=typeof a)throw new TypeError(a+"must be non-object");for(var i in a)a.hasOwnProperty(i)&&(t[i]=a[i])}}return t},a.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var n={arraySet:function(t,e,a,i,n){if(e.subarray&&t.subarray)return void t.set(e.subarray(a,a+i),n);for(var r=0;r<i;r++)t[n+r]=e[a+r]},flattenChunks:function(t){var e,a,i,n,r,s;for(i=0,e=0,a=t.length;e<a;e++)i+=t[e].length;for(s=new Uint8Array(i),n=0,e=0,a=t.length;e<a;e++)r=t[e],s.set(r,n),n+=r.length;return s}},r={arraySet:function(t,e,a,i,n){for(var r=0;r<i;r++)t[n+r]=e[a+r]},flattenChunks:function(t){return[].concat.apply([],t)}};a.setTyped=function(t){t?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,n)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,r))},a.setTyped(i)},{}],4:[function(t,e,a){"use strict";function i(t,e){if(e<65537&&(t.subarray&&s||!t.subarray&&r))return String.fromCharCode.apply(null,n.shrinkBuf(t,e));for(var a="",i=0;i<e;i++)a+=String.fromCharCode(t[i]);return a}var n=t("./common"),r=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(t){r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){s=!1}for(var o=new n.Buf8(256),l=0;l<256;l++)o[l]=l>=252?6:l>=248?5:l>=240?4:l>=224?3:l>=192?2:1;o[254]=o[254]=1,a.string2buf=function(t){var e,a,i,r,s,o=t.length,l=0;for(r=0;r<o;r++)a=t.charCodeAt(r),55296===(64512&a)&&r+1<o&&(i=t.charCodeAt(r+1),56320===(64512&i)&&(a=65536+(a-55296<<10)+(i-56320),r++)),l+=a<128?1:a<2048?2:a<65536?3:4;for(e=new n.Buf8(l),s=0,r=0;s<l;r++)a=t.charCodeAt(r),55296===(64512&a)&&r+1<o&&(i=t.charCodeAt(r+1),56320===(64512&i)&&(a=65536+(a-55296<<10)+(i-56320),r++)),a<128?e[s++]=a:a<2048?(e[s++]=192|a>>>6,e[s++]=128|63&a):a<65536?(e[s++]=224|a>>>12,e[s++]=128|a>>>6&63,e[s++]=128|63&a):(e[s++]=240|a>>>18,e[s++]=128|a>>>12&63,e[s++]=128|a>>>6&63,e[s++]=128|63&a);return e},a.buf2binstring=function(t){return i(t,t.length)},a.binstring2buf=function(t){for(var e=new n.Buf8(t.length),a=0,i=e.length;a<i;a++)e[a]=t.charCodeAt(a);return e},a.buf2string=function(t,e){var a,n,r,s,l=e||t.length,h=new Array(2*l);for(n=0,a=0;a<l;)if(r=t[a++],r<128)h[n++]=r;else if(s=o[r],s>4)h[n++]=65533,a+=s-1;else{for(r&=2===s?31:3===s?15:7;s>1&&a<l;)r=r<<6|63&t[a++],s--;s>1?h[n++]=65533:r<65536?h[n++]=r:(r-=65536,h[n++]=55296|r>>10&1023,h[n++]=56320|1023&r)}return i(h,n)},a.utf8border=function(t,e){var a;for(e=e||t.length,e>t.length&&(e=t.length),a=e-1;a>=0&&128===(192&t[a]);)a--;return a<0?e:0===a?e:a+o[t[a]]>e?a:e}},{"./common":3}],5:[function(t,e,a){"use strict";function i(t,e,a,i){for(var n=65535&t|0,r=t>>>16&65535|0,s=0;0!==a;){s=a>2e3?2e3:a,a-=s;do n=n+e[i++]|0,r=r+n|0;while(--s);n%=65521,r%=65521}return n|r<<16|0}e.exports=i},{}],6:[function(t,e,a){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],7:[function(t,e,a){"use strict";function i(){for(var t,e=[],a=0;a<256;a++){t=a;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[a]=t}return e}function n(t,e,a,i){var n=r,s=i+a;t^=-1;for(var o=i;o<s;o++)t=t>>>8^n[255&(t^e[o])];return t^-1}var r=i();e.exports=n},{}],8:[function(t,e,a){"use strict";function i(t,e){return t.msg=D[e],e}function n(t){return(t<<1)-(t>4?9:0)}function r(t){for(var e=t.length;--e>=0;)t[e]=0}function s(t){var e=t.state,a=e.pending;a>t.avail_out&&(a=t.avail_out),0!==a&&(R.arraySet(t.output,e.pending_buf,e.pending_out,a,t.next_out),t.next_out+=a,e.pending_out+=a,t.total_out+=a,t.avail_out-=a,e.pending-=a,0===e.pending&&(e.pending_out=0))}function o(t,e){C._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,s(t.strm)}function l(t,e){t.pending_buf[t.pending++]=e}function h(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function d(t,e,a,i){var n=t.avail_in;return n>i&&(n=i),0===n?0:(t.avail_in-=n,R.arraySet(e,t.input,t.next_in,n,a),1===t.state.wrap?t.adler=N(t.adler,e,n,a):2===t.state.wrap&&(t.adler=O(t.adler,e,n,a)),t.next_in+=n,t.total_in+=n,n)}function f(t,e){var a,i,n=t.max_chain_length,r=t.strstart,s=t.prev_length,o=t.nice_match,l=t.strstart>t.w_size-ft?t.strstart-(t.w_size-ft):0,h=t.window,d=t.w_mask,f=t.prev,_=t.strstart+dt,u=h[r+s-1],c=h[r+s];t.prev_length>=t.good_match&&(n>>=2),o>t.lookahead&&(o=t.lookahead);do if(a=e,h[a+s]===c&&h[a+s-1]===u&&h[a]===h[r]&&h[++a]===h[r+1]){r+=2,a++;do;while(h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&r<_);if(i=dt-(_-r),r=_-dt,i>s){if(t.match_start=e,s=i,i>=o)break;u=h[r+s-1],c=h[r+s]}}while((e=f[e&d])>l&&0!==--n);return s<=t.lookahead?s:t.lookahead}function _(t){var e,a,i,n,r,s=t.w_size;do{if(n=t.window_size-t.lookahead-t.strstart,t.strstart>=s+(s-ft)){R.arraySet(t.window,t.window,s,s,0),t.match_start-=s,t.strstart-=s,t.block_start-=s,a=t.hash_size,e=a;do i=t.head[--e],t.head[e]=i>=s?i-s:0;while(--a);a=s,e=a;do i=t.prev[--e],t.prev[e]=i>=s?i-s:0;while(--a);n+=s}if(0===t.strm.avail_in)break;if(a=d(t.strm,t.window,t.strstart+t.lookahead,n),t.lookahead+=a,t.lookahead+t.insert>=ht)for(r=t.strstart-t.insert,t.ins_h=t.window[r],t.ins_h=(t.ins_h<<t.hash_shift^t.window[r+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[r+ht-1])&t.hash_mask,t.prev[r&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=r,r++,t.insert--,!(t.lookahead+t.insert<ht)););}while(t.lookahead<ft&&0!==t.strm.avail_in)}function u(t,e){var a=65535;for(a>t.pending_buf_size-5&&(a=t.pending_buf_size-5);;){if(t.lookahead<=1){if(_(t),0===t.lookahead&&e===I)return vt;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var i=t.block_start+a;if((0===t.strstart||t.strstart>=i)&&(t.lookahead=t.strstart-i,t.strstart=i,o(t,!1),0===t.strm.avail_out))return vt;if(t.strstart-t.block_start>=t.w_size-ft&&(o(t,!1),0===t.strm.avail_out))return vt}return t.insert=0,e===F?(o(t,!0),0===t.strm.avail_out?yt:xt):t.strstart>t.block_start&&(o(t,!1),0===t.strm.avail_out)?vt:vt}function c(t,e){for(var a,i;;){if(t.lookahead<ft){if(_(t),t.lookahead<ft&&e===I)return vt;if(0===t.lookahead)break}if(a=0,t.lookahead>=ht&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+ht-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==a&&t.strstart-a<=t.w_size-ft&&(t.match_length=f(t,a)),t.match_length>=ht)if(i=C._tr_tally(t,t.strstart-t.match_start,t.match_length-ht),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=ht){t.match_length--;do t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+ht-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(0!==--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else i=C._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(o(t,!1),0===t.strm.avail_out))return vt}return t.insert=t.strstart<ht-1?t.strstart:ht-1,e===F?(o(t,!0),0===t.strm.avail_out?yt:xt):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?vt:kt}function b(t,e){for(var a,i,n;;){if(t.lookahead<ft){if(_(t),t.lookahead<ft&&e===I)return vt;if(0===t.lookahead)break}if(a=0,t.lookahead>=ht&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+ht-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=ht-1,0!==a&&t.prev_length<t.max_lazy_match&&t.strstart-a<=t.w_size-ft&&(t.match_length=f(t,a),t.match_length<=5&&(t.strategy===q||t.match_length===ht&&t.strstart-t.match_start>4096)&&(t.match_length=ht-1)),t.prev_length>=ht&&t.match_length<=t.prev_length){n=t.strstart+t.lookahead-ht,i=C._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-ht),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=n&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+ht-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(0!==--t.prev_length);if(t.match_available=0,t.match_length=ht-1,t.strstart++,i&&(o(t,!1),0===t.strm.avail_out))return vt}else if(t.match_available){if(i=C._tr_tally(t,0,t.window[t.strstart-1]),i&&o(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return vt}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=C._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<ht-1?t.strstart:ht-1,e===F?(o(t,!0),0===t.strm.avail_out?yt:xt):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?vt:kt}function g(t,e){for(var a,i,n,r,s=t.window;;){if(t.lookahead<=dt){if(_(t),t.lookahead<=dt&&e===I)return vt;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=ht&&t.strstart>0&&(n=t.strstart-1,i=s[n],i===s[++n]&&i===s[++n]&&i===s[++n])){r=t.strstart+dt;do;while(i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&n<r);t.match_length=dt-(r-n),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=ht?(a=C._tr_tally(t,1,t.match_length-ht),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(a=C._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),a&&(o(t,!1),0===t.strm.avail_out))return vt}return t.insert=0,e===F?(o(t,!0),0===t.strm.avail_out?yt:xt):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?vt:kt}function m(t,e){for(var a;;){if(0===t.lookahead&&(_(t),0===t.lookahead)){if(e===I)return vt;break}if(t.match_length=0,a=C._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,a&&(o(t,!1),0===t.strm.avail_out))return vt}return t.insert=0,e===F?(o(t,!0),0===t.strm.avail_out?yt:xt):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?vt:kt}function w(t,e,a,i,n){this.good_length=t,this.max_lazy=e,this.nice_length=a,this.max_chain=i,this.func=n}function p(t){t.window_size=2*t.w_size,r(t.head),t.max_lazy_match=Z[t.level].max_lazy,t.good_match=Z[t.level].good_length,t.nice_match=Z[t.level].nice_length,t.max_chain_length=Z[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=ht-1,t.match_available=0,t.ins_h=0}function v(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=V,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new R.Buf16(2*ot),this.dyn_dtree=new R.Buf16(2*(2*rt+1)),this.bl_tree=new R.Buf16(2*(2*st+1)),r(this.dyn_ltree),r(this.dyn_dtree),r(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new R.Buf16(lt+1),this.heap=new R.Buf16(2*nt+1),r(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new R.Buf16(2*nt+1),r(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function k(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=Q,e=t.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?ut:wt,t.adler=2===e.wrap?0:1,e.last_flush=I,C._tr_init(e),H):i(t,K)}function y(t){var e=k(t);return e===H&&p(t.state),e}function x(t,e){return t&&t.state?2!==t.state.wrap?K:(t.state.gzhead=e,H):K}function z(t,e,a,n,r,s){if(!t)return K;var o=1;if(e===Y&&(e=6),n<0?(o=0,n=-n):n>15&&(o=2,n-=16),r<1||r>$||a!==V||n<8||n>15||e<0||e>9||s<0||s>W)return i(t,K);8===n&&(n=9);var l=new v;return t.state=l,l.strm=t,l.wrap=o,l.gzhead=null,l.w_bits=n,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=r+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+ht-1)/ht),l.window=new R.Buf8(2*l.w_size),l.head=new R.Buf16(l.hash_size),l.prev=new R.Buf16(l.w_size),l.lit_bufsize=1<<r+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new R.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=e,l.strategy=s,l.method=a,y(t)}function B(t,e){return z(t,e,V,tt,et,J)}function S(t,e){var a,o,d,f;if(!t||!t.state||e>L||e<0)return t?i(t,K):K;if(o=t.state,!t.output||!t.input&&0!==t.avail_in||o.status===pt&&e!==F)return i(t,0===t.avail_out?P:K);if(o.strm=t,a=o.last_flush,o.last_flush=e,o.status===ut)if(2===o.wrap)t.adler=0,l(o,31),l(o,139),l(o,8),o.gzhead?(l(o,(o.gzhead.text?1:0)+(o.gzhead.hcrc?2:0)+(o.gzhead.extra?4:0)+(o.gzhead.name?8:0)+(o.gzhead.comment?16:0)),l(o,255&o.gzhead.time),l(o,o.gzhead.time>>8&255),l(o,o.gzhead.time>>16&255),l(o,o.gzhead.time>>24&255),l(o,9===o.level?2:o.strategy>=G||o.level<2?4:0),l(o,255&o.gzhead.os),o.gzhead.extra&&o.gzhead.extra.length&&(l(o,255&o.gzhead.extra.length),l(o,o.gzhead.extra.length>>8&255)),o.gzhead.hcrc&&(t.adler=O(t.adler,o.pending_buf,o.pending,0)),o.gzindex=0,o.status=ct):(l(o,0),l(o,0),l(o,0),l(o,0),l(o,0),l(o,9===o.level?2:o.strategy>=G||o.level<2?4:0),l(o,zt),o.status=wt);else{var _=V+(o.w_bits-8<<4)<<8,u=-1;u=o.strategy>=G||o.level<2?0:o.level<6?1:6===o.level?2:3,_|=u<<6,0!==o.strstart&&(_|=_t),_+=31-_%31,o.status=wt,h(o,_),0!==o.strstart&&(h(o,t.adler>>>16),h(o,65535&t.adler)),t.adler=1}if(o.status===ct)if(o.gzhead.extra){for(d=o.pending;o.gzindex<(65535&o.gzhead.extra.length)&&(o.pending!==o.pending_buf_size||(o.gzhead.hcrc&&o.pending>d&&(t.adler=O(t.adler,o.pending_buf,o.pending-d,d)),s(t),d=o.pending,o.pending!==o.pending_buf_size));)l(o,255&o.gzhead.extra[o.gzindex]),o.gzindex++;o.gzhead.hcrc&&o.pending>d&&(t.adler=O(t.adler,o.pending_buf,o.pending-d,d)),o.gzindex===o.gzhead.extra.length&&(o.gzindex=0,o.status=bt)}else o.status=bt;if(o.status===bt)if(o.gzhead.name){d=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>d&&(t.adler=O(t.adler,o.pending_buf,o.pending-d,d)),s(t),d=o.pending,o.pending===o.pending_buf_size)){f=1;break}f=o.gzindex<o.gzhead.name.length?255&o.gzhead.name.charCodeAt(o.gzindex++):0,l(o,f)}while(0!==f);o.gzhead.hcrc&&o.pending>d&&(t.adler=O(t.adler,o.pending_buf,o.pending-d,d)),0===f&&(o.gzindex=0,o.status=gt)}else o.status=gt;if(o.status===gt)if(o.gzhead.comment){d=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>d&&(t.adler=O(t.adler,o.pending_buf,o.pending-d,d)),s(t),d=o.pending,o.pending===o.pending_buf_size)){f=1;break}f=o.gzindex<o.gzhead.comment.length?255&o.gzhead.comment.charCodeAt(o.gzindex++):0,l(o,f)}while(0!==f);o.gzhead.hcrc&&o.pending>d&&(t.adler=O(t.adler,o.pending_buf,o.pending-d,d)),0===f&&(o.status=mt)}else o.status=mt;if(o.status===mt&&(o.gzhead.hcrc?(o.pending+2>o.pending_buf_size&&s(t),o.pending+2<=o.pending_buf_size&&(l(o,255&t.adler),l(o,t.adler>>8&255),t.adler=0,o.status=wt)):o.status=wt),0!==o.pending){if(s(t),0===t.avail_out)return o.last_flush=-1,H}else if(0===t.avail_in&&n(e)<=n(a)&&e!==F)return i(t,P);if(o.status===pt&&0!==t.avail_in)return i(t,P);if(0!==t.avail_in||0!==o.lookahead||e!==I&&o.status!==pt){var c=o.strategy===G?m(o,e):o.strategy===X?g(o,e):Z[o.level].func(o,e);if(c!==yt&&c!==xt||(o.status=pt),c===vt||c===yt)return 0===t.avail_out&&(o.last_flush=-1),H;if(c===kt&&(e===U?C._tr_align(o):e!==L&&(C._tr_stored_block(o,0,0,!1),e===T&&(r(o.head),0===o.lookahead&&(o.strstart=0,o.block_start=0,o.insert=0))),s(t),0===t.avail_out))return o.last_flush=-1,H}return e!==F?H:o.wrap<=0?j:(2===o.wrap?(l(o,255&t.adler),l(o,t.adler>>8&255),l(o,t.adler>>16&255),l(o,t.adler>>24&255),l(o,255&t.total_in),l(o,t.total_in>>8&255),l(o,t.total_in>>16&255),l(o,t.total_in>>24&255)):(h(o,t.adler>>>16),h(o,65535&t.adler)),s(t),o.wrap>0&&(o.wrap=-o.wrap),0!==o.pending?H:j)}function E(t){var e;return t&&t.state?(e=t.state.status,e!==ut&&e!==ct&&e!==bt&&e!==gt&&e!==mt&&e!==wt&&e!==pt?i(t,K):(t.state=null,e===wt?i(t,M):H)):K}function A(t,e){var a,i,n,s,o,l,h,d,f=e.length;if(!t||!t.state)return K;if(a=t.state,s=a.wrap,2===s||1===s&&a.status!==ut||a.lookahead)return K;for(1===s&&(t.adler=N(t.adler,e,f,0)),a.wrap=0,f>=a.w_size&&(0===s&&(r(a.head),a.strstart=0,a.block_start=0,a.insert=0),d=new R.Buf8(a.w_size),R.arraySet(d,e,f-a.w_size,a.w_size,0),e=d,f=a.w_size),o=t.avail_in,l=t.next_in,h=t.input,t.avail_in=f,t.next_in=0,t.input=e,_(a);a.lookahead>=ht;){i=a.strstart,n=a.lookahead-(ht-1);do a.ins_h=(a.ins_h<<a.hash_shift^a.window[i+ht-1])&a.hash_mask,a.prev[i&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=i,i++;while(--n);a.strstart=i,a.lookahead=ht-1,_(a)}return a.strstart+=a.lookahead,a.block_start=a.strstart,a.insert=a.lookahead,a.lookahead=0,a.match_length=a.prev_length=ht-1,a.match_available=0,t.next_in=l,t.input=h,t.avail_in=o,a.wrap=s,H}var Z,R=t("../utils/common"),C=t("./trees"),N=t("./adler32"),O=t("./crc32"),D=t("./messages"),I=0,U=1,T=3,F=4,L=5,H=0,j=1,K=-2,M=-3,P=-5,Y=-1,q=1,G=2,X=3,W=4,J=0,Q=2,V=8,$=9,tt=15,et=8,at=29,it=256,nt=it+1+at,rt=30,st=19,ot=2*nt+1,lt=15,ht=3,dt=258,ft=dt+ht+1,_t=32,ut=42,ct=69,bt=73,gt=91,mt=103,wt=113,pt=666,vt=1,kt=2,yt=3,xt=4,zt=3;Z=[new w(0,0,0,0,u),new w(4,4,8,4,c),new w(4,5,16,8,c),new w(4,6,32,32,c),new w(4,4,16,16,b),new w(8,16,32,32,b),new w(8,16,128,128,b),new w(8,32,128,256,b),new w(32,128,258,1024,b),new w(32,258,258,4096,b)],a.deflateInit=B,a.deflateInit2=z,a.deflateReset=y,a.deflateResetKeep=k,a.deflateSetHeader=x,a.deflate=S,a.deflateEnd=E,a.deflateSetDictionary=A,a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":3,"./adler32":5,"./crc32":7,"./messages":13,"./trees":14}],9:[function(t,e,a){"use strict";function i(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}e.exports=i},{}],10:[function(t,e,a){"use strict";var i=30,n=12;e.exports=function(t,e){var a,r,s,o,l,h,d,f,_,u,c,b,g,m,w,p,v,k,y,x,z,B,S,E,A;a=t.state,r=t.next_in,E=t.input,s=r+(t.avail_in-5),o=t.next_out,A=t.output,l=o-(e-t.avail_out),h=o+(t.avail_out-257),d=a.dmax,f=a.wsize,_=a.whave,u=a.wnext,c=a.window,b=a.hold,g=a.bits,m=a.lencode,w=a.distcode,p=(1<<a.lenbits)-1,v=(1<<a.distbits)-1;t:do{g<15&&(b+=E[r++]<<g,g+=8,b+=E[r++]<<g,g+=8),k=m[b&p];e:for(;;){if(y=k>>>24,b>>>=y,g-=y,y=k>>>16&255,0===y)A[o++]=65535&k;else{if(!(16&y)){if(0===(64&y)){k=m[(65535&k)+(b&(1<<y)-1)];continue e}if(32&y){a.mode=n;break t}t.msg="invalid literal/length code",a.mode=i;break t}x=65535&k,y&=15,y&&(g<y&&(b+=E[r++]<<g,g+=8),x+=b&(1<<y)-1,b>>>=y,g-=y),g<15&&(b+=E[r++]<<g,g+=8,b+=E[r++]<<g,g+=8),k=w[b&v];a:for(;;){if(y=k>>>24,b>>>=y,g-=y,y=k>>>16&255,!(16&y)){if(0===(64&y)){k=w[(65535&k)+(b&(1<<y)-1)];continue a}t.msg="invalid distance code",a.mode=i;break t}if(z=65535&k,y&=15,g<y&&(b+=E[r++]<<g,g+=8,g<y&&(b+=E[r++]<<g,g+=8)),z+=b&(1<<y)-1,z>d){t.msg="invalid distance too far back",a.mode=i;break t}if(b>>>=y,g-=y,y=o-l,z>y){if(y=z-y,y>_&&a.sane){t.msg="invalid distance too far back",a.mode=i;break t}if(B=0,S=c,0===u){if(B+=f-y,y<x){x-=y;do A[o++]=c[B++];while(--y);B=o-z,S=A}}else if(u<y){if(B+=f+u-y,y-=u,y<x){x-=y;do A[o++]=c[B++];while(--y);if(B=0,u<x){y=u,x-=y;do A[o++]=c[B++];while(--y);B=o-z,S=A}}}else if(B+=u-y,y<x){x-=y;do A[o++]=c[B++];while(--y);B=o-z,S=A}for(;x>2;)A[o++]=S[B++],A[o++]=S[B++],A[o++]=S[B++],x-=3;x&&(A[o++]=S[B++],x>1&&(A[o++]=S[B++]))}else{B=o-z;do A[o++]=A[B++],A[o++]=A[B++],A[o++]=A[B++],x-=3;while(x>2);x&&(A[o++]=A[B++],x>1&&(A[o++]=A[B++]))}break}}break}}while(r<s&&o<h);x=g>>3,r-=x,g-=x<<3,b&=(1<<g)-1,t.next_in=r,t.next_out=o,t.avail_in=r<s?5+(s-r):5-(r-s),t.avail_out=o<h?257+(h-o):257-(o-h),a.hold=b,a.bits=g}},{}],11:[function(t,e,a){"use strict";function i(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function n(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new w.Buf16(320),this.work=new w.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function r(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=T,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new w.Buf32(bt),e.distcode=e.distdyn=new w.Buf32(gt),e.sane=1,e.back=-1,Z):N}function s(t){var e;return t&&t.state?(e=t.state,e.wsize=0,e.whave=0,e.wnext=0,r(t)):N}function o(t,e){var a,i;return t&&t.state?(i=t.state,e<0?(a=0,e=-e):(a=(e>>4)+1,e<48&&(e&=15)),e&&(e<8||e>15)?N:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=a,i.wbits=e,s(t))):N}function l(t,e){var a,i;return t?(i=new n,t.state=i,i.window=null,a=o(t,e),a!==Z&&(t.state=null),a):N}function h(t){return l(t,wt)}function d(t){if(pt){var e;for(g=new w.Buf32(512),m=new w.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(y(z,t.lens,0,288,g,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;y(B,t.lens,0,32,m,0,t.work,{bits:5}),pt=!1}t.lencode=g,t.lenbits=9,t.distcode=m,t.distbits=5}function f(t,e,a,i){var n,r=t.state;return null===r.window&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new w.Buf8(r.wsize)),i>=r.wsize?(w.arraySet(r.window,e,a-r.wsize,r.wsize,0),r.wnext=0,r.whave=r.wsize):(n=r.wsize-r.wnext,n>i&&(n=i),w.arraySet(r.window,e,a-i,n,r.wnext),i-=n,i?(w.arraySet(r.window,e,a-i,i,0),r.wnext=i,r.whave=r.wsize):(r.wnext+=n,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=n))),0}function _(t,e){var a,n,r,s,o,l,h,_,u,c,b,g,m,bt,gt,mt,wt,pt,vt,kt,yt,xt,zt,Bt,St=0,Et=new w.Buf8(4),At=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return N;a=t.state,a.mode===X&&(a.mode=W),o=t.next_out,r=t.output,h=t.avail_out,s=t.next_in,n=t.input,l=t.avail_in,_=a.hold,u=a.bits,c=l,b=h,xt=Z;t:for(;;)switch(a.mode){case T:if(0===a.wrap){a.mode=W;break}for(;u<16;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}if(2&a.wrap&&35615===_){a.check=0,Et[0]=255&_,Et[1]=_>>>8&255,a.check=v(a.check,Et,2,0),_=0,u=0,a.mode=F;break}if(a.flags=0,a.head&&(a.head.done=!1),!(1&a.wrap)||(((255&_)<<8)+(_>>8))%31){t.msg="incorrect header check",a.mode=_t;break}if((15&_)!==U){t.msg="unknown compression method",a.mode=_t;break}if(_>>>=4,u-=4,yt=(15&_)+8,0===a.wbits)a.wbits=yt;else if(yt>a.wbits){t.msg="invalid window size",a.mode=_t;break}a.dmax=1<<yt,t.adler=a.check=1,a.mode=512&_?q:X,_=0,u=0;break;case F:for(;u<16;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}if(a.flags=_,(255&a.flags)!==U){t.msg="unknown compression method",a.mode=_t;break}if(57344&a.flags){t.msg="unknown header flags set",a.mode=_t;break}a.head&&(a.head.text=_>>8&1),512&a.flags&&(Et[0]=255&_,Et[1]=_>>>8&255,a.check=v(a.check,Et,2,0)),_=0,u=0,a.mode=L;case L:for(;u<32;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}a.head&&(a.head.time=_),512&a.flags&&(Et[0]=255&_,Et[1]=_>>>8&255,Et[2]=_>>>16&255,Et[3]=_>>>24&255,a.check=v(a.check,Et,4,0)),_=0,u=0,a.mode=H;case H:for(;u<16;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}a.head&&(a.head.xflags=255&_,a.head.os=_>>8),512&a.flags&&(Et[0]=255&_,Et[1]=_>>>8&255,a.check=v(a.check,Et,2,0)),_=0,u=0,a.mode=j;case j:if(1024&a.flags){for(;u<16;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}a.length=_,a.head&&(a.head.extra_len=_),512&a.flags&&(Et[0]=255&_,Et[1]=_>>>8&255,a.check=v(a.check,Et,2,0)),_=0,u=0}else a.head&&(a.head.extra=null);a.mode=K;case K:if(1024&a.flags&&(g=a.length,g>l&&(g=l),g&&(a.head&&(yt=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Array(a.head.extra_len)),w.arraySet(a.head.extra,n,s,g,yt)),512&a.flags&&(a.check=v(a.check,n,g,s)),l-=g,s+=g,a.length-=g),a.length))break t;a.length=0,a.mode=M;case M:if(2048&a.flags){if(0===l)break t;g=0;do yt=n[s+g++],a.head&&yt&&a.length<65536&&(a.head.name+=String.fromCharCode(yt));while(yt&&g<l);if(512&a.flags&&(a.check=v(a.check,n,g,s)),l-=g,s+=g,yt)break t}else a.head&&(a.head.name=null);a.length=0,a.mode=P;case P:if(4096&a.flags){if(0===l)break t;g=0;do yt=n[s+g++],a.head&&yt&&a.length<65536&&(a.head.comment+=String.fromCharCode(yt));while(yt&&g<l);if(512&a.flags&&(a.check=v(a.check,n,g,s)),l-=g,s+=g,yt)break t}else a.head&&(a.head.comment=null);a.mode=Y;case Y:if(512&a.flags){for(;u<16;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}if(_!==(65535&a.check)){t.msg="header crc mismatch",a.mode=_t;break}_=0,u=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),t.adler=a.check=0,a.mode=X;break;case q:for(;u<32;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}t.adler=a.check=i(_),_=0,u=0,a.mode=G;case G:if(0===a.havedict)return t.next_out=o,t.avail_out=h,t.next_in=s,t.avail_in=l,a.hold=_,a.bits=u,C;t.adler=a.check=1,a.mode=X;case X:if(e===E||e===A)break t;case W:if(a.last){_>>>=7&u,u-=7&u,a.mode=ht;break}for(;u<3;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}switch(a.last=1&_,_>>>=1,u-=1,3&_){case 0:a.mode=J;break;case 1:if(d(a),a.mode=at,e===A){_>>>=2,u-=2;break t}break;case 2:a.mode=$;break;case 3:t.msg="invalid block type",a.mode=_t}_>>>=2,u-=2;break;case J:for(_>>>=7&u,u-=7&u;u<32;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}if((65535&_)!==(_>>>16^65535)){t.msg="invalid stored block lengths",a.mode=_t;break}if(a.length=65535&_,_=0,u=0,a.mode=Q,e===A)break t;case Q:a.mode=V;case V:if(g=a.length){if(g>l&&(g=l),g>h&&(g=h),0===g)break t;w.arraySet(r,n,s,g,o),l-=g,s+=g,h-=g,o+=g,a.length-=g;break}a.mode=X;break;case $:
for(;u<14;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}if(a.nlen=(31&_)+257,_>>>=5,u-=5,a.ndist=(31&_)+1,_>>>=5,u-=5,a.ncode=(15&_)+4,_>>>=4,u-=4,a.nlen>286||a.ndist>30){t.msg="too many length or distance symbols",a.mode=_t;break}a.have=0,a.mode=tt;case tt:for(;a.have<a.ncode;){for(;u<3;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}a.lens[At[a.have++]]=7&_,_>>>=3,u-=3}for(;a.have<19;)a.lens[At[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,zt={bits:a.lenbits},xt=y(x,a.lens,0,19,a.lencode,0,a.work,zt),a.lenbits=zt.bits,xt){t.msg="invalid code lengths set",a.mode=_t;break}a.have=0,a.mode=et;case et:for(;a.have<a.nlen+a.ndist;){for(;St=a.lencode[_&(1<<a.lenbits)-1],gt=St>>>24,mt=St>>>16&255,wt=65535&St,!(gt<=u);){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}if(wt<16)_>>>=gt,u-=gt,a.lens[a.have++]=wt;else{if(16===wt){for(Bt=gt+2;u<Bt;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}if(_>>>=gt,u-=gt,0===a.have){t.msg="invalid bit length repeat",a.mode=_t;break}yt=a.lens[a.have-1],g=3+(3&_),_>>>=2,u-=2}else if(17===wt){for(Bt=gt+3;u<Bt;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}_>>>=gt,u-=gt,yt=0,g=3+(7&_),_>>>=3,u-=3}else{for(Bt=gt+7;u<Bt;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}_>>>=gt,u-=gt,yt=0,g=11+(127&_),_>>>=7,u-=7}if(a.have+g>a.nlen+a.ndist){t.msg="invalid bit length repeat",a.mode=_t;break}for(;g--;)a.lens[a.have++]=yt}}if(a.mode===_t)break;if(0===a.lens[256]){t.msg="invalid code -- missing end-of-block",a.mode=_t;break}if(a.lenbits=9,zt={bits:a.lenbits},xt=y(z,a.lens,0,a.nlen,a.lencode,0,a.work,zt),a.lenbits=zt.bits,xt){t.msg="invalid literal/lengths set",a.mode=_t;break}if(a.distbits=6,a.distcode=a.distdyn,zt={bits:a.distbits},xt=y(B,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,zt),a.distbits=zt.bits,xt){t.msg="invalid distances set",a.mode=_t;break}if(a.mode=at,e===A)break t;case at:a.mode=it;case it:if(l>=6&&h>=258){t.next_out=o,t.avail_out=h,t.next_in=s,t.avail_in=l,a.hold=_,a.bits=u,k(t,b),o=t.next_out,r=t.output,h=t.avail_out,s=t.next_in,n=t.input,l=t.avail_in,_=a.hold,u=a.bits,a.mode===X&&(a.back=-1);break}for(a.back=0;St=a.lencode[_&(1<<a.lenbits)-1],gt=St>>>24,mt=St>>>16&255,wt=65535&St,!(gt<=u);){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}if(mt&&0===(240&mt)){for(pt=gt,vt=mt,kt=wt;St=a.lencode[kt+((_&(1<<pt+vt)-1)>>pt)],gt=St>>>24,mt=St>>>16&255,wt=65535&St,!(pt+gt<=u);){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}_>>>=pt,u-=pt,a.back+=pt}if(_>>>=gt,u-=gt,a.back+=gt,a.length=wt,0===mt){a.mode=lt;break}if(32&mt){a.back=-1,a.mode=X;break}if(64&mt){t.msg="invalid literal/length code",a.mode=_t;break}a.extra=15&mt,a.mode=nt;case nt:if(a.extra){for(Bt=a.extra;u<Bt;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}a.length+=_&(1<<a.extra)-1,_>>>=a.extra,u-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=rt;case rt:for(;St=a.distcode[_&(1<<a.distbits)-1],gt=St>>>24,mt=St>>>16&255,wt=65535&St,!(gt<=u);){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}if(0===(240&mt)){for(pt=gt,vt=mt,kt=wt;St=a.distcode[kt+((_&(1<<pt+vt)-1)>>pt)],gt=St>>>24,mt=St>>>16&255,wt=65535&St,!(pt+gt<=u);){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}_>>>=pt,u-=pt,a.back+=pt}if(_>>>=gt,u-=gt,a.back+=gt,64&mt){t.msg="invalid distance code",a.mode=_t;break}a.offset=wt,a.extra=15&mt,a.mode=st;case st:if(a.extra){for(Bt=a.extra;u<Bt;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}a.offset+=_&(1<<a.extra)-1,_>>>=a.extra,u-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){t.msg="invalid distance too far back",a.mode=_t;break}a.mode=ot;case ot:if(0===h)break t;if(g=b-h,a.offset>g){if(g=a.offset-g,g>a.whave&&a.sane){t.msg="invalid distance too far back",a.mode=_t;break}g>a.wnext?(g-=a.wnext,m=a.wsize-g):m=a.wnext-g,g>a.length&&(g=a.length),bt=a.window}else bt=r,m=o-a.offset,g=a.length;g>h&&(g=h),h-=g,a.length-=g;do r[o++]=bt[m++];while(--g);0===a.length&&(a.mode=it);break;case lt:if(0===h)break t;r[o++]=a.length,h--,a.mode=it;break;case ht:if(a.wrap){for(;u<32;){if(0===l)break t;l--,_|=n[s++]<<u,u+=8}if(b-=h,t.total_out+=b,a.total+=b,b&&(t.adler=a.check=a.flags?v(a.check,r,b,o-b):p(a.check,r,b,o-b)),b=h,(a.flags?_:i(_))!==a.check){t.msg="incorrect data check",a.mode=_t;break}_=0,u=0}a.mode=dt;case dt:if(a.wrap&&a.flags){for(;u<32;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}if(_!==(4294967295&a.total)){t.msg="incorrect length check",a.mode=_t;break}_=0,u=0}a.mode=ft;case ft:xt=R;break t;case _t:xt=O;break t;case ut:return D;case ct:default:return N}return t.next_out=o,t.avail_out=h,t.next_in=s,t.avail_in=l,a.hold=_,a.bits=u,(a.wsize||b!==t.avail_out&&a.mode<_t&&(a.mode<ht||e!==S))&&f(t,t.output,t.next_out,b-t.avail_out)?(a.mode=ut,D):(c-=t.avail_in,b-=t.avail_out,t.total_in+=c,t.total_out+=b,a.total+=b,a.wrap&&b&&(t.adler=a.check=a.flags?v(a.check,r,b,t.next_out-b):p(a.check,r,b,t.next_out-b)),t.data_type=a.bits+(a.last?64:0)+(a.mode===X?128:0)+(a.mode===at||a.mode===Q?256:0),(0===c&&0===b||e===S)&&xt===Z&&(xt=I),xt)}function u(t){if(!t||!t.state)return N;var e=t.state;return e.window&&(e.window=null),t.state=null,Z}function c(t,e){var a;return t&&t.state?(a=t.state,0===(2&a.wrap)?N:(a.head=e,e.done=!1,Z)):N}function b(t,e){var a,i,n,r=e.length;return t&&t.state?(a=t.state,0!==a.wrap&&a.mode!==G?N:a.mode===G&&(i=1,i=p(i,e,r,0),i!==a.check)?O:(n=f(t,e,r,r))?(a.mode=ut,D):(a.havedict=1,Z)):N}var g,m,w=t("../utils/common"),p=t("./adler32"),v=t("./crc32"),k=t("./inffast"),y=t("./inftrees"),x=0,z=1,B=2,S=4,E=5,A=6,Z=0,R=1,C=2,N=-2,O=-3,D=-4,I=-5,U=8,T=1,F=2,L=3,H=4,j=5,K=6,M=7,P=8,Y=9,q=10,G=11,X=12,W=13,J=14,Q=15,V=16,$=17,tt=18,et=19,at=20,it=21,nt=22,rt=23,st=24,ot=25,lt=26,ht=27,dt=28,ft=29,_t=30,ut=31,ct=32,bt=852,gt=592,mt=15,wt=mt,pt=!0;a.inflateReset=s,a.inflateReset2=o,a.inflateResetKeep=r,a.inflateInit=h,a.inflateInit2=l,a.inflate=_,a.inflateEnd=u,a.inflateGetHeader=c,a.inflateSetDictionary=b,a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":3,"./adler32":5,"./crc32":7,"./inffast":10,"./inftrees":12}],12:[function(t,e,a){"use strict";var i=t("../utils/common"),n=15,r=852,s=592,o=0,l=1,h=2,d=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],f=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],_=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,a,c,b,g,m,w){var p,v,k,y,x,z,B,S,E,A=w.bits,Z=0,R=0,C=0,N=0,O=0,D=0,I=0,U=0,T=0,F=0,L=null,H=0,j=new i.Buf16(n+1),K=new i.Buf16(n+1),M=null,P=0;for(Z=0;Z<=n;Z++)j[Z]=0;for(R=0;R<c;R++)j[e[a+R]]++;for(O=A,N=n;N>=1&&0===j[N];N--);if(O>N&&(O=N),0===N)return b[g++]=20971520,b[g++]=20971520,w.bits=1,0;for(C=1;C<N&&0===j[C];C++);for(O<C&&(O=C),U=1,Z=1;Z<=n;Z++)if(U<<=1,U-=j[Z],U<0)return-1;if(U>0&&(t===o||1!==N))return-1;for(K[1]=0,Z=1;Z<n;Z++)K[Z+1]=K[Z]+j[Z];for(R=0;R<c;R++)0!==e[a+R]&&(m[K[e[a+R]]++]=R);if(t===o?(L=M=m,z=19):t===l?(L=d,H-=257,M=f,P-=257,z=256):(L=_,M=u,z=-1),F=0,R=0,Z=C,x=g,D=O,I=0,k=-1,T=1<<O,y=T-1,t===l&&T>r||t===h&&T>s)return 1;for(;;){B=Z-I,m[R]<z?(S=0,E=m[R]):m[R]>z?(S=M[P+m[R]],E=L[H+m[R]]):(S=96,E=0),p=1<<Z-I,v=1<<D,C=v;do v-=p,b[x+(F>>I)+v]=B<<24|S<<16|E|0;while(0!==v);for(p=1<<Z-1;F&p;)p>>=1;if(0!==p?(F&=p-1,F+=p):F=0,R++,0===--j[Z]){if(Z===N)break;Z=e[a+m[R]]}if(Z>O&&(F&y)!==k){for(0===I&&(I=O),x+=C,D=Z-I,U=1<<D;D+I<N&&(U-=j[D+I],!(U<=0));)D++,U<<=1;if(T+=1<<D,t===l&&T>r||t===h&&T>s)return 1;k=F&y,b[k]=O<<24|D<<16|x-g|0}}return 0!==F&&(b[x+F]=Z-I<<24|64<<16|0),w.bits=O,0}},{"../utils/common":3}],13:[function(t,e,a){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],14:[function(t,e,a){"use strict";function i(t){for(var e=t.length;--e>=0;)t[e]=0}function n(t,e,a,i,n){this.static_tree=t,this.extra_bits=e,this.extra_base=a,this.elems=i,this.max_length=n,this.has_stree=t&&t.length}function r(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function s(t){return t<256?lt[t]:lt[256+(t>>>7)]}function o(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function l(t,e,a){t.bi_valid>W-a?(t.bi_buf|=e<<t.bi_valid&65535,o(t,t.bi_buf),t.bi_buf=e>>W-t.bi_valid,t.bi_valid+=a-W):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=a)}function h(t,e,a){l(t,a[2*e],a[2*e+1])}function d(t,e){var a=0;do a|=1&t,t>>>=1,a<<=1;while(--e>0);return a>>>1}function f(t){16===t.bi_valid?(o(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}function _(t,e){var a,i,n,r,s,o,l=e.dyn_tree,h=e.max_code,d=e.stat_desc.static_tree,f=e.stat_desc.has_stree,_=e.stat_desc.extra_bits,u=e.stat_desc.extra_base,c=e.stat_desc.max_length,b=0;for(r=0;r<=X;r++)t.bl_count[r]=0;for(l[2*t.heap[t.heap_max]+1]=0,a=t.heap_max+1;a<G;a++)i=t.heap[a],r=l[2*l[2*i+1]+1]+1,r>c&&(r=c,b++),l[2*i+1]=r,i>h||(t.bl_count[r]++,s=0,i>=u&&(s=_[i-u]),o=l[2*i],t.opt_len+=o*(r+s),f&&(t.static_len+=o*(d[2*i+1]+s)));if(0!==b){do{for(r=c-1;0===t.bl_count[r];)r--;t.bl_count[r]--,t.bl_count[r+1]+=2,t.bl_count[c]--,b-=2}while(b>0);for(r=c;0!==r;r--)for(i=t.bl_count[r];0!==i;)n=t.heap[--a],n>h||(l[2*n+1]!==r&&(t.opt_len+=(r-l[2*n+1])*l[2*n],l[2*n+1]=r),i--)}}function u(t,e,a){var i,n,r=new Array(X+1),s=0;for(i=1;i<=X;i++)r[i]=s=s+a[i-1]<<1;for(n=0;n<=e;n++){var o=t[2*n+1];0!==o&&(t[2*n]=d(r[o]++,o))}}function c(){var t,e,a,i,r,s=new Array(X+1);for(a=0,i=0;i<K-1;i++)for(dt[i]=a,t=0;t<1<<et[i];t++)ht[a++]=i;for(ht[a-1]=i,r=0,i=0;i<16;i++)for(ft[i]=r,t=0;t<1<<at[i];t++)lt[r++]=i;for(r>>=7;i<Y;i++)for(ft[i]=r<<7,t=0;t<1<<at[i]-7;t++)lt[256+r++]=i;for(e=0;e<=X;e++)s[e]=0;for(t=0;t<=143;)st[2*t+1]=8,t++,s[8]++;for(;t<=255;)st[2*t+1]=9,t++,s[9]++;for(;t<=279;)st[2*t+1]=7,t++,s[7]++;for(;t<=287;)st[2*t+1]=8,t++,s[8]++;for(u(st,P+1,s),t=0;t<Y;t++)ot[2*t+1]=5,ot[2*t]=d(t,5);_t=new n(st,et,M+1,P,X),ut=new n(ot,at,0,Y,X),ct=new n(new Array(0),it,0,q,J)}function b(t){var e;for(e=0;e<P;e++)t.dyn_ltree[2*e]=0;for(e=0;e<Y;e++)t.dyn_dtree[2*e]=0;for(e=0;e<q;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*Q]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function g(t){t.bi_valid>8?o(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function m(t,e,a,i){g(t),i&&(o(t,a),o(t,~a)),N.arraySet(t.pending_buf,t.window,e,a,t.pending),t.pending+=a}function w(t,e,a,i){var n=2*e,r=2*a;return t[n]<t[r]||t[n]===t[r]&&i[e]<=i[a]}function p(t,e,a){for(var i=t.heap[a],n=a<<1;n<=t.heap_len&&(n<t.heap_len&&w(e,t.heap[n+1],t.heap[n],t.depth)&&n++,!w(e,i,t.heap[n],t.depth));)t.heap[a]=t.heap[n],a=n,n<<=1;t.heap[a]=i}function v(t,e,a){var i,n,r,o,d=0;if(0!==t.last_lit)do i=t.pending_buf[t.d_buf+2*d]<<8|t.pending_buf[t.d_buf+2*d+1],n=t.pending_buf[t.l_buf+d],d++,0===i?h(t,n,e):(r=ht[n],h(t,r+M+1,e),o=et[r],0!==o&&(n-=dt[r],l(t,n,o)),i--,r=s(i),h(t,r,a),o=at[r],0!==o&&(i-=ft[r],l(t,i,o)));while(d<t.last_lit);h(t,Q,e)}function k(t,e){var a,i,n,r=e.dyn_tree,s=e.stat_desc.static_tree,o=e.stat_desc.has_stree,l=e.stat_desc.elems,h=-1;for(t.heap_len=0,t.heap_max=G,a=0;a<l;a++)0!==r[2*a]?(t.heap[++t.heap_len]=h=a,t.depth[a]=0):r[2*a+1]=0;for(;t.heap_len<2;)n=t.heap[++t.heap_len]=h<2?++h:0,r[2*n]=1,t.depth[n]=0,t.opt_len--,o&&(t.static_len-=s[2*n+1]);for(e.max_code=h,a=t.heap_len>>1;a>=1;a--)p(t,r,a);n=l;do a=t.heap[1],t.heap[1]=t.heap[t.heap_len--],p(t,r,1),i=t.heap[1],t.heap[--t.heap_max]=a,t.heap[--t.heap_max]=i,r[2*n]=r[2*a]+r[2*i],t.depth[n]=(t.depth[a]>=t.depth[i]?t.depth[a]:t.depth[i])+1,r[2*a+1]=r[2*i+1]=n,t.heap[1]=n++,p(t,r,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],_(t,e),u(r,h,t.bl_count)}function y(t,e,a){var i,n,r=-1,s=e[1],o=0,l=7,h=4;for(0===s&&(l=138,h=3),e[2*(a+1)+1]=65535,i=0;i<=a;i++)n=s,s=e[2*(i+1)+1],++o<l&&n===s||(o<h?t.bl_tree[2*n]+=o:0!==n?(n!==r&&t.bl_tree[2*n]++,t.bl_tree[2*V]++):o<=10?t.bl_tree[2*$]++:t.bl_tree[2*tt]++,o=0,r=n,0===s?(l=138,h=3):n===s?(l=6,h=3):(l=7,h=4))}function x(t,e,a){var i,n,r=-1,s=e[1],o=0,d=7,f=4;for(0===s&&(d=138,f=3),i=0;i<=a;i++)if(n=s,s=e[2*(i+1)+1],!(++o<d&&n===s)){if(o<f){do h(t,n,t.bl_tree);while(0!==--o)}else 0!==n?(n!==r&&(h(t,n,t.bl_tree),o--),h(t,V,t.bl_tree),l(t,o-3,2)):o<=10?(h(t,$,t.bl_tree),l(t,o-3,3)):(h(t,tt,t.bl_tree),l(t,o-11,7));o=0,r=n,0===s?(d=138,f=3):n===s?(d=6,f=3):(d=7,f=4)}}function z(t){var e;for(y(t,t.dyn_ltree,t.l_desc.max_code),y(t,t.dyn_dtree,t.d_desc.max_code),k(t,t.bl_desc),e=q-1;e>=3&&0===t.bl_tree[2*nt[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}function B(t,e,a,i){var n;for(l(t,e-257,5),l(t,a-1,5),l(t,i-4,4),n=0;n<i;n++)l(t,t.bl_tree[2*nt[n]+1],3);x(t,t.dyn_ltree,e-1),x(t,t.dyn_dtree,a-1)}function S(t){var e,a=4093624447;for(e=0;e<=31;e++,a>>>=1)if(1&a&&0!==t.dyn_ltree[2*e])return D;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return I;for(e=32;e<M;e++)if(0!==t.dyn_ltree[2*e])return I;return D}function E(t){bt||(c(),bt=!0),t.l_desc=new r(t.dyn_ltree,_t),t.d_desc=new r(t.dyn_dtree,ut),t.bl_desc=new r(t.bl_tree,ct),t.bi_buf=0,t.bi_valid=0,b(t)}function A(t,e,a,i){l(t,(T<<1)+(i?1:0),3),m(t,e,a,!0)}function Z(t){l(t,F<<1,3),h(t,Q,st),f(t)}function R(t,e,a,i){var n,r,s=0;t.level>0?(t.strm.data_type===U&&(t.strm.data_type=S(t)),k(t,t.l_desc),k(t,t.d_desc),s=z(t),n=t.opt_len+3+7>>>3,r=t.static_len+3+7>>>3,r<=n&&(n=r)):n=r=a+5,a+4<=n&&e!==-1?A(t,e,a,i):t.strategy===O||r===n?(l(t,(F<<1)+(i?1:0),3),v(t,st,ot)):(l(t,(L<<1)+(i?1:0),3),B(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),v(t,t.dyn_ltree,t.dyn_dtree)),b(t),i&&g(t)}function C(t,e,a){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&a,t.last_lit++,0===e?t.dyn_ltree[2*a]++:(t.matches++,e--,t.dyn_ltree[2*(ht[a]+M+1)]++,t.dyn_dtree[2*s(e)]++),t.last_lit===t.lit_bufsize-1}var N=t("../utils/common"),O=4,D=0,I=1,U=2,T=0,F=1,L=2,H=3,j=258,K=29,M=256,P=M+1+K,Y=30,q=19,G=2*P+1,X=15,W=16,J=7,Q=256,V=16,$=17,tt=18,et=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],at=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],it=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],nt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],rt=512,st=new Array(2*(P+2));i(st);var ot=new Array(2*Y);i(ot);var lt=new Array(rt);i(lt);var ht=new Array(j-H+1);i(ht);var dt=new Array(K);i(dt);var ft=new Array(Y);i(ft);var _t,ut,ct,bt=!1;a._tr_init=E,a._tr_stored_block=A,a._tr_flush_block=R,a._tr_tally=C,a._tr_align=Z},{"../utils/common":3}],15:[function(t,e,a){"use strict";function i(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}e.exports=i},{}],"/":[function(t,e,a){"use strict";var i=t("./lib/utils/common").assign,n=t("./lib/deflate"),r=t("./lib/inflate"),s=t("./lib/zlib/constants"),o={};i(o,n,r,s),e.exports=o},{"./lib/deflate":1,"./lib/inflate":2,"./lib/utils/common":3,"./lib/zlib/constants":6}]},{},[])("/")});
var DNLMarkerError = function() {}
var EOIMarkerError = function() {}

var PDFJS;!function(e){"use strict";var t=function(){function e(e){this.message="JPEG error: "+e}return e.prototype=new Error,e.prototype.name="JpegError",e.constructor=e,e}(),r=function(){var e=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),r=4017,n=799,i=3406,a=2276,s=1567,o=3784,l=5793,h=2896;function f({decodeTransform:e=null,colorTransform:t=-1}={}){this._decodeTransform=e,this._colorTransform=t}function m(e,t){for(var r,n,i=0,a=[],s=16;s>0&&!e[s-1];)s--;a.push({children:[],index:0});var o,c=a[0];for(r=0;r<s;r++){for(n=0;n<e[r];n++){for((c=a.pop()).children[c.index]=t[i];c.index>0;)c=a.pop();for(c.index++,a.push(c);a.length<=r;)a.push(o={children:[],index:0}),c.children[c.index]=o.children,c=o;i++}r+1<s&&(a.push(o={children:[],index:0}),c.children[c.index]=o.children,c=o)}return a[0].children}function p(e,t,r){return 64*((e.blocksPerLine+1)*t+r)}function d(r,n,i,a,s,o,l,h,f,m=!1){var d=i.mcusPerLine,v=i.progressive;const g=n;let y=0,x=0;function w(){if(x>0)return y>>--x&1;if(255===(y=r[n++])){var e=r[n++];if(e){if(220===e&&m){const e=c(r,n+=2);if(n+=2,e>0&&e!==i.scanLines)throw new DNLMarkerError("Found DNL marker (0xFFDC) while parsing scan data",e)}else if(217===e){if(m){const e=8*T;if(e>0&&e<i.scanLines/10)throw new DNLMarkerError("Found EOI marker (0xFFD9) while parsing scan data, possibly caused by incorrect `scanLines` parameter",e)}throw new EOIMarkerError("Found EOI marker (0xFFD9) while parsing scan data")}throw new t(`unexpected marker ${(y<<8|e).toString(16)}`)}}return x=7,y>>>7}function k(e){for(var r=e;;){switch(typeof(r=r[w()])){case"number":return r;case"object":continue}throw new t("invalid huffman sequence")}}function C(e){for(var t=0;e>0;)t=t<<1|w(),e--;return t}function P(e){if(1===e)return 1===w()?1:-1;var t=C(e);return t>=1<<e-1?t:t+(-1<<e)+1}var I=0;var M,S=0;let T=0;function A(e,t,r,n,i){var a=r%d;T=(r/d|0)*e.v+n;var s=a*e.h+i;t(e,p(e,T,s))}function D(e,t,r){T=r/e.blocksPerLine|0;var n=r%e.blocksPerLine;t(e,p(e,T,n))}var L,z,F,O,B,q,R=a.length;q=v?0===o?0===h?function(e,t){var r=k(e.huffmanTableDC),n=0===r?0:P(r)<<f;e.blockData[t]=e.pred+=n}:function(e,t){e.blockData[t]|=w()<<f}:0===h?function(t,r){if(I>0)I--;else for(var n=o,i=l;n<=i;){var a=k(t.huffmanTableAC),s=15&a,c=a>>4;if(0!==s){var h=e[n+=c];t.blockData[r+h]=P(s)*(1<<f),n++}else{if(c<15){I=C(c)+(1<<c)-1;break}n+=16}}}:function(r,n){for(var i,a,s=o,c=l,h=0;s<=c;){const o=n+e[s],c=r.blockData[o]<0?-1:1;switch(S){case 0:if(h=(a=k(r.huffmanTableAC))>>4,0==(i=15&a))h<15?(I=C(h)+(1<<h),S=4):(h=16,S=1);else{if(1!==i)throw new t("invalid ACn encoding");M=P(i),S=h?2:3}continue;case 1:case 2:r.blockData[o]?r.blockData[o]+=c*(w()<<f):0==--h&&(S=2===S?3:0);break;case 3:r.blockData[o]?r.blockData[o]+=c*(w()<<f):(r.blockData[o]=M<<f,S=0);break;case 4:r.blockData[o]&&(r.blockData[o]+=c*(w()<<f))}s++}4===S&&0==--I&&(S=0)}:function(t,r){var n=k(t.huffmanTableDC),i=0===n?0:P(n);t.blockData[r]=t.pred+=i;for(var a=1;a<64;){var s=k(t.huffmanTableAC),o=15&s,c=s>>4;if(0!==o){var l=e[a+=c];t.blockData[r+l]=P(o),a++}else{if(c<15)break;a+=16}}};var E,U,X,H,J=0;for(U=1===R?a[0].blocksPerLine*a[0].blocksPerColumn:d*i.mcusPerColumn;J<=U;){var _=s?Math.min(U-J,s):U;if(_>0){for(z=0;z<R;z++)a[z].pred=0;if(I=0,1===R)for(L=a[0],B=0;B<_;B++)D(L,q,J),J++;else for(B=0;B<_;B++){for(z=0;z<R;z++)for(X=(L=a[z]).h,H=L.v,F=0;F<H;F++)for(O=0;O<X;O++)A(L,q,J,F,O);J++}}if(x=0,!(E=b(r,n)))break;if(E.invalid){u(`decodeScan - ${_>0?"unexpected":"excessive"} MCU data, current marker is: ${E.invalid}`),n=E.offset}if(!(E.marker>=65488&&E.marker<=65495))break;n+=2}return n-g}function v(e,c,f){var u,m,p,d,v,g,b,y,x,w,k,C,P,I,M,S,T,A=e.quantizationTable,D=e.blockData;if(!A)throw new t("missing required Quantization Table.");for(var L=0;L<64;L+=8)x=D[c+L],w=D[c+L+1],k=D[c+L+2],C=D[c+L+3],P=D[c+L+4],I=D[c+L+5],M=D[c+L+6],S=D[c+L+7],x*=A[L],0!=(w|k|C|P|I|M|S)?(w*=A[L+1],k*=A[L+2],C*=A[L+3],P*=A[L+4],I*=A[L+5],M*=A[L+6],S*=A[L+7],m=(u=(u=l*x+128>>8)+(m=l*P+128>>8)+1>>1)-m,T=(p=k)*o+(d=M)*s+128>>8,p=p*s-d*o+128>>8,b=(v=(v=h*(w-S)+128>>8)+(b=I<<4)+1>>1)-b,g=(y=(y=h*(w+S)+128>>8)+(g=C<<4)+1>>1)-g,d=(u=u+(d=T)+1>>1)-d,p=(m=m+p+1>>1)-p,T=v*a+y*i+2048>>12,v=v*i-y*a+2048>>12,y=T,T=g*n+b*r+2048>>12,g=g*r-b*n+2048>>12,b=T,f[L]=u+y,f[L+7]=u-y,f[L+1]=m+b,f[L+6]=m-b,f[L+2]=p+g,f[L+5]=p-g,f[L+3]=d+v,f[L+4]=d-v):(T=l*x+512>>10,f[L]=T,f[L+1]=T,f[L+2]=T,f[L+3]=T,f[L+4]=T,f[L+5]=T,f[L+6]=T,f[L+7]=T);for(var z=0;z<8;++z)x=f[z],0!=((w=f[z+8])|(k=f[z+16])|(C=f[z+24])|(P=f[z+32])|(I=f[z+40])|(M=f[z+48])|(S=f[z+56]))?(m=(u=4112+((u=l*x+2048>>12)+(m=l*P+2048>>12)+1>>1))-m,T=(p=k)*o+(d=M)*s+2048>>12,p=p*s-d*o+2048>>12,d=T,b=(v=(v=h*(w-S)+2048>>12)+(b=I)+1>>1)-b,g=(y=(y=h*(w+S)+2048>>12)+(g=C)+1>>1)-g,T=v*a+y*i+2048>>12,v=v*i-y*a+2048>>12,y=T,T=g*n+b*r+2048>>12,g=g*r-b*n+2048>>12,(x=(u=u+d+1>>1)+y)<16?x=0:x>=4080?x=255:x>>=4,(w=(m=m+p+1>>1)+(b=T))<16?w=0:w>=4080?w=255:w>>=4,(k=(p=m-p)+g)<16?k=0:k>=4080?k=255:k>>=4,(C=(d=u-d)+v)<16?C=0:C>=4080?C=255:C>>=4,(P=d-v)<16?P=0:P>=4080?P=255:P>>=4,(I=p-g)<16?I=0:I>=4080?I=255:I>>=4,(M=m-b)<16?M=0:M>=4080?M=255:M>>=4,(S=u-y)<16?S=0:S>=4080?S=255:S>>=4,D[c+z]=x,D[c+z+8]=w,D[c+z+16]=k,D[c+z+24]=C,D[c+z+32]=P,D[c+z+40]=I,D[c+z+48]=M,D[c+z+56]=S):(T=(T=l*x+8192>>14)<-2040?0:T>=2024?255:T+2056>>4,D[c+z]=T,D[c+z+8]=T,D[c+z+16]=T,D[c+z+24]=T,D[c+z+32]=T,D[c+z+40]=T,D[c+z+48]=T,D[c+z+56]=T)}function g(e,t){for(var r=t.blocksPerLine,n=t.blocksPerColumn,i=new Int16Array(64),a=0;a<n;a++)for(var s=0;s<r;s++){v(t,p(t,a,s),i)}return t.blockData}function b(e,t,r=t){const n=e.length-1;var i=r<t?r:t;if(t>=n)return null;var a=c(e,t);if(a>=65472&&a<=65534)return{invalid:null,marker:a,offset:t};for(var s=c(e,i);!(s>=65472&&s<=65534);){if(++i>=n)return null;s=c(e,i)}return{invalid:a.toString(16),marker:s,offset:i}}return f.prototype={parse(r,{dnlScanLines:n=null}={}){function i(){const e=c(r,l);let t=(l+=2)+e-2;var n=b(r,t,l);n&&n.invalid&&(u("readDataBlock - incorrect length, current marker is: "+n.invalid),t=n.offset);var i=r.subarray(l,t);return l+=i.length,i}function a(e){for(var t=Math.ceil(e.samplesPerLine/8/e.maxH),r=Math.ceil(e.scanLines/8/e.maxV),n=0;n<e.components.length;n++){X=e.components[n];var i=Math.ceil(Math.ceil(e.samplesPerLine/8)*X.h/e.maxH),a=Math.ceil(Math.ceil(e.scanLines/8)*X.v/e.maxV),s=t*X.h,o=64*(r*X.v)*(s+1);X.blockData=new Int16Array(o),X.blocksPerLine=i,X.blocksPerColumn=a}e.mcusPerLine=t,e.mcusPerColumn=r}var s,o,l=0,h=null,f=null;let p=0;var v=[],y=[],x=[];let w=c(r,l);if(l+=2,65496!==w)throw new t("SOI not found");w=c(r,l),l+=2;e:for(;65497!==w;){var k,C,P;switch(w){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var I=i();65504===w&&74===I[0]&&70===I[1]&&73===I[2]&&70===I[3]&&0===I[4]&&(h={version:{major:I[5],minor:I[6]},densityUnits:I[7],xDensity:I[8]<<8|I[9],yDensity:I[10]<<8|I[11],thumbWidth:I[12],thumbHeight:I[13],thumbData:I.subarray(14,14+3*I[12]*I[13])}),65518===w&&65===I[0]&&100===I[1]&&111===I[2]&&98===I[3]&&101===I[4]&&(f={version:I[5]<<8|I[6],flags0:I[7]<<8|I[8],flags1:I[9]<<8|I[10],transformCode:I[11]});break;case 65499:for(var M=c(r,l)+(l+=2)-2;l<M;){var S=r[l++],T=new Uint16Array(64);if(S>>4==0)for(C=0;C<64;C++)T[e[C]]=r[l++];else{if(S>>4!=1)throw new t("DQT - invalid table spec");for(C=0;C<64;C++)T[e[C]]=c(r,l),l+=2}v[15&S]=T}break;case 65472:case 65473:case 65474:if(s)throw new t("Only single frame JPEGs supported");l+=2,(s={}).extended=65473===w,s.progressive=65474===w,s.precision=r[l++];const g=c(r,l);l+=2,s.scanLines=n||g,s.samplesPerLine=c(r,l),l+=2,s.components=[],s.componentIds={};var A,D=r[l++],L=0,z=0;for(k=0;k<D;k++){A=r[l];var F=r[l+1]>>4,O=15&r[l+1];L<F&&(L=F),z<O&&(z=O);var B=r[l+2];P=s.components.push({h:F,v:O,quantizationId:B,quantizationTable:null}),s.componentIds[A]=P-1,l+=3}s.maxH=L,s.maxV=z,a(s);break;case 65476:const V=c(r,l);for(l+=2,k=2;k<V;){var q=r[l++],R=new Uint8Array(16),E=0;for(C=0;C<16;C++,l++)E+=R[C]=r[l];var U=new Uint8Array(E);for(C=0;C<E;C++,l++)U[C]=r[l];k+=17+E,(q>>4==0?x:y)[15&q]=m(R,U)}break;case 65501:o=c(r,l+=2),l+=2;break;case 65498:const Z=1==++p&&!n;l+=2;var X,H=r[l++],J=[];for(k=0;k<H;k++){const e=r[l++];var _=s.componentIds[e];(X=s.components[_]).index=e;var N=r[l++];X.huffmanTableDC=x[N>>4],X.huffmanTableAC=y[15&N],J.push(X)}var Y=r[l++],G=r[l++],W=r[l++];try{var Q=d(r,l,s,J,o,Y,G,W>>4,15&W,Z);l+=Q}catch(e){if(e instanceof DNLMarkerError)return u(`${e.message} -- attempting to re-parse the JPEG image.`),this.parse(r,{dnlScanLines:e.scanLines});if(e instanceof EOIMarkerError){u(`${e.message} -- ignoring the rest of the image data.`);break e}throw e}break;case 65500:l+=4;break;case 65535:255!==r[l]&&l--;break;default:const j=b(r,l-2,l-3);if(j&&j.invalid){u("JpegImage.parse - unexpected data, current marker is: "+j.invalid),l=j.offset;break}if(l>=r.length-1){u("JpegImage.parse - reached the end of the image data without finding an EOI marker (0xFFD9).");break e}throw new t("JpegImage.parse - unknown marker: "+w.toString(16))}w=c(r,l),l+=2}for(this.width=s.samplesPerLine,this.height=s.scanLines,this.jfif=h,this.adobe=f,this.components=[],k=0;k<s.components.length;k++){var V=v[(X=s.components[k]).quantizationId];V&&(X.quantizationTable=V),this.components.push({index:X.index,output:g(0,X),scaleX:X.h/s.maxH,scaleY:X.v/s.maxV,blocksPerLine:X.blocksPerLine,blocksPerColumn:X.blocksPerColumn})}this.numComponents=this.components.length},_getLinearizedBlockData(e,t,r=!1){var n,i,a,s,o,c,l,h,f,u,m,p=this.width/e,d=this.height/t,v=0,g=this.components.length,b=e*t*g,y=new Uint8ClampedArray(b),x=new Uint32Array(e);let w;for(l=0;l<g;l++){if(i=(n=this.components[l]).scaleX*p,a=n.scaleY*d,v=l,m=n.output,s=n.blocksPerLine+1<<3,i!==w){for(o=0;o<e;o++)h=0|o*i,x[o]=(4294967288&h)<<3|7&h;w=i}for(c=0;c<t;c++)for(u=s*(4294967288&(h=0|c*a))|(7&h)<<3,o=0;o<e;o++)y[v]=m[u+x[o]],v+=g}let k=this._decodeTransform;if(r||4!==g||k||(k=new Int32Array([-256,255,-256,255,-256,255,-256,255])),k)for(l=0;l<b;)for(h=0,f=0;h<g;h++,l++,f+=2)y[l]=(y[l]*k[f]>>8)+k[f+1];return y},get _isColorConversionNeeded(){return this.adobe?!!this.adobe.transformCode:3===this.numComponents?0!==this._colorTransform&&(82!==this.components[0].index||71!==this.components[1].index||66!==this.components[2].index):1===this._colorTransform},_convertYccToRgb:function(e){for(var t,r,n,i=0,a=e.length;i<a;i+=3)t=e[i],r=e[i+1],n=e[i+2],e[i]=t-179.456+1.402*n,e[i+1]=t+135.459-.344*r-.714*n,e[i+2]=t-226.816+1.772*r;return e},_convertYcckToRgb:function(e){for(var t,r,n,i,a=0,s=0,o=e.length;s<o;s+=4)t=e[s],r=e[s+1],n=e[s+2],i=e[s+3],e[a++]=r*(-660635669420364e-19*r+.000437130475926232*n-54080610064599e-18*t+.00048449797120281*i-.154362151871126)-122.67195406894+n*(-.000957964378445773*n+.000817076911346625*t-.00477271405408747*i+1.53380253221734)+t*(.000961250184130688*t-.00266257332283933*i+.48357088451265)+i*(-.000336197177618394*i+.484791561490776),e[a++]=107.268039397724+r*(219927104525741e-19*r-.000640992018297945*n+.000659397001245577*t+.000426105652938837*i-.176491792462875)+n*(-.000778269941513683*n+.00130872261408275*t+.000770482631801132*i-.151051492775562)+t*(.00126935368114843*t-.00265090189010898*i+.25802910206845)+i*(-.000318913117588328*i-.213742400323665),e[a++]=r*(-.000570115196973677*r-263409051004589e-19*n+.0020741088115012*t-.00288260236853442*i+.814272968359295)-20.810012546947+n*(-153496057440975e-19*n-.000132689043961446*t+.000560833691242812*i-.195152027534049)+t*(.00174418132927582*t-.00255243321439347*i+.116935020465145)+i*(-.000343531996510555*i+.24165260232407);return e.subarray(0,a)},_convertYcckToCmyk:function(e){for(var t,r,n,i=0,a=e.length;i<a;i+=4)t=e[i],r=e[i+1],n=e[i+2],e[i]=434.456-t-1.402*n,e[i+1]=119.541-t+.344*r+.714*n,e[i+2]=481.816-t-1.772*r;return e},_convertCmykToRgb:function(e){for(var t,r,n,i,a=0,s=0,o=e.length;s<o;s+=4)t=e[s],r=e[s+1],n=e[s+2],i=e[s+3],e[a++]=255+t*(-6747147073602441e-20*t+.0008379262121013727*r+.0002894718188643294*n+.003264231057537806*i-1.1185611867203937)+r*(26374107616089405e-21*r-8626949158638572e-20*n-.0002748769067499491*i-.02155688794978967)+n*(-3878099212869363e-20*n-.0003267808279485286*i+.0686742238595345)-i*(.0003361971776183937*i+.7430659151342254),e[a++]=255+t*(.00013596372813588848*t+.000924537132573585*r+.00010567359618683593*n+.0004791864687436512*i-.3109689587515875)+r*(-.00023545346108370344*r+.0002702845253534714*n+.0020200308977307156*i-.7488052167015494)+n*(6834815998235662e-20*n+.00015168452363460973*i-.09751927774728933)-i*(.0003189131175883281*i+.7364883807733168),e[a++]=255+t*(13598650411385307e-21*t+.00012423956175490851*r+.0004751985097583589*n-36729317476630422e-22*i-.05562186980264034)+r*(.00016141380598724676*r+.0009692239130725186*n+.0007782692450036253*i-.44015232367526463)+n*(5.068882914068769e-7*n+.0017778369011375071*i-.7591454649749609)-i*(.0003435319965105553*i+.7063770186160144);return e.subarray(0,a)},getData({width:e,height:r,forceRGB:n=!1,isSourcePDF:i=!1}){if(this.numComponents>4)throw new t("Unsupported color mode");var a=this._getLinearizedBlockData(e,r,i);if(1===this.numComponents&&n){for(var s=a.length,o=new Uint8ClampedArray(3*s),c=0,l=0;l<s;l++){var h=a[l];o[c++]=h,o[c++]=h,o[c++]=h}return o}if(3===this.numComponents&&this._isColorConversionNeeded)return this._convertYccToRgb(a);if(4===this.numComponents){if(this._isColorConversionNeeded)return n?this._convertYcckToRgb(a):this._convertYcckToCmyk(a);if(n)return this._convertCmykToRgb(a)}return a}},f}(),n=function(){var e=[{qe:22017,nmps:1,nlps:1,switchFlag:1},{qe:13313,nmps:2,nlps:6,switchFlag:0},{qe:6145,nmps:3,nlps:9,switchFlag:0},{qe:2753,nmps:4,nlps:12,switchFlag:0},{qe:1313,nmps:5,nlps:29,switchFlag:0},{qe:545,nmps:38,nlps:33,switchFlag:0},{qe:22017,nmps:7,nlps:6,switchFlag:1},{qe:21505,nmps:8,nlps:14,switchFlag:0},{qe:18433,nmps:9,nlps:14,switchFlag:0},{qe:14337,nmps:10,nlps:14,switchFlag:0},{qe:12289,nmps:11,nlps:17,switchFlag:0},{qe:9217,nmps:12,nlps:18,switchFlag:0},{qe:7169,nmps:13,nlps:20,switchFlag:0},{qe:5633,nmps:29,nlps:21,switchFlag:0},{qe:22017,nmps:15,nlps:14,switchFlag:1},{qe:21505,nmps:16,nlps:14,switchFlag:0},{qe:20737,nmps:17,nlps:15,switchFlag:0},{qe:18433,nmps:18,nlps:16,switchFlag:0},{qe:14337,nmps:19,nlps:17,switchFlag:0},{qe:13313,nmps:20,nlps:18,switchFlag:0},{qe:12289,nmps:21,nlps:19,switchFlag:0},{qe:10241,nmps:22,nlps:19,switchFlag:0},{qe:9217,nmps:23,nlps:20,switchFlag:0},{qe:8705,nmps:24,nlps:21,switchFlag:0},{qe:7169,nmps:25,nlps:22,switchFlag:0},{qe:6145,nmps:26,nlps:23,switchFlag:0},{qe:5633,nmps:27,nlps:24,switchFlag:0},{qe:5121,nmps:28,nlps:25,switchFlag:0},{qe:4609,nmps:29,nlps:26,switchFlag:0},{qe:4353,nmps:30,nlps:27,switchFlag:0},{qe:2753,nmps:31,nlps:28,switchFlag:0},{qe:2497,nmps:32,nlps:29,switchFlag:0},{qe:2209,nmps:33,nlps:30,switchFlag:0},{qe:1313,nmps:34,nlps:31,switchFlag:0},{qe:1089,nmps:35,nlps:32,switchFlag:0},{qe:673,nmps:36,nlps:33,switchFlag:0},{qe:545,nmps:37,nlps:34,switchFlag:0},{qe:321,nmps:38,nlps:35,switchFlag:0},{qe:273,nmps:39,nlps:36,switchFlag:0},{qe:133,nmps:40,nlps:37,switchFlag:0},{qe:73,nmps:41,nlps:38,switchFlag:0},{qe:37,nmps:42,nlps:39,switchFlag:0},{qe:21,nmps:43,nlps:40,switchFlag:0},{qe:9,nmps:44,nlps:41,switchFlag:0},{qe:5,nmps:45,nlps:42,switchFlag:0},{qe:1,nmps:45,nlps:43,switchFlag:0},{qe:22017,nmps:46,nlps:46,switchFlag:0}];function t(e,t,r){this.data=e,this.bp=t,this.dataEnd=r,this.chigh=e[t],this.clow=0,this.byteIn(),this.chigh=this.chigh<<7&65535|this.clow>>9&127,this.clow=this.clow<<7&65535,this.ct-=7,this.a=32768}return t.prototype={byteIn:function(){var e=this.data,t=this.bp;255===e[t]?e[t+1]>143?(this.clow+=65280,this.ct=8):(t++,this.clow+=e[t]<<9,this.ct=7,this.bp=t):(t++,this.clow+=t<this.dataEnd?e[t]<<8:65280,this.ct=8,this.bp=t);this.clow>65535&&(this.chigh+=this.clow>>16,this.clow&=65535)},readBit:function(t,r){var n,i=t[r]>>1,a=1&t[r],s=e[i],o=s.qe,c=this.a-o;if(this.chigh<o)c<o?(c=o,n=a,i=s.nmps):(c=o,n=1^a,1===s.switchFlag&&(a=n),i=s.nlps);else{if(this.chigh-=o,0!=(32768&c))return this.a=c,a;c<o?(n=1^a,1===s.switchFlag&&(a=n),i=s.nlps):(n=a,i=s.nmps)}do{0===this.ct&&this.byteIn(),c<<=1,this.chigh=this.chigh<<1&65535|this.clow>>15&1,this.clow=this.clow<<1&65535,this.ct--}while(0==(32768&c));return this.a=c,t[r]=i<<1|a,n}},t}(),i=function(){var e={LL:0,LH:1,HL:1,HH:2};function t(){this.failOnCorruptedImage=!1}function r(e,t){e.x0=Math.ceil(t.XOsiz/e.XRsiz),e.x1=Math.ceil(t.Xsiz/e.XRsiz),e.y0=Math.ceil(t.YOsiz/e.YRsiz),e.y1=Math.ceil(t.Ysiz/e.YRsiz),e.width=e.x1-e.x0,e.height=e.y1-e.y0}function i(e,t){for(var r,n=e.SIZ,i=[],a=Math.ceil((n.Xsiz-n.XTOsiz)/n.XTsiz),s=Math.ceil((n.Ysiz-n.YTOsiz)/n.YTsiz),o=0;o<s;o++)for(var c=0;c<a;c++)(r={}).tx0=Math.max(n.XTOsiz+c*n.XTsiz,n.XOsiz),r.ty0=Math.max(n.YTOsiz+o*n.YTsiz,n.YOsiz),r.tx1=Math.min(n.XTOsiz+(c+1)*n.XTsiz,n.Xsiz),r.ty1=Math.min(n.YTOsiz+(o+1)*n.YTsiz,n.Ysiz),r.width=r.tx1-r.tx0,r.height=r.ty1-r.ty0,r.components=[],i.push(r);e.tiles=i;for(var l=0,h=n.Csiz;l<h;l++)for(var f=t[l],u=0,m=i.length;u<m;u++){var p={};r=i[u],p.tcx0=Math.ceil(r.tx0/f.XRsiz),p.tcy0=Math.ceil(r.ty0/f.YRsiz),p.tcx1=Math.ceil(r.tx1/f.XRsiz),p.tcy1=Math.ceil(r.ty1/f.YRsiz),p.width=p.tcx1-p.tcx0,p.height=p.tcy1-p.tcy0,r.components[l]=p}}function a(e,t,r){var n=t.codingStyleParameters,i={};return n.entropyCoderWithCustomPrecincts?(i.PPx=n.precinctsSizes[r].PPx,i.PPy=n.precinctsSizes[r].PPy):(i.PPx=15,i.PPy=15),i.xcb_=r>0?Math.min(n.xcb,i.PPx-1):Math.min(n.xcb,i.PPx),i.ycb_=r>0?Math.min(n.ycb,i.PPy-1):Math.min(n.ycb,i.PPy),i}function o(e,t,r){var n=1<<r.PPx,i=1<<r.PPy,a=0===t.resLevel,s=1<<r.PPx+(a?0:-1),o=1<<r.PPy+(a?0:-1),c=t.trx1>t.trx0?Math.ceil(t.trx1/n)-Math.floor(t.trx0/n):0,l=t.try1>t.try0?Math.ceil(t.try1/i)-Math.floor(t.try0/i):0,h=c*l;t.precinctParameters={precinctWidth:n,precinctHeight:i,numprecinctswide:c,numprecinctshigh:l,numprecincts:h,precinctWidthInSubband:s,precinctHeightInSubband:o}}function h(e,t,r){var n,i,a,s,o=r.xcb_,c=r.ycb_,l=1<<o,h=1<<c,f=t.tbx0>>o,u=t.tby0>>c,m=t.tbx1+l-1>>o,p=t.tby1+h-1>>c,d=t.resolution.precinctParameters,v=[],g=[];for(i=u;i<p;i++)for(n=f;n<m;n++){if((a={cbx:n,cby:i,tbx0:l*n,tby0:h*i,tbx1:l*(n+1),tby1:h*(i+1)}).tbx0_=Math.max(t.tbx0,a.tbx0),a.tby0_=Math.max(t.tby0,a.tby0),a.tbx1_=Math.min(t.tbx1,a.tbx1),a.tby1_=Math.min(t.tby1,a.tby1),s=Math.floor((a.tbx0_-t.tbx0)/d.precinctWidthInSubband)+Math.floor((a.tby0_-t.tby0)/d.precinctHeightInSubband)*d.numprecinctswide,a.precinctNumber=s,a.subbandType=t.type,a.Lblock=3,!(a.tbx1_<=a.tbx0_||a.tby1_<=a.tby0_)){v.push(a);var b=g[s];void 0!==b?(n<b.cbxMin?b.cbxMin=n:n>b.cbxMax&&(b.cbxMax=n),i<b.cbyMin?b.cbxMin=i:i>b.cbyMax&&(b.cbyMax=i)):g[s]=b={cbxMin:n,cbyMin:i,cbxMax:n,cbyMax:i},a.precinct=b}}t.codeblockParameters={codeblockWidth:o,codeblockHeight:c,numcodeblockwide:m-f+1,numcodeblockhigh:p-u+1},t.codeblocks=v,t.precincts=g}function p(e,t,r){for(var n=[],i=e.subbands,a=0,s=i.length;a<s;a++)for(var o=i[a].codeblocks,c=0,l=o.length;c<l;c++){var h=o[c];h.precinctNumber===t&&n.push(h)}return{layerNumber:r,codeblocks:n}}function d(e){for(var t=e.SIZ,r=e.currentTile.index,n=e.tiles[r],i=n.codingStyleDefaultParameters.layersCount,a=t.Csiz,s=0,o=0;o<a;o++)s=Math.max(s,n.components[o].codingStyleParameters.decompositionLevelsCount);var c=0,l=0,h=0,u=0;this.nextPacket=function(){for(;c<i;c++){for(;l<=s;l++){for(;h<a;h++){var e=n.components[h];if(!(l>e.codingStyleParameters.decompositionLevelsCount)){for(var t=e.resolutions[l],r=t.precinctParameters.numprecincts;u<r;){var o=p(t,u,c);return u++,o}u=0}}h=0}l=0}f("JPX Error: Out of packets")}}function v(e){for(var t=e.SIZ,r=e.currentTile.index,n=e.tiles[r],i=n.codingStyleDefaultParameters.layersCount,a=t.Csiz,s=0,o=0;o<a;o++)s=Math.max(s,n.components[o].codingStyleParameters.decompositionLevelsCount);var c=0,l=0,h=0,u=0;this.nextPacket=function(){for(;c<=s;c++){for(;l<i;l++){for(;h<a;h++){var e=n.components[h];if(!(c>e.codingStyleParameters.decompositionLevelsCount)){for(var t=e.resolutions[c],r=t.precinctParameters.numprecincts;u<r;){var o=p(t,u,l);return u++,o}u=0}}h=0}l=0}f("JPX Error: Out of packets")}}function g(e){var t,r,n,i,a=e.SIZ,s=e.currentTile.index,o=e.tiles[s],c=o.codingStyleDefaultParameters.layersCount,l=a.Csiz,h=0;for(n=0;n<l;n++){var u=o.components[n];h=Math.max(h,u.codingStyleParameters.decompositionLevelsCount)}var m=new Int32Array(h+1);for(r=0;r<=h;++r){var d=0;for(n=0;n<l;++n){var v=o.components[n].resolutions;r<v.length&&(d=Math.max(d,v[r].precinctParameters.numprecincts))}m[r]=d}t=0,r=0,n=0,i=0,this.nextPacket=function(){for(;r<=h;r++){for(;i<m[r];i++){for(;n<l;n++){var e=o.components[n];if(!(r>e.codingStyleParameters.decompositionLevelsCount)){var a=e.resolutions[r],s=a.precinctParameters.numprecincts;if(!(i>=s)){for(;t<c;){var u=p(a,i,t);return t++,u}t=0}}}n=0}i=0}f("JPX Error: Out of packets")}}function b(e){var t=e.SIZ,r=e.currentTile.index,n=e.tiles[r],i=n.codingStyleDefaultParameters.layersCount,a=t.Csiz,s=w(n),o=s,c=0,l=0,h=0,u=0,m=0;this.nextPacket=function(){for(;m<o.maxNumHigh;m++){for(;u<o.maxNumWide;u++){for(;h<a;h++){for(var e=n.components[h],t=e.codingStyleParameters.decompositionLevelsCount;l<=t;l++){var r=e.resolutions[l],d=s.components[h].resolutions[l],v=x(u,m,d,o,r);if(null!==v){for(;c<i;){var g=p(r,v,c);return c++,g}c=0}}l=0}h=0}u=0}f("JPX Error: Out of packets")}}function y(e){var t=e.SIZ,r=e.currentTile.index,n=e.tiles[r],i=n.codingStyleDefaultParameters.layersCount,a=t.Csiz,s=w(n),o=0,c=0,l=0,h=0,u=0;this.nextPacket=function(){for(;l<a;++l){for(var e=n.components[l],t=s.components[l],r=e.codingStyleParameters.decompositionLevelsCount;u<t.maxNumHigh;u++){for(;h<t.maxNumWide;h++){for(;c<=r;c++){var m=e.resolutions[c],d=t.resolutions[c],v=x(h,u,d,t,m);if(null!==v){for(;o<i;){var g=p(m,v,o);return o++,g}o=0}}c=0}h=0}u=0}f("JPX Error: Out of packets")}}function x(e,t,r,n,i){var a=e*n.minWidth,s=t*n.minHeight;if(a%r.width!=0||s%r.height!=0)return null;var o=s/r.width*i.precinctParameters.numprecinctswide;return a/r.height+o}function w(e){for(var t=e.components.length,r=Number.MAX_VALUE,n=Number.MAX_VALUE,i=0,a=0,s=new Array(t),o=0;o<t;o++){for(var c=e.components[o],l=c.codingStyleParameters.decompositionLevelsCount,h=new Array(l+1),f=Number.MAX_VALUE,u=Number.MAX_VALUE,m=0,p=0,d=1,v=l;v>=0;--v){var g=c.resolutions[v],b=d*g.precinctParameters.precinctWidth,y=d*g.precinctParameters.precinctHeight;f=Math.min(f,b),u=Math.min(u,y),m=Math.max(m,g.precinctParameters.numprecinctswide),p=Math.max(p,g.precinctParameters.numprecinctshigh),h[v]={width:b,height:y},d<<=1}r=Math.min(r,f),n=Math.min(n,u),i=Math.max(i,m),a=Math.max(a,p),s[o]={resolutions:h,minWidth:f,minHeight:u,maxNumWide:m,maxNumHigh:p}}return{components:s,minWidth:r,minHeight:n,maxNumWide:i,maxNumHigh:a}}function k(e){for(var t=e.SIZ,r=e.currentTile.index,n=e.tiles[r],i=t.Csiz,s=0;s<i;s++){for(var c=n.components[s],l=c.codingStyleParameters.decompositionLevelsCount,u=[],m=[],p=0;p<=l;p++){var x,w=a(0,c,p),k={},C=1<<l-p;if(k.trx0=Math.ceil(c.tcx0/C),k.try0=Math.ceil(c.tcy0/C),k.trx1=Math.ceil(c.tcx1/C),k.try1=Math.ceil(c.tcy1/C),k.resLevel=p,o(0,k,w),u.push(k),0===p)(x={}).type="LL",x.tbx0=Math.ceil(c.tcx0/C),x.tby0=Math.ceil(c.tcy0/C),x.tbx1=Math.ceil(c.tcx1/C),x.tby1=Math.ceil(c.tcy1/C),x.resolution=k,h(0,x,w),m.push(x),k.subbands=[x];else{var P=1<<l-p+1,I=[];(x={}).type="HL",x.tbx0=Math.ceil(c.tcx0/P-.5),x.tby0=Math.ceil(c.tcy0/P),x.tbx1=Math.ceil(c.tcx1/P-.5),x.tby1=Math.ceil(c.tcy1/P),x.resolution=k,h(0,x,w),m.push(x),I.push(x),(x={}).type="LH",x.tbx0=Math.ceil(c.tcx0/P),x.tby0=Math.ceil(c.tcy0/P-.5),x.tbx1=Math.ceil(c.tcx1/P),x.tby1=Math.ceil(c.tcy1/P-.5),x.resolution=k,h(0,x,w),m.push(x),I.push(x),(x={}).type="HH",x.tbx0=Math.ceil(c.tcx0/P-.5),x.tby0=Math.ceil(c.tcy0/P-.5),x.tbx1=Math.ceil(c.tcx1/P-.5),x.tby1=Math.ceil(c.tcy1/P-.5),x.resolution=k,h(0,x,w),m.push(x),I.push(x),k.subbands=I}}c.resolutions=u,c.subbands=m}var M=n.codingStyleDefaultParameters.progressionOrder;switch(M){case 0:n.packetsIterator=new d(e);break;case 1:n.packetsIterator=new v(e);break;case 2:n.packetsIterator=new g(e);break;case 3:n.packetsIterator=new b(e);break;case 4:n.packetsIterator=new y(e);break;default:f("JPX Error: Unsupported progression order "+M)}}function C(e,t,r,n){var i,a=0,o=0,c=!1;function l(e){for(;o<e;){var n=t[r+a];a++,c?(i=i<<7|n,o+=7,c=!1):(i=i<<8|n,o+=8),255===n&&(c=!0)}return i>>>(o-=e)&(1<<e)-1}function h(e){return 255===t[r+a-1]&&t[r+a]===e?(f(1),!0):255===t[r+a]&&t[r+a+1]===e&&(f(2),!0)}function f(e){a+=e}function u(){o=0,c&&(a++,c=!1)}function m(){if(0===l(1))return 1;if(0===l(1))return 2;var e=l(2);return e<3?e+3:(e=l(5))<31?e+6:(e=l(7))+37}for(var p=e.currentTile.index,d=e.tiles[p],v=e.COD.sopMarkerUsed,g=e.COD.ephMarkerUsed,b=d.packetsIterator;a<n;){u(),v&&h(145)&&f(4);var y=b.nextPacket();if(l(1)){for(var x,w=y.layerNumber,k=[],C=0,P=y.codeblocks.length;C<P;C++){var I=(x=y.codeblocks[C]).precinct,M=x.cbx-I.cbxMin,A=x.cby-I.cbyMin,D=!1,L=!1;if(void 0!==x.included)D=!!l(1);else{var z,F;if(void 0!==(I=x.precinct).inclusionTree)z=I.inclusionTree;else{var O=I.cbxMax-I.cbxMin+1,B=I.cbyMax-I.cbyMin+1;z=new T(O,B,w),F=new S(O,B),I.inclusionTree=z,I.zeroBitPlanesTree=F}if(z.reset(M,A,w))for(;;){if(!l(1)){z.incrementValue(w);break}if(!z.nextLevel()){x.included=!0,D=L=!0;break}}}if(D){if(L){for((F=I.zeroBitPlanesTree).reset(M,A);;)if(l(1)){if(!F.nextLevel())break}else F.incrementValue();x.zeroBitPlanes=F.value}for(var q=m();l(1);)x.Lblock++;var R=s(q),E=l((q<1<<R?R-1:R)+x.Lblock);k.push({codeblock:x,codingpasses:q,dataLength:E})}}for(u(),g&&h(146);k.length>0;){var U=k.shift();void 0===(x=U.codeblock).data&&(x.data=[]),x.data.push({data:t,start:r+a,end:r+a+U.dataLength,codingpasses:U.codingpasses}),a+=U.dataLength}}}return a}function P(e,t,r,i,a,s,o,c){for(var l=i.tbx0,h=i.tby0,f=i.tbx1-i.tbx0,u=i.codeblocks,m="H"===i.type.charAt(0)?1:0,p="H"===i.type.charAt(1)?t:0,d=0,v=u.length;d<v;++d){var g=u[d],b=g.tbx1_-g.tbx0_,y=g.tby1_-g.tby0_;if(0!==b&&0!==y&&void 0!==g.data){var x,w;x=new A(b,y,g.subbandType,g.zeroBitPlanes,s),w=2;var k,C,P,I=g.data,M=0,S=0;for(k=0,C=I.length;k<C;k++)M+=(P=I[k]).end-P.start,S+=P.codingpasses;var T=new Uint8Array(M),D=0;for(k=0,C=I.length;k<C;k++){var L=(P=I[k]).data.subarray(P.start,P.end);T.set(L,D),D+=L.length}var z=new n(T,0,M);for(x.setDecoder(z),k=0;k<S;k++){switch(w){case 0:x.runSignificancePropagationPass();break;case 1:x.runMagnitudeRefinementPass();break;case 2:x.runCleanupPass(),c&&x.checkSegmentationSymbol()}w=(w+1)%3}var F,O,B,q=g.tbx0_-l+(g.tby0_-h)*f,R=x.coefficentsSign,E=x.coefficentsMagnitude,U=x.bitsDecoded,X=o?0:.5;D=0;var H="LL"!==i.type;for(k=0;k<y;k++){var J=2*(q/f|0)*(t-f)+m+p;for(F=0;F<b;F++){if(0!==(O=E[D])){O=(O+X)*a,0!==R[D]&&(O=-O),B=U[D];var _=H?J+(q<<1):q;e[_]=o&&B>=s?O:O*(1<<s-B)}q++,D++}q+=f-b}}}}function I(t,r,n){for(var i=r.components[n],a=i.codingStyleParameters,s=i.quantizationParameters,o=a.decompositionLevelsCount,c=s.SPqcds,l=s.scalarExpounded,h=s.guardBits,f=a.segmentationSymbolUsed,u=t.components[n].precision,m=a.reversibleTransformation,p=m?new z:new L,d=[],v=0,g=0;g<=o;g++){for(var b=i.resolutions[g],y=b.trx1-b.trx0,x=b.try1-b.try0,w=new Float32Array(y*x),k=0,C=b.subbands.length;k<C;k++){var I,M;l?(I=c[v].mu,M=c[v].epsilon,v++):(I=c[0].mu,M=c[0].epsilon+(g>0?1-g:0));var S=b.subbands[k],T=e[S.type];P(w,y,0,S,m?1:Math.pow(2,u+T-M)*(1+I/2048),h+M-1,m,f)}d.push({width:y,height:x,items:w})}var A=p.calculate(d,i.tcx0,i.tcy0);return{left:i.tcx0,top:i.tcy0,width:A.width,height:A.height,items:A.items}}function M(e,t){for(var r=e.SIZ.Csiz,n=e.tiles[t],i=0;i<r;i++){var a=n.components[i],s=void 0!==e.currentTile.QCC[i]?e.currentTile.QCC[i]:e.currentTile.QCD;a.quantizationParameters=s;var o=void 0!==e.currentTile.COC[i]?e.currentTile.COC[i]:e.currentTile.COD;a.codingStyleParameters=o}n.codingStyleDefaultParameters=e.currentTile.COD}t.prototype={parse:function(e){if(65359!==c(e,0))for(var t=0,r=e.length;t<r;){var n=8,i=l(e,t),a=l(e,t+4);t+=n,1===i&&(i=4294967296*l(e,t)+l(e,t+4),t+=8,n+=8),0===i&&(i=r-t+n),i<n&&f("JPX Error: Invalid box field size");var s=i-n,o=!0;switch(a){case 1785737832:o=!1;break;case 1668246642:var h=e[t];if(1===h){var p=l(e,t+3);switch(p){case 16:case 17:case 18:break;default:u("Unknown colorspace "+p)}}else 2===h&&m("ICC profile not supported");break;case 1785737827:this.parseCodestream(e,t,t+s);break;case 1783636e3:218793738!==l(e,t)&&u("Invalid JP2 signature");break;case 1783634458:case 1718909296:case 1920099697:case 1919251232:case 1768449138:break;default:var d=String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,255&a);u("Unsupported header type "+a+" ("+d+")")}o&&(t+=s)}else this.parseCodestream(e,0,e.length)},parseImageProperties:function(e){for(var t=e.getByte();t>=0;){if(65361===(t<<8|(t=e.getByte()))){e.skip(4);var r=e.getInt32()>>>0,n=e.getInt32()>>>0,i=e.getInt32()>>>0,a=e.getInt32()>>>0;e.skip(16);var s=e.getUint16();return this.width=r-i,this.height=n-a,this.componentsCount=s,void(this.bitsPerComponent=8)}}f("JPX Error: No size marker found in JPX stream")},parseCodestream:function(e,t,n){var a={},s=!1;try{for(var o=t;o+1<n;){var h=c(e,o);o+=2;var m,p,d,v,g,b,y=0;switch(h){case 65359:a.mainHeader=!0;break;case 65497:break;case 65361:y=c(e,o);var x={};x.Xsiz=l(e,o+4),x.Ysiz=l(e,o+8),x.XOsiz=l(e,o+12),x.YOsiz=l(e,o+16),x.XTsiz=l(e,o+20),x.YTsiz=l(e,o+24),x.XTOsiz=l(e,o+28),x.YTOsiz=l(e,o+32);var w=c(e,o+36);x.Csiz=w;var P=[];m=o+38;for(var S=0;S<w;S++){var T={precision:1+(127&e[m]),isSigned:!!(128&e[m]),XRsiz:e[m+1],YRsiz:e[m+1]};r(T,x),P.push(T)}a.SIZ=x,a.components=P,i(a,P),a.QCC=[],a.COC=[];break;case 65372:y=c(e,o);var A={};switch(m=o+2,31&(p=e[m++])){case 0:v=8,g=!0;break;case 1:v=16,g=!1;break;case 2:v=16,g=!0;break;default:throw new Error("Invalid SQcd value "+p)}for(A.noQuantization=8===v,A.scalarExpounded=g,A.guardBits=p>>5,d=[];m<y+o;){var D={};8===v?(D.epsilon=e[m++]>>3,D.mu=0):(D.epsilon=e[m]>>3,D.mu=(7&e[m])<<8|e[m+1],m+=2),d.push(D)}A.SPqcds=d,a.mainHeader?a.QCD=A:(a.currentTile.QCD=A,a.currentTile.QCC=[]);break;case 65373:y=c(e,o);var L,z={};switch(m=o+2,a.SIZ.Csiz<257?L=e[m++]:(L=c(e,m),m+=2),31&(p=e[m++])){case 0:v=8,g=!0;break;case 1:v=16,g=!1;break;case 2:v=16,g=!0;break;default:throw new Error("Invalid SQcd value "+p)}for(z.noQuantization=8===v,z.scalarExpounded=g,z.guardBits=p>>5,d=[];m<y+o;)D={},8===v?(D.epsilon=e[m++]>>3,D.mu=0):(D.epsilon=e[m]>>3,D.mu=(7&e[m])<<8|e[m+1],m+=2),d.push(D);z.SPqcds=d,a.mainHeader?a.QCC[L]=z:a.currentTile.QCC[L]=z;break;case 65362:y=c(e,o);var F={};m=o+2;var O=e[m++];F.entropyCoderWithCustomPrecincts=!!(1&O),F.sopMarkerUsed=!!(2&O),F.ephMarkerUsed=!!(4&O),F.progressionOrder=e[m++],F.layersCount=c(e,m),m+=2,F.multipleComponentTransform=e[m++],F.decompositionLevelsCount=e[m++],F.xcb=2+(15&e[m++]),F.ycb=2+(15&e[m++]);var B=e[m++];if(F.selectiveArithmeticCodingBypass=!!(1&B),F.resetContextProbabilities=!!(2&B),F.terminationOnEachCodingPass=!!(4&B),F.verticalyStripe=!!(8&B),F.predictableTermination=!!(16&B),F.segmentationSymbolUsed=!!(32&B),F.reversibleTransformation=e[m++],F.entropyCoderWithCustomPrecincts){for(var q=[];m<y+o;){var R=e[m++];q.push({PPx:15&R,PPy:R>>4})}F.precinctsSizes=q}var E=[];if(F.selectiveArithmeticCodingBypass&&E.push("selectiveArithmeticCodingBypass"),F.resetContextProbabilities&&E.push("resetContextProbabilities"),F.terminationOnEachCodingPass&&E.push("terminationOnEachCodingPass"),F.verticalyStripe&&E.push("verticalyStripe"),F.predictableTermination&&E.push("predictableTermination"),E.length>0)throw s=!0,new Error("Unsupported COD options ("+E.join(", ")+")");a.mainHeader?a.COD=F:(a.currentTile.COD=F,a.currentTile.COC=[]);break;case 65424:y=c(e,o),(b={}).index=c(e,o+2),b.length=l(e,o+4),b.dataEnd=b.length+o-2,b.partIndex=e[o+8],b.partsCount=e[o+9],a.mainHeader=!1,0===b.partIndex&&(b.COD=a.COD,b.COC=a.COC.slice(0),b.QCD=a.QCD,b.QCC=a.QCC.slice(0)),a.currentTile=b;break;case 65427:0===(b=a.currentTile).partIndex&&(M(a,b.index),k(a)),C(a,e,o,y=b.dataEnd-o);break;case 65365:case 65367:case 65368:case 65380:y=c(e,o);break;case 65363:throw new Error("Codestream code 0xFF53 (COC) is not implemented");default:throw new Error("Unknown codestream code: "+h.toString(16))}o+=y}}catch(e){s||this.failOnCorruptedImage?f("JPX Error: "+e.message):u("JPX: Trying to recover from: "+e.message)}this.tiles=function(e){for(var t=e.SIZ,r=e.components,n=t.Csiz,i=[],a=0,s=e.tiles.length;a<s;a++){var o,c=e.tiles[a],l=[];for(o=0;o<n;o++)l[o]=I(e,c,o);var h,f,u,m,p,d,v,g,b,y,x,w,k,C,P,M=l[0],S=new Uint8Array(M.items.length*n),T={left:M.left,top:M.top,width:M.width,height:M.height,items:S},A=0;if(c.codingStyleDefaultParameters.multipleComponentTransform){var D=4===n,L=l[0].items,z=l[1].items,F=l[2].items,O=D?l[3].items:null;h=r[0].precision-8,f=.5+(128<<h),m=-(p=.5*(u=255*(1<<h)));var B=c.components[0],q=n-3;if(v=L.length,B.codingStyleParameters.reversibleTransformation)for(d=0;d<v;d++,A+=q)g=L[d]+f,b=z[d],y=F[d],x=(w=g-(y+b>>2))+y,k=w+b,S[A++]=x<=0?0:x>=u?255:x>>h,S[A++]=w<=0?0:w>=u?255:w>>h,S[A++]=k<=0?0:k>=u?255:k>>h;else for(d=0;d<v;d++,A+=q)g=L[d]+f,b=z[d],y=F[d],x=g+1.402*y,w=g-.34413*b-.71414*y,k=g+1.772*b,S[A++]=x<=0?0:x>=u?255:x>>h,S[A++]=w<=0?0:w>=u?255:w>>h,S[A++]=k<=0?0:k>=u?255:k>>h;if(D)for(d=0,A=3;d<v;d++,A+=4)C=O[d],S[A]=C<=m?0:C>=p?255:C+f>>h}else for(o=0;o<n;o++){var R=l[o].items;for(h=r[o].precision-8,f=.5+(128<<h),m=-(u=127.5*(1<<h)),A=o,d=0,v=R.length;d<v;d++)P=R[d],S[A]=P<=m?0:P>=u?255:P+f>>h,A+=n}i.push(T)}return i}(a),this.width=a.SIZ.Xsiz-a.SIZ.XOsiz,this.height=a.SIZ.Ysiz-a.SIZ.YOsiz,this.componentsCount=a.SIZ.Csiz}};var S=function(){function e(e,t){var r=s(Math.max(e,t))+1;this.levels=[];for(var n=0;n<r;n++){var i={width:e,height:t,items:[]};this.levels.push(i),e=Math.ceil(e/2),t=Math.ceil(t/2)}}return e.prototype={reset:function(e,t){for(var r,n=0,i=0;n<this.levels.length;){var a=e+t*(r=this.levels[n]).width;if(void 0!==r.items[a]){i=r.items[a];break}r.index=a,e>>=1,t>>=1,n++}n--,(r=this.levels[n]).items[r.index]=i,this.currentLevel=n,delete this.value},incrementValue:function(){var e=this.levels[this.currentLevel];e.items[e.index]++},nextLevel:function(){var e=this.currentLevel,t=this.levels[e],r=t.items[t.index];return--e<0?(this.value=r,!1):(this.currentLevel=e,(t=this.levels[e]).items[t.index]=r,!0)}},e}(),T=function(){function e(e,t,r){var n=s(Math.max(e,t))+1;this.levels=[];for(var i=0;i<n;i++){for(var a=new Uint8Array(e*t),o=0,c=a.length;o<c;o++)a[o]=r;var l={width:e,height:t,items:a};this.levels.push(l),e=Math.ceil(e/2),t=Math.ceil(t/2)}}return e.prototype={reset:function(e,t,r){for(var n=0;n<this.levels.length;){var i=this.levels[n],a=e+t*i.width;i.index=a;var s=i.items[a];if(255===s)break;if(s>r)return this.currentLevel=n,this.propagateValues(),!1;e>>=1,t>>=1,n++}return this.currentLevel=n-1,!0},incrementValue:function(e){var t=this.levels[this.currentLevel];t.items[t.index]=e+1,this.propagateValues()},propagateValues:function(){for(var e=this.currentLevel,t=this.levels[e],r=t.items[t.index];--e>=0;)(t=this.levels[e]).items[t.index]=r},nextLevel:function(){var e=this.currentLevel,t=this.levels[e],r=t.items[t.index];return t.items[t.index]=255,!(--e<0)&&(this.currentLevel=e,(t=this.levels[e]).items[t.index]=r,!0)}},e}(),A=function(){var e=new Uint8Array([0,5,8,0,3,7,8,0,4,7,8,0,0,0,0,0,1,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8]),t=new Uint8Array([0,3,4,0,5,7,7,0,8,8,8,0,0,0,0,0,1,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8]),r=new Uint8Array([0,1,2,0,1,2,2,0,2,2,2,0,0,0,0,0,3,4,5,0,4,5,5,0,5,5,5,0,0,0,0,0,6,7,7,0,7,7,7,0,7,7,7,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8]);function n(n,i,a,s,o){this.width=n,this.height=i,this.contextLabelTable="HH"===a?r:"HL"===a?t:e;var c=n*i;this.neighborsSignificance=new Uint8Array(c),this.coefficentsSign=new Uint8Array(c),this.coefficentsMagnitude=o>14?new Uint32Array(c):o>6?new Uint16Array(c):new Uint8Array(c),this.processingFlags=new Uint8Array(c);var l=new Uint8Array(c);if(0!==s)for(var h=0;h<c;h++)l[h]=s;this.bitsDecoded=l,this.reset()}return n.prototype={setDecoder:function(e){this.decoder=e},reset:function(){this.contexts=new Int8Array(19),this.contexts[0]=8,this.contexts[17]=92,this.contexts[18]=6},setNeighborsSignificance:function(e,t,r){var n,i=this.neighborsSignificance,a=this.width,s=this.height,o=t>0,c=t+1<a;e>0&&(n=r-a,o&&(i[n-1]+=16),c&&(i[n+1]+=16),i[n]+=4),e+1<s&&(n=r+a,o&&(i[n-1]+=16),c&&(i[n+1]+=16),i[n]+=4),o&&(i[r-1]+=1),c&&(i[r+1]+=1),i[r]|=128},runSignificancePropagationPass:function(){for(var e=this.decoder,t=this.width,r=this.height,n=this.coefficentsMagnitude,i=this.coefficentsSign,a=this.neighborsSignificance,s=this.processingFlags,o=this.contexts,c=this.contextLabelTable,l=this.bitsDecoded,h=0;h<r;h+=4)for(var f=0;f<t;f++)for(var u=h*t+f,m=0;m<4;m++,u+=t){var p=h+m;if(p>=r)break;if(s[u]&=-2,!n[u]&&a[u]){var d=c[a[u]];if(e.readBit(o,d)){var v=this.decodeSignBit(p,f,u);i[u]=v,n[u]=1,this.setNeighborsSignificance(p,f,u),s[u]|=2}l[u]++,s[u]|=1}}},decodeSignBit:function(e,t,r){var n,i,a,s,o,c,l=this.width,h=this.height,f=this.coefficentsMagnitude,u=this.coefficentsSign;s=t>0&&0!==f[r-1],t+1<l&&0!==f[r+1]?(a=u[r+1],n=s?1-a-(i=u[r-1]):1-a-a):n=s?1-(i=u[r-1])-i:0;var m=3*n;return s=e>0&&0!==f[r-l],e+1<h&&0!==f[r+l]?(a=u[r+l],n=s?1-a-(i=u[r-l])+m:1-a-a+m):n=s?1-(i=u[r-l])-i+m:m,n>=0?(o=9+n,c=this.decoder.readBit(this.contexts,o)):(o=9-n,c=1^this.decoder.readBit(this.contexts,o)),c},runMagnitudeRefinementPass:function(){for(var e,t=this.decoder,r=this.width,n=this.height,i=this.coefficentsMagnitude,a=this.neighborsSignificance,s=this.contexts,o=this.bitsDecoded,c=this.processingFlags,l=r*n,h=4*r,f=0;f<l;f=e){e=Math.min(l,f+h);for(var u=0;u<r;u++)for(var m=f+u;m<e;m+=r)if(i[m]&&0==(1&c[m])){var p=16;if(0!=(2&c[m]))c[m]^=2,p=0===(127&a[m])?15:14;var d=t.readBit(s,p);i[m]=i[m]<<1|d,o[m]++,c[m]|=1}}},runCleanupPass:function(){for(var e,t=this.decoder,r=this.width,n=this.height,i=this.neighborsSignificance,a=this.coefficentsMagnitude,s=this.coefficentsSign,o=this.contexts,c=this.contextLabelTable,l=this.bitsDecoded,h=this.processingFlags,f=r,u=2*r,m=3*r,p=0;p<n;p=e){e=Math.min(p+4,n);for(var d=p*r,v=p+3<n,g=0;g<r;g++){var b,y=d+g,x=0,w=y,k=p;if(v&&0===h[y]&&0===h[y+f]&&0===h[y+u]&&0===h[y+m]&&0===i[y]&&0===i[y+f]&&0===i[y+u]&&0===i[y+m]){if(!t.readBit(o,18)){l[y]++,l[y+f]++,l[y+u]++,l[y+m]++;continue}0!==(x=t.readBit(o,17)<<1|t.readBit(o,17))&&(k=p+x,w+=x*r),b=this.decodeSignBit(k,g,w),s[w]=b,a[w]=1,this.setNeighborsSignificance(k,g,w),h[w]|=2,w=y;for(var C=p;C<=k;C++,w+=r)l[w]++;x++}for(k=p+x;k<e;k++,w+=r)if(!a[w]&&0==(1&h[w])){var P=c[i[w]];1===t.readBit(o,P)&&(b=this.decodeSignBit(k,g,w),s[w]=b,a[w]=1,this.setNeighborsSignificance(k,g,w),h[w]|=2),l[w]++}}}},checkSegmentationSymbol:function(){var e=this.decoder,t=this.contexts;10!==(e.readBit(t,17)<<3|e.readBit(t,17)<<2|e.readBit(t,17)<<1|e.readBit(t,17))&&f("JPX Error: Invalid segmentation symbol")}},n}(),D=function(){function e(){}return e.prototype.calculate=function(e,t,r){for(var n=e[0],i=1,a=e.length;i<a;i++)n=this.iterate(n,e[i],t,r);return n},e.prototype.extend=function(e,t,r){var n=t-1,i=t+1,a=t+r-2,s=t+r;e[n--]=e[i++],e[s++]=e[a--],e[n--]=e[i++],e[s++]=e[a--],e[n--]=e[i++],e[s++]=e[a--],e[n]=e[i],e[s]=e[a]},e.prototype.iterate=function(e,t,r,n){var i,a,s,o,c,l,h=e.width,f=e.height,u=e.items,m=t.width,p=t.height,d=t.items;for(s=0,i=0;i<f;i++)for(o=2*i*m,a=0;a<h;a++,s++,o+=2)d[o]=u[s];u=e.items=null;var v=new Float32Array(m+8);if(1===m){if(0!=(1&r))for(l=0,s=0;l<p;l++,s+=m)d[s]*=.5}else for(l=0,s=0;l<p;l++,s+=m)v.set(d.subarray(s,s+m),4),this.extend(v,4,m),this.filter(v,4,m),d.set(v.subarray(4,4+m),s);var g=16,b=[];for(i=0;i<g;i++)b.push(new Float32Array(p+8));var y,x=0;if(e=4+p,1===p){if(0!=(1&n))for(c=0;c<m;c++)d[c]*=.5}else for(c=0;c<m;c++){if(0===x){for(g=Math.min(m-c,g),s=c,o=4;o<e;s+=m,o++)for(y=0;y<g;y++)b[y][o]=d[s+y];x=g}var w=b[--x];if(this.extend(w,4,p),this.filter(w,4,p),0===x)for(s=c-g+1,o=4;o<e;s+=m,o++)for(y=0;y<g;y++)d[s+y]=b[y][o]}return{width:m,height:p,items:d}},e}(),L=function(){function e(){D.call(this)}return e.prototype=Object.create(D.prototype),e.prototype.filter=function(e,t,r){var n,i,a,s,o=r>>1,c=-1.586134342059924,l=-.052980118572961,h=.882911075530934,f=.443506852043971,u=1.230174104914001;for(n=(t|=0)-3,i=o+4;i--;n+=2)e[n]*=.8128930661159609;for(a=f*e[(n=t-2)-1],i=o+3;i--&&(s=f*e[n+1],e[n]=u*e[n]-a-s,i--);n+=2)a=f*e[(n+=2)+1],e[n]=u*e[n]-a-s;for(a=h*e[(n=t-1)-1],i=o+2;i--&&(s=h*e[n+1],e[n]-=a+s,i--);n+=2)a=h*e[(n+=2)+1],e[n]-=a+s;for(a=l*e[(n=t)-1],i=o+1;i--&&(s=l*e[n+1],e[n]-=a+s,i--);n+=2)a=l*e[(n+=2)+1],e[n]-=a+s;if(0!==o)for(a=c*e[(n=t+1)-1],i=o;i--&&(s=c*e[n+1],e[n]-=a+s,i--);n+=2)a=c*e[(n+=2)+1],e[n]-=a+s},e}(),z=function(){function e(){D.call(this)}return e.prototype=Object.create(D.prototype),e.prototype.filter=function(e,t,r){var n,i,a=r>>1;for(n=t|=0,i=a+1;i--;n+=2)e[n]-=e[n-1]+e[n+1]+2>>2;for(n=t+1,i=a;i--;n+=2)e[n]+=e[n-1]+e[n+1]>>1},e}();return t}(),a=function(){function e(){}function t(e,t,r){this.data=e,this.start=t,this.end=r}function r(e,t,r){var n=e.getContexts(t),i=1;function a(e){for(var t=0,a=0;a<e;a++){var s=r.readBit(n,i);i=i<256?i<<1|s:511&(i<<1|s)|256,t=t<<1|s}return t>>>0}var s=a(1),o=a(1)?a(1)?a(1)?a(1)?a(1)?a(32)+4436:a(12)+340:a(8)+84:a(6)+20:a(4)+4:a(2);return 0===s?o:o>0?-o:null}function i(e,t,r){for(var n=e.getContexts("IAID"),i=1,a=0;a<r;a++){i=i<<1|t.readBit(n,i)}return r<31?i&(1<<r)-1:2147483647&i}e.prototype={getContexts:function(e){return e in this?this[e]:this[e]=new Int8Array(65536)}},t.prototype={get decoder(){return h(this,"decoder",new n(this.data,this.start,this.end))},get contextCache(){return h(this,"contextCache",new e)}};var a=["SymbolDictionary",null,null,null,"IntermediateTextRegion",null,"ImmediateTextRegion","ImmediateLosslessTextRegion",null,null,null,null,null,null,null,null,"patternDictionary",null,null,null,"IntermediateHalftoneRegion",null,"ImmediateHalftoneRegion","ImmediateLosslessHalftoneRegion",null,null,null,null,null,null,null,null,null,null,null,null,"IntermediateGenericRegion",null,"ImmediateGenericRegion","ImmediateLosslessGenericRegion","IntermediateGenericRefinementRegion",null,"ImmediateGenericRefinementRegion","ImmediateLosslessGenericRefinementRegion",null,null,null,null,"PageInformation","EndOfPage","EndOfStripe","EndOfFile","Profiles","Tables",null,null,null,null,null,null,null,null,"Extension"],u=[[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:2,y:-1},{x:-4,y:0},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}],[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:2,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:2,y:-1},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}],[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-2,y:0},{x:-1,y:0}],[{x:-3,y:-1},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-4,y:0},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}]],m=[{coding:[{x:0,y:-1},{x:1,y:-1},{x:-1,y:0}],reference:[{x:0,y:-1},{x:1,y:-1},{x:-1,y:0},{x:0,y:0},{x:1,y:0},{x:-1,y:1},{x:0,y:1},{x:1,y:1}]},{coding:[{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-1,y:0}],reference:[{x:0,y:-1},{x:-1,y:0},{x:0,y:0},{x:1,y:0},{x:0,y:1},{x:1,y:1}]}],p=[39717,1941,229,405],d=[32,8];function v(e,t,r,n,i,a,s,o){if(e&&f("JBIG2 error: MMR encoding is not supported"),0===n&&!a&&!i&&4===s.length&&3===s[0].x&&-1===s[0].y&&-3===s[1].x&&-1===s[1].y&&2===s[2].x&&-2===s[2].y&&-2===s[3].x&&-2===s[3].y)return function(e,t,r){var n,i,a,s,o,c,l,h=r.decoder,f=r.contextCache.getContexts("GB"),u=[];for(i=0;i<t;i++)for(o=u[i]=new Uint8Array(e),c=i<1?o:u[i-1],n=(l=i<2?o:u[i-2])[0]<<13|l[1]<<12|l[2]<<11|c[0]<<7|c[1]<<6|c[2]<<5|c[3]<<4,a=0;a<e;a++)o[a]=s=h.readBit(f,n),n=(31735&n)<<1|(a+3<e?l[a+3]<<11:0)|(a+4<e?c[a+4]<<4:0)|s;return u}(t,r,o);var c=!!a,l=u[n].concat(s);l.sort(function(e,t){return e.y-t.y||e.x-t.x});var h,m,d=l.length,v=new Int8Array(d),g=new Int8Array(d),b=[],y=0,x=0,w=0,k=0;for(m=0;m<d;m++)v[m]=l[m].x,g[m]=l[m].y,x=Math.min(x,l[m].x),w=Math.max(w,l[m].x),k=Math.min(k,l[m].y),m<d-1&&l[m].y===l[m+1].y&&l[m].x===l[m+1].x-1?y|=1<<d-1-m:b.push(m);var C=b.length,P=new Int8Array(C),I=new Int8Array(C),M=new Uint16Array(C);for(h=0;h<C;h++)m=b[h],P[h]=l[m].x,I[h]=l[m].y,M[h]=1<<d-1-m;for(var S,T,A,D,L,z=-x,F=-k,O=t-w,B=p[n],q=new Uint8Array(t),R=[],E=o.decoder,U=o.contextCache.getContexts("GB"),X=0,H=0,J=0;J<r;J++){if(i)if(X^=E.readBit(U,B)){R.push(q);continue}for(q=new Uint8Array(q),R.push(q),S=0;S<t;S++)if(c&&a[J][S])q[S]=0;else{if(S>=z&&S<O&&J>=F)for(H=H<<1&y,m=0;m<C;m++)T=J+I[m],A=S+P[m],(D=R[T][A])&&(H|=D=M[m]);else for(H=0,L=d-1,m=0;m<d;m++,L--)(A=S+v[m])>=0&&A<t&&(T=J+g[m])>=0&&(D=R[T][A])&&(H|=D<<L);var _=E.readBit(U,H);q[S]=_}}return R}function g(e,t,r,n,i,a,s,o,c){var l=m[r].coding;0===r&&(l=l.concat([o[0]]));var h,u=l.length,p=new Int32Array(u),v=new Int32Array(u);for(h=0;h<u;h++)p[h]=l[h].x,v[h]=l[h].y;var g=m[r].reference;0===r&&(g=g.concat([o[1]]));var b=g.length,y=new Int32Array(b),x=new Int32Array(b);for(h=0;h<b;h++)y[h]=g[h].x,x[h]=g[h].y;for(var w=n[0].length,k=n.length,C=d[r],P=[],I=c.decoder,M=c.contextCache.getContexts("GR"),S=0,T=0;T<t;T++){if(s)(S^=I.readBit(M,C))&&f("JBIG2 error: prediction is not supported");var A=new Uint8Array(e);P.push(A);for(var D=0;D<e;D++){var L,z,F=0;for(h=0;h<u;h++)L=T+v[h],z=D+p[h],L<0||z<0||z>=e?F<<=1:F=F<<1|P[L][z];for(h=0;h<b;h++)L=T+x[h]+a,z=D+y[h]+i,L<0||L>=k||z<0||z>=w?F<<=1:F=F<<1|n[L][z];var O=I.readBit(M,F);A[D]=O}}return P}function b(e,t,n,a,s,o,c,l,h,u,m,p,d,v,b,y,x){e&&f("JBIG2 error: huffman is not supported");var w,k,C=[];for(w=0;w<a;w++){if(k=new Uint8Array(n),s)for(var P=0;P<n;P++)k[P]=s;C.push(k)}var I=x.decoder,M=x.contextCache,S=-r(M,"IADT",I),T=0;for(w=0;w<o;){S+=r(M,"IADT",I);for(var A=T+=r(M,"IAFS",I);;){var D=c*S+(1===c?0:r(M,"IAIT",I)),L=i(M,I,h),z=t&&r(M,"IARI",I),F=l[L],O=F[0].length,B=F.length;if(z){var q=r(M,"IARDW",I),R=r(M,"IARDH",I);F=g(O+=q,B+=R,b,F,(q>>1)+r(M,"IARDX",I),(R>>1)+r(M,"IARDY",I),!1,y,x)}var E,U,X,H=D-(1&p?0:B),J=A-(2&p?O:0);if(u){for(E=0;E<B;E++)if(k=C[J+E]){X=F[E];var _=Math.min(n-H,O);switch(d){case 0:for(U=0;U<_;U++)k[H+U]|=X[U];break;case 2:for(U=0;U<_;U++)k[H+U]^=X[U];break;default:f("JBIG2 error: operator "+d+" is not supported")}}A+=B-1}else{for(U=0;U<B;U++)if(k=C[H+U])switch(X=F[U],d){case 0:for(E=0;E<O;E++)k[J+E]|=X[E];break;case 2:for(E=0;E<O;E++)k[J+E]^=X[E];break;default:f("JBIG2 error: operator "+d+" is not supported")}A+=O-1}w++;var N=r(M,"IADS",I);if(null===N)break;A+=N+m}}return C}function y(e,t){var r={};r.number=l(e,t);var n=e[t+4],i=63&n;a[i]||f("JBIG2 error: invalid segment type: "+i),r.type=i,r.typeName=a[i],r.deferredNonRetain=!!(128&n);var s=!!(64&n),o=e[t+5],h=o>>5&7,u=[31&o],m=t+6;if(7===o){h=536870911&l(e,m-1),m+=3;var p=h+7>>3;for(u[0]=e[m++];--p>0;)u.push(e[m++])}else 5!==o&&6!==o||f("JBIG2 error: invalid referred-to flags");r.retainBits=u;var d,v,g=r.number<=256?1:r.number<=65536?2:4,b=[];for(d=0;d<h;d++){var y=1===g?e[m]:2===g?c(e,m):l(e,m);b.push(y),m+=g}if(r.referredTo=b,s?(r.pageAssociation=l(e,m),m+=4):r.pageAssociation=e[m++],r.length=l(e,m),m+=4,4294967295===r.length)if(38===i){var x=w(e,m),C=!!(1&e[m+k]),P=new Uint8Array(6);for(C||(P[0]=255,P[1]=172),P[2]=x.height>>>24&255,P[3]=x.height>>16&255,P[4]=x.height>>8&255,P[5]=255&x.height,d=m,v=e.length;d<v;d++){for(var I=0;I<6&&P[I]===e[d+I];)I++;if(6===I){r.length=d+6;break}}4294967295===r.length&&f("JBIG2 error: segment end was not found")}else f("JBIG2 error: invalid unknown segment length");return r.headerEnd=m,r}function x(e,t,r,n){for(var i=[],a=r;a<n;){var s=y(t,a);a=s.headerEnd;var o={header:s,data:t};if(e.randomAccess||(o.start=a,a+=s.length,o.end=a),i.push(o),51===s.type)break}if(e.randomAccess)for(var c=0,l=i.length;c<l;c++)i[c].start=a,a+=i[c].header.length,i[c].end=a;return i}function w(e,t){return{width:l(e,t),height:l(e,t+4),x:l(e,t+8),y:l(e,t+12),combinationOperator:7&e[t+16]}}var k=17;function C(e,t){var r,n,i,a,s=e.header,h=e.data,u=e.start,m=e.end;switch(s.type){case 0:var p={},d=c(h,u);if(p.huffman=!!(1&d),p.refinement=!!(2&d),p.huffmanDHSelector=d>>2&3,p.huffmanDWSelector=d>>4&3,p.bitmapSizeSelector=d>>6&1,p.aggregationInstancesSelector=d>>7&1,p.bitmapCodingContextUsed=!!(256&d),p.bitmapCodingContextRetained=!!(512&d),p.template=d>>10&3,p.refinementTemplate=d>>12&1,u+=2,!p.huffman){for(a=0===p.template?4:1,n=[],i=0;i<a;i++)n.push({x:o(h,u),y:o(h,u+1)}),u+=2;p.at=n}if(p.refinement&&!p.refinementTemplate){for(n=[],i=0;i<2;i++)n.push({x:o(h,u),y:o(h,u+1)}),u+=2;p.refinementAt=n}p.numberOfExportedSymbols=l(h,u),u+=4,p.numberOfNewSymbols=l(h,u),u+=4,r=[p,s.number,s.referredTo,h,u,m];break;case 6:case 7:var v={};v.info=w(h,u);var g=c(h,u+=k);if(u+=2,v.huffman=!!(1&g),v.refinement=!!(2&g),v.stripSize=1<<(g>>2&3),v.referenceCorner=g>>4&3,v.transposed=!!(64&g),v.combinationOperator=g>>7&3,v.defaultPixelValue=g>>9&1,v.dsOffset=g<<17>>27,v.refinementTemplate=g>>15&1,v.huffman){var b=c(h,u);u+=2,v.huffmanFS=3&b,v.huffmanDS=b>>2&3,v.huffmanDT=b>>4&3,v.huffmanRefinementDW=b>>6&3,v.huffmanRefinementDH=b>>8&3,v.huffmanRefinementDX=b>>10&3,v.huffmanRefinementDY=b>>12&3,v.huffmanRefinementSizeSelector=!!(14&b)}if(v.refinement&&!v.refinementTemplate){for(n=[],i=0;i<2;i++)n.push({x:o(h,u),y:o(h,u+1)}),u+=2;v.refinementAt=n}v.numberOfSymbolInstances=l(h,u),u+=4,v.huffman&&f("JBIG2 error: huffman is not supported"),r=[v,s.referredTo,h,u,m];break;case 38:case 39:var y={};y.info=w(h,u),u+=k;var x=h[u++];if(y.mmr=!!(1&x),y.template=x>>1&3,y.prediction=!!(8&x),!y.mmr){for(a=0===y.template?4:1,n=[],i=0;i<a;i++)n.push({x:o(h,u),y:o(h,u+1)}),u+=2;y.at=n}r=[y,h,u,m];break;case 48:var C={width:l(h,u),height:l(h,u+4),resolutionX:l(h,u+8),resolutionY:l(h,u+12)};4294967295===C.height&&delete C.height;var P=h[u+16];c(h,u+17),C.lossless=!!(1&P),C.refinement=!!(2&P),C.defaultPixelValue=P>>2&1,C.combinationOperator=P>>3&3,C.requiresBuffer=!!(32&P),C.combinationOperatorOverride=!!(64&P),r=[C];break;case 49:case 50:case 51:case 62:break;default:f("JBIG2 error: segment type "+s.typeName+"("+s.type+") is not implemented")}var I="on"+s.typeName;I in t&&t[I].apply(t,r)}function P(e,t){for(var r=0,n=e.length;r<n;r++)C(e[r],t)}function I(){}function M(){}return I.prototype={onPageInformation:function(e){this.currentPageInfo=e;var t=e.width+7>>3,r=new Uint8Array(t*e.height);if(e.defaultPixelValue)for(var n=0,i=r.length;n<i;n++)r[n]=255;this.buffer=r},drawBitmap:function(e,t){var r,n,i,a,s=this.currentPageInfo,o=e.width,c=e.height,l=s.width+7>>3,h=s.combinationOperatorOverride?e.combinationOperator:s.combinationOperator,u=this.buffer,m=128>>(7&e.x),p=e.y*l+(e.x>>3);switch(h){case 0:for(r=0;r<c;r++){for(i=m,a=p,n=0;n<o;n++)t[r][n]&&(u[a]|=i),(i>>=1)||(i=128,a++);p+=l}break;case 2:for(r=0;r<c;r++){for(i=m,a=p,n=0;n<o;n++)t[r][n]&&(u[a]^=i),(i>>=1)||(i=128,a++);p+=l}break;default:f("JBIG2 error: operator "+h+" is not supported")}},onImmediateGenericRegion:function(e,r,n,i){var a=e.info,s=new t(r,n,i),o=v(e.mmr,a.width,a.height,e.template,e.prediction,null,e.at,s);this.drawBitmap(a,o)},onImmediateLosslessGenericRegion:function(){this.onImmediateGenericRegion.apply(this,arguments)},onSymbolDictionary:function(e,n,a,o,c,l){e.huffman&&f("JBIG2 error: huffman is not supported");var h=this.symbols;h||(this.symbols=h={});for(var u=[],m=0,p=a.length;m<p;m++)u=u.concat(h[a[m]]);var d=new t(o,c,l);h[n]=function(e,t,n,a,o,c,l,h,u,m,p){e&&f("JBIG2 error: huffman is not supported");for(var d=[],y=0,x=s(n.length+a),w=p.decoder,k=p.contextCache;d.length<a;){y+=r(k,"IADH",w);for(var C=0;;){var P,I=r(k,"IADW",w);if(null===I)break;if(C+=I,t){var M=r(k,"IAAI",w);if(M>1)P=b(e,t,C,y,0,M,1,n.concat(d),x,0,0,1,0,0,u,m,p);else{var S=i(k,w,x),T=r(k,"IARDX",w),A=r(k,"IARDY",w);P=g(C,y,u,S<n.length?n[S]:d[S-n.length],T,A,!1,m,p)}}else P=v(!1,C,y,l,!1,null,h,p);d.push(P)}}for(var D=[],L=[],z=!1,F=n.length+a;L.length<F;){for(var O=r(k,"IAEX",w);O--;)L.push(z);z=!z}for(var B=0,q=n.length;B<q;B++)L[B]&&D.push(n[B]);for(var R=0;R<a;B++,R++)L[B]&&D.push(d[R]);return D}(e.huffman,e.refinement,u,e.numberOfNewSymbols,e.numberOfExportedSymbols,0,e.template,e.at,e.refinementTemplate,e.refinementAt,d)},onImmediateTextRegion:function(e,r,n,i,a){for(var o=e.info,c=this.symbols,l=[],h=0,f=r.length;h<f;h++)l=l.concat(c[r[h]]);var u=s(l.length),m=new t(n,i,a),p=b(e.huffman,e.refinement,o.width,o.height,e.defaultPixelValue,e.numberOfSymbolInstances,e.stripSize,l,u,e.transposed,e.dsOffset,e.referenceCorner,e.combinationOperator,0,e.refinementTemplate,e.refinementAt,m);this.drawBitmap(o,p)},onImmediateLosslessTextRegion:function(){this.onImmediateTextRegion.apply(this,arguments)}},M.prototype={parseChunks:function(e){return function(e){for(var t=new I,r=0,n=e.length;r<n;r++){var i=e[r];P(x({},i.data,i.start,i.end),t)}return t.buffer}(e)}},M}();function s(e){for(var t=1,r=0;e>t;)t<<=1,r++;return r}function o(e,t){return e[t]<<24>>24}function c(e,t){return e[t]<<8|e[t+1]}function l(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}function h(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!1}),r}var f=function(){throw console.error.apply(console,arguments),new Error("PDFJS error: "+arguments[0])},u=function(){console.warn.apply(console,arguments)},m=function(){console.info.apply(console,arguments)};a.prototype.parse=function(e){var t=0,r=e.length;151===e[t]&&74===e[t+1]&&66===e[t+2]&&50===e[t+3]&&13===e[t+4]&&10===e[t+5]&&26===e[t+6]&&10===e[t+7]||f("JBIG2 error: invalid header");var n={};t+=8;var i=e[t++];n.randomAccess=!(1&i),2&i||(n.numberOfPages=l(e,t),t+=4);for(var a=this.parseChunks([{data:e,start:t,end:r}]),s=a.currentPageInfo.width,o=a.currentPageInfo.height,c=a.buffer,h=(e=new Uint8Array(s*o),0),u=0,m=0;m<o;m++)for(var p,d=0,v=0;v<s;v++)d||(d=128,p=c[u++]),e[h++]=p&d?0:255,d>>=1;this.width=s,this.height=o,this.data=e},e.JpegImage=r,e.JpxImage=i,e.Jbig2Image=a}(PDFJS||(PDFJS={}));

;(function(){var o,X=0,e=null,n=null;o=window.FFT={};var f={o:function(G){if(G!==0&&(G&G-1)===0){X=G;
f.B();f.q();f.i()}else{throw new Error("init: radix-2 required")}},X:function(G,B){f.G(G,B,1)},e:function(G,B){var j=1/X;
f.G(G,B,-1);for(var q=0;q<X;q++){G[q]*=j;B[q]*=j}},n:function(G,B){var j=[],q=[],i=0;for(var m=0;m<X;
m++){i=m*X;for(var Z=0;Z<X;Z++){j[Z]=G[Z+i];q[Z]=B[Z+i]}f.X(j,q);for(var p=0;p<X;p++){G[p+i]=j[p];B[p+i]=q[p]}}for(var C=0;
C<X;C++){for(var a=0;a<X;a++){i=C+a*X;j[a]=G[i];q[a]=B[i]}f.X(j,q);for(var r=0;r<X;r++){i=C+r*X;G[i]=j[r];
B[i]=q[r]}}},f:function(G,B){var j=[],q=[],i=0;for(var m=0;m<X;m++){i=m*X;for(var Z=0;Z<X;Z++){j[Z]=G[Z+i];
q[Z]=B[Z+i]}f.e(j,q);for(var p=0;p<X;p++){G[p+i]=j[p];B[p+i]=q[p]}}for(var C=0;C<X;C++){for(var a=0;
a<X;a++){i=C+a*X;j[a]=G[i];q[a]=B[i]}f.e(j,q);for(var r=0;r<X;r++){i=C+r*X;G[i]=j[r];B[i]=q[r]}}},G:function(G,B,j){var q,i,m,Z,p,C,a,r,M,R=X>>2;
for(var P=0;P<X;P++){Z=e[P];if(P<Z){p=G[P];G[P]=G[Z];G[Z]=p;p=B[P];B[P]=B[Z];B[Z]=p}}for(var y=1;y<X;
y<<=1){i=0;q=X/(y<<1);for(var x=0;x<y;x++){C=n[i+R];a=j*n[i];for(var t=x;t<X;t+=y<<1){m=t+y;r=C*G[m]+a*B[m];
M=C*B[m]-a*G[m];G[m]=G[t]-r;G[t]+=r;B[m]=B[t]-M;B[t]+=M}i+=q}}},B:function(){var G=Uint32Array;if(X<=256)G=Uint8Array;
else if(X<=65536)G=Uint16Array;e=new G(X);n=new Float64Array(X*1.25)},j:function(){},q:function(){var G=0,B=0,q=0;
e[0]=0;while(++G<X){q=X>>1;while(q<=B){B-=q;q>>=1}B+=q;e[G]=B}},i:function(){var G=X>>1,B=X>>2,j=X>>3,q=G+B,i=Math.sin(Math.PI/X),m=2*i*i,Z=Math.sqrt(m*(2-m)),p=n[B]=1,C=n[0]=0;
i=2*m;for(var a=1;a<j;a++){p-=m;m+=i*p;C+=Z;Z-=i*C;n[a]=C;n[B-a]=p}if(j!==0){n[j]=Math.sqrt(.5)}for(var r=0;
r<B;r++){n[G-r]=n[r]}for(var M=0;M<q;M++){n[M+G]=-n[M]}}};o.init=f.o;o.fft2d=f.n;o.ifft2d=f.f}.call(this));
	
(function(r){"object"===typeof exports&&"undefined"!==typeof module?module.exports=r():"function"===typeof define&&define.amd?define([],r):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).acorn=r()})(function(){return function a(l,f,c){function g(d,n){if(!f[d]){if(!l[d]){var e="function"==typeof require&&require;if(!n&&e)return e(d,!0);if(b)return b(d,!0);e=Error("Cannot find module '"+d+"'");throw e.code="MODULE_NOT_FOUND",e;}e=f[d]={exports:{}};
l[d][0].call(e.exports,function(b){var e=l[d][1][b];return g(e?e:b)},e,e.exports,a,l,f,c)}return f[d].exports}for(var b="function"==typeof require&&require,d=0;d<c.length;d++)g(c[d]);return g}({1:[function(a,l,f){var c=a("./tokentype");a=a("./state").Parser.prototype;a.checkPropClash=function(b,c){if(!(6<=this.options.ecmaVersion&&(b.computed||b.method||b.shorthand))){var d=b.key;switch(d.type){case "Identifier":var a=d.name;break;case "Literal":a=String(d.value);break;default:return}var e=b.kind;
if(6<=this.options.ecmaVersion)"__proto__"===a&&"init"===e&&(c.proto&&this.raiseRecoverable(d.start,"Redefinition of __proto__ property"),c.proto=!0);else{a="$"+a;var m=c[a];m?(a="init"!==e,(!this.strict&&!a||!m[e])&&a^m.init||this.raiseRecoverable(d.start,"Redefinition of property")):m=c[a]={init:!1,get:!1,set:!1};m[e]=!0}}};a.parseExpression=function(b,a){var d=this.start,n=this.startLoc,e=this.parseMaybeAssign(b,a);if(this.type===c.types.comma){d=this.startNodeAt(d,n);for(d.expressions=[e];this.eat(c.types.comma);)d.expressions.push(this.parseMaybeAssign(b,
a));return this.finishNode(d,"SequenceExpression")}return e};a.parseMaybeAssign=function(b,a,h){if(this.inGenerator&&this.isContextual("yield"))return this.parseYield();var d=!1;a||(a={shorthandAssign:0,trailingComma:0},d=!0);var e=this.start,m=this.startLoc;if(this.type==c.types.parenL||this.type==c.types.name)this.potentialArrowAt=this.start;var p=this.parseMaybeConditional(b,a);h&&(p=h.call(this,p,e,m));if(this.type.isAssign)return d&&this.checkPatternErrors(a,!0),h=this.startNodeAt(e,m),h.operator=
this.value,h.left=this.type===c.types.eq?this.toAssignable(p):p,a.shorthandAssign=0,this.checkLVal(p),this.next(),h.right=this.parseMaybeAssign(b),this.finishNode(h,"AssignmentExpression");d&&this.checkExpressionErrors(a,!0);return p};a.parseMaybeConditional=function(b,a){var d=this.start,n=this.startLoc,e=this.parseExprOps(b,a);return this.checkExpressionErrors(a)?e:this.eat(c.types.question)?(d=this.startNodeAt(d,n),d.test=e,d.consequent=this.parseMaybeAssign(),this.expect(c.types.colon),d.alternate=
this.parseMaybeAssign(b),this.finishNode(d,"ConditionalExpression")):e};a.parseExprOps=function(b,c){var a=this.start,d=this.startLoc,e=this.parseMaybeUnary(c,!1);return this.checkExpressionErrors(c)?e:this.parseExprOp(e,a,d,-1,b)};a.parseExprOp=function(b,a,h,n,e){var d=this.type.binop;if(null!=d&&(!e||this.type!==c.types._in)&&d>n){var p=this.type===c.types.logicalOR||this.type===c.types.logicalAND,g=this.value;this.next();var k=this.start,q=this.startLoc,d=this.parseExprOp(this.parseMaybeUnary(null,
!1),k,q,d,e);b=this.buildBinary(a,h,b,d,g,p);return this.parseExprOp(b,a,h,n,e)}return b};a.buildBinary=function(b,c,a,n,e,m){b=this.startNodeAt(b,c);b.left=a;b.operator=e;b.right=n;return this.finishNode(b,m?"LogicalExpression":"BinaryExpression")};a.parseMaybeUnary=function(b,a){var d=this.start,n=this.startLoc;if(this.type.prefix){var e=this.startNode();var m=this.type===c.types.incDec;e.operator=this.value;e.prefix=!0;this.next();e.argument=this.parseMaybeUnary(null,!0);this.checkExpressionErrors(b,
!0);m?this.checkLVal(e.argument):this.strict&&"delete"===e.operator&&"Identifier"===e.argument.type?this.raiseRecoverable(e.start,"Deleting local variable in strict mode"):a=!0;m=this.finishNode(e,m?"UpdateExpression":"UnaryExpression")}else{m=this.parseExprSubscripts(b);if(this.checkExpressionErrors(b))return m;for(;this.type.postfix&&!this.canInsertSemicolon();)e=this.startNodeAt(d,n),e.operator=this.value,e.prefix=!1,e.argument=m,this.checkLVal(m),this.next(),m=this.finishNode(e,"UpdateExpression")}return!a&&
this.eat(c.types.starstar)?this.buildBinary(d,n,m,this.parseMaybeUnary(null,!1),"**",!1):m};a.parseExprSubscripts=function(b){var c=this.start,a=this.startLoc,n=this.parseExprAtom(b),e="ArrowFunctionExpression"===n.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd);return this.checkExpressionErrors(b)||e?n:this.parseSubscripts(n,c,a)};a.parseSubscripts=function(b,a,h,n){for(var e;;)if(this.eat(c.types.dot))e=this.startNodeAt(a,h),e.object=b,e.property=this.parseIdent(!0),e.computed=!1,
b=this.finishNode(e,"MemberExpression");else if(this.eat(c.types.bracketL))e=this.startNodeAt(a,h),e.object=b,e.property=this.parseExpression(),e.computed=!0,this.expect(c.types.bracketR),b=this.finishNode(e,"MemberExpression");else if(!n&&this.eat(c.types.parenL))e=this.startNodeAt(a,h),e.callee=b,e.arguments=this.parseExprList(c.types.parenR,!1),b=this.finishNode(e,"CallExpression");else if(this.type===c.types.backQuote)e=this.startNodeAt(a,h),e.tag=b,e.quasi=this.parseTemplate(),b=this.finishNode(e,
"TaggedTemplateExpression");else return b};a.parseExprAtom=function(b){var a=this.potentialArrowAt==this.start;switch(this.type){case c.types._super:this.inFunction||this.raise(this.start,"'super' outside of function or class");case c.types._this:return b=this.type===c.types._this?"ThisExpression":"Super",a=this.startNode(),this.next(),this.finishNode(a,b);case c.types.name:b=this.start;var h=this.startLoc,n=this.parseIdent(this.type!==c.types.name);return a&&!this.canInsertSemicolon()&&this.eat(c.types.arrow)?
this.parseArrowExpression(this.startNodeAt(b,h),[n]):n;case c.types.regexp:return b=this.value,a=this.parseLiteral(b.value),a.regex={pattern:b.pattern,flags:b.flags},a;case c.types.num:case c.types.string:return this.parseLiteral(this.value);case c.types._null:case c.types._true:case c.types._false:return a=this.startNode(),a.value=this.type===c.types._null?null:this.type===c.types._true,a.raw=this.type.keyword,this.next(),this.finishNode(a,"Literal");case c.types.parenL:return this.parseParenAndDistinguishExpression(a);
case c.types.bracketL:return a=this.startNode(),this.next(),a.elements=this.parseExprList(c.types.bracketR,!0,!0,b),this.finishNode(a,"ArrayExpression");case c.types.braceL:return this.parseObj(!1,b);case c.types._function:return a=this.startNode(),this.next(),this.parseFunction(a,!1);case c.types._class:return this.parseClass(this.startNode(),!1);case c.types._new:return this.parseNew();case c.types.backQuote:return this.parseTemplate();default:this.unexpected()}};a.parseLiteral=function(b){var a=
this.startNode();a.value=b;a.raw=this.input.slice(this.start,this.end);this.next();return this.finishNode(a,"Literal")};a.parseParenExpression=function(){this.expect(c.types.parenL);var b=this.parseExpression();this.expect(c.types.parenR);return b};a.parseParenAndDistinguishExpression=function(b){var a=this.start,h=this.startLoc;if(6<=this.options.ecmaVersion){this.next();for(var n=this.start,e=this.startLoc,m=[],p=!0,g={shorthandAssign:0,trailingComma:0},k=void 0,q=void 0;this.type!==c.types.parenR;)if(p?
p=!1:this.expect(c.types.comma),this.type===c.types.ellipsis){k=this.start;m.push(this.parseParenItem(this.parseRest()));break}else this.type!==c.types.parenL||q||(q=this.start),m.push(this.parseMaybeAssign(!1,g,this.parseParenItem));var p=this.start,f=this.startLoc;this.expect(c.types.parenR);if(b&&!this.canInsertSemicolon()&&this.eat(c.types.arrow))return this.checkPatternErrors(g,!0),q&&this.unexpected(q),this.parseParenArrowList(a,h,m);m.length||this.unexpected(this.lastTokStart);k&&this.unexpected(k);
this.checkExpressionErrors(g,!0);1<m.length?(b=this.startNodeAt(n,e),b.expressions=m,this.finishNodeAt(b,"SequenceExpression",p,f)):b=m[0]}else b=this.parseParenExpression();return this.options.preserveParens?(a=this.startNodeAt(a,h),a.expression=b,this.finishNode(a,"ParenthesizedExpression")):b};a.parseParenItem=function(b){return b};a.parseParenArrowList=function(b,a,c){return this.parseArrowExpression(this.startNodeAt(b,a),c)};var g=[];a.parseNew=function(){var b=this.startNode(),a=this.parseIdent(!0);
if(6<=this.options.ecmaVersion&&this.eat(c.types.dot))return b.meta=a,b.property=this.parseIdent(!0),"target"!==b.property.name&&this.raiseRecoverable(b.property.start,"The only valid meta property for new is new.target"),this.inFunction||this.raiseRecoverable(b.start,"new.target can only be used in functions"),this.finishNode(b,"MetaProperty");var a=this.start,h=this.startLoc;b.callee=this.parseSubscripts(this.parseExprAtom(),a,h,!0);this.eat(c.types.parenL)?b.arguments=this.parseExprList(c.types.parenR,
!1):b.arguments=g;return this.finishNode(b,"NewExpression")};a.parseTemplateElement=function(){var b=this.startNode();b.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value};this.next();b.tail=this.type===c.types.backQuote;return this.finishNode(b,"TemplateElement")};a.parseTemplate=function(){var b=this.startNode();this.next();b.expressions=[];var a=this.parseTemplateElement();for(b.quasis=[a];!a.tail;)this.expect(c.types.dollarBraceL),b.expressions.push(this.parseExpression()),
this.expect(c.types.braceR),b.quasis.push(a=this.parseTemplateElement());this.next();return this.finishNode(b,"TemplateLiteral")};a.parseObj=function(b,a){var d=this.startNode(),n=!0,e={};d.properties=[];for(this.next();!this.eat(c.types.braceR);){if(n)n=!1;else if(this.expect(c.types.comma),this.afterTrailingComma(c.types.braceR))break;var m=this.startNode(),p=void 0,g=void 0,k=void 0;if(6<=this.options.ecmaVersion){m.method=!1;m.shorthand=!1;if(b||a)g=this.start,k=this.startLoc;b||(p=this.eat(c.types.star))}this.parsePropertyName(m);
this.parsePropertyValue(m,b,p,g,k,a);this.checkPropClash(m,e);d.properties.push(this.finishNode(m,"Property"))}return this.finishNode(d,b?"ObjectPattern":"ObjectExpression")};a.parsePropertyValue=function(b,a,h,n,e,m){this.eat(c.types.colon)?(b.value=a?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,m),b.kind="init"):6<=this.options.ecmaVersion&&this.type===c.types.parenL?(a&&this.unexpected(),b.kind="init",b.method=!0,b.value=this.parseMethod(h)):5<=this.options.ecmaVersion&&
!b.computed&&"Identifier"===b.key.type&&("get"===b.key.name||"set"===b.key.name)&&this.type!=c.types.comma&&this.type!=c.types.braceR?((h||a)&&this.unexpected(),b.kind=b.key.name,this.parsePropertyName(b),b.value=this.parseMethod(!1),b.value.params.length!==("get"===b.kind?0:1)&&(a=b.value.start,"get"===b.kind?this.raiseRecoverable(a,"getter should have no params"):this.raiseRecoverable(a,"setter should have exactly one param")),"set"===b.kind&&"RestElement"===b.value.params[0].type&&this.raiseRecoverable(b.value.params[0].start,
"Setter cannot use rest params")):6<=this.options.ecmaVersion&&!b.computed&&"Identifier"===b.key.type?(b.kind="init",a?((this.keywords.test(b.key.name)||(this.strict?this.reservedWordsStrictBind:this.reservedWords).test(b.key.name)||this.inGenerator&&"yield"==b.key.name)&&this.raiseRecoverable(b.key.start,"Binding "+b.key.name),b.value=this.parseMaybeDefault(n,e,b.key)):this.type===c.types.eq&&m?(m.shorthandAssign||(m.shorthandAssign=this.start),b.value=this.parseMaybeDefault(n,e,b.key)):b.value=
b.key,b.shorthand=!0):this.unexpected()};a.parsePropertyName=function(b){if(6<=this.options.ecmaVersion){if(this.eat(c.types.bracketL))return b.computed=!0,b.key=this.parseMaybeAssign(),this.expect(c.types.bracketR),b.key;b.computed=!1}return b.key=this.type===c.types.num||this.type===c.types.string?this.parseExprAtom():this.parseIdent(!0)};a.initFunction=function(b){b.id=null;6<=this.options.ecmaVersion&&(b.generator=!1,b.expression=!1)};a.parseMethod=function(b){var a=this.startNode(),h=this.inGenerator;
this.inGenerator=b;this.initFunction(a);this.expect(c.types.parenL);a.params=this.parseBindingList(c.types.parenR,!1,!1);6<=this.options.ecmaVersion&&(a.generator=b);this.parseFunctionBody(a,!1);this.inGenerator=h;return this.finishNode(a,"FunctionExpression")};a.parseArrowExpression=function(b,a){var c=this.inGenerator;this.inGenerator=!1;this.initFunction(b);b.params=this.toAssignableList(a,!0);this.parseFunctionBody(b,!0);this.inGenerator=c;return this.finishNode(b,"ArrowFunctionExpression")};
a.parseFunctionBody=function(b,a){var d=a&&this.type!==c.types.braceL;if(d)b.body=this.parseMaybeAssign(),b.expression=!0;else{var n=this.inFunction,e=this.labels;this.inFunction=!0;this.labels=[];b.body=this.parseBlock(!0);b.expression=!1;this.inFunction=n;this.labels=e}this.strict||!d&&b.body.body.length&&this.isUseStrict(b.body.body[0])?(d=this.strict,this.strict=!0,b.id&&this.checkLVal(b.id,!0),this.checkParams(b),this.strict=d):a&&this.checkParams(b)};a.checkParams=function(b){for(var a={},c=
0;c<b.params.length;c++)this.checkLVal(b.params[c],!0,a)};a.parseExprList=function(b,a,h,n){for(var e=[],d=!0;!this.eat(b);){if(d)d=!1;else if(this.expect(c.types.comma),a&&this.afterTrailingComma(b))break;if(h&&this.type===c.types.comma)var p=null;else this.type===c.types.ellipsis?(p=this.parseSpread(n),this.type===c.types.comma&&n&&!n.trailingComma&&(n.trailingComma=this.lastTokStart)):p=this.parseMaybeAssign(!1,n);e.push(p)}return e};a.parseIdent=function(b){var a=this.startNode();b&&"never"==
this.options.allowReserved&&(b=!1);this.type===c.types.name?(!b&&(this.strict?this.reservedWordsStrict:this.reservedWords).test(this.value)&&(6<=this.options.ecmaVersion||-1==this.input.slice(this.start,this.end).indexOf("\\"))&&this.raiseRecoverable(this.start,"The keyword '"+this.value+"' is reserved"),!b&&this.inGenerator&&"yield"===this.value&&this.raiseRecoverable(this.start,"Can not use 'yield' as identifier inside a generator"),a.name=this.value):b&&this.type.keyword?a.name=this.type.keyword:
this.unexpected();this.next();return this.finishNode(a,"Identifier")};a.parseYield=function(){var b=this.startNode();this.next();this.type==c.types.semi||this.canInsertSemicolon()||this.type!=c.types.star&&!this.type.startsExpr?(b.delegate=!1,b.argument=null):(b.delegate=this.eat(c.types.star),b.argument=this.parseMaybeAssign());return this.finishNode(b,"YieldExpression")}},{"./state":10,"./tokentype":14}],2:[function(a,l,f){function c(b,a){for(var e=65536,c=0;c<a.length;c+=2){e+=a[c];if(e>b)return!1;
e+=a[c+1];if(e>=b)return!0}}f.__esModule=!0;f.isIdentifierStart=function(b,a){return 65>b?36===b:91>b?!0:97>b?95===b:123>b?!0:65535>=b?170<=b&&g.test(String.fromCharCode(b)):!1===a?!1:c(b,d)};f.isIdentifierChar=function(a,e){return 48>a?36===a:58>a?!0:65>a?!1:91>a?!0:97>a?95===a:123>a?!0:65535>=a?170<=a&&b.test(String.fromCharCode(a)):!1===e?!1:c(a,d)||c(a,h)};f.reservedWords={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",
5:"class enum extends super const export import",6:"enum",7:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"};f.keywords={5:"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",6:"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this const class extends export import super"};
a="\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0-\u08b4\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2118-\u211d\u2124\u2126\u2128\u212a-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309b-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fd5\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua7ad\ua7b0-\ua7b7\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab65\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc";
var g=new RegExp("["+a+"]"),b=new RegExp("["+a+"\u200c\u200d\u00b7\u0300-\u036f\u0387\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c00-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d01-\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1369-\u1371\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19d0-\u19da\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1ab0-\u1abd\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1cf8\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69e\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f1\ua900-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\ua9e5\ua9f0-\ua9f9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b-\uaa7d\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]");
a=null;var d=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,17,26,6,37,11,29,3,35,5,7,2,4,43,157,99,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,26,45,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,785,52,76,44,33,24,27,35,42,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,287,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,86,25,391,63,32,0,449,56,1288,
921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,881,68,12,0,67,12,16481,1,3071,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,4149,196,1340,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42710,42,4148,12,221,3,5761,10591,541],h=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,
41,2,5,0,166,1,1306,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,52,0,13,2,49,13,10,2,4,9,83,11,168,11,6,9,7,3,57,0,2,6,3,1,3,2,10,0,11,1,3,6,4,4,316,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,423,9,20855,9,135,4,60,6,26,9,1016,45,17,3,19723,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,3617,6,792618,239]},{}],3:[function(a,l,f){f.__esModule=!0;f.parse=function(a,b){return(new c.Parser(b,a)).parse()};f.parseExpressionAt=function(a,b,d){a=new c.Parser(d,a,b);a.nextToken();
return a.parseExpression()};f.tokenizer=function(a,b){return new c.Parser(b,a)};var c=a("./state");a("./parseutil");a("./statement");a("./lval");a("./expression");a("./location");f.Parser=c.Parser;f.plugins=c.plugins;l=a("./options");f.defaultOptions=l.defaultOptions;l=a("./locutil");f.Position=l.Position;f.SourceLocation=l.SourceLocation;f.getLineInfo=l.getLineInfo;l=a("./node");f.Node=l.Node;l=a("./tokentype");f.TokenType=l.TokenType;f.tokTypes=l.types;l=a("./tokencontext");f.TokContext=l.TokContext;
f.tokContexts=l.types;l=a("./identifier");f.isIdentifierChar=l.isIdentifierChar;f.isIdentifierStart=l.isIdentifierStart;l=a("./tokenize");f.Token=l.Token;a=a("./whitespace");f.isNewLine=a.isNewLine;f.lineBreak=a.lineBreak;f.lineBreakG=a.lineBreakG;f.version="3.1.0"},{"./expression":1,"./identifier":2,"./location":4,"./locutil":5,"./lval":6,"./node":7,"./options":8,"./parseutil":9,"./state":10,"./statement":11,"./tokencontext":12,"./tokenize":13,"./tokentype":14,"./whitespace":16}],4:[function(a,l,
f){l=a("./state");var c=a("./locutil");a=l.Parser.prototype;a.raise=function(a,b){var d=c.getLineInfo(this.input,a);b+=" ("+d.line+":"+d.column+")";var h=new SyntaxError(b);h.pos=a;h.loc=d;h.raisedAt=this.pos;throw h;};a.raiseRecoverable=a.raise;a.curPosition=function(){if(this.options.locations)return new c.Position(this.curLine,this.pos-this.lineStart)}},{"./locutil":5,"./state":10}],5:[function(a,l,f){function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");
}f.__esModule=!0;f.getLineInfo=function(a,c){for(var d=1,e=0;;){g.lineBreakG.lastIndex=e;var m=g.lineBreakG.exec(a);if(m&&m.index<c)++d,e=m.index+m[0].length;else return new b(d,c-e)}};var g=a("./whitespace"),b=function(){function a(b,d){c(this,a);this.line=b;this.column=d}a.prototype.offset=function(b){return new a(this.line,this.column+b)};return a}();f.Position=b;f.SourceLocation=function h(a,b,m){c(this,h);this.start=b;this.end=m;null!==a.sourceFile&&(this.source=a.sourceFile)}},{"./whitespace":16}],
6:[function(a,l,f){var c=a("./tokentype");l=a("./state");var g=a("./util");a=l.Parser.prototype;a.toAssignable=function(a,c){if(6<=this.options.ecmaVersion&&a)switch(a.type){case "Identifier":case "ObjectPattern":case "ArrayPattern":break;case "ObjectExpression":a.type="ObjectPattern";for(var b=0;b<a.properties.length;b++){var d=a.properties[b];"init"!==d.kind&&this.raise(d.key.start,"Object pattern can't contain getter or setter");this.toAssignable(d.value,c)}break;case "ArrayExpression":a.type=
"ArrayPattern";this.toAssignableList(a.elements,c);break;case "AssignmentExpression":if("="===a.operator)a.type="AssignmentPattern",delete a.operator;else{this.raise(a.left.end,"Only '=' operator can be used for specifying default value.");break}case "AssignmentPattern":"YieldExpression"===a.right.type&&this.raise(a.right.start,"Yield expression cannot be a default value");break;case "ParenthesizedExpression":a.expression=this.toAssignable(a.expression,c);break;case "MemberExpression":if(!c)break;
default:this.raise(a.start,"Assigning to rvalue")}return a};a.toAssignableList=function(a,c){var b=a.length;if(b){var d=a[b-1];if(d&&"RestElement"==d.type)--b;else if(d&&"SpreadElement"==d.type){d.type="RestElement";var e=d.argument;this.toAssignable(e,c);"Identifier"!==e.type&&"MemberExpression"!==e.type&&"ArrayPattern"!==e.type&&this.unexpected(e.start);--b}c&&"RestElement"===d.type&&"Identifier"!==d.argument.type&&this.unexpected(d.argument.start)}for(d=0;d<b;d++)(e=a[d])&&this.toAssignable(e,
c);return a};a.parseSpread=function(a){var b=this.startNode();this.next();b.argument=this.parseMaybeAssign(a);return this.finishNode(b,"SpreadElement")};a.parseRest=function(a){var b=this.startNode();this.next();b.argument=a?this.type===c.types.name?this.parseIdent():this.unexpected():this.type===c.types.name||this.type===c.types.bracketL?this.parseBindingAtom():this.unexpected();return this.finishNode(b,"RestElement")};a.parseBindingAtom=function(){if(6>this.options.ecmaVersion)return this.parseIdent();
switch(this.type){case c.types.name:return this.parseIdent();case c.types.bracketL:var a=this.startNode();this.next();a.elements=this.parseBindingList(c.types.bracketR,!0,!0);return this.finishNode(a,"ArrayPattern");case c.types.braceL:return this.parseObj(!0);default:this.unexpected()}};a.parseBindingList=function(a,d,h,n){for(var b=[],m=!0;!this.eat(a);)if(m?m=!1:this.expect(c.types.comma),d&&this.type===c.types.comma)b.push(null);else if(h&&this.afterTrailingComma(a))break;else if(this.type===
c.types.ellipsis){d=this.parseRest(n);this.parseBindingListItem(d);b.push(d);this.type===c.types.comma&&this.raise(this.start,"Comma is not permitted after the rest element");this.expect(a);break}else{var p=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(p);b.push(p)}return b};a.parseBindingListItem=function(a){return a};a.parseMaybeDefault=function(a,d,h){h=h||this.parseBindingAtom();if(6>this.options.ecmaVersion||!this.eat(c.types.eq))return h;a=this.startNodeAt(a,d);
a.left=h;a.right=this.parseMaybeAssign();return this.finishNode(a,"AssignmentPattern")};a.checkLVal=function(a,c,h){switch(a.type){case "Identifier":this.strict&&this.reservedWordsStrictBind.test(a.name)&&this.raiseRecoverable(a.start,(c?"Binding ":"Assigning to ")+a.name+" in strict mode");h&&(g.has(h,a.name)&&this.raiseRecoverable(a.start,"Argument name clash"),h[a.name]=!0);break;case "MemberExpression":c&&this.raiseRecoverable(a.start,(c?"Binding":"Assigning to")+" member expression");break;case "ObjectPattern":for(var b=
0;b<a.properties.length;b++)this.checkLVal(a.properties[b].value,c,h);break;case "ArrayPattern":for(b=0;b<a.elements.length;b++){var e=a.elements[b];e&&this.checkLVal(e,c,h)}break;case "AssignmentPattern":this.checkLVal(a.left,c,h);break;case "RestElement":this.checkLVal(a.argument,c,h);break;case "ParenthesizedExpression":this.checkLVal(a.expression,c,h);break;default:this.raise(a.start,(c?"Binding":"Assigning to")+" rvalue")}}},{"./state":10,"./tokentype":14,"./util":15}],7:[function(a,l,f){function c(a,
b,c,e){a.type=b;a.end=c;this.options.locations&&(a.loc.end=e);this.options.ranges&&(a.range[1]=c);return a}f.__esModule=!0;l=a("./state");var g=a("./locutil"),b=function h(a,b,c){if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");this.type="";this.start=b;this.end=0;a.options.locations&&(this.loc=new g.SourceLocation(a,c));a.options.directSourceFile&&(this.sourceFile=a.options.directSourceFile);a.options.ranges&&(this.range=[b,0])};f.Node=b;a=l.Parser.prototype;a.startNode=
function(){return new b(this,this.start,this.startLoc)};a.startNodeAt=function(a,c){return new b(this,a,c)};a.finishNode=function(a,b){return c.call(this,a,b,this.lastTokEnd,this.lastTokEndLoc)};a.finishNodeAt=function(a,b,e,m){return c.call(this,a,b,e,m)}},{"./locutil":5,"./state":10}],8:[function(a,l,f){function c(a,c){return function(e,m,d,h,k,q){e={type:e?"Block":"Line",value:m,start:d,end:h};a.locations&&(e.loc=new b.SourceLocation(this,k,q));a.ranges&&(e.range=[d,h]);c.push(e)}}f.__esModule=
!0;f.getOptions=function(a){var b={},e;for(e in d)b[e]=a&&g.has(a,e)?a[e]:d[e];null==b.allowReserved&&(b.allowReserved=5>b.ecmaVersion);g.isArray(b.onToken)&&function(){var a=b.onToken;b.onToken=function(b){return a.push(b)}}();g.isArray(b.onComment)&&(b.onComment=c(b,b.onComment));return b};var g=a("./util"),b=a("./locutil"),d={ecmaVersion:6,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowHashBang:!1,
locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1,plugins:{}};f.defaultOptions=d},{"./locutil":5,"./util":15}],9:[function(a,l,f){var c=a("./tokentype");l=a("./state");var g=a("./whitespace");a=l.Parser.prototype;a.isUseStrict=function(a){return 5<=this.options.ecmaVersion&&"ExpressionStatement"===a.type&&"Literal"===a.expression.type&&"use strict"===a.expression.raw.slice(1,-1)};a.eat=function(a){return this.type===a?(this.next(),
!0):!1};a.isContextual=function(a){return this.type===c.types.name&&this.value===a};a.eatContextual=function(a){return this.value===a&&this.eat(c.types.name)};a.expectContextual=function(a){this.eatContextual(a)||this.unexpected()};a.canInsertSemicolon=function(){return this.type===c.types.eof||this.type===c.types.braceR||g.lineBreak.test(this.input.slice(this.lastTokEnd,this.start))};a.insertSemicolon=function(){if(this.canInsertSemicolon()){if(this.options.onInsertedSemicolon)this.options.onInsertedSemicolon(this.lastTokEnd,
this.lastTokEndLoc);return!0}};a.semicolon=function(){this.eat(c.types.semi)||this.insertSemicolon()||this.unexpected()};a.afterTrailingComma=function(a){if(this.type==a){if(this.options.onTrailingComma)this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc);this.next();return!0}};a.expect=function(a){this.eat(a)||this.unexpected()};a.unexpected=function(a){this.raise(null!=a?a:this.start,"Unexpected token")};a.checkPatternErrors=function(a,c){var b=a&&a.trailingComma;if(!c)return!!b;
b&&this.raise(b,"Comma is not permitted after the rest element")};a.checkExpressionErrors=function(a,c){var b=a&&a.shorthandAssign;if(!c)return!!b;b&&this.raise(b,"Shorthand property assignments are valid only in destructuring patterns")}},{"./state":10,"./tokentype":14,"./whitespace":16}],10:[function(a,l,f){function c(a){return new RegExp("^("+a.replace(/ /g,"|")+")$")}f.__esModule=!0;var g=a("./identifier"),b=a("./tokentype"),d=a("./whitespace"),h=a("./options"),n={};f.plugins=n;a=function(){function a(e,
p,f){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.options=e=h.getOptions(e);this.sourceFile=e.sourceFile;this.keywords=c(g.keywords[6<=e.ecmaVersion?6:5]);var k=e.allowReserved?"":g.reservedWords[e.ecmaVersion]+("module"==e.sourceType?" await":"");this.reservedWords=c(k);k=(k?k+" ":"")+g.reservedWords.strict;this.reservedWordsStrict=c(k);this.reservedWordsStrictBind=c(k+" "+g.reservedWords.strictBind);this.input=String(p);this.containsEsc=!1;this.loadPlugins(e.plugins);
f?(this.pos=f,this.lineStart=Math.max(0,this.input.lastIndexOf("\n",f)),this.curLine=this.input.slice(0,this.lineStart).split(d.lineBreak).length):(this.pos=this.lineStart=0,this.curLine=1);this.type=b.types.eof;this.value=null;this.start=this.end=this.pos;this.startLoc=this.endLoc=this.curPosition();this.lastTokEndLoc=this.lastTokStartLoc=null;this.lastTokStart=this.lastTokEnd=this.pos;this.context=this.initialContext();this.exprAllowed=!0;this.strict=this.inModule="module"===e.sourceType;this.potentialArrowAt=
-1;this.inFunction=this.inGenerator=!1;this.labels=[];0===this.pos&&e.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2)}a.prototype.isKeyword=function(a){return this.keywords.test(a)};a.prototype.isReservedWord=function(a){return this.reservedWords.test(a)};a.prototype.extend=function(a,b){this[a]=b(this[a])};a.prototype.loadPlugins=function(a){for(var b in a){var c=n[b];if(!c)throw Error("Plugin '"+b+"' not found");c(this,a[b])}};a.prototype.parse=function(){var a=this.options.program||
this.startNode();this.nextToken();return this.parseTopLevel(a)};return a}();f.Parser=a},{"./identifier":2,"./options":8,"./tokentype":14,"./whitespace":16}],11:[function(a,l,f){var c=a("./tokentype");l=a("./state");var g=a("./whitespace"),b=a("./identifier");a=l.Parser.prototype;a.parseTopLevel=function(a){var b=!0;a.body||(a.body=[]);for(;this.type!==c.types.eof;){var e=this.parseStatement(!0,!0);a.body.push(e);b&&(this.isUseStrict(e)&&this.setStrict(!0),b=!1)}this.next();6<=this.options.ecmaVersion&&
(a.sourceType=this.options.sourceType);return this.finishNode(a,"Program")};var d={kind:"loop"},h={kind:"switch"};a.isLet=function(){if(this.type!==c.types.name||6>this.options.ecmaVersion||"let"!=this.value)return!1;g.skipWhiteSpace.lastIndex=this.pos;var a=g.skipWhiteSpace.exec(this.input),a=this.pos+a[0].length,d=this.input.charCodeAt(a);if(91===d||123==d)return!0;if(b.isIdentifierStart(d,!0)){for(d=a+1;b.isIdentifierChar(this.input.charCodeAt(d,!0));++d);a=this.input.slice(a,d);if(!this.isKeyword(a))return!0}return!1};
a.parseStatement=function(a,b){var e=this.type,d=this.startNode(),k=void 0;this.isLet()&&(e=c.types._var,k="let");switch(e){case c.types._break:case c.types._continue:return this.parseBreakContinueStatement(d,e.keyword);case c.types._debugger:return this.parseDebuggerStatement(d);case c.types._do:return this.parseDoStatement(d);case c.types._for:return this.parseForStatement(d);case c.types._function:return!a&&6<=this.options.ecmaVersion&&this.unexpected(),this.parseFunctionStatement(d);case c.types._class:return a||
this.unexpected(),this.parseClass(d,!0);case c.types._if:return this.parseIfStatement(d);case c.types._return:return this.parseReturnStatement(d);case c.types._switch:return this.parseSwitchStatement(d);case c.types._throw:return this.parseThrowStatement(d);case c.types._try:return this.parseTryStatement(d);case c.types._const:case c.types._var:return k=k||this.value,a||"var"==k||this.unexpected(),this.parseVarStatement(d,k);case c.types._while:return this.parseWhileStatement(d);case c.types._with:return this.parseWithStatement(d);
case c.types.braceL:return this.parseBlock();case c.types.semi:return this.parseEmptyStatement(d);case c.types._export:case c.types._import:return this.options.allowImportExportEverywhere||(b||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),e===c.types._import?this.parseImport(d):this.parseExport(d);default:var k=this.value,m=this.parseExpression();return e===c.types.name&&
"Identifier"===m.type&&this.eat(c.types.colon)?this.parseLabeledStatement(d,k,m):this.parseExpressionStatement(d,m)}};a.parseBreakContinueStatement=function(a,b){var e="break"==b;this.next();this.eat(c.types.semi)||this.insertSemicolon()?a.label=null:this.type!==c.types.name?this.unexpected():(a.label=this.parseIdent(),this.semicolon());for(var d=0;d<this.labels.length;++d){var k=this.labels[d];if(null==a.label||k.name===a.label.name){if(null!=k.kind&&(e||"loop"===k.kind))break;if(a.label&&e)break}}d===
this.labels.length&&this.raise(a.start,"Unsyntactic "+b);return this.finishNode(a,e?"BreakStatement":"ContinueStatement")};a.parseDebuggerStatement=function(a){this.next();this.semicolon();return this.finishNode(a,"DebuggerStatement")};a.parseDoStatement=function(a){this.next();this.labels.push(d);a.body=this.parseStatement(!1);this.labels.pop();this.expect(c.types._while);a.test=this.parseParenExpression();6<=this.options.ecmaVersion?this.eat(c.types.semi):this.semicolon();return this.finishNode(a,
"DoWhileStatement")};a.parseForStatement=function(a){this.next();this.labels.push(d);this.expect(c.types.parenL);if(this.type===c.types.semi)return this.parseFor(a,null);var b=this.isLet();if(this.type===c.types._var||this.type===c.types._const||b){var e=this.startNode(),b=b?"let":this.value;this.next();this.parseVar(e,!0,b);this.finishNode(e,"VariableDeclaration");return!(this.type===c.types._in||6<=this.options.ecmaVersion&&this.isContextual("of"))||1!==e.declarations.length||"var"!==b&&e.declarations[0].init?
this.parseFor(a,e):this.parseForIn(a,e)}e={shorthandAssign:0,trailingComma:0};b=this.parseExpression(!0,e);if(this.type===c.types._in||6<=this.options.ecmaVersion&&this.isContextual("of"))return this.checkPatternErrors(e,!0),this.toAssignable(b),this.checkLVal(b),this.parseForIn(a,b);this.checkExpressionErrors(e,!0);return this.parseFor(a,b)};a.parseFunctionStatement=function(a){this.next();return this.parseFunction(a,!0)};a.parseIfStatement=function(a){this.next();a.test=this.parseParenExpression();
a.consequent=this.parseStatement(!1);a.alternate=this.eat(c.types._else)?this.parseStatement(!1):null;return this.finishNode(a,"IfStatement")};a.parseReturnStatement=function(a){this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function");this.next();this.eat(c.types.semi)||this.insertSemicolon()?a.argument=null:(a.argument=this.parseExpression(),this.semicolon());return this.finishNode(a,"ReturnStatement")};a.parseSwitchStatement=function(a){this.next();
a.discriminant=this.parseParenExpression();a.cases=[];this.expect(c.types.braceL);this.labels.push(h);for(var b,e=!1;this.type!=c.types.braceR;)if(this.type===c.types._case||this.type===c.types._default){var d=this.type===c.types._case;b&&this.finishNode(b,"SwitchCase");a.cases.push(b=this.startNode());b.consequent=[];this.next();d?b.test=this.parseExpression():(e&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),e=!0,b.test=null);this.expect(c.types.colon)}else b||this.unexpected(),
b.consequent.push(this.parseStatement(!0));b&&this.finishNode(b,"SwitchCase");this.next();this.labels.pop();return this.finishNode(a,"SwitchStatement")};a.parseThrowStatement=function(a){this.next();g.lineBreak.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw");a.argument=this.parseExpression();this.semicolon();return this.finishNode(a,"ThrowStatement")};var n=[];a.parseTryStatement=function(a){this.next();a.block=this.parseBlock();a.handler=
null;if(this.type===c.types._catch){var b=this.startNode();this.next();this.expect(c.types.parenL);b.param=this.parseBindingAtom();this.checkLVal(b.param,!0);this.expect(c.types.parenR);b.body=this.parseBlock();a.handler=this.finishNode(b,"CatchClause")}a.finalizer=this.eat(c.types._finally)?this.parseBlock():null;a.handler||a.finalizer||this.raise(a.start,"Missing catch or finally clause");return this.finishNode(a,"TryStatement")};a.parseVarStatement=function(a,b){this.next();this.parseVar(a,!1,
b);this.semicolon();return this.finishNode(a,"VariableDeclaration")};a.parseWhileStatement=function(a){this.next();a.test=this.parseParenExpression();this.labels.push(d);a.body=this.parseStatement(!1);this.labels.pop();return this.finishNode(a,"WhileStatement")};a.parseWithStatement=function(a){this.strict&&this.raise(this.start,"'with' in strict mode");this.next();a.object=this.parseParenExpression();a.body=this.parseStatement(!1);return this.finishNode(a,"WithStatement")};a.parseEmptyStatement=
function(a){this.next();return this.finishNode(a,"EmptyStatement")};a.parseLabeledStatement=function(a,b,d){for(var e=0;e<this.labels.length;++e)this.labels[e].name===b&&this.raise(d.start,"Label '"+b+"' is already declared");for(var k=this.type.isLoop?"loop":this.type===c.types._switch?"switch":null,e=this.labels.length-1;0<=e;e--){var q=this.labels[e];if(q.statementStart==a.start)q.statementStart=this.start,q.kind=k;else break}this.labels.push({name:b,kind:k,statementStart:this.start});a.body=this.parseStatement(!0);
this.labels.pop();a.label=d;return this.finishNode(a,"LabeledStatement")};a.parseExpressionStatement=function(a,b){a.expression=b;this.semicolon();return this.finishNode(a,"ExpressionStatement")};a.parseBlock=function(a){var b=this.startNode(),e=!0,d=void 0;b.body=[];for(this.expect(c.types.braceL);!this.eat(c.types.braceR);){var k=this.parseStatement(!0);b.body.push(k);e&&a&&this.isUseStrict(k)&&(d=this.strict,this.setStrict(this.strict=!0));e=!1}!1===d&&this.setStrict(!1);return this.finishNode(b,
"BlockStatement")};a.parseFor=function(a,b){a.init=b;this.expect(c.types.semi);a.test=this.type===c.types.semi?null:this.parseExpression();this.expect(c.types.semi);a.update=this.type===c.types.parenR?null:this.parseExpression();this.expect(c.types.parenR);a.body=this.parseStatement(!1);this.labels.pop();return this.finishNode(a,"ForStatement")};a.parseForIn=function(a,b){var e=this.type===c.types._in?"ForInStatement":"ForOfStatement";this.next();a.left=b;a.right=this.parseExpression();this.expect(c.types.parenR);
a.body=this.parseStatement(!1);this.labels.pop();return this.finishNode(a,e)};a.parseVar=function(a,b,d){a.declarations=[];for(a.kind=d;;){var e=this.startNode();this.parseVarId(e);this.eat(c.types.eq)?e.init=this.parseMaybeAssign(b):"const"!==d||this.type===c.types._in||6<=this.options.ecmaVersion&&this.isContextual("of")?"Identifier"==e.id.type||b&&(this.type===c.types._in||this.isContextual("of"))?e.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):
this.unexpected();a.declarations.push(this.finishNode(e,"VariableDeclarator"));if(!this.eat(c.types.comma))break}return a};a.parseVarId=function(a){a.id=this.parseBindingAtom();this.checkLVal(a.id,!0)};a.parseFunction=function(a,b,d){this.initFunction(a);6<=this.options.ecmaVersion&&(a.generator=this.eat(c.types.star));var e=this.inGenerator;this.inGenerator=a.generator;if(b||this.type===c.types.name)a.id=this.parseIdent();this.parseFunctionParams(a);this.parseFunctionBody(a,d);this.inGenerator=e;
return this.finishNode(a,b?"FunctionDeclaration":"FunctionExpression")};a.parseFunctionParams=function(a){this.expect(c.types.parenL);a.params=this.parseBindingList(c.types.parenR,!1,!1,!0)};a.parseClass=function(a,b){this.next();this.parseClassId(a,b);this.parseClassSuper(a);var e=this.startNode(),d=!1;e.body=[];for(this.expect(c.types.braceL);!this.eat(c.types.braceR);)if(!this.eat(c.types.semi)){var k=this.startNode(),q=this.eat(c.types.star),h=this.type===c.types.name&&"static"===this.value;this.parsePropertyName(k);
k["static"]=h&&this.type!==c.types.parenL;k["static"]&&(q&&this.unexpected(),q=this.eat(c.types.star),this.parsePropertyName(k));k.kind="method";h=!1;if(!k.computed){var f=k.key;q||"Identifier"!==f.type||this.type===c.types.parenL||"get"!==f.name&&"set"!==f.name||(h=!0,k.kind=f.name,f=this.parsePropertyName(k));!k["static"]&&("Identifier"===f.type&&"constructor"===f.name||"Literal"===f.type&&"constructor"===f.value)&&(d&&this.raise(f.start,"Duplicate constructor in the same class"),h&&this.raise(f.start,
"Constructor can't have get/set modifier"),q&&this.raise(f.start,"Constructor can't be a generator"),k.kind="constructor",d=!0)}this.parseClassMethod(e,k,q);h&&(k.value.params.length!==("get"===k.kind?0:1)&&(q=k.value.start,"get"===k.kind?this.raiseRecoverable(q,"getter should have no params"):this.raiseRecoverable(q,"setter should have exactly one param")),"set"===k.kind&&"RestElement"===k.value.params[0].type&&this.raise(k.value.params[0].start,"Setter cannot use rest params"))}a.body=this.finishNode(e,
"ClassBody");return this.finishNode(a,b?"ClassDeclaration":"ClassExpression")};a.parseClassMethod=function(a,b,c){b.value=this.parseMethod(c);a.body.push(this.finishNode(b,"MethodDefinition"))};a.parseClassId=function(a,b){a.id=this.type===c.types.name?this.parseIdent():b?this.unexpected():null};a.parseClassSuper=function(a){a.superClass=this.eat(c.types._extends)?this.parseExprSubscripts():null};a.parseExport=function(a){this.next();if(this.eat(c.types.star))return this.expectContextual("from"),
a.source=this.type===c.types.string?this.parseExprAtom():this.unexpected(),this.semicolon(),this.finishNode(a,"ExportAllDeclaration");if(this.eat(c.types._default)){var b=this.type==c.types.parenL,e=this.parseMaybeAssign(),d=!0;b||"FunctionExpression"!=e.type&&"ClassExpression"!=e.type||(d=!1,e.id&&(e.type="FunctionExpression"==e.type?"FunctionDeclaration":"ClassDeclaration"));a.declaration=e;d&&this.semicolon();return this.finishNode(a,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())a.declaration=
this.parseStatement(!0),a.specifiers=[],a.source=null;else{a.declaration=null;a.specifiers=this.parseExportSpecifiers();if(this.eatContextual("from"))a.source=this.type===c.types.string?this.parseExprAtom():this.unexpected();else{for(b=0;b<a.specifiers.length;b++)(this.keywords.test(a.specifiers[b].local.name)||this.reservedWords.test(a.specifiers[b].local.name))&&this.unexpected(a.specifiers[b].local.start);a.source=null}this.semicolon()}return this.finishNode(a,"ExportNamedDeclaration")};a.shouldParseExportStatement=
function(){return this.type.keyword||this.isLet()};a.parseExportSpecifiers=function(){var a=[],b=!0;for(this.expect(c.types.braceL);!this.eat(c.types.braceR);){if(b)b=!1;else if(this.expect(c.types.comma),this.afterTrailingComma(c.types.braceR))break;var d=this.startNode();d.local=this.parseIdent(this.type===c.types._default);d.exported=this.eatContextual("as")?this.parseIdent(!0):d.local;a.push(this.finishNode(d,"ExportSpecifier"))}return a};a.parseImport=function(a){this.next();this.type===c.types.string?
(a.specifiers=n,a.source=this.parseExprAtom()):(a.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),a.source=this.type===c.types.string?this.parseExprAtom():this.unexpected());this.semicolon();return this.finishNode(a,"ImportDeclaration")};a.parseImportSpecifiers=function(){var a=[],b=!0;if(this.type===c.types.name){var d=this.startNode();d.local=this.parseIdent();this.checkLVal(d.local,!0);a.push(this.finishNode(d,"ImportDefaultSpecifier"));if(!this.eat(c.types.comma))return a}if(this.type===
c.types.star)return d=this.startNode(),this.next(),this.expectContextual("as"),d.local=this.parseIdent(),this.checkLVal(d.local,!0),a.push(this.finishNode(d,"ImportNamespaceSpecifier")),a;for(this.expect(c.types.braceL);!this.eat(c.types.braceR);){if(b)b=!1;else if(this.expect(c.types.comma),this.afterTrailingComma(c.types.braceR))break;d=this.startNode();d.imported=this.parseIdent(!0);this.eatContextual("as")?d.local=this.parseIdent():(d.local=d.imported,this.isKeyword(d.local.name)&&this.unexpected(d.local.start),
this.reservedWordsStrict.test(d.local.name)&&this.raise(d.local.start,"The keyword '"+d.local.name+"' is reserved"));this.checkLVal(d.local,!0);a.push(this.finishNode(d,"ImportSpecifier"))}return a}},{"./identifier":2,"./state":10,"./tokentype":14,"./whitespace":16}],12:[function(a,l,f){f.__esModule=!0;l=a("./state");var c=a("./tokentype"),g=a("./whitespace");a=function h(a,b,c,f){if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");this.token=a;this.isExpr=!!b;this.preserveSpace=
!!c;this.override=f};f.TokContext=a;var b={b_stat:new a("{",!1),b_expr:new a("{",!0),b_tmpl:new a("${",!0),p_stat:new a("(",!1),p_expr:new a("(",!0),q_tmpl:new a("`",!0,!0,function(a){return a.readTmplToken()}),f_expr:new a("function",!0)};f.types=b;f=l.Parser.prototype;f.initialContext=function(){return[b.b_stat]};f.braceIsBlock=function(a){if(a===c.types.colon){var f=this.curContext();if(f===b.b_stat||f===b.b_expr)return!f.isExpr}return a===c.types._return?g.lineBreak.test(this.input.slice(this.lastTokEnd,
this.start)):a===c.types._else||a===c.types.semi||a===c.types.eof||a===c.types.parenR?!0:a==c.types.braceL?this.curContext()===b.b_stat:!this.exprAllowed};f.updateContext=function(a){var b,e=this.type;e.keyword&&a==c.types.dot?this.exprAllowed=!1:(b=e.updateContext)?b.call(this,a):this.exprAllowed=e.beforeExpr};c.types.parenR.updateContext=c.types.braceR.updateContext=function(){if(1==this.context.length)this.exprAllowed=!0;else{var a=this.context.pop();a===b.b_stat&&this.curContext()===b.f_expr?
(this.context.pop(),this.exprAllowed=!1):this.exprAllowed=a===b.b_tmpl?!0:!a.isExpr}};c.types.braceL.updateContext=function(a){this.context.push(this.braceIsBlock(a)?b.b_stat:b.b_expr);this.exprAllowed=!0};c.types.dollarBraceL.updateContext=function(){this.context.push(b.b_tmpl);this.exprAllowed=!0};c.types.parenL.updateContext=function(a){this.context.push(a===c.types._if||a===c.types._for||a===c.types._with||a===c.types._while?b.p_stat:b.p_expr);this.exprAllowed=!0};c.types.incDec.updateContext=
function(){};c.types._function.updateContext=function(a){!a.beforeExpr||a===c.types.semi||a===c.types._else||a===c.types.colon&&this.curContext()===b.b_stat||this.context.push(b.f_expr);this.exprAllowed=!1};c.types.backQuote.updateContext=function(){this.curContext()===b.q_tmpl?this.context.pop():this.context.push(b.q_tmpl);this.exprAllowed=!1}},{"./state":10,"./tokentype":14,"./whitespace":16}],13:[function(a,l,f){function c(a,b,c,d){try{return new RegExp(a,b)}catch(t){if(void 0!==c)throw t instanceof
SyntaxError&&d.raise(c,"Error parsing regular expression: "+t.message),t;}}function g(a){if(65535>=a)return String.fromCharCode(a);a-=65536;return String.fromCharCode((a>>10)+55296,(a&1023)+56320)}f.__esModule=!0;var b=a("./identifier"),d=a("./tokentype");l=a("./state");var h=a("./locutil"),n=a("./whitespace"),e=function k(a){if(!(this instanceof k))throw new TypeError("Cannot call a class as a function");this.type=a.type;this.value=a.value;this.start=a.start;this.end=a.end;a.options.locations&&(this.loc=
new h.SourceLocation(a,a.startLoc,a.endLoc));a.options.ranges&&(this.range=[a.start,a.end])};f.Token=e;a=l.Parser.prototype;var m="object"==typeof Packages&&"[object JavaPackage]"==Object.prototype.toString.call(Packages);a.next=function(){if(this.options.onToken)this.options.onToken(new e(this));this.lastTokEnd=this.end;this.lastTokStart=this.start;this.lastTokEndLoc=this.endLoc;this.lastTokStartLoc=this.startLoc;this.nextToken()};a.getToken=function(){this.next();return new e(this)};"undefined"!==
typeof Symbol&&(a[Symbol.iterator]=function(){var a=this;return{next:function(){var b=a.getToken();return{done:b.type===d.types.eof,value:b}}}});a.setStrict=function(a){this.strict=a;if(this.type===d.types.num||this.type===d.types.string){this.pos=this.start;if(this.options.locations)for(;this.pos<this.lineStart;)this.lineStart=this.input.lastIndexOf("\n",this.lineStart-2)+1,--this.curLine;this.nextToken()}};a.curContext=function(){return this.context[this.context.length-1]};a.nextToken=function(){var a=
this.curContext();a&&a.preserveSpace||this.skipSpace();this.start=this.pos;this.options.locations&&(this.startLoc=this.curPosition());if(this.pos>=this.input.length)return this.finishToken(d.types.eof);if(a.override)return a.override(this);this.readToken(this.fullCharCodeAtPos())};a.readToken=function(a){return b.isIdentifierStart(a,6<=this.options.ecmaVersion)||92===a?this.readWord():this.getTokenFromCode(a)};a.fullCharCodeAtPos=function(){var a=this.input.charCodeAt(this.pos);if(55295>=a||57344<=
a)return a;var b=this.input.charCodeAt(this.pos+1);return(a<<10)+b-56613888};a.skipBlockComment=function(){var a=this.options.onComment&&this.curPosition(),b=this.pos,c=this.input.indexOf("*/",this.pos+=2);-1===c&&this.raise(this.pos-2,"Unterminated comment");this.pos=c+2;if(this.options.locations){n.lineBreakG.lastIndex=b;for(var d=void 0;(d=n.lineBreakG.exec(this.input))&&d.index<this.pos;)++this.curLine,this.lineStart=d.index+d[0].length}if(this.options.onComment)this.options.onComment(!0,this.input.slice(b+
2,c),b,this.pos,a,this.curPosition())};a.skipLineComment=function(a){for(var b=this.pos,c=this.options.onComment&&this.curPosition(),d=this.input.charCodeAt(this.pos+=a);this.pos<this.input.length&&10!==d&&13!==d&&8232!==d&&8233!==d;)++this.pos,d=this.input.charCodeAt(this.pos);if(this.options.onComment)this.options.onComment(!1,this.input.slice(b+a,this.pos),b,this.pos,c,this.curPosition())};a.skipSpace=function(){a:for(;this.pos<this.input.length;){var a=this.input.charCodeAt(this.pos);switch(a){case 32:case 160:++this.pos;
break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos;this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break a}break;default:if(8<a&&14>a||5760<=a&&n.nonASCIIwhitespace.test(String.fromCharCode(a)))++this.pos;else break a}}};a.finishToken=function(a,b){this.end=this.pos;this.options.locations&&
(this.endLoc=this.curPosition());var c=this.type;this.type=a;this.value=b;this.updateContext(c)};a.readToken_dot=function(){var a=this.input.charCodeAt(this.pos+1);if(48<=a&&57>=a)return this.readNumber(!0);var b=this.input.charCodeAt(this.pos+2);if(6<=this.options.ecmaVersion&&46===a&&46===b)return this.pos+=3,this.finishToken(d.types.ellipsis);++this.pos;return this.finishToken(d.types.dot)};a.readToken_slash=function(){var a=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,
this.readRegexp()):61===a?this.finishOp(d.types.assign,2):this.finishOp(d.types.slash,1)};a.readToken_mult_modulo_exp=function(a){var b=this.input.charCodeAt(this.pos+1),c=1;a=42===a?d.types.star:d.types.modulo;7<=this.options.ecmaVersion&&42===b&&(++c,a=d.types.starstar,b=this.input.charCodeAt(this.pos+2));return 61===b?this.finishOp(d.types.assign,c+1):this.finishOp(a,c)};a.readToken_pipe_amp=function(a){var b=this.input.charCodeAt(this.pos+1);return b===a?this.finishOp(124===a?d.types.logicalOR:
d.types.logicalAND,2):61===b?this.finishOp(d.types.assign,2):this.finishOp(124===a?d.types.bitwiseOR:d.types.bitwiseAND,1)};a.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(d.types.assign,2):this.finishOp(d.types.bitwiseXOR,1)};a.readToken_plus_min=function(a){var b=this.input.charCodeAt(this.pos+1);return b===a?45==b&&62==this.input.charCodeAt(this.pos+2)&&n.lineBreak.test(this.input.slice(this.lastTokEnd,this.pos))?(this.skipLineComment(3),this.skipSpace(),
this.nextToken()):this.finishOp(d.types.incDec,2):61===b?this.finishOp(d.types.assign,2):this.finishOp(d.types.plusMin,1)};a.readToken_lt_gt=function(a){var b=this.input.charCodeAt(this.pos+1),c=1;if(b===a)return c=62===a&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+c)?this.finishOp(d.types.assign,c+1):this.finishOp(d.types.bitShift,c);if(33==b&&60==a&&45==this.input.charCodeAt(this.pos+2)&&45==this.input.charCodeAt(this.pos+3))return this.inModule&&this.unexpected(),
this.skipLineComment(4),this.skipSpace(),this.nextToken();61===b&&(c=2);return this.finishOp(d.types.relational,c)};a.readToken_eq_excl=function(a){var b=this.input.charCodeAt(this.pos+1);return 61===b?this.finishOp(d.types.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===a&&62===b&&6<=this.options.ecmaVersion?(this.pos+=2,this.finishToken(d.types.arrow)):this.finishOp(61===a?d.types.eq:d.types.prefix,1)};a.getTokenFromCode=function(a){switch(a){case 46:return this.readToken_dot();case 40:return++this.pos,
this.finishToken(d.types.parenL);case 41:return++this.pos,this.finishToken(d.types.parenR);case 59:return++this.pos,this.finishToken(d.types.semi);case 44:return++this.pos,this.finishToken(d.types.comma);case 91:return++this.pos,this.finishToken(d.types.bracketL);case 93:return++this.pos,this.finishToken(d.types.bracketR);case 123:return++this.pos,this.finishToken(d.types.braceL);case 125:return++this.pos,this.finishToken(d.types.braceR);case 58:return++this.pos,this.finishToken(d.types.colon);case 63:return++this.pos,
this.finishToken(d.types.question);case 96:if(6>this.options.ecmaVersion)break;++this.pos;return this.finishToken(d.types.backQuote);case 48:a=this.input.charCodeAt(this.pos+1);if(120===a||88===a)return this.readRadixNumber(16);if(6<=this.options.ecmaVersion){if(111===a||79===a)return this.readRadixNumber(8);if(98===a||66===a)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(a);case 47:return this.readToken_slash();
case 37:case 42:return this.readToken_mult_modulo_exp(a);case 124:case 38:return this.readToken_pipe_amp(a);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(a);case 60:case 62:return this.readToken_lt_gt(a);case 61:case 33:return this.readToken_eq_excl(a);case 126:return this.finishOp(d.types.prefix,1)}this.raise(this.pos,"Unexpected character '"+g(a)+"'")};a.finishOp=function(a,b){var c=this.input.slice(this.pos,this.pos+b);this.pos+=b;return this.finishToken(a,
c)};var p=!!c("\uffff","u");a.readRegexp=function(){for(var a=this,b=void 0,e=void 0,f=this.pos;;){this.pos>=this.input.length&&this.raise(f,"Unterminated regular expression");var g=this.input.charAt(this.pos);n.lineBreak.test(g)&&this.raise(f,"Unterminated regular expression");if(b)b=!1;else{if("["===g)e=!0;else if("]"===g&&e)e=!1;else if("/"===g&&!e)break;b="\\"===g}++this.pos}b=this.input.slice(f,this.pos);++this.pos;e=this.readWord1();g=b;if(e){var h=/^[gim]*$/;6<=this.options.ecmaVersion&&(h=
/^[gimuy]*$/);h.test(e)||this.raise(f,"Invalid regular expression flag");0<=e.indexOf("u")&&!p&&(g=g.replace(/\\u\{([0-9a-fA-F]+)\}/g,function(b,c,d){c=Number("0x"+c);1114111<c&&a.raise(f+d+3,"Code point out of bounds");return"x"}),g=g.replace(/\\u([a-fA-F0-9]{4})|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"))}h=null;m||(c(g,void 0,f,this),h=c(b,e));return this.finishToken(d.types.regexp,{pattern:b,flags:e,value:h})};a.readInt=function(a,b){for(var c=this.pos,d=0,e=0,f=null==b?Infinity:b;e<f;++e){var k=this.input.charCodeAt(this.pos),
k=97<=k?k-97+10:65<=k?k-65+10:48<=k&&57>=k?k-48:Infinity;if(k>=a)break;++this.pos;d=d*a+k}return this.pos===c||null!=b&&this.pos-c!==b?null:d};a.readRadixNumber=function(a){this.pos+=2;var c=this.readInt(a);null==c&&this.raise(this.start+2,"Expected number in radix "+a);b.isIdentifierStart(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");return this.finishToken(d.types.num,c)};a.readNumber=function(a){var c=this.pos,e=!1,f=48===this.input.charCodeAt(this.pos);a||
null!==this.readInt(10)||this.raise(c,"Invalid number");a=this.input.charCodeAt(this.pos);46===a&&(++this.pos,this.readInt(10),e=!0,a=this.input.charCodeAt(this.pos));if(69===a||101===a)a=this.input.charCodeAt(++this.pos),43!==a&&45!==a||++this.pos,null===this.readInt(10)&&this.raise(c,"Invalid number"),e=!0;b.isIdentifierStart(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");a=this.input.slice(c,this.pos);var k=void 0;e?k=parseFloat(a):f&&1!==a.length?/[89]/.test(a)||
this.strict?this.raise(c,"Invalid number"):k=parseInt(a,8):k=parseInt(a,10);return this.finishToken(d.types.num,k)};a.readCodePoint=function(){if(123===this.input.charCodeAt(this.pos)){6>this.options.ecmaVersion&&this.unexpected();var a=++this.pos;var b=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos);++this.pos;1114111<b&&this.raise(a,"Code point out of bounds")}else b=this.readHexChar(4);return b};a.readString=function(a){for(var b="",c=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,
"Unterminated string constant");var e=this.input.charCodeAt(this.pos);if(e===a)break;92===e?(b+=this.input.slice(c,this.pos),b+=this.readEscapedChar(!1),c=this.pos):(n.isNewLine(e)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}b+=this.input.slice(c,this.pos++);return this.finishToken(d.types.string,b)};a.readTmplToken=function(){for(var a="",b=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var c=this.input.charCodeAt(this.pos);if(96===
c||36===c&&123===this.input.charCodeAt(this.pos+1)){if(this.pos===this.start&&this.type===d.types.template){if(36===c)return this.pos+=2,this.finishToken(d.types.dollarBraceL);++this.pos;return this.finishToken(d.types.backQuote)}a+=this.input.slice(b,this.pos);return this.finishToken(d.types.template,a)}if(92===c)a+=this.input.slice(b,this.pos),a+=this.readEscapedChar(!0),b=this.pos;else if(n.isNewLine(c)){a+=this.input.slice(b,this.pos);++this.pos;switch(c){case 13:10===this.input.charCodeAt(this.pos)&&
++this.pos;case 10:a+="\n";break;default:a+=String.fromCharCode(c)}this.options.locations&&(++this.curLine,this.lineStart=this.pos);b=this.pos}else++this.pos}};a.readEscapedChar=function(a){var b=this.input.charCodeAt(++this.pos);++this.pos;switch(b){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return g(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\x0B";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&
++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";default:if(48<=b&&55>=b){var b=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],c=parseInt(b,8);255<c&&(b=b.slice(0,-1),c=parseInt(b,8));"0"!==b&&(this.strict||a)&&this.raise(this.pos-2,"Octal literal in strict mode");this.pos+=b.length-1;return String.fromCharCode(c)}return String.fromCharCode(b)}};a.readHexChar=function(a){var b=this.pos;a=this.readInt(16,a);null===a&&this.raise(b,"Bad character escape sequence");
return a};a.readWord1=function(){this.containsEsc=!1;for(var a="",c=!0,d=this.pos,e=6<=this.options.ecmaVersion;this.pos<this.input.length;){var f=this.fullCharCodeAtPos();if(b.isIdentifierChar(f,e))this.pos+=65535>=f?1:2;else if(92===f)this.containsEsc=!0,a+=this.input.slice(d,this.pos),d=this.pos,117!=this.input.charCodeAt(++this.pos)&&this.raise(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos,f=this.readCodePoint(),(c?b.isIdentifierStart:b.isIdentifierChar)(f,e)||this.raise(d,
"Invalid Unicode escape"),a+=g(f),d=this.pos;else break;c=!1}return a+this.input.slice(d,this.pos)};a.readWord=function(){var a=this.readWord1(),b=d.types.name;(6<=this.options.ecmaVersion||!this.containsEsc)&&this.keywords.test(a)&&(b=d.keywords[a]);return this.finishToken(b,a)}},{"./identifier":2,"./locutil":5,"./state":10,"./tokentype":14,"./whitespace":16}],14:[function(a,l,f){function c(a,c){return new b(a,{beforeExpr:!0,binop:c})}function g(a){var c=1>=arguments.length||void 0===arguments[1]?
{}:arguments[1];c.keyword=a;h[a]=d["_"+a]=new b(a,c)}f.__esModule=!0;var b=function e(a){var b=1>=arguments.length||void 0===arguments[1]?{}:arguments[1];if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.label=a;this.keyword=b.keyword;this.beforeExpr=!!b.beforeExpr;this.startsExpr=!!b.startsExpr;this.isLoop=!!b.isLoop;this.isAssign=!!b.isAssign;this.prefix=!!b.prefix;this.postfix=!!b.postfix;this.binop=b.binop||null;this.updateContext=null};f.TokenType=b;a={beforeExpr:!0};
l={startsExpr:!0};var d={num:new b("num",l),regexp:new b("regexp",l),string:new b("string",l),name:new b("name",l),eof:new b("eof"),bracketL:new b("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new b("]"),braceL:new b("{",{beforeExpr:!0,startsExpr:!0}),braceR:new b("}"),parenL:new b("(",{beforeExpr:!0,startsExpr:!0}),parenR:new b(")"),comma:new b(",",a),semi:new b(";",a),colon:new b(":",a),dot:new b("."),question:new b("?",a),arrow:new b("=>",a),template:new b("template"),ellipsis:new b("...",a),backQuote:new b("`",
l),dollarBraceL:new b("${",{beforeExpr:!0,startsExpr:!0}),eq:new b("=",{beforeExpr:!0,isAssign:!0}),assign:new b("_=",{beforeExpr:!0,isAssign:!0}),incDec:new b("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new b("prefix",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:c("||",1),logicalAND:c("&&",2),bitwiseOR:c("|",3),bitwiseXOR:c("^",4),bitwiseAND:c("&",5),equality:c("==/!=",6),relational:c("</>",7),bitShift:c("<</>>",8),plusMin:new b("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),
modulo:c("%",10),star:c("*",10),slash:c("/",10),starstar:new b("**",{beforeExpr:!0})};f.types=d;var h={};f.keywords=h;g("break");g("case",a);g("catch");g("continue");g("debugger");g("default",a);g("do",{isLoop:!0,beforeExpr:!0});g("else",a);g("finally");g("for",{isLoop:!0});g("function",l);g("if");g("return",a);g("switch");g("throw",a);g("try");g("var");g("const");g("while",{isLoop:!0});g("with");g("new",{beforeExpr:!0,startsExpr:!0});g("this",l);g("super",l);g("class");g("extends",a);g("export");
g("import");g("null",l);g("true",l);g("false",l);g("in",{beforeExpr:!0,binop:7});g("instanceof",{beforeExpr:!0,binop:7});g("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0});g("void",{beforeExpr:!0,prefix:!0,startsExpr:!0});g("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},{}],15:[function(a,l,f){f.__esModule=!0;f.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)};f.has=function(a,f){return Object.prototype.hasOwnProperty.call(a,f)}},{}],16:[function(a,l,f){f.__esModule=
!0;f.isNewLine=function(a){return 10===a||13===a||8232===a||8233==a};a=/\r\n?|\n|\u2028|\u2029/;f.lineBreak=a;f.lineBreakG=new RegExp(a.source,"g");f.nonASCIIwhitespace=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/;f.skipWhiteSpace=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g},{}]},{},[3])(3)});
var CR3Parser=(()=>{const t=(t,e)=>{const n=(t.buf[t.pos>>3]<<24+(7&t.pos)|t.buf[t.pos+8>>3]<<16+(7&t.pos)|t.buf[t.pos+16>>3]<<8+(7&t.pos)|t.buf[t.pos+24>>3]<<(7&t.pos))>>>32-e;return t.pos+=e,n},e=t=>t.buf[t.pos>>3]>>7-(7&t.pos++)&1,n=(e,n,a)=>{let i=e.pos,s=e.buf[e.pos>>3]<<24+(7&e.pos)>>>24;if(!s)for(e.pos+=8-(7&e.pos);!(s=e.buf[e.pos>>3]);e.pos+=8);e.pos+=Math.clz32(s)-23;const r=e.pos-i-1;return r>=n?t(e,a):e.k?r<<e.k|t(e,e.k):r},a=(t,e,n)=>{let a=t;return e>>>t>2&&++a,e>>>t>5&&++a,e<1<<t>>>1&&--a,Math.min(a,n)},i=t=>-(1&t)^t>>>1,s=new Uint8Array([40,45,51,57,64,72]),r=t=>t>=36?s[t%6]<<Math.floor(t/6)-6:s[t%6]>>6-Math.floor(t/6),o=(t,e)=>{if(!t.qp)return[];const s={buf:e.subarray(t.offset),pos:0,k:0,s:0},o=(t.planeWidth>>3)+ +(!0&t.planeWidth),l=(t.planeHeight>>1)+(1&t.planeHeight),f=new Int32Array(l*o);let h=0;for(let t=0;t<o;++t){const e=n(s,23,8);s.k=a(s.k,e,7),f[t]=h+=i(e)}let p=0,c=0,u=0;for(let t=1;t<l;++t){const e=t*o,r=e-o+1;let l=h=p=f[e-o],g=p-c;for(let t=0;t<o-1;++t){u=f[r+t];const o=g<0==c<h?h+g:g<0==h<p?h:p,l=n(s,23,8);g=u-p,c=p,p=u,s.k=a(s.k,l+(Math.abs(g)<<1)>>>1,7),f[e+t]=h=o+i(l)}const b=g<0==c<h?h+g:g<0==h<p?h:p,d=n(s,23,8);s.k=a(s.k,d,7),f[e+o-1]=b+i(d),c=l}const g=(t.planeHeight>>3)+ +(!0&t.planeHeight),b=(t.planeHeight>>2)+ +(!0&t.planeHeight),d=(l-1)*o,w=[];switch(t.wavelets){case 3:{const e=new Int32Array(g*o);for(let n=0;n<t.planeHeight>>3;++n){const t=n*o,a=(n<<2)*o,i=a+o,s=i+o,l=s+o;for(let n=0;n<o;++n){const o=f[a+n]+f[i+n]+f[s+n]+f[l+n]+16;e[t+n]=r(3*+(o<0)+o>>2)}}if(!0&t.planeHeight){const n=(t.planeHeight>>3)*o,a=(-4&l)*o,i=Math.min(a+o,d),s=Math.min(i+o,d),h=d;for(let t=0;t<o;++t){const o=f[a+t]+f[i+t]+f[s+t]+f[h+t]+16;e[n+t]=r(3*+(o<0)+o>>2)}}w.push(e)}case 2:{const e=new Int32Array(b*o);for(let n=0;n<t.planeHeight>>2;++n){const t=n*o,a=(n<<1)*o,i=a+o;for(let n=0;n<o;++n)e[t+n]=r(f[a+n]+f[i+n]+8>>1)}if(!0&t.planeHeight){const n=(t.planeHeight>>2)*o,a=(-2&l)*o,i=d;for(let t=0;t<o;++t)e[n+t]=r(f[a+t]+f[i+t]+8>>1)}w.push(e)}case 1:{const t=l*o;for(let e=0;e<t;++e)f[e]=r(f[e]+4);w.push(f)}}return w},l=new Uint8Array([0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,5,5,6,6,7,7,8,9,10,11,12,13,14,15]),f=new Uint16Array(32);for(let t=0;t<32;++t)f[t]=1<<l[t];const h=(n,a)=>{let i=a-1;for(;i&&e(n);)i-=f[n.s],i<0?i=0:n.s<31&&++n.s;return i&&(l[n.s]&&(i-=t(n,l[n.s])),n.s&&--n.s),a-i},p=(t,s,r,o,l,f,p)=>{r[0]=0;let c=1;if(o)if(f)for(;c<l;++c){let s=r[c-1];if(Math.abs(s)<=p){if(e(t)){const e=c+h(t,l-c+1);for(;c<e;++c)r[c]=s;if(c>l)break}s=0}const o=n(t,41,21);t.k=a(t.k,o,15);const u=i(o);r[c]=s+(u<<f)+(u>>31)}else for(;c<l;++c){let s=r[c-1];if(!s&&e(t)){const e=c+h(t,l-c+1);for(;c<e;++c)r[c]=0;if(c>l)break}const o=n(t,41,21);t.k=a(t.k,o,15),r[c]=s+i(o)}else for(;c<l;++c){let o=0;if(!r[c-1]){if(e(t)){const e=c+h(t,l-c+1);for(;c<e;++c)r[c]=s[c-1]=0;if(c>l)break}o=1}const f=n(t,41,21);s[c-1]=t.k=a(t.k,f,15),r[c]=i(f+o)}if(c==l){const e=r[c-1],l=n(t,41,21);s[c-1]=t.k=a(t.k,l,15);const h=i(l);r[c++]=(o&&(!f||Math.abs(e)<=p)?e:0)+(o&&f?(h<<f)+(h>>31):h)}r[c]=o?r[c-1]+1:0},c=(t,s,r,o,l,f,p)=>{let c=1,u=0;if(o)if(f){r[0]=s[1];let o=!1,g=r[0],b=g,d=g,w=0;for(;c<l;++c){w=s[c+1];let m=b;if(Math.abs(w-b)>p&&(o=!0)||(o||Math.abs(d-g)>p)&&!(o=!1)){let t=g,e=b;g>b&&(t=b,e=g),m=d>=e?t:d<=t?e:g+b-d}else{if(e(t)){const e=c+h(t,l-c+1);for(;c<e;++c)r[c]=g;if(c>=l){u=1;break}b=s[c],d=s[c-1],w=s[c+1]}o=Math.abs(w-b)>p}const y=n(t,41,21);t.k=a(t.k,y+(Math.abs(w>b?w-b+p-1>>f:-(w-b+p>>f))<<1)>>>1,15);const v=i(y);g=r[c]=m+(v<<f)+(v>>31),d=b,b=w}}else{r[0]=s[1];let o=r[0],f=o,p=s[0],g=0;for(;c<l;++c){g=s[c+1];let b=0;if(o==f&&o==g){if(e(t)){const e=c+h(t,l-c+1);for(;c<e;++c)r[c]=o;if(c>=l){u=1;break}f=s[c],p=s[c-1],g=s[c+1]}b=f}else{let t=o,e=f;o>f&&(t=f,e=o),b=p>=e?t:p<=t?e:o+f-p}const d=n(t,41,21);t.k=a(t.k,d+Math.abs(g-f<<1)>>>1,15),o=r[c]=b+i(d),p=f,f=g}}else{r[0]=0;let o=0,f=s[1],p=0;for(;c<l;++c){p=s[c+1];let g=0;if(!(p|f|o)){if(e(t)){const e=c+h(t,l-c+1);for(;c<e;++c)r[c]=s[c-1]=0;if(c>=l){u=1;break}f=s[c],p=s[c+1]}g=1}const b=n(t,41,21);let d=a(t.k,b,15);r[c]-d>1&&++d,t.k=s[c-1]=d,o=r[c]=i(b+g),f=p}}if(c==l){let e=0;if(o){let t=e=s[c];if(!u){let n=r[c-1],a=s[c-1],i=n,o=t;n>t&&(i=t,o=n),e=a>=o?i:a<=i?o:n+t-a}}const l=n(t,41,21),h=i(o?l:l+u);s[c-1]=t.k=a(t.k,l,15),r[c++]=e+(o&&f?(h<<f)+(h>>31):h)}o&&(r[c]=r[c-1]+1)},u=(t,e,s,o,l,f,h,p)=>{const c=l.width,u=l.height,g=l.xs,b=l.xe,d=l.ys,w=l.ye,m=p[h];if(l.partial&&!m){const t=n(e,23,8);l.qParam+=i(t),e.k=a(e.k,t,7)}let y=0;if(m){const e=(+(!0&f)+(f>>3))*(o<d?0:o<u-w?o-d:u-d-w-1),n=l.qBase,a=l.qMulti,i=Math.max(Math.min(n+(a*m[e]>>3),1474560),1);for(;y<g;++y)s[y]=i*t[y+1];const r=c-b-1;for(;y<r;++y){const i=n+(a*m[e+(y-g>>h)]>>3);s[y]=Math.max(Math.min(i,1474560),1)*t[y+1]}const p=Math.max(Math.min(n+(a*m[e+(y-g>>h)]>>3)));for(;y<c;++y)s[y]=p*t[y+1]}else{const e=r(l.qParam);for(;y<c;++y)s[y]=t[y+1]*e}},g=(t,e,n,a,i)=>{let s=1,r=0,o=0,l=e[0],f=n[0]=t[0]-(l+(a.left?l=e[o=1]:l)+2>>2);const h=i-2;for(;s<h;s+=2){const a=e[++o],i=t[++r]-(l+a+2>>2);n[s]=l+(i+f>>1),n[s+1]=f=i,l=a}if(a.right||1&i){const o=t[r+1]-(l+(a.right?e[s+1]:l)+2>>2);n[s]=l+(o+f>>1),1&i&&(n[s+1]=o)}else n[s]=l+f},b=(t,e,n,a)=>{const i=(i,s,r)=>{const o=e.bandState[i],l=o.prevLineBuf;o.prevLineBuf=o.lineBuf,o.lineBuf=l,r?c(o.state,o.prevLineBuf,o.lineBuf,o.partial,o.w,o.rb,o.rbm):p(o.state,o.prevLineBuf,o.lineBuf,o.partial,o.w,o.rb,o.rbm),u(o.lineBuf,o.state,s,r,e.plane.bands[i],t.planeWidth,a,n)},s=3*a,r=a<t.wavelets-1?e.plane.bands[s+5].width:t.planeWidth;let o=e.tmpL;a?(b(t,e,n,a-1),o=e.out[(a<<1)-1]):i(0,o,0);const l=e.curH[a],f=e.nextH[a],h=e.out[1+(a<<1)],d=e.tmpH;if(i(s+1,d,0),g(o,d,h,t,r),o=e.tmpL,i(s+2,o,0),i(s+3,d,0),g(o,d,t.above?l:f,t,r),t.above){i(s+2,o,1),i(s+3,d,1),g(o,d,f,t,r);for(let t=0;t<r;++t)h[t]-=l[t]+f[t]+2>>2}else for(let t=0;t<r;++t)h[t]-=f[t]+1>>1},d=(t,e,n,a,i)=>{const s=(s,r,o)=>{const l=n.bandState[s],f=l.prevLineBuf;l.prevLineBuf=l.lineBuf,l.lineBuf=f,c(l.state,l.prevLineBuf,l.lineBuf,l.partial,l.w,l.rb,l.rbm),u(l.lineBuf,l.state,r,e+1+o,n.plane.bands[s],t.planeWidth,i,a)},r=3*i,o=i<t.wavelets-1?n.plane.bands[r+4].height:t.planeHeight,l=i<t.wavelets-1?n.plane.bands[r+5].width:t.planeWidth,f=n.nextH[i],h=n.curH[i],p=n.out[i<<1],b=n.out[1+(i<<1)],w=n.tmpH,m=e<<1>o-4&&!t.below;if(m&&!(1&o)){for(let t=0;t<l;++t)p[t]=f[t]+b[t];return}let y=n.tmpL;if(i?1&e?y=n.out[(i<<1)-1]:(d(t,e>>1,n,a,i-1),y=n.out[i-1<<1]):s(0,y,0),s(r+1,w,0),g(y,w,p,t,l),m)for(let t=0;t<l;++t)b[t]=f[t]+((p[t]-=f[t]+1>>1)+b[t]>>1);else{y=n.tmpL,s(r+2,y,+t.above),s(r+3,w,+t.above),g(y,w,h,t,l);for(let t=0;t<l;++t)b[t]=f[t]+((p[t]-=f[t]+h[t]+2>>2)+b[t]>>1)}n.out[i<<1]=b,n.out[1+(i<<1)]=p,n.nextH[i]=h,n.curH[i]=f},w=(t,e,n,a,i,s,r,o)=>{const{left:l,top:f,width:h,height:p}=n;if(0==e.encType){const n=1<<e.medianBits-1,c=(1<<e.medianBits)-1;for(let e=0;e<2;++e){const u=i+2*s+e-f;if(!(u<0||u>=p))for(let i=0;i<2;++i){const s=o[2*e+i],f=u*h+a+i-l,p=Math.min(l-a+h+1-i>>1,r);for(let e=Math.max(l-a+1-i>>1,0);e<p;++e)t[f+(e<<1)]=Math.min(Math.max(n+s[e],0),c)}}}else if(3==e.encType){const n=1<<e.medianBits+9,c=(1<<e.medianBits)-1,u=i+2*s-f;if(u<-1||u>=p)return;const g=Math.max(l-a+1>>1,0),b=Math.min(l-a+h+1>>1,r),d=o[0],w=o[1],m=o[2],y=o[3];let v=u*h+a-l;if(-1==u||u==p-1){const e=-1==u;for(let a=g;a<b;++a){const i=d[a],s=w[a],r=m[a],o=y[a],l=v+(a<<1);let f=n+(i<<10)-168*s-585*o;f=f<0?-(512-f>>9&-2):f+512>>9&-2,e?(t[l+h]=Math.min(Math.max(f-r+1>>1,0),c),t[l+h+1]=Math.min(Math.max(n+(i<<10)+1927*s+512>>10,0),c)):(t[l]=Math.min(Math.max(n+(i<<10)+1510*o+512>>10,0),c),t[l+1]=Math.min(Math.max(r+f+1>>1,0),c))}}else for(let e=g;e<b;++e){const a=d[e],i=w[e],s=m[e],r=y[e],o=v+(e<<1);let l=n+(a<<10)-168*i-585*r;l=l<0?-(512-l>>9&-2):l+512>>9&-2,t[o]=Math.min(Math.max(n+(a<<10)+1510*r+512>>10,0),c),t[o+1]=Math.min(Math.max(s+l+1>>1,0),c),t[o+h]=Math.min(Math.max(l-s+1>>1,0),c),t[o+h+1]=Math.min(Math.max(n+(a<<10)+1927*i+512>>10,0),c)}}},m=new Uint8Array([1,1,0,0,0,0,1,0,0,0,0,0,1,1,0,0,0,0,1,0,0,0,0,0,1,1,0,0,0,0,1,0,0,0,0,0,1,1,0,0,0,0,1,0,0,0,0,0,1,1,1,1,0,0,1,0,1,0,0,0,1,2,2,1,0,0,1,1,1,1,0,0,1,1,1,1,0,0,1,0,1,0,0,0,1,2,2,1,0,0,1,1,1,1,0,0,1,1,1,1,1,1,1,0,1,0,1,0,1,2,2,2,2,1,1,1,1,2,2,1,1,1,1,2,2,1,1,0,1,1,1,1,1,2,2,1,1,1,1,1,1,1,1,1]),y=(t,e,n,a)=>{const i=Math.ceil(t.width/t.tileWidth),s=Math.ceil(t.height/t.tileHeight),r=[],l=new DataView(e.buffer,e.byteOffset,t.headerSize);let f=0;for(let e=0,n=0;n<s;++n)for(let a=0;a<i;++a){if(65297!=(16|l.getUint16(e)))throw new Error("invalid tile header");const o=l.getUint16(e+2),h=l.getInt32(e+4);if(n*i+a!=l.getUint16(e+8))throw new Error("invalid tile index");let p=!1,c=0,u=0;16==o&&(p=!0,c=l.getInt32(e+12),u=l.getUint16(e+16)),e+=o+4;const g=0!=n,b=n!=s-1,d=0!=a,w=a!=i-1,y=w?t.tileWidth:t.width-(i-1)*t.tileWidth,v=b?t.tileHeight:t.height-(s-1)*t.tileHeight,M=y>>1,k=v>>1,B=[];let U=0;for(let n=0;n<t.planes;++n){if(65298!=(16|l.getUint16(e)))throw new Error("invalid plane header");const a=l.getUint16(e+2),i=l.getInt32(e+4),s=l.getUint8(e+8);if(n!=s>>4)throw new Error("invalid plane index");const r=s>>3&1,o=s>>1&3;e+=a+4;const f=48*(t.wavelets-1)+6*(7&M),h=48*(t.wavelets-1)+6*(7&k),p=[];let c=0;const u=(t,n,a,i,s,r,o)=>{const f=l.getUint16(e);if(65299!=(16|f))throw new Error("invalid subband header");const h=l.getUint16(e+2),u=l.getInt32(e+4),g=l.getUint16(e+8);if(t!=g>>12)throw new Error("invalid subband index");if(65283==f){const t=g>>11&1,e=g>>3&255;p.push({offset:c,partial:1==t,qParam:e,qBase:0,qMulti:0,width:n,height:a,xs:i,xe:s,ys:r,ye:o})}else{const t=l.getUint16(e+10),f=l.getInt32(e+12);p.push({offset:c,partial:!1,qParam:0,qBase:f,qMulti:t,width:n,height:a,xs:i,xe:s,ys:r,ye:o})}c+=u,e+=h+4};if(t.wavelets)for(let e=t.wavelets;e>0;--e){const n=M+(1<<e-1)-1>>e-1,a=k+(1<<e-1)-1>>e-1,i=1&n,s=1&a,r=n+1>>1,o=a+1>>1,l=f+(e<<1)-2,p=h+(e<<1)-2;let c=+d,y=+g,v=w?m[l]:0,B=b?m[p]:0,U=w?m[l+1]:0,x=b?m[p+1]:0;e==t.wavelets&&u(0,r+U,o+x,0,U,0,x);for(let n=0;n<3;++n)u(3*(t.wavelets-e)+n+1,1&n?r+U:r+c+v-i,n?o+y+B-s:o+x,1&n?0:c,1&n?U:v,n?y:0,n?B:x)}else u(0,M,k,0,0,0,0);B.push({offset:U,partial:1==r,roundedBits:o,bands:p}),U+=i}r.push({offset:f,above:g,below:b,left:d,right:w,qp:p,qpSize:c,qpPad:u,width:y,height:v,planeWidth:M,planeHeight:k,wavelets:t.wavelets,x:a*t.tileWidth,y:n*t.tileHeight,planes:B}),f+=h}((t,e,n,a,i)=>{const s=2+(t.tileWidth>>1);if(t.wavelets){const s=t.tileWidth+14>>2,r=s<<1,l=14*(t.tileWidth>>1)+22*t.wavelets,f=new Int32Array(r+t.planes*l),h=f.subarray(0,s),p=f.subarray(s,r);for(const s of e){const e=o(s,n),c=s.planeHeight-1>>1,u=s.planes.map((a,i)=>{let o=r+i*l;const c=[],u=[],g=[];for(let e=t.wavelets-1;e>=0;--e){const t=3+(s.planeWidth>>e);c.push(f.subarray(o,o+=t)),u.push(f.subarray(o,o+=t)),g.push(f.subarray(o,o+=t),f.subarray(o,o+=t))}const d=a.bands.map((t,e)=>{const i=t.width+2,r=a.roundedBits,l=1<<r-1;return{lineBuf:f.subarray(o,o+=i),prevLineBuf:f.subarray(o,o+=i),state:{buf:n.subarray(s.offset+s.qpSize+s.qpPad+a.offset+t.offset),pos:0,k:0,s:0},partial:a.partial&&!e,rb:r,rbm:l,w:t.width}}),w={plane:a,nextH:u,curH:c,out:g,tmpH:p,tmpL:h,bandState:d};return b(s,w,e,t.wavelets-1),w});w(a,t,i,s.x,s.y,0,s.planeWidth,u.map(e=>e.out[(t.wavelets<<1)-1]));for(let n=0;n<c;++n){for(const a of u)d(s,n,a,e,t.wavelets-1);w(a,t,i,s.x,s.y,1+(n<<1),s.planeWidth,u.map(e=>e.out[t.wavelets-1<<1])),2+(n<<1)<s.planeHeight&&w(a,t,i,s.x,s.y,2+(n<<1),s.planeWidth,u.map(e=>e.out[(t.wavelets<<1)-1]))}}}else{const r=new Int32Array(t.planes*s<<1);for(const o of e){const e=o.planes.map((t,e)=>{const a=t.bands[0],i=t.partial,l={buf:n.subarray(o.offset+t.offset+a.offset),pos:0,k:0,s:0},f=(e<<1)*s,h=r.subarray(f,f+s),c=r.subarray(f+s,f+(s<<1)),u=t.roundedBits,g=1<<u-1,b=a.width;return p(l,c,h,i,b,u,g),{lineBuf:h,prevLineBuf:c,state:l,partial:i,rb:u,rbm:g,w:b}});w(a,t,i,o.x,o.y,0,o.planeWidth,e.map(t=>t.lineBuf.subarray(1,-1)));for(let n=1;n<o.planeHeight;++n){for(const t of e){const e=t.prevLineBuf;t.prevLineBuf=t.lineBuf,t.lineBuf=e,c(t.state,t.prevLineBuf,t.lineBuf,t.partial,t.w,t.rb,t.rbm)}w(a,t,i,o.x,o.y,n,o.planeWidth,e.map(t=>t.lineBuf.subarray(1,-1)))}}}})(t,r,new Uint8Array(e.buffer,e.byteOffset+t.headerSize,e.byteLength-t.headerSize),n,a)},v=t=>{const e={};for(let n=0;n<t.byteLength;){let a=t.getInt32(n),i=n+a,s=String.fromCharCode(t.getUint8(n+4),t.getUint8(n+5),t.getUint8(n+6),t.getUint8(n+7));1==a&&(a=t.getInt32(n+12),i=n+a,n+=8),n+=8,e[s]||(e[s]=[]),e[s].push(new DataView(t.buffer,t.byteOffset+n,i-n)),n=i}return e};return class{constructor(t,e,n){this.src=new DataView(t,e,n);const a=v(this.src),i=v(a.moov[0]);this.tracks=i.trak.map(t=>{const e={},n=[],a=v(v(v(v(t).mdia[0]).minf[0]).stbl[0]),i=a.stsz[0],s=a.co64[0],r=Math.min(i.getInt32(8),s.getInt32(4)),o=i.getInt32(4);for(let t=0;t<r;++t)n.push({size:o||i.getInt32(12+4*t),offset:s.getInt32(12+8*t)});const l=a.stsd[0],f=v(new DataView(l.buffer,l.byteOffset+8,l.byteLength-8));if(!f.CRAW)return null;const h=f.CRAW[0];e.width=h.getUint16(24),e.height=h.getUint16(26);const p=v(new DataView(h.buffer,h.byteOffset+82,h.byteLength-82));if(p.JPEG)e.type="jpeg";else if(p.CMP1){const t=p.CMP1[0];e.width=t.getInt32(8),e.height=t.getInt32(12),e.tileWidth=t.getInt32(16),e.tileHeight=t.getInt32(20);const n=t.getUint8(26);if(e.wavelets=15&n,0!=e.wavelets&&3!=e.wavelets)throw new TypeError("expected 0 or 3 wavelet levels");e.encType=n>>4;const a=t.getUint8(25);if(e.planes=a>>4,4!=e.planes)throw new TypeError("expected 4 planes");switch(15&a){case 0:e.layout="rggb";break;case 1:e.layout="grbg";break;case 2:e.layout="gbrg";break;case 3:e.layout="bggr"}e.bitDepth=t.getUint8(24),e.medianBits=e.bitDepth,e.headerSize=t.getInt32(28);if(t.getUint8(32)>>7){t.getUint8(56)>>6&1&&(e.medianBits=t.getUint8(84))}const i=p.CDI1[0],s=v(new DataView(i.buffer,i.byteOffset+4,i.byteLength-4)).IAD1[0],r=s.getUint16(10);e.type=2==r?"big":0==r?"small":"unknown",e.fullCrop={left:0,top:0,width:e.width,height:e.height},e.recommendedCrop={left:s.getUint16(16),top:s.getUint16(18)},e.recommendedCrop.width=s.getUint16(20)-e.recommendedCrop.left+1,e.recommendedCrop.height=s.getUint16(22)-e.recommendedCrop.top+1,"big"==e.type&&(e.activeArea={left:s.getUint16(40),top:s.getUint16(42)},e.activeArea.width=Math.min(s.getUint16(44)-1,e.width)-e.activeArea.left,e.activeArea.height=Math.min(s.getUint16(46)-1,e.width)-e.activeArea.top)}else e.type="unknown";return{meta:e,samples:n}}).filter(t=>t)}getTrack(t="big"){return this.tracks.find(e=>e.meta.type==t)}extractCFA(t=this.getTrack("big"),e=0,n=t.meta.fullCrop,a=new Uint16Array(n.width*n.height)){if("big"!=t.meta.type&&"small"!=t.meta.type)throw new TypeError("expected raw track");const i=t.samples[e],s=new Uint8Array(this.src.buffer,this.src.byteOffset+i.offset,i.size);return y(t.meta,s,a,n),a}}})()
	
var UPNG=function(){var d={nextZero:function(G,O){while(G[O]!=0)O++;return O},readUshort:function(G,O){return G[O]<<8|G[O+1]},writeUshort:function(G,O,h){G[O]=h>>8&255;
G[O+1]=h&255},readUint:function(G,O){return G[O]*(256*256*256)+(G[O+1]<<16|G[O+2]<<8|G[O+3])},writeUint:function(G,O,h){G[O]=h>>24&255;
G[O+1]=h>>16&255;G[O+2]=h>>8&255;G[O+3]=h&255},readASCII:function(G,O,h){var x="";for(var X=0;X<h;X++)x+=String.fromCharCode(G[O+X]);
return x},writeASCII:function(G,O,h){for(var x=0;x<h.length;x++)G[O+x]=h.charCodeAt(x)},readBytes:function(G,O,h){var x=[];
for(var i=0;i<h;i++)x.push(G[O+i]);return x},pad:function(G){return G.length<2?"0"+G:G},readUTF8:function(G,O,h){var x="",X;
for(var F=0;F<h;F++)x+="%"+d.pad(G[O+F].toString(16));try{X=decodeURIComponent(x)}catch(an){return d.readASCII(G,O,h)}return X},writeUTF8:function(G,O,B){var h=new window.TextEncoder("utf8"),x=h.encode(G);
if(O)O.set(x,B);return x.length}};function ae(G){var O=G.width,B=G.height;if(G.tabs.acTL==null)return[ac(G.data,O,B,G).buffer];
var h=[];if(G.frames[0].data==null)G.frames[0].data=G.data;var x=O*B*4,i=new Uint8Array(x),X=new Uint8Array(x),F=new Uint8Array(x);
for(var z=0;z<G.frames.length;z++){var $=G.frames[z],D=$.rect.x,u=$.rect.y,R=$.rect.width,K=$.rect.height,C=ac($.data,R,K,G);
if(z!=0)for(var S=0;S<x;S++)F[S]=i[S];if($.blend==0)aa(C,R,K,i,O,B,D,u,0);else if($.blend==1)aa(C,R,K,i,O,B,D,u,1);
h.push(i.buffer.slice(0));if($.dispose==0){}else if($.dispose==1)aa(X,R,K,i,O,B,D,u,0);else if($.dispose==2)for(var S=0;
S<x;S++)i[S]=F[S]}return h}function ac(G,O,B,h){var x=O*B,i=a7(h),X=Math.ceil(O*i/8),F=new Uint8Array(x*4),z=new Uint32Array(F.buffer),$=h.ctype,D=h.depth,u=d.readUshort,R=Date.now();
if($==6){var K=x<<2;if(D==8)for(var C=0;C<K;C+=4){F[C]=G[C];F[C+1]=G[C+1];F[C+2]=G[C+2];F[C+3]=G[C+3]}if(D==16)for(var C=0;
C<K;C++){F[C]=G[C<<1]}}else if($==2){var S=h.tabs.tRNS;if(S==null){if(D==8)for(var C=0;C<x;C++){var g=C*3;
z[C]=255<<24|G[g+2]<<16|G[g+1]<<8|G[g]}if(D==16)for(var C=0;C<x;C++){var g=C*6;z[C]=255<<24|G[g+4]<<16|G[g+2]<<8|G[g]}}else{var l=S[0],o=S[1],k=S[2];
if(D==8)for(var C=0;C<x;C++){var L=C<<2,g=C*3;z[C]=255<<24|G[g+2]<<16|G[g+1]<<8|G[g];if(G[g]==l&&G[g+1]==o&&G[g+2]==k)F[L+3]=0}if(D==16)for(var C=0;
C<x;C++){var L=C<<2,g=C*6;z[C]=255<<24|G[g+4]<<16|G[g+2]<<8|G[g];if(u(G,g)==l&&u(G,g+2)==o&&u(G,g+4)==k)F[L+3]=0}}}else if($==3){var e=h.tabs.PLTE,Y=h.tabs.tRNS,P=Y?Y.length:0;
if(D==1)for(var E=0;E<B;E++){var b=E*X,I=E*O;for(var C=0;C<O;C++){var L=I+C<<2,q=G[b+(C>>3)]>>7-((C&7)<<0)&1,H=3*q;
F[L]=e[H];F[L+1]=e[H+1];F[L+2]=e[H+2];F[L+3]=q<P?Y[q]:255}}if(D==2)for(var E=0;E<B;E++){var b=E*X,I=E*O;
for(var C=0;C<O;C++){var L=I+C<<2,q=G[b+(C>>2)]>>6-((C&3)<<1)&3,H=3*q;F[L]=e[H];F[L+1]=e[H+1];F[L+2]=e[H+2];
F[L+3]=q<P?Y[q]:255}}if(D==4)for(var E=0;E<B;E++){var b=E*X,I=E*O;for(var C=0;C<O;C++){var L=I+C<<2,q=G[b+(C>>1)]>>4-((C&1)<<2)&15,H=3*q;
F[L]=e[H];F[L+1]=e[H+1];F[L+2]=e[H+2];F[L+3]=q<P?Y[q]:255}}if(D==8)for(var C=0;C<x;C++){var L=C<<2,q=G[C],H=3*q;
F[L]=e[H];F[L+1]=e[H+1];F[L+2]=e[H+2];F[L+3]=q<P?Y[q]:255}}else if($==4){if(D==8)for(var C=0;C<x;C++){var L=C<<2,p=C<<1,U=G[p];
F[L]=U;F[L+1]=U;F[L+2]=U;F[L+3]=G[p+1]}if(D==16)for(var C=0;C<x;C++){var L=C<<2,p=C<<2,U=G[p];F[L]=U;
F[L+1]=U;F[L+2]=U;F[L+3]=G[p+2]}}else if($==0){var l=h.tabs.tRNS?h.tabs.tRNS:-1;for(var E=0;E<B;E++){var t=E*X,a=E*O;
if(D==1)for(var Z=0;Z<O;Z++){var U=255*(G[t+(Z>>>3)]>>>7-(Z&7)&1),v=U==l*255?0:255;z[a+Z]=v<<24|U<<16|U<<8|U}else if(D==2)for(var Z=0;
Z<O;Z++){var U=85*(G[t+(Z>>>2)]>>>6-((Z&3)<<1)&3),v=U==l*85?0:255;z[a+Z]=v<<24|U<<16|U<<8|U}else if(D==4)for(var Z=0;
Z<O;Z++){var U=17*(G[t+(Z>>>1)]>>>4-((Z&1)<<2)&15),v=U==l*17?0:255;z[a+Z]=v<<24|U<<16|U<<8|U}else if(D==8)for(var Z=0;
Z<O;Z++){var U=G[t+Z],v=U==l?0:255;z[a+Z]=v<<24|U<<16|U<<8|U}else if(D==16)for(var Z=0;Z<O;Z++){var U=G[t+(Z<<1)],v=u(G,t+(Z<<1))==l?0:255;
z[a+Z]=v<<24|U<<16|U<<8|U}}}return F}function ag(G){var O=new Uint8Array(G),B=8,h=d,x=h.readUshort,i=h.readUint,X={tabs:{},frames:[]},F=new Uint8Array(O.length),z=0,a3,$=0,D=[137,80,78,71,13,10,26,10];
for(var u=0;u<8;u++)if(O[u]!=D[u])throw"The input is not a PNG file!";while(B<O.length){var R=h.readUint(O,B);
B+=4;var K=h.readASCII(O,B,4);B+=4;if(K=="IHDR"){av(O,B,X)}else if(K=="iCCP"){var C=B;while(O[C]!=0)C++;
var S=h.readASCII(O,B,C-B),g=O[C+1],l=C+4,o=O.slice(l,B+R);X.tabs[K]=aq(o)}else if(K=="CgBI"){X.tabs[K]=O.slice(B,B+4)}else if(K=="IDAT"){for(var u=0;
u<R;u++)F[z+u]=O[B+u];z+=R}else if(K=="acTL"){X.tabs[K]={num_frames:i(O,B),num_plays:i(O,B+4)};a3=new Uint8Array(O.length)}else if(K=="fcTL"){if($!=0){var k=X.frames[X.frames.length-1];
k.data=an(X,a3.slice(0,$),k.rect.width,k.rect.height);$=0}var L={x:i(O,B+12),y:i(O,B+16),width:i(O,B+4),height:i(O,B+8)},e=x(O,B+22);
e=x(O,B+20)/(e==0?100:e);var Y={rect:L,delay:Math.round(e*1e3),dispose:O[B+24],blend:O[B+25]};X.frames.push(Y)}else if(K=="fdAT"){for(var u=0;
u<R-4;u++)a3[$+u]=O[B+u+4];$+=R-4}else if(K=="pHYs"){X.tabs[K]=[h.readUint(O,B),h.readUint(O,B+4),O[B+8]]}else if(K=="cHRM"){X.tabs[K]=[];
for(var u=0;u<8;u++)X.tabs[K].push(h.readUint(O,B+u*4))}else if(K=="tEXt"||K=="zTXt"){if(X.tabs[K]==null)X.tabs[K]={};
var P=h.nextZero(O,B),E=h.readASCII(O,B,P-B),b,I=B+R-P-1;if(K=="tEXt")b=h.readASCII(O,P+1,I);else{var q=M(O.slice(P+2,P+2+I));
b=h.readUTF8(q,0,q.length)}X.tabs[K][E]=b}else if(K=="iTXt"){if(X.tabs[K]==null)X.tabs[K]={};var P=0,C=B,b;
P=h.nextZero(O,C);var E=h.readASCII(O,C,P-C);C=P+1;var H=O[C],p=O[C+1];C+=2;P=h.nextZero(O,C);var U=h.readASCII(O,C,P-C);
C=P+1;P=h.nextZero(O,C);var t=h.readUTF8(O,C,P-C);C=P+1;var I=R-(C-B);if(H==0)b=h.readUTF8(O,C,I);else{var q=M(O.slice(C,C+I));
b=h.readUTF8(q,0,q.length)}X.tabs[K][E]=b}else if(K=="PLTE"){X.tabs[K]=h.readBytes(O,B,R)}else if(K=="hIST"){var a=X.tabs.PLTE.length/3;
X.tabs[K]=[];for(var u=0;u<a;u++)X.tabs[K].push(x(O,B+u*2))}else if(K=="tRNS"){if(X.ctype==3)X.tabs[K]=h.readBytes(O,B,R);
else if(X.ctype==0)X.tabs[K]=x(O,B);else if(X.ctype==2)X.tabs[K]=[x(O,B),x(O,B+2),x(O,B+4)]}else if(K=="gAMA")X.tabs[K]=h.readUint(O,B)/1e5;
else if(K=="sRGB")X.tabs[K]=O[B];else if(K=="bKGD"){if(X.ctype==0||X.ctype==4)X.tabs[K]=[x(O,B)];else if(X.ctype==2||X.ctype==6)X.tabs[K]=[x(O,B),x(O,B+2),x(O,B+4)];
else if(X.ctype==3)X.tabs[K]=O[B]}else if(K=="IEND"){break}B+=R;var Z=h.readUint(O,B);B+=4}if($!=0){var k=X.frames[X.frames.length-1];
k.data=an(X,a3.slice(0,$),k.rect.width,k.rect.height)}X.data=an(X,F,X.width,X.height);delete X.compress;
delete X.interlace;delete X.filter;return X}function an(G,O,B,h){var x=Date.now(),i=a7(G),X=Math.ceil(B*i/8),F=new Uint8Array((X+1+G.interlace)*h);
if(G.tabs.CgBI)O=aq(O,F);else O=M(O,F);var x=Date.now();if(G.interlace==0)O=ai(O,G,0,B,h);else if(G.interlace==1)O=ad(O,G);
return O}function M(G,O){var B=aq(new Uint8Array(G.buffer,2,G.length-6),O);return B}var aq=function(){var G=function(){var g=Uint16Array,o=Uint32Array;
return{m:new g(16),v:new g(16),d:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],o:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],z:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],B:new g(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],w:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],h:new o(32),g:new g(512),s:[],A:new g(32),t:[],k:new g(32768),c:[],a:[],n:new g(32768),e:[],C:new g(512),b:[],i:new g(1<<15),r:new o(286),f:new o(30),l:new o(19),u:new o(15e3),q:new g(1<<16),j:new g(1<<15)}}();
function O(g,o){var L=g.length,e,Y,P,E,b,I=G.v;for(var E=0;E<=o;E++)I[E]=0;for(E=1;E<L;E+=2)I[g[E]]++;
var q=G.m;e=0;I[0]=0;for(Y=1;Y<=o;Y++){e=e+I[Y-1]<<1;q[Y]=e}for(P=0;P<L;P+=2){b=g[P+1];if(b!=0){g[P]=q[b];
q[b]++}}}function B(g,o,L){var e=g.length,Y=G.i;for(var P=0;P<e;P+=2)if(g[P+1]!=0){var E=P>>1,b=g[P+1],I=E<<4|b,q=o-b,H=g[P]<<q,p=H+(1<<q);
while(H!=p){var U=Y[H]>>>15-o;L[U]=I;H++}}}function h(g,o){var L=G.i,e=15-o;for(var Y=0;Y<g.length;Y+=2){var P=g[Y]<<o-g[Y+1];
g[Y]=L[P]>>>e}}(function(){var g=1<<15;for(var o=0;o<g;o++){var L=o;L=(L&2863311530)>>>1|(L&1431655765)<<1;
L=(L&3435973836)>>>2|(L&858993459)<<2;L=(L&4042322160)>>>4|(L&252645135)<<4;L=(L&4278255360)>>>8|(L&16711935)<<8;
G.i[o]=(L>>>16|L<<16)>>>17}function e(Y,P,E){while(P--!=0)Y.push(0,E)}for(var o=0;o<32;o++){G.B[o]=G.o[o]<<3|G.z[o];
G.h[o]=G.p[o]<<4|G.w[o]}e(G.s,144,8);e(G.s,255-143,9);e(G.s,279-255,7);e(G.s,287-279,8);O(G.s,9);B(G.s,9,G.g);
h(G.s,9);e(G.t,32,5);O(G.t,5);B(G.t,5,G.A);h(G.t,5);e(G.b,19,0);e(G.c,286,0);e(G.e,30,0);e(G.a,320,0)}());
function x(g,o,L){return(g[o>>>3]|g[(o>>>3)+1]<<8)>>>(o&7)&(1<<L)-1}function i(g,o,L){return(g[o>>>3]|g[(o>>>3)+1]<<8|g[(o>>>3)+2]<<16)>>>(o&7)&(1<<L)-1}function F(g,o){return(g[o>>>3]|g[(o>>>3)+1]<<8|g[(o>>>3)+2]<<16)>>>(o&7)}function z(g,o){return(g[o>>>3]|g[(o>>>3)+1]<<8|g[(o>>>3)+2]<<16|g[(o>>>3)+3]<<24)>>>(o&7)}function $(g,o){var L=Uint8Array,e=0,Y=0,P=0,E=0,b=0,I=0,q=0,H=0,p=0,U,t;
if(g[0]==3&&g[1]==0)return o?o:new L(0);var a=o==null;if(a)o=new L(g.length>>>2<<3);while(e==0){e=i(g,p,1);
Y=i(g,p+1,2);p+=3;if(Y==0){if((p&7)!=0)p+=8-(p&7);var Z=(p>>>3)+4,v=g[Z-4]|g[Z-3]<<8;if(a)o=D(o,H+v);
o.set(new L(g.buffer,g.byteOffset+Z,v),H);p=Z+v<<3;H+=v;continue}if(a)o=D(o,H+(1<<17));if(Y==1){U=G.g;
t=G.A;I=(1<<9)-1;q=(1<<5)-1}if(Y==2){P=x(g,p,5)+257;E=x(g,p+5,5)+1;b=x(g,p+10,4)+4;p+=14;var _=p,A=1;
for(var J=0;J<38;J+=2){G.b[J]=0;G.b[J+1]=0}for(var J=0;J<b;J++){var Q=x(g,p+J*3,3);G.b[(G.d[J]<<1)+1]=Q;
if(Q>A)A=Q}p+=3*b;O(G.b,A);B(G.b,A,G.C);U=G.k;t=G.n;p=u(G.C,(1<<A)-1,P+E,g,p,G.a);var m=R(G.a,0,P,G.c);
I=(1<<m)-1;var w=R(G.a,P,E,G.e);q=(1<<w)-1;O(G.c,m);B(G.c,m,U);O(G.e,w);B(G.e,w,t)}while(!0){var f=U[F(g,p)&I];
p+=f&15;var n=f>>>4;if(n>>>8==0){o[H++]=n}else if(n==256){break}else{var N=H+n-254;if(n>264){var y=G.B[n-257];
N=H+(y>>>3)+x(g,p,y&7);p+=y&7}var V=t[F(g,p)&q];p+=V&15;var T=V>>>4,s=G.h[T],j=(s>>>4)+i(g,p,s&15);p+=s&15;
if(a)o=D(o,H+(1<<17));while(H<N){o[H]=o[H++-j];o[H]=o[H++-j];o[H]=o[H++-j];o[H]=o[H++-j]}H=N}}}return o.length==H?o:o.slice(0,H)}function D(g,o){var L=g.length;
if(o<=L)return g;var e=new Uint8Array(Math.max(L<<1,o));e.set(g,0);return e}function u(g,o,L,e,Y,P){var E=0;
while(E<L){var b=g[F(e,Y)&o];Y+=b&15;var I=b>>>4;if(I<=15){P[E]=I;E++}else{var q=0,H=0;if(I==16){H=3+x(e,Y,2);
Y+=2;q=P[E-1]}else if(I==17){H=3+x(e,Y,3);Y+=3}else if(I==18){H=11+x(e,Y,7);Y+=7}var p=E+H;while(E<p){P[E]=q;
E++}}}return Y}function R(g,o,L,e){var Y=0,P=0,E=e.length>>>1;while(P<L){var b=g[P+o];e[P<<1]=0;e[(P<<1)+1]=b;
if(b>Y)Y=b;P++}while(P<E){e[P<<1]=0;e[(P<<1)+1]=0;P++}return Y}return $}();function ad(G,O){var B=O.width,h=O.height,x=a7(O),i=x>>3,X=Math.ceil(B*x/8),F=new Uint8Array(h*X),z=0,$=[0,0,4,0,2,0,1],D=[0,4,0,2,0,1,0],u=[8,8,8,4,4,2,2],R=[8,8,4,4,2,2,1],K=0;
while(K<7){var C=u[K],S=R[K],g=0,l=0,o=$[K],e=0;while(o<h){o+=C;l++}var k=D[K];while(k<B){k+=S;g++}var L=Math.ceil(g*x/8);
ai(G,O,z,g,l);var Y=$[K];while(Y<h){var P=D[K],E=z+e*L<<3;while(P<B){if(x==1){var b=G[E>>3];b=b>>7-(E&7)&1;
F[Y*X+(P>>3)]|=b<<7-((P&7)<<0)}if(x==2){var b=G[E>>3];b=b>>6-(E&7)&3;F[Y*X+(P>>2)]|=b<<6-((P&3)<<1)}if(x==4){var b=G[E>>3];
b=b>>4-(E&7)&15;F[Y*X+(P>>1)]|=b<<4-((P&1)<<2)}if(x>=8){var I=Y*X+P*i;for(var q=0;q<i;q++)F[I+q]=G[(E>>3)+q]}E+=x;
P+=S}e++;Y+=C}if(g*l!=0)z+=l*(1+L);K=K+1}return F}function a7(G){var O=[1,null,3,1,2,null,4][G.ctype];
return O*G.depth}function ai(G,O,B,h,x){var i=a7(O),X=Math.ceil(h*i/8),F,z,D=0;i=Math.ceil(i/8);var $=G[B];
if($>1)G[B]=[0,0,1][$-2];if($==3)for(D=i;D<X;D++)G[D+1]=G[D+1]+(G[D+1-i]>>>1)&255;for(var u=0;u<x;u++){F=B+u*X;
z=F+u+1;$=G[z-1];D=0;if($==0)for(;D<X;D++)G[F+D]=G[z+D];else if($==1){for(;D<i;D++)G[F+D]=G[z+D];for(;
D<X;D++)G[F+D]=G[z+D]+G[F+D-i]}else if($==2){for(;D<X;D++)G[F+D]=G[z+D]+G[F+D-X]}else if($==3){for(;
D<i;D++)G[F+D]=G[z+D]+(G[F+D-X]>>>1);for(;D<X;D++)G[F+D]=G[z+D]+(G[F+D-X]+G[F+D-i]>>>1)}else{for(;D<i;
D++)G[F+D]=G[z+D]+ak(0,G[F+D-X],0);for(;D<X;D++)G[F+D]=G[z+D]+ak(G[F+D-i],G[F+D-X],G[F+D-i-X])}}return G}function ak(G,O,B){var h=G+O-B,x=h-G,i=h-O,X=h-B;
if(x*x<=i*i&&x*x<=X*X)return G;else if(i*i<=X*X)return O;return B}function av(G,O,B){B.width=d.readUint(G,O);
O+=4;B.height=d.readUint(G,O);O+=4;B.depth=G[O];O++;B.ctype=G[O];O++;B.compress=G[O];O++;B.filter=G[O];
O++;B.interlace=G[O];O++}function aa(G,O,B,h,x,i,X,F,z){var a3=Math.min(O,x),$=Math.min(B,i),D=0,u=0;
for(var R=0;R<$;R++)for(var K=0;K<a3;K++){if(X>=0&&F>=0){D=R*O+K<<2;u=(F+R)*x+X+K<<2}else{D=(-F+R)*O-X+K<<2;
u=R*x+K<<2}if(z==0){h[u]=G[D];h[u+1]=G[D+1];h[u+2]=G[D+2];h[u+3]=G[D+3]}else if(z==1){var C=G[D+3]*(1/255),S=G[D]*C,g=G[D+1]*C,l=G[D+2]*C,o=h[u+3]*(1/255),k=h[u]*o,L=h[u+1]*o,e=h[u+2]*o,Y=1-C,P=C+o*Y,E=P==0?0:1/P;
h[u+3]=255*P;h[u+0]=(S+k*Y)*E;h[u+1]=(g+L*Y)*E;h[u+2]=(l+e*Y)*E}else if(z==2){var C=G[D+3],S=G[D],g=G[D+1],l=G[D+2],o=h[u+3],k=h[u],L=h[u+1],e=h[u+2];
if(C==o&&S==k&&g==L&&l==e){h[u]=0;h[u+1]=0;h[u+2]=0;h[u+3]=0}else{h[u]=S;h[u+1]=g;h[u+2]=l;h[u+3]=C}}else if(z==3){var C=G[D+3],S=G[D],g=G[D+1],l=G[D+2],o=h[u+3],k=h[u],L=h[u+1],e=h[u+2];
if(C==o&&S==k&&g==L&&l==e)continue;if(C<220&&o>20)return!1}}return!0}return{decode:ag,toRGBA8:ae,_paeth:ak,_copyTile:aa,_bin:d}}();
(function(){var d=UPNG._copyTile,ae=UPNG._bin,ac=UPNG._paeth,ag={table:function(){var L=new Uint32Array(256);
for(var e=0;e<256;e++){var Y=e;for(var P=0;P<8;P++){if(Y&1)Y=3988292384^Y>>>1;else Y=Y>>>1}L[e]=Y}return L}(),update:function(L,e,Y,P){for(var E=0;
E<P;E++)L=ag.table[(L^e[Y+E])&255]^L>>>8;return L},crc:function(L,e,Y){return ag.update(4294967295,L,e,Y)^4294967295}};
function an(L,e,Y,P){e[Y]+=L[0]*P>>4;e[Y+1]+=L[1]*P>>4;e[Y+2]+=L[2]*P>>4;e[Y+3]+=L[3]*P>>4}function M(L){return Math.max(0,Math.min(255,L))}function aq(L,e){var Y=L[0]-e[0],P=L[1]-e[1],E=L[2]-e[2],I=L[3]-e[3];
return Y*Y+P*P+E*E+I*I}function ad(L,e,Y,P,E,I,q){if(q==null)q=1;var H=P.length,p=[],U=[],w=4;for(var t=0;
t<H;t++){var a=P[t];p.push([a>>>0&255,a>>>8&255,a>>>16&255,a>>>24&255])}for(var t=0;t<H;t++){var Z=4294967295,v=0;
for(var _=0;_<H;_++){var A=aq(p[t],p[_]);if(_!=t&&A<Z){Z=A;v=_}}var J=Math.sqrt(Z)/2;U[t]=~~(J*J)}var Q=new Uint32Array(E.buffer),m=new Int16Array(e*Y*4),f=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];
for(var t=0;t<f.length;t++)f[t]=255*(-.5+(f[t]+.5)/(w*w));for(var n=0;n<Y;n++){for(var N=0;N<e;N++){var t=(n*e+N)*4,y,v=0,V=16777215;
if(q!=2)y=[M(L[t]+m[t]),M(L[t+1]+m[t+1]),M(L[t+2]+m[t+2]),M(L[t+3]+m[t+3])];else{var A=f[(n&w-1)*w+(N&w-1)];
y=[M(L[t]+A),M(L[t+1]+A),M(L[t+2]+A),M(L[t+3]+A)]}for(var _=0;_<H;_++){var T=aq(y,p[_]);if(T<V){V=T;
v=_}}var s=p[v],j=[y[0]-s[0],y[1]-s[1],y[2]-s[2],y[3]-s[3]];if(q==1){if(N!=e-1)an(j,m,t+4,7);if(n!=Y-1){if(N!=0)an(j,m,t+4*e-4,3);
an(j,m,t+4*e,5);if(N!=e-1)an(j,m,t+4*e+4,1)}}I[t>>2]=v;Q[t>>2]=P[v]}}}function a7(L,e,Y,P,E,I,q){if(P==null)P=0;
if(q==null)q=!1;var H=aa(L,e,Y,P,[!1,!1,!1,0,q,!1]);av(H,-1,!1,P!=0);return ak(H,e,Y,E,I)}function ai(L,e,Y,P,E,I,q,H){var p={ctype:0+(P==1?0:2)+(E==0?0:4),depth:I,frames:[]},U=Date.now(),t=(P+E)*I,a=t*e;
for(var Z=0;Z<L.length;Z++)p.frames.push({rect:{x:0,y:0,width:e,height:Y},img:new Uint8Array(L[Z]),blend:0,dispose:1,bpp:Math.ceil(t/8),bpl:Math.ceil(a/8)});
av(p,0,!0);var v=ak(p,e,Y,q,H);return v}function ak(L,e,Y,P,E){if(E==null)E={};var I=ag.crc,q=ae.writeUint,H=ae.writeUshort,p=ae.writeASCII,U=8,t=L.frames.length>1,a=!1,Z,v=8+(16+5+4)+(t?20:0),as=0;
if(E.sRGB!=null)v+=8+1+4;if(E.pHYs!=null)v+=8+9+4;if(E.iCCP!=null){Z=pako.deflate(E.iCCP);v+=8+11+2+Z.length+4}if(E.iTXt!=null){var _=E.iTXt,A=Object.keys(_)[0],J=_[A];
v+=8+A.length+5+ae.writeUTF8(J)+4}if(L.ctype==3){var Q=L.plte.length;for(var m=0;m<Q;m++)if(L.plte[m]>>>24!=255)a=!0;
v+=8+Q*3+4+(a?8+Q*1+4:0)}for(var w=0;w<L.frames.length;w++){var f=L.frames[w];if(t)v+=38;v+=f.cimg.length+12;
if(w!=0)v+=4}v+=12;var n=new Uint8Array(v),N=[137,80,78,71,13,10,26,10];for(var m=0;m<8;m++)n[m]=N[m];
q(n,U,13);U+=4;p(n,U,"IHDR");U+=4;q(n,U,e);U+=4;q(n,U,Y);U+=4;n[U]=L.depth;U++;n[U]=L.ctype;U++;n[U]=0;
U++;n[U]=0;U++;n[U]=0;U++;q(n,U,I(n,U-17,17));U+=4;if(E.sRGB!=null){q(n,U,1);U+=4;p(n,U,"sRGB");U+=4;
n[U]=E.sRGB;U++;q(n,U,I(n,U-5,5));U+=4}if(E.iCCP!=null){var y=11+2+Z.length;q(n,U,y);U+=4;p(n,U,"iCCP");
U+=4;p(n,U,"ICC profile");U+=11;U+=2;n.set(Z,U);U+=Z.length;q(n,U,I(n,U-(y+4),y+4));U+=4}if(E.pHYs!=null){q(n,U,9);
U+=4;p(n,U,"pHYs");U+=4;q(n,U,E.pHYs[0]);U+=4;q(n,U,E.pHYs[1]);U+=4;n[U]=E.pHYs[2];U++;q(n,U,I(n,U-13,13));
U+=4}if(E.iTXt!=null){var _=E.iTXt;q(n,U,0);U+=4;p(n,U,"iTXt");U+=4;var V=U,A=Object.keys(_)[0],J=_[A];
p(n,U,A);U+=A.length;U+=5;ae.writeUTF8(J,n,U);U+=ae.writeUTF8(J);q(n,V-8,U-V);q(n,U,I(n,V-4,U-V+4));
U+=4}if(t){q(n,U,8);U+=4;p(n,U,"acTL");U+=4;q(n,U,L.frames.length);U+=4;q(n,U,E.loop!=null?E.loop:0);
U+=4;q(n,U,I(n,U-12,12));U+=4}if(L.ctype==3){var Q=L.plte.length;q(n,U,Q*3);U+=4;p(n,U,"PLTE");U+=4;
for(var m=0;m<Q;m++){var T=m*3,s=L.plte[m],j=s&255,a5=s>>>8&255,r=s>>>16&255;n[U+T+0]=j;n[U+T+1]=a5;
n[U+T+2]=r}U+=Q*3;q(n,U,I(n,U-Q*3-4,Q*3+4));U+=4;if(a){q(n,U,Q);U+=4;p(n,U,"tRNS");U+=4;for(var m=0;
m<Q;m++)n[U+m]=L.plte[m]>>>24&255;U+=Q;q(n,U,I(n,U-Q-4,Q+4));U+=4}}for(var w=0;w<L.frames.length;w++){var f=L.frames[w];
if(t){q(n,U,26);U+=4;p(n,U,"fcTL");U+=4;q(n,U,as++);U+=4;q(n,U,f.rect.width);U+=4;q(n,U,f.rect.height);
U+=4;q(n,U,f.rect.x);U+=4;q(n,U,f.rect.y);U+=4;H(n,U,P[w]);U+=2;H(n,U,1e3);U+=2;n[U]=f.dispose;U++;n[U]=f.blend;
U++;q(n,U,I(n,U-30,30));U+=4}var a6=f.cimg,Q=a6.length;q(n,U,Q+(w==0?0:4));U+=4;var c=U;p(n,U,w==0?"IDAT":"fdAT");
U+=4;if(w!=0){q(n,U,as++);U+=4}n.set(a6,U);U+=Q;q(n,U,I(n,c,U-c));U+=4}q(n,U,0);U+=4;p(n,U,"IEND");U+=4;
q(n,U,I(n,U-4,4));U+=4;return n.buffer}function av(L,e,Y,P){for(var E=0;E<L.frames.length;E++){var I=L.frames[E],q=I.rect.width,H=I.rect.height,p=new Uint8Array(H*I.bpl+H);
I.cimg=h(I.img,H,I.bpp,I.bpl,p,e,Y,P)}}function aa(L,e,Y,P,E){var I=E[0],q=E[1],H=E[2],p=E[3],U=E[4],t=E[5],a=6,Z=8,v=255;
for(var _=0;_<L.length;_++){var A=new Uint8Array(L[_]),J=A.length;for(var Q=0;Q<J;Q+=4)v&=A[Q+3]}var m=v!=255,w=G(L,e,Y,I,q,H),f={},n=[],N=[];
if(P!=0){var y=[],s=0;for(var Q=0;Q<w.length;Q++)y.push(w[Q].img.buffer);var V=k(y),T=i(V,P);for(var Q=0;
Q<T.plte.length;Q++)n.push(T.plte[Q].est.rgba);for(var Q=0;Q<w.length;Q++){var j=w[Q],a5=j.img.length,r=new Uint8Array(T.inds.buffer,s>>2,a5>>2);
N.push(r);var as=new Uint8Array(T.abuf,s,a5);if(t)ad(j.img,j.rect.width,j.rect.height,n,as,r);j.img.set(as);
s+=a5}}else{for(var _=0;_<w.length;_++){var j=w[_],a6=new Uint32Array(j.img.buffer),c=j.rect.width,J=a6.length,r=new Uint8Array(J);
N.push(r);for(var Q=0;Q<J;Q++){var ao=a6[Q];if(Q!=0&&ao==a6[Q-1])r[Q]=r[Q-1];else if(Q>c&&ao==a6[Q-c])r[Q]=r[Q-c];
else{var a0=f[ao];if(a0==null){f[ao]=a0=n.length;n.push(ao);if(n.length>=300)break}r[Q]=a0}}}}var ab=n.length;
if(ab<=256&&U==!1){if(ab<=2)Z=1;else if(ab<=4)Z=2;else if(ab<=16)Z=4;else Z=8;Z=Math.max(Z,p)}for(var _=0;
_<w.length;_++){var j=w[_],au=j.rect.x,a1=j.rect.y,c=j.rect.width,a8=j.rect.height,ar=j.img,al=new Uint32Array(ar.buffer),a2=4*c,ap=4;
if(ab<=256&&U==!1){a2=Math.ceil(Z*c/8);var af=new Uint8Array(a2*a8),a9=N[_];for(var at=0;at<a8;at++){var Q=at*a2,ah=at*c;
if(Z==8)for(var W=0;W<c;W++)af[Q+W]=a9[ah+W];else if(Z==4)for(var W=0;W<c;W++)af[Q+(W>>1)]|=a9[ah+W]<<4-(W&1)*4;
else if(Z==2)for(var W=0;W<c;W++)af[Q+(W>>2)]|=a9[ah+W]<<6-(W&3)*2;else if(Z==1)for(var W=0;W<c;W++)af[Q+(W>>3)]|=a9[ah+W]<<7-(W&7)*1}ar=af;
a=3;ap=1}else if(m==!1&&w.length==1){var af=new Uint8Array(c*a8*3),am=c*a8;for(var Q=0;Q<am;Q++){var aj=Q*3,a4=Q*4;
af[aj]=ar[a4];af[aj+1]=ar[a4+1];af[aj+2]=ar[a4+2]}ar=af;a=2;ap=3;a2=3*c}j.img=ar;j.bpl=a2;j.bpp=ap}return{ctype:a,depth:Z,plte:n,frames:w}}function G(L,e,Y,P,E,I){var q=[],a8=0;
for(var H=0;H<L.length;H++){var p=new Uint8Array(L[H]),U=new Uint32Array(p.buffer),t,a=0,Z=0,v=e,_=Y,A=P?1:0;
if(H!=0){var J=I||P||H==1||q[H-2].dispose!=0?1:2,Q=0,m=1e9;for(var w=0;w<J;w++){var f=new Uint8Array(L[H-1-w]),n=new Uint32Array(L[H-1-w]),N=e,y=Y,V=-1,T=-1;
for(var s=0;s<Y;s++)for(var j=0;j<e;j++){var a5=s*e+j;if(U[a5]!=n[a5]){if(j<N)N=j;if(j>V)V=j;if(s<y)y=s;
if(s>T)T=s}}if(V==-1)N=y=V=T=0;if(E){if((N&1)==1)N--;if((y&1)==1)y--}var r=(V-N+1)*(T-y+1);if(r<m){m=r;
Q=w;a=N;Z=y;v=V-N+1;_=T-y+1}}var f=new Uint8Array(L[H-1-Q]);if(Q==1)q[H-1].dispose=2;t=new Uint8Array(v*_*4);
d(f,e,Y,t,v,_,-a,-Z,0);A=d(p,e,Y,t,v,_,-a,-Z,3)?1:0;if(A==1)B(p,e,Y,t,{x:a,y:Z,width:v,height:_});else d(p,e,Y,t,v,_,-a,-Z,0)}else t=p.slice(0);
q.push({rect:{x:a,y:Z,width:v,height:_},img:t,blend:A,dispose:0})}if(P)for(var H=0;H<q.length;H++){var as=q[H];
if(as.blend==1)continue;var a6=as.rect,c=q[H-1].rect,ao=Math.min(a6.x,c.x),a0=Math.min(a6.y,c.y),ab=Math.max(a6.x+a6.width,c.x+c.width),au=Math.max(a6.y+a6.height,c.y+c.height),a1={x:ao,y:a0,width:ab-ao,height:au-a0};
q[H-1].dispose=1;if(H-1!=0)O(L,e,Y,q,H-1,a1,E);O(L,e,Y,q,H,a1,E)}if(L.length!=1)for(var a5=0;a5<q.length;
a5++){var as=q[a5];a8+=as.rect.width*as.rect.height}return q}function O(L,e,Y,P,E,I,q){var H=Uint8Array,p=Uint32Array,U=new H(L[E-1]),t=new p(L[E-1]),a=E+1<L.length?new H(L[E+1]):null,Z=new H(L[E]),v=new p(Z.buffer),_=e,A=Y,J=-1,Q=-1;
for(var m=0;m<I.height;m++)for(var w=0;w<I.width;w++){var f=I.x+w,n=I.y+m,N=n*e+f,y=v[N];if(y==0||P[E-1].dispose==0&&t[N]==y&&(a==null||a[N*4+3]!=0)){}else{if(f<_)_=f;
if(f>J)J=f;if(n<A)A=n;if(n>Q)Q=n}}if(J==-1)_=A=J=Q=0;if(q){if((_&1)==1)_--;if((A&1)==1)A--}I={x:_,y:A,width:J-_+1,height:Q-A+1};
var V=P[E];V.rect=I;V.blend=1;V.img=new Uint8Array(I.width*I.height*4);if(P[E-1].dispose==0){d(U,e,Y,V.img,I.width,I.height,-I.x,-I.y,0);
B(Z,e,Y,V.img,I)}else d(Z,e,Y,V.img,I.width,I.height,-I.x,-I.y,0)}function B(L,e,Y,P,E){d(L,e,Y,P,E.width,E.height,-E.x,-E.y,2)}function h(L,e,Y,P,E,I,q,H){var p=[],U=[0,1,2,3,4],t,A,J=1e9;
if(I!=-1)U=[I];else if(e*P>5e5||Y==1)U=[H?0:1];if(q)t={level:0};var a=E.length>1e7&&window.UZIP!=null?window.UZIP:pako,Z=Date.now();
for(var v=0;v<U.length;v++){for(var _=0;_<e;_++)x(E,L,_,P,Y,U[v]);p.push(a.deflate(E,t))}for(var v=0;
v<p.length;v++)if(p[v].length<J){A=v;J=p[v].length}return p[A]}function x(L,e,Y,P,E,I){var q=Y*P,H=q+Y;
L[H]=I;H++;if(I==0){if(P<500)for(var p=0;p<P;p++)L[H+p]=e[q+p];else L.set(new Uint8Array(e.buffer,q,P),H)}else if(I==1){for(var p=0;
p<E;p++)L[H+p]=e[q+p];for(var p=E;p<P;p++)L[H+p]=e[q+p]-e[q+p-E]+256&255}else if(Y==0){for(var p=0;p<E;
p++)L[H+p]=e[q+p];if(I==2)for(var p=E;p<P;p++)L[H+p]=e[q+p];if(I==3)for(var p=E;p<P;p++)L[H+p]=e[q+p]-(e[q+p-E]>>1)+256&255;
if(I==4)for(var p=E;p<P;p++)L[H+p]=e[q+p]-ac(e[q+p-E],0,0)+256&255}else{if(I==2){for(var p=0;p<P;p++)L[H+p]=e[q+p]+256-e[q+p-P]&255}if(I==3){for(var p=0;
p<E;p++)L[H+p]=e[q+p]+256-(e[q+p-P]>>1)&255;for(var p=E;p<P;p++)L[H+p]=e[q+p]+256-(e[q+p-P]+e[q+p-E]>>1)&255}if(I==4){for(var p=0;
p<E;p++)L[H+p]=e[q+p]+256-ac(0,e[q+p-P],0)&255;for(var p=E;p<P;p++)L[H+p]=e[q+p]+256-ac(e[q+p-E],e[q+p-P],e[q+p-E-P])&255}}}function i(L,e,Y){var P=Date.now(),E=new Uint8Array(L),I=E.slice(0),q=new Uint32Array(I.buffer),H=$(I,e),p=H[0],U=H[1],t=U.length,a=new Uint32Array(t),Z=new Uint8Array(a.buffer),J;
for(var v=0;v<t;v++)a[v]=U[v].est.rgba;var _=E.length,A=new Uint8Array(_>>2);if(t<=60){a3(E,A,Z);X(A,q,a)}else if(E.length<32e6)for(var v=0;
v<_;v+=4){var Q=E[v]*(1/255),m=E[v+1]*(1/255),w=E[v+2]*(1/255),f=E[v+3]*(1/255);J=D(p,Q,m,w,f);A[v>>2]=J.ind;
q[v>>2]=J.est.rgba}else for(var v=0;v<_;v+=4){var Q=E[v]*(1/255),m=E[v+1]*(1/255),w=E[v+2]*(1/255),f=E[v+3]*(1/255);
J=p;while(J.left)J=u(J.est,Q,m,w,f)<=0?J.left:J.right;A[v>>2]=J.ind;q[v>>2]=J.est.rgba}if(Y||E.length*t<10*4e6){var n=1e9;
for(var v=0;v<10;v++){var N=F(E,A,Z);if(N/n>.997)break;n=N}for(var v=0;v<t;v++)U[v].est.rgba=a[v];X(A,q,a)}return{abuf:I.buffer,inds:A,plte:U}}function X(L,e,Y){for(var P=0;
P<L.length;P++)e[P]=Y[L[P]]}function F(L,e,Y){z(L,e,Y);var P=a3(L,e,Y);return P}function z(L,e,Y){var P=Y.length>>>2,E=new Uint32Array(P*4),I=new Uint32Array(P);
for(var q=0;q<L.length;q+=4){var H=e[q>>>2],p=H*4;I[H]++;E[p]+=L[q];E[p+1]+=L[q+1];E[p+2]+=L[q+2];E[p+3]+=L[q+3]}for(var q=0;
q<Y.length;q++)Y[q]=Math.round(E[q]/I[q>>>2])}function a3(L,e,Y){var P=0,E=Y.length>>>2,I=[];for(var q=0;
q<E;q++){var H=q*4,p=Y[H],U=Y[H+1],t=Y[H+2],a=Y[H+3],Z=0,v=1e9;for(var _=0;_<E;_++){if(q==_)continue;
var A=_*4,J=p-Y[A],Q=U-Y[A+1],m=t-Y[A+2],w=a-Y[A+3],f=J*J+Q*Q+m*m+w*w;if(f<v){v=f;Z=_}}I[q]=Math.sqrt(v)*.5;
I[q]=I[q]*I[q]}for(var q=0;q<L.length;q+=4){var p=L[q],U=L[q+1],t=L[q+2],a=L[q+3],Z=e[q>>>2],H=Z*4,J=p-Y[H],Q=U-Y[H+1],m=t-Y[H+2],w=a-Y[H+3],v=J*J+Q*Q+m*m+w*w;
if(v>I[Z])for(var _=0;_<E;_++){H=_*4;J=p-Y[H];Q=U-Y[H+1];m=t-Y[H+2];w=a-Y[H+3];var f=J*J+Q*Q+m*m+w*w;
if(f<v){v=f;Z=_;if(v<I[_])break}}e[q>>>2]=Z;P+=v}return P/(L.length>>>2)}function $(L,e,Y){if(Y==null)Y=1e-4;
var P=new Uint32Array(L.buffer),E={i0:0,i1:L.length,bst:null,est:null,tdst:0,left:null,right:null};E.bst=g(L,E.i0,E.i1);
E.est=l(E.bst);var I=[E];while(I.length<e){var q=0,H=0;for(var p=0;p<I.length;p++)if(I[p].est.L>q){q=I[p].est.L;
H=p}if(q<Y)break;var U=I[H],t=K(L,P,U.i0,U.i1,U.est.e,U.est.eMq255),a=U.i0>=t||U.i1<=t;if(a){U.est.L=0;
continue}var Z={i0:U.i0,i1:t,bst:null,est:null,tdst:0,left:null,right:null};Z.bst=g(L,Z.i0,Z.i1);Z.est=l(Z.bst);
var v={i0:t,i1:U.i1,bst:null,est:null,tdst:0,left:null,right:null};v.bst={R:[],m:[],N:U.bst.N-Z.bst.N};
for(var p=0;p<16;p++)v.bst.R[p]=U.bst.R[p]-Z.bst.R[p];for(var p=0;p<4;p++)v.bst.m[p]=U.bst.m[p]-Z.bst.m[p];
v.est=l(v.bst);U.left=Z;U.right=v;I[H]=Z;I.push(v)}I.sort(function(_,A){return A.bst.N-_.bst.N});for(var p=0;
p<I.length;p++)I[p].ind=p;return[E,I]}function D(L,e,Y,P,E){if(L.left==null){L.tdst=R(L.est.q,e,Y,P,E);
return L}var I=u(L.est,e,Y,P,E),q=L.left,H=L.right;if(I>0){q=L.right;H=L.left}var p=D(q,e,Y,P,E);if(p.tdst<=I*I)return p;
var U=D(H,e,Y,P,E);return U.tdst<p.tdst?U:p}function u(L,e,Y,P,E){var I=L.e;return I[0]*e+I[1]*Y+I[2]*P+I[3]*E-L.eMq}function R(L,e,Y,P,E){var I=e-L[0],q=Y-L[1],H=P-L[2],p=E-L[3];
return I*I+q*q+H*H+p*p}function K(L,e,Y,P,E,I){P-=4;var q=0;while(Y<P){while(C(L,Y,E)<=I)Y+=4;while(C(L,P,E)>I)P-=4;
if(Y>=P)break;var H=e[Y>>2];e[Y>>2]=e[P>>2];e[P>>2]=H;Y+=4;P-=4}while(C(L,Y,E)>I)Y-=4;return Y+4}function C(L,e,Y){return L[e]*Y[0]+L[e+1]*Y[1]+L[e+2]*Y[2]+L[e+3]*Y[3]}function g(L,e,Y){var P=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],E=[0,0,0,0],M=Y-e>>2;
for(var I=e;I<Y;I+=4){var q=L[I]*(1/255),H=L[I+1]*(1/255),U=L[I+2]*(1/255),t=L[I+3]*(1/255);E[0]+=q;
E[1]+=H;E[2]+=U;E[3]+=t;P[0]+=q*q;P[1]+=q*H;P[2]+=q*U;P[3]+=q*t;P[5]+=H*H;P[6]+=H*U;P[7]+=H*t;P[10]+=U*U;
P[11]+=U*t;P[15]+=t*t}P[4]=P[1];P[8]=P[2];P[9]=P[6];P[12]=P[3];P[13]=P[7];P[14]=P[11];return{R:P,m:E,N:M}}function l(g){var L=g.R,e=g.m,M=g.N,Y=e[0],P=e[1],E=e[2],I=e[3],q=M==0?0:1/M,H=[L[0]-Y*Y*q,L[1]-Y*P*q,L[2]-Y*E*q,L[3]-Y*I*q,L[4]-P*Y*q,L[5]-P*P*q,L[6]-P*E*q,L[7]-P*I*q,L[8]-E*Y*q,L[9]-E*P*q,L[10]-E*E*q,L[11]-E*I*q,L[12]-I*Y*q,L[13]-I*P*q,L[14]-I*E*q,L[15]-I*I*q],U=H,t=o,a=[Math.random(),Math.random(),Math.random(),Math.random()],Z=0,v=0;
if(M!=0)for(var _=0;_<16;_++){a=t.multVec(U,a);v=Math.sqrt(t.dot(a,a));a=t.sml(1/v,a);if(_!=0&&Math.abs(v-Z)<1e-9)break;
Z=v}var A=[Y*q,P*q,E*q,I*q],J=t.dot(t.sml(255,A),a);return{Cov:H,q:A,e:a,L:Z,eMq255:J,eMq:t.dot(a,A),rgba:(Math.round(255*A[3])<<24|Math.round(255*A[2])<<16|Math.round(255*A[1])<<8|Math.round(255*A[0])<<0)>>>0}}var o={multVec:function(L,e){return[L[0]*e[0]+L[1]*e[1]+L[2]*e[2]+L[3]*e[3],L[4]*e[0]+L[5]*e[1]+L[6]*e[2]+L[7]*e[3],L[8]*e[0]+L[9]*e[1]+L[10]*e[2]+L[11]*e[3],L[12]*e[0]+L[13]*e[1]+L[14]*e[2]+L[15]*e[3]]},dot:function(L,e){return L[0]*e[0]+L[1]*e[1]+L[2]*e[2]+L[3]*e[3]},sml:function(L,e){return[L*e[0],L*e[1],L*e[2],L*e[3]]}};
function k(L){var e=0,E=0;for(var Y=0;Y<L.length;Y++)e+=L[Y].byteLength;var P=new Uint8Array(e);for(var Y=0;
Y<L.length;Y++){var I=new Uint8Array(L[Y]),q=I.length;for(var H=0;H<q;H+=4){var p=I[H],U=I[H+1],t=I[H+2],a=I[H+3];
if(a==0)p=U=t=0;P[E+H]=p;P[E+H+1]=U;P[E+H+2]=t;P[E+H+3]=a}E+=q}return P.buffer}UPNG.encode=a7;UPNG.encodeLL=ai;
UPNG.encode.compress=aa;UPNG.encode.dither=ad;UPNG.quantize=i;UPNG.quantize.findNearest=a3;UPNG.quantize.getKDtree=$;
UPNG.quantize.getNearest=D}());



var UTEX=function(){function O(I,u,K,W,S){var Q=new Uint8Array(4*4*4);for(var R=0;R<S;R+=4)for(var e=0;
e<W;e+=4){y(I,u,Q);m(K,W,S,e,R,Q);u+=8}return u}function ag(I,u,K,W,S){var Q=new Uint8Array(4*4*4);for(var R=0;
R<S;R+=4)for(var e=0;e<W;e+=4){y(I,u+8,Q);m(K,W,S,e,R,Q);u+=16}return u}function B(I,u,K,W,S){var Q=new Uint8Array(4*4*4);
for(var R=0;R<S;R+=4)for(var e=0;e<W;e+=4){F(I,u,Q);m(K,W,S,e,R,Q);u+=8}return u}function C(I,u,K,W,S){var Q=new Uint8Array(16*4),R=0;
for(var e=0;e<K;e+=4)for(var E=0;E<u;E+=4){M(I,u,K,E,e,Q);R+=V(W,S,Q);S+=8}return S}function H(I,u,K,W,S){var Q={m:u*8},R=new Uint8Array(4*4*4);
for(var e=0;e<S;e+=4)for(var E=0;E<W;E+=4){F(I,u+8,R,!0);for(var v=0;v<64;v+=4){var b=ad(I,Q,4);R[v+3]=255*(b/15)}m(K,W,S,E,e,R);
u+=16;Q.m+=64}return u}function o(I,u){var K=[I,u];if(I>u)K.push(6/7*I+1/7*u,5/7*I+2/7*u,4/7*I+3/7*u,3/7*I+4/7*u,2/7*I+5/7*u,1/7*I+6/7*u);
else K.push(4/5*I+1/5*u,3/5*I+2/5*u,2/5*I+3/5*u,1/5*I+4/5*u,0,255);return K}function f(I,u,K,W,S){var Q=o(I[u],I[u+1]);
K.m+=16;for(var R=0;R<64;R+=4){var e=ad(I,K,3);W[R+S]=Q[e]}}function aj(I,u,K,W,S){var Q={m:u*8},R=new Uint8Array(4*4*4);
R.fill(255);for(var e=0;e<S;e+=4)for(var E=0;E<W;E+=4){f(I,u,Q,R,1);u+=8;f(I,u,Q,R,0);u+=8;m(K,W,S,E,e,R)}return u}function a4(I,u,K,W,S){var Q={m:u*8},R=new Uint8Array(4*4*4);
for(var e=0;e<S;e+=4)for(var E=0;E<W;E+=4){F(I,u+8,R,!0);f(I,u,Q,R,3);Q.m+=64;m(K,W,S,E,e,R);u+=16}return u}function Y(I,u,K,W,S){var Q=new Uint8Array(16*4);
for(var R=0;R<K;R+=4)for(var e=0;e<u;e+=4){M(I,u,K,e,R,Q);var E=Q[3],v=Q[3];for(var b=7;b<64;b+=4){var $=Q[b];
if($<E)E=$;else if(v<$)v=$}W[S]=v;W[S+1]=E;S+=2;var j=o(v,E),h=S+2<<3;for(var b=0;b<64;b+=32){var s=0,h=0;
for(var n=0;n<32;n+=4){var x=0,d=500,$=Q[b+n+3];for(var t=0;t<8;t++){var i=Math.abs(j[t]-$);if(i<d){d=i;
x=t}}s=s|x<<h;h+=3}W[S]=s;W[S+1]=s>>8;W[S+2]=s>>16;S+=3}V(W,S,Q,!0);S+=8}return S}var g=new Uint8Array(16);
function y(I,u,K){var W=I[u+1]<<8|I[u],S=I[u+3]<<8|I[u+2],Q=(W&31)*(255/31),R=(W>>>5&31)*(255/31),e=(W>>10)*(255/31),E=(S&31)*(255/31),v=(S>>>5&63)*(255/63),b=(S>>11)*(255/31),$=g;
$[0]=c(e);$[1]=c(R);$[2]=c(Q);$[3]=255;$[12]=c(b);$[13]=c(v);$[14]=c(E);$[15]=255;var j=2/3,h=1-j;$[4]=c(j*e+h*b);
$[5]=c(j*R+h*v);$[6]=c(j*Q+h*E);$[7]=255;j=1/3;h=1-j;$[8]=c(j*e+h*b);$[9]=c(j*R+h*v);$[10]=c(j*Q+h*E);
$[11]=255;as(I,K,$,u)}function a(I,u,K){var W=(K&63488)>>>11,S=(K&2016)>>>5,Q=(K&31)>>>0;I[u+0]=W*33>>>2;
I[u+1]=S*65>>>4;I[u+2]=Q*33>>>2}function k(I,u,K){return c(I*(31/255))<<11|c(u*(63/255))<<5|c(K*(31/255))}function X(I,u,K){return I*(64-K)+u*K+32>>6}function _(I,u,K,W){u[K]=X(I[0],I[4],W);
u[K+1]=X(I[1],I[5],W);u[K+2]=X(I[2],I[6],W);u[K+3]=255}function F(I,u,K,W){var S=I[u+1]<<8|I[u],Q=I[u+3]<<8|I[u+2],R=Z(S,Q,W);
as(I,K,R,u)}function Z(I,u,K){var W=g;a(W,0,I);W[3]=255;a(W,4,u);W[7]=255;if(u<I||K){_(W,W,8,21);_(W,W,12,43)}else{_(W,W,8,32);
W[12]=0;W[13]=0;W[14]=0;W[15]=0}return W}function as(I,u,K,W){var S=W+4<<3;for(var Q=0;Q<64;Q+=4){var R=I[S>>3]>>(S&7)&3;
S+=2;R=R<<2;u[Q]=K[R];u[Q+1]=K[R+1];u[Q+2]=K[R+2];u[Q+3]=K[R+3]}}function c(I){return~~(.5+I)}function l(I,u){for(var K=0;
K<3;K++)u[K]=u[K+3]=I[K];for(var K=0;K<64;K+=4){var W=I[K],S=I[K+1],Q=I[K+2];if(W<u[0])u[0]=W;if(S<u[1])u[1]=S;
if(Q<u[2])u[2]=Q;if(W>u[3])u[3]=W;if(S>u[4])u[4]=S;if(Q>u[5])u[5]=Q}}function a0(I,u,K){for(var W=0;
W<3;W++){var S=c((I[W+3]-I[W])*K),Q=I[W]+S,R=I[W+3]-S;u[W]=Q<0?0:Q>255?255:Q;u[W+3]=R<0?0:R>255?255:R}}function V(I,u,K,W){var S=0,Q=0,R=1e9,e=[0,0,0,0,0,0],E=255;
for(var v=3;v<64;v+=4)E&=K[v];var b=W?!1:E<128;if(!1){l(K,b);a0(b,1/11)}else{var $=e.slice(0);l(K,$);
var j=-1,h=-1;for(var s=-.1;s<.3;s+=.005){a0($,e,s);var n=k(e[0],e[1],e[2]),x=k(e[3],e[4],e[5]);if(n==j&&x==h)continue;
j=n;h=x;var d=J(I,u,K,b,n,x);if(d<R){S=n;Q=x;R=d}}G(K,e);var n=k(e[0],e[1],e[2]),x=k(e[3],e[4],e[5]);
d=J(I,u,K,b,n,x);if(d<R){S=n;Q=x;R=d}}var t=J(I,u,K,b,S,Q);return t}function J(I,u,K,W,S,Q){if(S<Q!=W){var R=S;
S=Q;Q=R}I[u+0]=S&255;I[u+1]=S>>8;I[u+2]=Q&255;I[u+3]=Q>>8;var e=Z(S,Q),E=u*8+32,v=0;I[u+4]=0;I[u+5]=0;
I[u+6]=0;I[u+7]=0;var b=A;for(var $=0;$<64;$+=4){var j=K[$],h=K[$+1],s=K[$+2],n=K[$+3],x=b(j,h,s,e[0],e[1],e[2]),d=b(j,h,s,e[4],e[5],e[6]),t=b(j,h,s,e[8],e[9],e[10]),i=b(j,h,s,e[12],e[13],e[14]),L=Math.min(Math.min(x,d),Math.min(t,i)),p=0;
v+=L;if(W&&n<128)p=3;else if(L==d)p=1;else if(L==t)p=2;else if(L==i)p=3;I[E>>3]|=p<<(E&7);E+=2}return v}function M(I,u,K,W,S,Q){for(var R=0;
R<4;R++){var e=(S+R)*u+W<<2,E=R<<4;Q[E+0]=I[e+0];Q[E+1]=I[e+1];Q[E+2]=I[e+2];Q[E+3]=I[e+3];Q[E+4]=I[e+4];
Q[E+5]=I[e+5];Q[E+6]=I[e+6];Q[E+7]=I[e+7];Q[E+8]=I[e+8];Q[E+9]=I[e+9];Q[E+10]=I[e+10];Q[E+11]=I[e+11];
Q[E+12]=I[e+12];Q[E+13]=I[e+13];Q[E+14]=I[e+14];Q[E+15]=I[e+15]}}function m(I,u,K,W,S,Q){for(var R=0;
R<4;R++){var e=(S+R)*u+W<<2,E=R<<4;I[e+0]=Q[E+0];I[e+1]=Q[E+1];I[e+2]=Q[E+2];I[e+3]=Q[E+3];I[e+4]=Q[E+4];
I[e+5]=Q[E+5];I[e+6]=Q[E+6];I[e+7]=Q[E+7];I[e+8]=Q[E+8];I[e+9]=Q[E+9];I[e+10]=Q[E+10];I[e+11]=Q[E+11];
I[e+12]=Q[E+12];I[e+13]=Q[E+13];I[e+14]=Q[E+14];I[e+15]=Q[E+15]}}function ad(I,u,K){var W=0,S=K;while(K!=0){W=W|w(I,u)<<S-K;
K--}return W}function w(I,u){var K=u.m;u.m++;return I[K>>3]>>(K&7)&1}function al(I,u,K){var W=u>>1,S=K>>1,Q=new Uint8Array(W*S*4);
for(var R=0;R<S;R++)for(var e=0;e<W;e++){var E=R*W+e<<2,v=(R<<1)*u+(e<<1)<<2,b=I[v+3],$=I[v+7],j=I[v]*b+I[v+4]*$,h=I[v+1]*b+I[v+5]*$,s=I[v+2]*b+I[v+6]*$;
v+=u<<2;var n=I[v+3],x=I[v+7];j+=I[v]*n+I[v+4]*x;h+=I[v+1]*n+I[v+5]*x;s+=I[v+2]*n+I[v+6]*x;var p=b+$+n+x+2>>2,z=p==0?0:.25/p;
Q[E]=~~(j*z+.5);Q[E+1]=~~(h*z+.5);Q[E+2]=~~(s*z+.5);Q[E+3]=p}return Q}function A(I,u,K,W,S,Q){var R=I-W,e=u-S,E=K-Q;
return R*R+e*e+E*E}function G(I,u){var K=A,W=0,S=0,Q=0;for(var R=0;R<64;R+=4){var e=I[R],E=I[R+1],v=I[R+2];
for(var b=R+4;b<64;b+=4){var $=K(e,E,v,I[b],I[b+1],I[b+2]);if($>Q){Q=$;W=R;S=b}}}for(var R=0;R<3;R++){u[R]=I[W+R];
u[R+3]=I[S+R]}}var a7=new ArrayBuffer(4),ae=new Uint8Array(a7),U=new Uint32Array(a7),ak=new Uint16Array(a7),aq={e:function(I,u){ae[0]=I[u+0];
ae[1]=I[u+1];return ak[0]},V:function(I,u){ae[0]=I[u+0];ae[1]=I[u+1];ae[2]=I[u+2];ae[3]=I[u+3];return U[0]},W:function(I,u,K){U[0]=K;
I[u+0]=ae[0];I[u+1]=ae[1];I[u+2]=ae[2];I[u+3]=ae[3]},s:function(I,u,K){var W="";for(var S=0;S<K;S++)W+=String.fromCharCode(I[u+S]);
return W},C:function(I,u,K){for(var W=0;W<K.length;W++)I[u+W]=K.charCodeAt(W)},R:ad,H:M,l:m,a7:A};return{readBC1:B,A:B,K:H,a:a4,$:aj,q:O,O:ag,N:C,u:Y,z:al,I:aq}}();
(function(){var O=[["0000000000000000"],"0011001100110011 0001000100010001 0111011101110111 0001001100110111 0000000100010011 0011011101111111 0001001101111111 0000000100110111 0000000000010011 0011011111111111 0000000101111111 0000000000010111 0001011111111111 0000000011111111 0000111111111111 0000000000001111 0000100011101111 0111000100000000 0000000010001110 0111001100010000 0011000100000000 0000100011001110 0000000010001100 0111001100110001 0011000100010000 0000100010001100 0110011001100110 0011011001101100 0001011111101000 0000111111110000 0111000110001110 0011100110011100 0101010101010101 0000111100001111 0101101001011010 0011001111001100 0011110000111100 0101010110101010 0110100101101001 0101101010100101 0111001111001110 0001001111001000 0011001001001100 0011101111011100 0110100110010110 0011110011000011 0110011010011001 0000011001100000 0100111001000000 0010011100100000 0000001001110010 0000010011100100 0110110010010011 0011011011001001 0110001110011100 0011100111000110 0110110011001001 0110001100111001 0111111010000001 0001100011100111 0000111100110011 0011001111110000 0010001011101110 0100010001110111".split(" "),"0011001102212222 0001001122112221 0000200122112211 0222002200110111 0000000011221122 0011001100220022 0022002211111111 0011001122112211 0000000011112222 0000111111112222 0000111122222222 0012001200120012 0112011201120112 0122012201220122 0011011211221222 0011200122002220 0001001101121122 0111001120012200 0000112211221122 0022002200221111 0111011102220222 0001000122212221 0000001101220122 0000110022102210 0122012200110000 0012001211222222 0110122112210110 0000011012211221 0022110211020022 0110011020022222 0011012201220011 0000200022112221 0000000211221222 0222002200120011 0011001200220222 0120012001200120 0000111122220000 0120120120120120 0120201212010120 0011220011220011 0011112222000011 0101010122222222 0000000021212121 0022112200221122 0022001100220011 0220122102201221 0101222222220101 0000212121212121 0101010101012222 0222011102220111 0002111200021112 0000211221122112 0222011101110222 0002111211120002 0110011001102222 0000000021122112 0110011022222222 0022001100110022 0022112211220022 0000000000002112 0002000100020001 0222122202221222 0101222222222222 0111201122012220".split(" ")],ag=[],V,J,M,m,ad,w,al,A,G;
for(var B=0;B<O.length;B++){ag.push([]);for(var C=0;C<O[B].length;C++){var H=[];ag[B].push(H);var o=[];
for(var f=0;f<B+1;f++){H.push([]);o.push([])}var aj=O[B][C],y=O[B][C]=new Uint8Array(16);for(var f=0;
f<16;f++){var a=y[f]=aj.charCodeAt(f)-48;H[a].push(f)}}}var k=[[[0,0,0]],[[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,2,0],[0,8,0],[0,2,0],[0,2,0],[0,8,0],[0,8,0],[0,15,0],[0,2,0],[0,8,0],[0,2,0],[0,2,0],[0,8,0],[0,8,0],[0,2,0],[0,2,0],[0,15,0],[0,15,0],[0,6,0],[0,8,0],[0,2,0],[0,8,0],[0,15,0],[0,15,0],[0,2,0],[0,8,0],[0,2,0],[0,2,0],[0,2,0],[0,15,0],[0,15,0],[0,6,0],[0,6,0],[0,2,0],[0,6,0],[0,8,0],[0,15,0],[0,15,0],[0,2,0],[0,2,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,2,0],[0,2,0],[0,15,0]],[[0,3,15],[0,3,8],[0,15,8],[0,15,3],[0,8,15],[0,3,15],[0,15,3],[0,15,8],[0,8,15],[0,8,15],[0,6,15],[0,6,15],[0,6,15],[0,5,15],[0,3,15],[0,3,8],[0,3,15],[0,3,8],[0,8,15],[0,15,3],[0,3,15],[0,3,8],[0,6,15],[0,10,8],[0,5,3],[0,8,15],[0,8,6],[0,6,10],[0,8,15],[0,5,15],[0,15,10],[0,15,8],[0,8,15],[0,15,3],[0,3,15],[0,5,10],[0,6,10],[0,10,8],[0,8,9],[0,15,10],[0,15,6],[0,3,15],[0,15,8],[0,5,15],[0,15,3],[0,15,6],[0,15,6],[0,15,8],[0,3,15],[0,15,3],[0,5,15],[0,5,15],[0,5,15],[0,8,15],[0,5,15],[0,10,15],[0,5,15],[0,10,15],[0,8,15],[0,13,15],[0,15,3],[0,12,15],[0,3,15],[0,3,8]]],X=[];
for(var _=0;_<3;_++){var F=X[_]=[],Z=k[_];for(var B=0;B<Z.length;B++){var c=Z[B],l=F[B]=new Uint8Array(16);
l[c[0]]=l[c[1]]=l[c[2]]=1}}var a0=[null,null,[0,21,43,64],[0,9,18,27,37,46,55,64],[0,4,9,13,17,21,26,30,34,38,43,47,51,55,60,64]];
function a7(b){V=b;J=[4,6,6,6,0,0,0,6][V];M=[4,6,5,7,5,7,7,5][V];m=[0,0,0,0,6,8,7,5][V];ad=[1,1,0,1,0,0,1,1][V];
w=[6,4,6,4,2,2,2,4][V];al=w>>>1;A=[3,3,2,2,2,2,4,2][V];G=[0,0,0,0,3,2,0,0][V]}function ae(b,$){b<<=8-$;
b|=b>>$;return b}function U(b,$,j){return b*(64-j)+$*j+32>>6}function ak(b,$,j,h,s,n){var x=UTEX.I.R,d={m:0},t=new Uint8Array(4*4*4);
for(var i=0;i<s;i+=4)for(var L=0;L<h;L+=4){var p=0;while((b[$]>>p&1)!=1)p++;a7(p);d.m=($<<3)+V+1;var z=V==4||V==5?x(b,d,2):0,D=V==4?x(b,d,1):0,a6=x(b,d,J),r=new Uint8Array(24);
for(var B=0;B<4;B++){var q=B==3?m:M;for(var C=0;C<w;C++)r[B*w+C]=x(b,d,q)}for(var C=0;C<w;C++){if(V==1&&(C&1)==1)d.m--;
var ac=x(b,d,ad);for(var B=0;B<3;B++)I(r,B*w+C,ad,ac);if(m!=0)I(r,3*w+C,ad,ac)}M+=ad;if(m!=0)m+=ad;for(var B=0;
B<4;B++){var q=B==3?m:M;for(var C=0;C<w;C++)r[B*w+C]=ae(r[B*w+C],q)}if(m==0)for(var C=0;C<w;C++)r[3*w+C]=255;
var a3=O[al-1][a6],N=k[al-1][a6],T=d.m,au=T+16*A-al;if(D==1){var ap=T;T=au;au=ap;ap=A;A=G;G=ap}var a8=a0[A];
d.m=T;for(var B=0;B<64;B+=4){var P=a3[B>>2],a9=N[P]==B>>2?1:0,ar=d.m%(16*8),ai=x(b,d,A-a9),a2=a8[ai];
t[B]=U(r[0*w+2*P],r[0*w+2*P+1],a2);t[B+1]=U(r[1*w+2*P],r[1*w+2*P+1],a2);t[B+2]=U(r[2*w+2*P],r[2*w+2*P+1],a2);
t[B+3]=U(r[3*w+2*P],r[3*w+2*P+1],a2)}a8=a0[G];d.m=au;if(G!=0)for(var B=0;B<64;B+=4){var P=a3[B>>2],a9=N[P]==B>>2?1:0,ai=x(b,d,G-a9),a2=a8[ai];
t[B+3]=U(r[3*w+2*P],r[3*w+2*P+1],a2)}if(z!=0)u(t,z);UTEX.I.l(j,h,s,L,i,t);$+=16}return $}function aq(b){return~~(.5+b)}function I(b,B,ad,$){b[B]=b[B]<<ad|$}function u(b,$){for(var B=0;
B<64;B+=4){var j=b[B+$-1];b[B+$-1]=b[B+3];b[B+3]=j}}var K=[];for(var B=0;B<4;B++)K[B]=new Uint8Array(B*8);
function W(b,al,H){var $=K[al];for(var a=0;a<al;a++){var j=H[a],h=j.length,s=j[0]<<2,n=b[s],x=b[s+1],d=b[s+2],t=b[s+3],i=n,L=x,p=d,z=t;
for(var B=1;B<h;B++){s=j[B]<<2;var D=b[s],a6=b[s+1],r=b[s+2],y=b[s+3];if(D<n)n=D;else if(D>i)i=D;if(a6<x)x=a6;
else if(a6>L)L=a6;if(r<d)d=r;else if(r>p)p=r;if(y<t)t=y;else if(y>z)z=y}var q=a<<3;$[q]=n;$[q+1]=x;$[q+2]=d;
$[q+3]=t;$[q+4]=i;$[q+5]=L;$[q+6]=p;$[q+7]=z}return $}function S(b){var $=b[0]+b[4]-b[8]-b[12],j=b[1]+b[5]-b[9]-b[13],h=b[2]+b[6]-b[10]-b[14],s=b[3]+b[7]-b[11]-b[15];
return $*$+j*j+h*h+s*s}function Q(b,$,j){j=j<<($&7);var h=$>>>3;b[h]|=j;b[h+1]|=j>>>8}function R(b,$,j,h){var s=1e9,n=0,l=new Uint8Array(16),x=new Uint8Array(24),d=255,t=0;
for(var B=0;B<64;B+=4){var i=j[B+3];if(i<d)d=i;if(i>t)t=i}var L=d<255,p=L?[4,5,6,7]:[1,3,6],z={},D=new Uint8Array(8);
for(var a6=0;a6<p.length;a6++){a7(p[a6]);var r=m!=0&&G==0&&L,q=ad==1&&V>3?1:0,ac=ad==0||V>3||V==1,a3=V==1?2:ad*w,N=al==1?[0]:z[al+","+J],T,au=V+1+J+w*(3*M+m)+a3;
if(V==4||V==5){au+=2;if(V==4)au++}if(N==null){var ap=ag[al-1];N=z[al+","+J]=[0,0,0,0,0];T=[-1,-1,-1,-1,-1];
for(var a8=0;a8<1<<J;a8++){var H=ap[a8],P=N.length-1;T[P]=S(W(j,al,H));N[P]=a8;while(P!=0&&T[P-1]<T[P]){var a9=T[P];
T[P]=T[P-1];T[P-1]=a9;var a9=N[P];N[P]=N[P-1];N[P-1]=a9;P--}}N.pop()}for(var ar=0;ar<N.length;ar++){var a8=N[ar],ai=0,a2=0,a5=au,a1=0;
l.fill(0);var ax=O[al-1][a8],H=ag[al-1][a8],ah=k[al-1][a8],at=X[al-1][a8],an=W(j,al,H),aa=m==0?3:4;for(var a=0;
a<w;a++){D[6]=D[7]=0;for(var B=0;B<aa;B++){var ay=B==3?m:M,ab=an[(a<<2)+B]>>>7-ay;D[6+(ab&1)]++}var af=D[a]=ac?q:D[6]>D[7]?0:1;
for(var B=0;B<aa;B++){var ay=B==3?m:M,ab=an[(a<<2)+B]>>>8-ay;x[B*w+a]=ae(ab<<ad|af,ay+ad)}}for(var a=0;
a<al;a++){var ao=ah[a]*4,P=(r?e(j,ao,x,a):E(j,ao,x,a))&255;if(P>>>A-1==1){for(var B=0;B<aa;B++){var C=B*w+a*2,a9=x[C];
x[C]=x[C+1];x[C+1]=a9;a9=D[a*2];D[a*2]=D[a*2+1];D[a*2+1]=a9}}if(G==0)continue;var P=v(j,ao,x,a)&255;
if(P>>>G-1==1){var C=3*w+a*2,a9=x[C];x[C]=x[C+1];x[C+1]=a9}}for(var B=0;B<64;B+=4){var a=ax[B>>2],aw=r?e(j,B,x,a):E(j,B,x,a),P=aw&255;
a1+=aw>>>8;Q(l,a5,P);a5+=A-at[B>>>2]}if(G!=0)for(var B=0;B<64;B+=4){var a=ax[B>>2],aw=v(j,B,x,a),P=aw&255;
a1+=aw>>>8;Q(l,a5,P);a5+=G-at[B>>>2]}if(a1<s){a5=0;Q(l,a5,1<<V);a5+=V+1;Q(l,a5,a8);a5+=J;if(V==4||V==5){Q(l,a5,ai);
a5+=2;if(V==4){Q(l,a5,a2);a5+=1}}for(var B=0;B<aa;B++){var ay=B==3?m:M;for(var a=0;a<w;a++){var ab=x[B*w+a]>>>8-ay;
Q(l,a5,ab);a5+=ay}}for(var B=0;B<a3;B++)Q(l,a5+B,D[B]);a5+=a3;s=a1;b.set(l,$);n=V}}}return s}function e(b,C,$,a){var j=b[C],h=b[C+1],s=b[C+2],y=b[C+3],n=2*a,x=w+2*a,d=2*w+2*a,t=3*w+2*a,i=$[n],L=$[n+1],p=$[x],z=$[x+1],D=$[d],a6=$[d+1],r=$[t],q=$[t+1],ac=0,top=(1<<A)-1;
if(i!=L||p!=z||D!=a6||r!=q){var a3=L-i,N=z-p,T=a6-D,au=q-r,ap=(j-i)*a3+(h-p)*N+(s-D)*T+(y-r)*au,a8=.999999999*ap/(a3*a3+N*N+T*T+au*au);
a8=a8<0?0:a8>1?1:a8;ac=aq(a8*top)}var P=a0[A][ac];a3=U(i,L,P)-j;N=U(p,z,P)-h;T=U(D,a6,P)-s;au=U(r,q,P)-y;
var a9=a3*a3+N*N+T*T+au*au;return a9<<8|ac}function E(b,C,$,a){var j=b[C],h=b[C+1],s=b[C+2],n=2*a,x=w+2*a,d=2*w+2*a,t=$[n],i=$[n+1],L=$[x],p=$[x+1],z=$[d],D=$[d+1],a6=0,top=(1<<A)-1;
if(t!=i||L!=p||z!=D){var r=i-t,q=p-L,ac=D-z,a3=(j-t)*r+(h-L)*q+(s-z)*ac,N=.999999999*a3/(r*r+q*q+ac*ac);
N=N<0?0:N>1?1:N;a6=aq(N*top)}var T=a0[A][a6];r=U(t,i,T)-j;q=U(L,p,T)-h;ac=U(z,D,T)-s;var au=r*r+q*q+ac*ac;
return au<<8|a6}function v(b,C,$,a){var y=b[C+3],j=3*w+2*a,h=$[j],s=$[j+1],n=0,top=(1<<G)-1;if(h!=s){var x=s-h,i=(y-h)*x,L=.999999999*i/(x*x);
L=L<0?0:L>1?1:L;n=aq(L*top)}var p=a0[G][n];x=U(h,s,p)-y;var z=x*x;return z<<8|n}function am(b,$,j,h,s){var n=Date.now(),x=s;
for(var B=0;B<1;B++){var d=new Uint8Array(16*4+16*4),t=0;s=x;for(var i=0;i<j;i+=4)for(var L=0;L<$;L+=4){UTEX.I.H(b,$,j,L,i,d);
t+=R(h,s,d,L==80&&i==160);s+=16}}return s}UTEX.G=ak;UTEX.b=am}());UTEX.DDS=function(){var O={c:1,Y:2,_:4,o:8,g:4096,Q:131072,T:524288,ab:8388608,J:1,d:2,w:4,X:64,a2:512,B:131072,r:8,f:4194304,M:4096};
function ag(Y){var g=new Uint8Array(Y),y=0,a=UTEX.I.s(g,y,4),k,X,_;y+=4;k=C(g,y);y+=124;X=k.S;if(X.v&O.w&&X.n=="DX10"){_=aj(g,y);
y+=20}var F=k.width,Z=k.height,as=[],c=X.n,l=X.P,a0={DXT1:"BC1",DXT3:"BC2",DXT5:"BC3",DX10:"BC7",ATI2:"BC5",BC5U:"BC5",BC5S:"BC5","BC7 ":"BC7"};
if(a0[c])c=a0[c];if(_){var J=_.i;if(70<=J&&J<=72)c="BC1";else if(73<=J&&J<=75)c="BC2";else if(76<=J&&J<=78)c="BC3";
else if(97<=J&&J<=99)c="BC7";else console.log("Unknown DX10 format",J)}var M=Math.max(1,k.D),m=(X.v&O.J)!=0;
for(var ad=0;ad<M;ad++){var w=F*Z,A=w*4,G=new Uint8Array(A);if(!1){}else if(c=="BC1")y=UTEX.A(g,y,G,F,Z);
else if(c=="BC2")y=UTEX.K(g,y,G,F,Z);else if(c=="BC3")y=UTEX.a(g,y,G,F,Z);else if(c=="BC5")y=UTEX.$(g,y,G,F,Z);
else if(c=="BC7")y=UTEX.G(g,y,G,F,Z);else if(c=="ATC ")y=UTEX.q(g,y,G,F,Z);else if(c=="ATCA")y=UTEX.O(g,y,G,F,Z);
else if(c=="ATCI")y=UTEX.O(g,y,G,F,Z);else if(X.v&O.X){var a7=X.j,ae=255/a7,U=X.t,ak=255/U,aq=X.h,I=255/aq,u=X.Z,K=255/u;
if(l==32){for(var W=0;W<A;W+=4){var S=g[y+W+3]<<24|g[y+W+2]<<16|g[y+W+1]<<8|g[y+W];G[W+0]=(S&a7)*ae;
G[W+1]=(S&U)*ak;G[W+2]=(S&aq)*I;G[W+3]=m?(S&u)*K:255}y+=A}else if(l==24){for(var W=0;W<A;W+=4){var Q=(W>>>2)*3,S=g[y+Q+2]<<16|g[y+Q+1]<<8|g[y+Q];
G[W+0]=(S&a7)*ae;G[W+1]=(S&U)*ak;G[W+2]=(S&aq)*I;G[W+3]=255}y+=3*w}else if(l==16){for(var W=0;W<A;W+=4){var S=g[y+(W>>1)+1]<<8|g[y+(W>>1)];
G[W+0]=(S&a7)*ae;G[W+1]=(S&U)*ak;G[W+2]=(S&aq)*I;G[W+3]=m?(S&u)*K:255}y+=A>>>1}else throw"unknown bit count "+l}else if(X.v&O.d||m||X.v&O.B){if(l==8){if(X.v&O.d){for(var W=0;
W<A;W+=4)G[W+3]=g[y+(W>>2)]}else{G.fill(255);for(var W=0;W<A;W+=4)G[W]=G[W+1]=G[W+2]=g[y+(W>>2)]}y+=A>>>2}else if(l==16){G.fill(255);
for(var W=0;W<A;W+=4)G[W]=G[W+1]=G[W+2]=g[y+(W>>1)];y+=A>>>1}else throw"unknown bit count "+l}else if(X.v&O.X&&l==24){for(var W=0;
W<w;W++){var R=W*4,Q=W*3;G[R+0]=g[y+Q];G[R+1]=g[y+Q+1];G[R+2]=g[y+Q+2];G[R+3]=255}}else{console.log("unknown texture format, head flags: ",k.v.toString(2),"pixelFormat flags: ",X.v.toString(2));
throw"e"}as.push({width:F,height:Z,image:G.buffer});F=F>>>1;Z=Z>>>1}return as}function B(Y,g,y,a){if(a==null)a=[0,!0];
var Y=new Uint8Array(Y),k=["BC1","BC3","BC7","NON"][a[0]],X=a[1],_=new Uint8Array(124+g*y*6),F=0,Z=0;
UTEX.I.C(_,F,"DDS ");F+=4;H(_,g,y,X,k,F);F+=124;if(k=="BC7"){a4(_,F);F+=20}while(g*y!=0){if(k=="NON"){_.set(Y,F);
F+=Y.length}if(k=="BC1")F=UTEX.N(Y,g,y,_,F);if(k=="BC3")F=UTEX.u(Y,g,y,_,F);if(k=="BC7")F=UTEX.b(Y,g,y,_,F);
Y=UTEX.z(Y,g,y);g=g>>1;y=y>>1;Z++;if(!X)break}_[28]=Z;return _.buffer.slice(0,F)}function C(Y,g){var y={},a=UTEX.I.V,k=a(Y,g);
g+=4;if(k!=124)throw k;y.v=a(Y,g);g+=4;y.height=a(Y,g);g+=4;y.width=a(Y,g);g+=4;y.pitch=a(Y,g);g+=4;
y.depth=a(Y,g);g+=4;y.D=a(Y,g);g+=4;g+=11*4;y.S=o(Y,g);g+=32;y.a9=a(Y,g);g+=4;y.a0=a(Y,g);g+=4;y.a3=a(Y,g);
g+=4;y.a4=a(Y,g);g+=4;if(a(Y,g)!=0)console.log("not zeros",a(Y,g).toString(16));g+=4;return y}function H(Y,g,y,a,k,X){var _=UTEX.I.W,F=O.c|O.Y|O._|O.g,c=1;
F|=O.Q|(k?O.T:O.o);var Z=(a?O.f:0)|O.M|(a?O.r:0),as=k=="NON"?g*y*4:(g*y>>>1)*(k=="BC1"?1:2);_(Y,X,124);
X+=4;_(Y,X,F);X+=4;_(Y,X,y);X+=4;_(Y,X,g);X+=4;_(Y,X,as);X+=4;_(Y,X,c);X+=4;_(Y,X,10);X+=4;X+=11*4;f(Y,k,X);
X+=32;_(Y,X,Z);X+=4;X+=4*4}function o(Y,g){var y={},a=UTEX.I.V,k=a(Y,g);g+=4;if(k!=32&&k!=0)throw k;
y.v=a(Y,g);g+=4;y.n=UTEX.I.s(Y,g,4);g+=4;y.P=a(Y,g);g+=4;y.j=a(Y,g);g+=4;y.t=a(Y,g);g+=4;y.h=a(Y,g);
g+=4;y.Z=a(Y,g);g+=4;return y}function f(Y,g,y){var a=UTEX.I.W,k=g!="NON"?O.w:O.J|O.X;a(Y,y,32);y+=4;
a(Y,y,k);y+=4;UTEX.I.C(Y,y,{NON:"    ",BC1:"DXT1",BC3:"DXT5",BC7:"DX10"}[g]);y+=4;if(g=="NON"){a(Y,y,32);
for(var X=0;X<4;X++)a(Y,y+4+X*4,255<<X*8)}y+=5*4}function aj(Y,g){var y={},a=UTEX.I.V;y.i=a(Y,g);g+=4;
y.a5=a(Y,g);g+=4;y.ad=a(Y,g);g+=4;y.a8=a(Y,g);g+=4;y.ac=a(Y,g);g+=4;return y}function a4(Y,g){var y=UTEX.I.W;
y(Y,g,98);g+=4;y(Y,g,3);g+=4;y(Y,g,0);g+=4;y(Y,g,1);g+=4;y(Y,g,0);g+=4}return{encode:B,decode:ag}}();
UTEX.VTF=function(){var O={};function ag(C){var H=new Uint8Array(C),o=0,f={};o=B(H,o,f);var aj=f.k,a4=f.p;
if(aj*a4!=0){var Y=new Uint8Array(aj*a4*4);o=UTEX.A(H,o,Y,aj,a4)}var g=f.F,y=f.L,a=[];for(var k=0;k<y;
k++){var X=f.width>>>y-1-k,_=f.height>>>y-1-k;for(var F=0;F<f.frames;F++){var Y=new Uint8Array(X*_*4);
if(g==0||g==12){var Z=o,as=g==0?[0,1,2,3]:[2,1,0,3],c=as[0],l=as[1],a0=as[2],J=as[3];for(var M=0;M<Y.length;
M+=4){Y[M+c]=H[Z++];Y[M+l]=H[Z++];Y[M+a0]=H[Z++];Y[M+J]=H[Z++]}o+=X*_*4}else if(g==2){for(var M=0;M<Y.length;
M+=4){Y[M]=H[o++];Y[M+1]=H[o++];Y[M+2]=H[o++];Y[M+3]=255}}else if(g==13)o=UTEX.A(H,o,Y,X,_);else if(g==14)o=UTEX.K(H,o,Y,X,_);
else if(g==15)o=UTEX.a(H,o,Y,X,_);else throw g;a.push({width:X,height:_,image:Y.buffer})}}return a}function B(C,H,o){var f=UTEX.I.V,aj=UTEX.I.e,a4=UTEX.I.s(C,H,4);
H+=4;var Y=f(C,H);H+=4;var g=f(C,H);H+=4;var y=f(C,H);H+=4;o.width=aj(C,H);H+=2;o.height=aj(C,H);H+=2;
o.v=f(C,H);H+=4;o.frames=aj(C,H);H+=2;o.aa=aj(C,H);H+=2;H+=4;H+=12;H+=4;H+=4;o.F=f(C,H);H+=4;o.L=C[H++];
o.a6=f(C,H);H+=4;o.k=C[H++];o.p=C[H++];if(g>=2){o.depth=aj(C,H);H+=2;if(g>=3){H+=3;o.a1=f(C,H);H+=4}}return y}return{decode:ag}}();



(function(){var j={};if(typeof module=="object"){module.exports=j}else{self.UTIF=j}function aQ(){if(typeof process=="undefined"||process.env.NODE_ENV=="development")console.log.apply(console,arguments)}(function(j){(function(){"use strict";
var x=function T(){function x($){this.message="JPEG error: "+$}x.prototype=new Error;x.prototype.name="JpegError";
x.constructor=x;return x}(),l=function H(){var $=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),Y=4017,w=799,D=3406,i=2276,e=1567,g=3784,N=5793,Z=2896;
function l(J){if(J==null)J={};if(J.w==null)J.w=-1;this.V=J.n;this.N=J.w}function K(J,X){var B=0,r=[],m,u,_=16,R;
while(_>0&&!J[_-1]){_--}r.push({children:[],index:0});var f=r[0];for(m=0;m<_;m++){for(u=0;u<J[m];u++){f=r.pop();
f.children[f.index]=X[B];while(f.index>0){f=r.pop()}f.index++;r.push(f);while(r.length<=m){r.push(R={children:[],index:0});
f.children[f.index]=R.children;f=R}B++}if(m+1<_){r.push(R={children:[],index:0});f.children[f.index]=R.children;
f=R}}return r[0].children}function V(J,X,B){return 64*((J.P+1)*X+B)}function P(J,X,B,r,m,u,_,R,f,A){if(A==null)A=!1;
var ah=B.m,p=B.Z,d=X,ai=0,t=0,c=0,O=0,aI,y=0,U,Q,q,k,a9,an,b9=0,b0,bb,aO,au;function aE(){if(t>0){t--;
return ai>>t&1}ai=J[X++];if(ai===255){var aG=J[X++];if(aG){if(aG===220&&A){X+=2;var af=C(J,X);X+=2;if(af>0&&af!==B.s){throw new DNLMarkerError("Found DNL marker (0xFFDC) while parsing scan data",af)}}else if(aG===217){if(A){var aZ=y*8;
if(aZ>0&&aZ<B.s/10){throw new DNLMarkerError("Found EOI marker (0xFFD9) while parsing scan data, "+"possibly caused by incorrect `scanLines` parameter",aZ)}}throw new EOIMarkerError("Found EOI marker (0xFFD9) while parsing scan data")}throw new x("unexpected marker")}}t=7;
return ai>>>7}function aT(aG){var af=aG;while(!0){af=af[aE()];switch(typeof af){case"number":return af;
case"object":continue}throw new x("invalid huffman sequence")}}function aV(aG){var a9=0;while(aG>0){a9=a9<<1|aE();
aG--}return a9}function ab(aG){if(aG===1){return aE()===1?1:-1}var a9=aV(aG);if(a9>=1<<aG-1){return a9}return a9+(-1<<aG)+1}function ao(U,aG){var af=aT(U.J),aZ=af===0?0:ab(af),k=1;
U.D[aG]=U.Q+=aZ;while(k<64){var aq=aT(U.i),a7=aq&15,aK=aq>>4;if(a7===0){if(aK<15){break}k+=16;continue}k+=aK;
var ae=$[k];U.D[aG+ae]=ab(a7);k++}}function aL(U,aG){var af=aT(U.J),aZ=af===0?0:ab(af)<<f;U.D[aG]=U.Q+=aZ}function ba(U,aG){U.D[aG]|=aE()<<f}function ax(U,aG){if(c>0){c--;
return}var k=u,af=_;while(k<=af){var aZ=aT(U.i),aq=aZ&15,a7=aZ>>4;if(aq===0){if(a7<15){c=aV(a7)+(1<<a7)-1;
break}k+=16;continue}k+=a7;var aK=$[k];U.D[aG+aK]=ab(aq)*(1<<f);k++}}function bc(U,aG){var k=u,af=_,aZ=0,aq,a7;
while(k<=af){var aK=aG+$[k],ae=U.D[aK]<0?-1:1;switch(O){case 0:a7=aT(U.i);aq=a7&15;aZ=a7>>4;if(aq===0){if(aZ<15){c=aV(aZ)+(1<<aZ);
O=4}else{aZ=16;O=1}}else{if(aq!==1){throw new x("invalid ACn encoding")}aI=ab(aq);O=aZ?2:3}continue;
case 1:case 2:if(U.D[aK]){U.D[aK]+=ae*(aE()<<f)}else{aZ--;if(aZ===0){O=O===2?3:0}}break;case 3:if(U.D[aK]){U.D[aK]+=ae*(aE()<<f)}else{U.D[aK]=aI<<f;
O=0}break;case 4:if(U.D[aK]){U.D[aK]+=ae*(aE()<<f)}break}k++}if(O===4){c--;if(c===0){O=0}}}function aw(U,aG,b9,af,aZ){var aq=b9/ah|0,a7=b9%ah;
y=aq*U.A+af;var aK=a7*U.h+aZ,ae=V(U,y,aK);aG(U,ae)}function ag(U,aG,b9){y=b9/U.P|0;var af=b9%U.P,aZ=V(U,y,af);
aG(U,aZ)}var b4=r.length;if(p){if(u===0){an=R===0?aL:ba}else{an=R===0?ax:bc}}else{an=ao}if(b4===1){bb=r[0].P*r[0].c}else{bb=ah*B.R}while(b9<=bb){var b2=m?Math.min(bb-b9,m):bb;
if(b2>0){for(Q=0;Q<b4;Q++){r[Q].Q=0}c=0;if(b4===1){U=r[0];for(a9=0;a9<b2;a9++){ag(U,an,b9);b9++}}else{for(a9=0;
a9<b2;a9++){for(Q=0;Q<b4;Q++){U=r[Q];aO=U.h;au=U.A;for(q=0;q<au;q++){for(k=0;k<aO;k++){aw(U,an,b9,q,k)}}}b9++}}}t=0;
b0=L(J,X);if(!b0){break}if(b0.u){var aW=b2>0?"unexpected":"excessive";X=b0.offset}if(b0.M>=65488&&b0.M<=65495){X+=2}else{break}}return X-d}function h(J,X,B){var r=J.$,m=J.D,u,_,R,f,A,ah,p,d,ai,t,c,O,aI,y,U,b5,Q;
if(!r){throw new x("missing required Quantization Table.")}for(var q=0;q<64;q+=8){ai=m[X+q];t=m[X+q+1];
c=m[X+q+2];O=m[X+q+3];aI=m[X+q+4];y=m[X+q+5];U=m[X+q+6];b5=m[X+q+7];ai*=r[q];if((t|c|O|aI|y|U|b5)===0){Q=N*ai+512>>10;
B[q]=Q;B[q+1]=Q;B[q+2]=Q;B[q+3]=Q;B[q+4]=Q;B[q+5]=Q;B[q+6]=Q;B[q+7]=Q;continue}t*=r[q+1];c*=r[q+2];O*=r[q+3];
aI*=r[q+4];y*=r[q+5];U*=r[q+6];b5*=r[q+7];u=N*ai+128>>8;_=N*aI+128>>8;R=c;f=U;A=Z*(t-b5)+128>>8;d=Z*(t+b5)+128>>8;
ah=O<<4;p=y<<4;u=u+_+1>>1;_=u-_;Q=R*g+f*e+128>>8;R=R*e-f*g+128>>8;f=Q;A=A+p+1>>1;p=A-p;d=d+ah+1>>1;ah=d-ah;
u=u+f+1>>1;f=u-f;_=_+R+1>>1;R=_-R;Q=A*i+d*D+2048>>12;A=A*D-d*i+2048>>12;d=Q;Q=ah*w+p*Y+2048>>12;ah=ah*Y-p*w+2048>>12;
p=Q;B[q]=u+d;B[q+7]=u-d;B[q+1]=_+p;B[q+6]=_-p;B[q+2]=R+ah;B[q+5]=R-ah;B[q+3]=f+A;B[q+4]=f-A}for(var k=0;
k<8;++k){ai=B[k];t=B[k+8];c=B[k+16];O=B[k+24];aI=B[k+32];y=B[k+40];U=B[k+48];b5=B[k+56];if((t|c|O|aI|y|U|b5)===0){Q=N*ai+8192>>14;
if(Q<-2040){Q=0}else if(Q>=2024){Q=255}else{Q=Q+2056>>4}m[X+k]=Q;m[X+k+8]=Q;m[X+k+16]=Q;m[X+k+24]=Q;
m[X+k+32]=Q;m[X+k+40]=Q;m[X+k+48]=Q;m[X+k+56]=Q;continue}u=N*ai+2048>>12;_=N*aI+2048>>12;R=c;f=U;A=Z*(t-b5)+2048>>12;
d=Z*(t+b5)+2048>>12;ah=O;p=y;u=(u+_+1>>1)+4112;_=u-_;Q=R*g+f*e+2048>>12;R=R*e-f*g+2048>>12;f=Q;A=A+p+1>>1;
p=A-p;d=d+ah+1>>1;ah=d-ah;u=u+f+1>>1;f=u-f;_=_+R+1>>1;R=_-R;Q=A*i+d*D+2048>>12;A=A*D-d*i+2048>>12;d=Q;
Q=ah*w+p*Y+2048>>12;ah=ah*Y-p*w+2048>>12;p=Q;ai=u+d;b5=u-d;t=_+p;U=_-p;c=R+ah;y=R-ah;O=f+A;aI=f-A;if(ai<16){ai=0}else if(ai>=4080){ai=255}else{ai>>=4}if(t<16){t=0}else if(t>=4080){t=255}else{t>>=4}if(c<16){c=0}else if(c>=4080){c=255}else{c>>=4}if(O<16){O=0}else if(O>=4080){O=255}else{O>>=4}if(aI<16){aI=0}else if(aI>=4080){aI=255}else{aI>>=4}if(y<16){y=0}else if(y>=4080){y=255}else{y>>=4}if(U<16){U=0}else if(U>=4080){U=255}else{U>>=4}if(b5<16){b5=0}else if(b5>=4080){b5=255}else{b5>>=4}m[X+k]=ai;
m[X+k+8]=t;m[X+k+16]=c;m[X+k+24]=O;m[X+k+32]=aI;m[X+k+40]=y;m[X+k+48]=U;m[X+k+56]=b5}}function M(J,X){var B=X.P,r=X.c,m=new Int16Array(64);
for(var u=0;u<r;u++){for(var _=0;_<B;_++){var R=V(X,u,_);h(X,R,m)}}return X.D}function L(J,X,B){if(B==null)B=X;
var r=J.length-1,m=B<X?B:X;if(X>=r){return null}var u=C(J,X);if(u>=65472&&u<=65534){return{u:null,M:u,offset:X}}var _=C(J,m);
while(!(_>=65472&&_<=65534)){if(++m>=r){return null}_=C(J,m)}return{u:u.toString(16),M:_,offset:m}}l.prototype={parse(J,X){if(X==null)X={};
var B=X.F,r=0,m=null,u=null,_,R,f=0;function A(){var aK=C(J,r);r+=2;var ae=r+aK-2,t=L(J,ae,r);if(t&&t.u){ae=t.offset}var aJ=J.subarray(r,ae);
r+=aJ.length;return aJ}function ah(_){var aK=Math.ceil(_.o/8/_.X),ae=Math.ceil(_.s/8/_.B);for(var c=0;
c<_.W.length;c++){ax=_.W[c];var aJ=Math.ceil(Math.ceil(_.o/8)*ax.h/_.X),aM=Math.ceil(Math.ceil(_.s/8)*ax.A/_.B),ap=aK*ax.h,a5=ae*ax.A,aX=64*a5*(ap+1);
ax.D=new Int16Array(aX);ax.P=aJ;ax.c=aM}_.m=aK;_.R=ae}var p=[],d=[],ai=[],t=C(J,r);r+=2;if(t!==65496){throw new x("SOI not found")}t=C(J,r);
r+=2;markerLoop:while(t!==65497){var c,O,aI;switch(t){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var y=A();
if(t===65504){if(y[0]===74&&y[1]===70&&y[2]===73&&y[3]===70&&y[4]===0){m={version:{d:y[5],T:y[6]},K:y[7],j:y[8]<<8|y[9],H:y[10]<<8|y[11],S:y[12],I:y[13],C:y.subarray(14,14+3*y[12]*y[13])}}}if(t===65518){if(y[0]===65&&y[1]===100&&y[2]===111&&y[3]===98&&y[4]===101){u={version:y[5]<<8|y[6],k:y[7]<<8|y[8],q:y[9]<<8|y[10],a:y[11]}}}break;
case 65499:var U=C(J,r),b5;r+=2;var Q=U+r-2;while(r<Q){var q=J[r++],k=new Uint16Array(64);if(q>>4===0){for(O=0;
O<64;O++){b5=$[O];k[b5]=J[r++]}}else if(q>>4===1){for(O=0;O<64;O++){b5=$[O];k[b5]=C(J,r);r+=2}}else{throw new x("DQT - invalid table spec")}p[q&15]=k}break;
case 65472:case 65473:case 65474:if(_){throw new x("Only single frame JPEGs supported")}r+=2;_={};_.G=t===65473;
_.Z=t===65474;_.precision=J[r++];var a9=C(J,r),an,b9=0,b0=0;r+=2;_.s=B||a9;_.o=C(J,r);r+=2;_.W=[];_._={};
var bb=J[r++];for(c=0;c<bb;c++){an=J[r];var aO=J[r+1]>>4,au=J[r+1]&15;if(b9<aO){b9=aO}if(b0<au){b0=au}var aE=J[r+2];
aI=_.W.push({h:aO,A:au,L:aE,$:null});_._[an]=aI-1;r+=3}_.X=b9;_.B=b0;ah(_);break;case 65476:var aT=C(J,r);
r+=2;for(c=2;c<aT;){var aV=J[r++],ab=new Uint8Array(16),ao=0;for(O=0;O<16;O++,r++){ao+=ab[O]=J[r]}var aL=new Uint8Array(ao);
for(O=0;O<ao;O++,r++){aL[O]=J[r]}c+=17+ao;(aV>>4===0?ai:d)[aV&15]=K(ab,aL)}break;case 65501:r+=2;R=C(J,r);
r+=2;break;case 65498:var ba=++f===1&&!B,ax;r+=2;var bc=J[r++],aw=[];for(c=0;c<bc;c++){var ag=J[r++],b4=_._[ag];
ax=_.W[b4];ax.index=ag;var b2=J[r++];ax.J=ai[b2>>4];ax.i=d[b2&15];aw.push(ax)}var aW=J[r++],aG=J[r++],af=J[r++];
try{var aZ=P(J,r,_,aw,R,aW,aG,af>>4,af&15,ba);r+=aZ}catch(ex){if(ex instanceof DNLMarkerError){return this.parse(J,{F:ex.s})}else if(ex instanceof EOIMarkerError){break markerLoop}throw ex}break;
case 65500:r+=4;break;case 65535:if(J[r]!==255){r--}break;default:var aq=L(J,r-2,r-3);if(aq&&aq.u){r=aq.offset;
break}if(r>=J.length-1){break markerLoop}throw new x("JpegImage.parse - unknown marker: "+t.toString(16))}t=C(J,r);
r+=2}this.width=_.o;this.height=_.s;this.g=m;this.b=u;this.W=[];for(c=0;c<_.W.length;c++){ax=_.W[c];
var a7=p[ax.L];if(a7){ax.$=a7}this.W.push({index:ax.index,e:M(_,ax),l:ax.h/_.X,t:ax.A/_.B,P:ax.P,c:ax.c})}this.p=this.W.length;
return undefined},Y(J,X,B){if(B==null)B=!1;var r=this.width/J,m=this.height/X,u,_,R,f,A,ah,p,d,ai,t,c=0,O,aI=this.W.length,y=J*X*aI,U=new Uint8ClampedArray(y),b5=new Uint32Array(J),Q=4294967288,q;
for(p=0;p<aI;p++){u=this.W[p];_=u.l*r;R=u.t*m;c=p;O=u.e;f=u.P+1<<3;if(_!==q){for(A=0;A<J;A++){d=0|A*_;
b5[A]=(d&Q)<<3|d&7}q=_}for(ah=0;ah<X;ah++){d=0|ah*R;t=f*(d&Q)|(d&7)<<3;for(A=0;A<J;A++){U[c]=O[t+b5[A]];
c+=aI}}}var k=this.V;if(!B&&aI===4&&!k){k=new Int32Array([-256,255,-256,255,-256,255,-256,255])}if(k){for(p=0;
p<y;){for(d=0,ai=0;d<aI;d++,p++,ai+=2){U[p]=(U[p]*k[ai]>>8)+k[ai+1]}}}return U},get f(){if(this.b){return!!this.b.a}if(this.p===3){if(this.N===0){return!1}else if(this.W[0].index===82&&this.W[1].index===71&&this.W[2].index===66){return!1}return!0}if(this.N===1){return!0}return!1},z:function n(J){var X,B,r;
for(var m=0,u=J.length;m<u;m+=3){X=J[m];B=J[m+1];r=J[m+2];J[m]=X-179.456+1.402*r;J[m+1]=X+135.459-.344*B-.714*r;
J[m+2]=X-226.816+1.772*B}return J},O:function b(J){var X,B,r,m,u=0;for(var _=0,R=J.length;_<R;_+=4){X=J[_];
B=J[_+1];r=J[_+2];m=J[_+3];J[u++]=-122.67195406894+B*(-660635669420364e-19*B+.000437130475926232*r-54080610064599e-18*X+.00048449797120281*m-.154362151871126)+r*(-.000957964378445773*r+.000817076911346625*X-.00477271405408747*m+1.53380253221734)+X*(.000961250184130688*X-.00266257332283933*m+.48357088451265)+m*(-.000336197177618394*m+.484791561490776);
J[u++]=107.268039397724+B*(219927104525741e-19*B-.000640992018297945*r+.000659397001245577*X+.000426105652938837*m-.176491792462875)+r*(-.000778269941513683*r+.00130872261408275*X+.000770482631801132*m-.151051492775562)+X*(.00126935368114843*X-.00265090189010898*m+.25802910206845)+m*(-.000318913117588328*m-.213742400323665);
J[u++]=-20.810012546947+B*(-.000570115196973677*B-263409051004589e-19*r+.0020741088115012*X-.00288260236853442*m+.814272968359295)+r*(-153496057440975e-19*r-.000132689043961446*X+.000560833691242812*m-.195152027534049)+X*(.00174418132927582*X-.00255243321439347*m+.116935020465145)+m*(-.000343531996510555*m+.24165260232407)}return J.subarray(0,u)},r:function E(J){var X,B,r;
for(var m=0,u=J.length;m<u;m+=4){X=J[m];B=J[m+1];r=J[m+2];J[m]=434.456-X-1.402*r;J[m+1]=119.541-X+.344*B+.714*r;
J[m+2]=481.816-X-1.772*B}return J},U:function G(J){var X,B,r,m,u=0;for(var _=0,R=J.length;_<R;_+=4){X=J[_];
B=J[_+1];r=J[_+2];m=J[_+3];J[u++]=255+X*(-6747147073602441e-20*X+.0008379262121013727*B+.0002894718188643294*r+.003264231057537806*m-1.1185611867203937)+B*(26374107616089404e-21*B-8626949158638572e-20*r-.0002748769067499491*m-.02155688794978967)+r*(-3878099212869363e-20*r-.0003267808279485286*m+.0686742238595345)-m*(.0003361971776183937*m+.7430659151342254);
J[u++]=255+X*(.00013596372813588848*X+.000924537132573585*B+.00010567359618683593*r+.0004791864687436512*m-.3109689587515875)+B*(-.00023545346108370344*B+.0002702845253534714*r+.0020200308977307156*m-.7488052167015494)+r*(6834815998235662e-20*r+.00015168452363460973*m-.09751927774728933)-m*(.0003189131175883281*m+.7364883807733168);
J[u++]=255+X*(13598650411385308e-21*X+.00012423956175490851*B+.0004751985097583589*r-36729317476630424e-22*m-.05562186980264034)+B*(.00016141380598724676*B+.0009692239130725186*r+.0007782692450036253*m-.44015232367526463)+r*(5.068882914068769e-7*r+.0017778369011375071*m-.7591454649749609)-m*(.0003435319965105553*m+.7063770186160144)}return J.subarray(0,u)},getData:function(J){var X=J.width,B=J.height,r=J.forceRGB,m=J.isSourcePDF;
if(this.p>4){throw new x("Unsupported color mode")}var u=this.Y(X,B,m);if(this.p===1&&r){var _=u.length,R=new Uint8ClampedArray(_*3),f=0;
for(var A=0;A<_;A++){var ah=u[A];R[f++]=ah;R[f++]=ah;R[f++]=ah}return R}else if(this.p===3&&this.f){return this.z(u)}else if(this.p===4){if(this.f){if(r){return this.O(u)}return this.r(u)}else if(r){return this.U(u)}}return u}};
return l}();function I($,Y){return $[Y]<<24>>24}function C($,Y){return $[Y]<<8|$[Y+1]}function F($,Y){return($[Y]<<24|$[Y+1]<<16|$[Y+2]<<8|$[Y+3])>>>0}j.JpegDecoder=l}());
j.encodeImage=function(x,l,T,H){var I=new Uint8Array(x),F=window&&window.pako?8:1;if(F==8)I=pako.deflate(I);
var $={t256:[l],t257:[T],t258:[8,8,8,8],t259:[F],t262:[2],t273:[1e3],t277:[4],t278:[T],t279:[I.length],t282:[[72,1]],t283:[[72,1]],t284:[1],t286:[[0,1]],t287:[[0,1]],t296:[1],t305:["Photopea (UTIF.js)"],t338:[1]};
if(H)for(var Y in H)$[Y]=H[Y];var w=new Uint8Array(j.encode([$])),D=new Uint8Array(1e3+I.length);for(var Y=0;
Y<w.length;Y++)D[Y]=w[Y];for(var Y=0;Y<I.length;Y++)D[1e3+Y]=I[Y];return D.buffer};j.encode=function(x){var l=!1,T=new Uint8Array(2e4),H=4,I=l?j._binLE:j._binBE,C=8;
T[0]=T[1]=l?73:77;I.writeUshort(T,2,42);I.writeUint(T,H,C);H+=4;for(var F=0;F<x.length;F++){var $=j._writeIFD(I,j._types.basic,T,C,x[F]);
C=$[1];if(F<x.length-1){if((C&3)!=0)C+=4-(C&3);I.writeUint(T,$[0],C)}}return T.slice(0,C).buffer};j.decode=function(x,l){if(l==null)l={parseMN:!0,debug:!1};
var T=new Uint8Array(x),H=0,I=j._binBE.readASCII(T,H,2);H+=2;var C=I=="II"?j._binLE:j._binBE,F=C.readUshort(T,H);
H+=2;var $=C.readUint(T,H);H+=4;var Y=[];while(!0){var w=C.readUshort(T,$),D=C.readUshort(T,$+4);if(w!=0)if(D<1||13<D){aQ("error in TIFF");
break}j._readIFD(C,T,$,Y,0,l);$=C.readUint(T,$+2+w*12);if($==0)break}return Y};j.decodeImage=function(x,l,T){if(l.data)return;
var H=new Uint8Array(x),I=j._binBE.readASCII(H,0,2),N=0;if(l.t256==null)return;l.isLE=I=="II";l.width=l.t256[0];
l.height=l.t257[0];var C=l.t259?l.t259[0]:1,F=l.t266?l.t266[0]:1;if(C==7&&l.t258&&l.t258.length>3)l.t258=l.t258.slice(0,3);
var $=l.t258?l.t258[0]:1,Y=l.t277?l.t277[0]:1,w=l.t284?l.t284[0]:1;if(Y!=3)w=1;if(w==2)aQ("PlanarConfiguration 2 should not be used!");
var D=$*Y;if(C==1&&l.t279!=null&&l.t278&&l.t262[0]==32803){D=Math.round(l.t279[0]*8/(l.width*l.t278[0]))}if(l.t50885&&l.t50885[0]==4)D=l.t258[0]*3;
var i=Math.ceil(l.width*D/8)*8,e=l.t273;if(e==null||l.t322)e=l.t324;var s=l.t279;if(C==1&&e.length==1)s=[l.height*(i>>>3)];
if(s==null||l.t322)s=l.t325;var g=new Uint8Array(l.height*(i>>>3));if(l.t322!=null){var o=l.t322[0],S=l.t323[0],Z=Math.floor((l.width+o-1)/o),K=Math.floor((l.height+S-1)/S),V=new Uint8Array(Math.ceil(o*S*D/8)|0);
console.log("====",Z,K);for(var P=0;P<K;P++)for(var M=0;M<Z;M++){var L=P*Z+M;V.fill(0);j.decode._decompress(l,T,H,e[L],s[L],C,V,0,F,o,S);
if(C==6)g=V;else j._copyTile(V,Math.ceil(o*D/8)|0,S,g,Math.ceil(l.width*D/8)|0,l.height,Math.ceil(M*o*D/8)|0,P*S)}N=g.length*8}else{if(e==null)return;
var n=l.t278?l.t278[0]:l.height;n=Math.min(n,l.height);for(var L=0;L<e.length;L++){if(w==1){var b=Math.ceil(N/8)|0;
j.decode._decompress(l,T,H,e[L],s[L],C,g,b,F,l.width,n)}else{var E=new Uint8Array(l.width*n);j.decode._decompress(l,T,H,e[L],s[L],C,E,0,F,l.width,n);
var G=Math.ceil(e.length/3),b=L%G*l.width*n*3,J=Math.floor(L/G);for(var X=0;X<E.length;X++)g[b+X*3+J]=E[X]}N+=i*n}N=Math.min(N,g.length*8)}l.data=new Uint8Array(g.buffer,0,Math.ceil(N/8)|0)};
j.decode._decompress=function(x,l,T,H,I,C,F,$,Y,w,D){if(x.t271&&x.t271[0]=="Panasonic"){if(x.t45&&x.t45[0]==6)C=34316;
else if(C==34828)C=1}if(!1){}else if(C==1)for(var i=0;i<I;i++)F[$+i]=T[H+i];else if(C==2)j.decode._decodeG2(T,H,I,F,$,w,Y);
else if(C==3)j.decode._decodeG3(T,H,I,F,$,w,Y,x.t292?(x.t292[0]&1)==1:!1);else if(C==4)j.decode._decodeG4(T,H,I,F,$,w,Y);
else if(C==5)j.decode._decodeLZW(T,H,I,F,$,8);else if(C==6)j.decode._decodeOldJPEG(x,T,H,I,F,$);else if(C==7||C==34892)j.decode._decodeNewJPEG(x,T,H,I,F,$);
else if(C==8||C==32946){var e=new Uint8Array(T.buffer,H+2,I-6),s=j._inflateRaw(e);if($+s.length<=F.length)F.set(s,$)}else if(C==9)j.decode._decodeVC5(T,H,I,F,$,x.t33422);
else if(C==32767)j.decode._decodeARW(x,T,H,I,F,$);else if(C==32773)j.decode._decodePackBits(T,H,I,F,$);
else if(C==32809)j.decode._decodeThunder(T,H,I,F,$);else if(C==34316)j.decode._decodePanasonic(x,T,H,I,F,$);
else if(C==34713)j.decode._decodeNikon(x,l,T,H,I,F,$);else if(C==34676)j.decode._decodeLogLuv32(x,T,H,I,F,$);
else aQ("Unknown compression",C);var g=x.t284?x.t284[0]:1,N=x.t258?Math.min(32,x.t258[0]):1,o=g==2?1:x.t277?x.t277[0]:1,S=N*o>>>3,Z=Math.ceil(N*o*w/8);
if(N==16&&!x.isLE&&x.t33422==null)for(var K=0;K<D;K++){var P=$+K*Z;for(var M=1;M<Z;M+=2){var L=F[P+M];
F[P+M]=F[P+M-1];F[P+M-1]=L}}if(x.t317&&x.t317[0]==2){for(var K=0;K<D;K++){var n=$+K*Z;if(N==16)for(var i=S;
i<Z;i+=2){var b=(F[n+i+1]<<8|F[n+i])+(F[n+i-S+1]<<8|F[n+i-S]);F[n+i]=b&255;F[n+i+1]=b>>>8&255}else if(o==3)for(var i=3;
i<Z;i+=3){F[n+i]=F[n+i]+F[n+i-3]&255;F[n+i+1]=F[n+i+1]+F[n+i-2]&255;F[n+i+2]=F[n+i+2]+F[n+i-1]&255}else for(var i=S;
i<Z;i++)F[n+i]=F[n+i]+F[n+i-S]&255}}};j.decode._decodePanasonic=function(x,l,T,H,I,C){var F=l.buffer,$=x.t2[0],Y=x.t3[0],w=x.t10[0],D=x.t45[0],i=0,e=0,s=0,g=0,N,o,S=D==6?new Uint32Array(18):new Uint8Array(16),Z,K,V,P=[0,0],h=[0,0],M,L=0,n,b,E,G,J=new Uint8Array(16384),X=new Uint16Array(I.buffer);
function B(aR){if(s==0){var N=new Uint8Array(F,T+e+8184,16384-8184),o=new Uint8Array(F,T+e,8184);J.set(N);
J.set(o,N.length);e+=16384}if(D==5){for(Z=0;Z<16;Z++){S[Z]=J[s++];s&=16383}}else{s=s-aR&131071;g=s>>3^16368;
return(J[g]|J[g+1]<<8)>>(s&7)&~(-1<<aR)}}function r(Z){return J[s+15-Z]}function m(){S[0]=r(0)<<6|r(1)>>2;
S[1]=((r(1)&3)<<12|r(2)<<4|r(3)>>4)&16383;S[2]=r(3)>>2&3;S[3]=(r(3)&3)<<8|r(4);S[4]=r(5)<<2|r(6)>>6;
S[5]=(r(6)&63)<<4|r(7)>>4;S[6]=r(7)>>2&3;S[7]=(r(7)&3)<<8|r(8);S[8]=r(9)<<2&1020|r(10)>>6;S[9]=(r(10)<<4|r(11)>>4)&1023;
S[10]=r(11)>>2&3;S[11]=(r(11)&3)<<8|r(12);S[12]=(r(13)<<2&1020|r(14)>>6)&1023;S[13]=(r(14)<<4|r(15)>>4)&1023;
s+=16;g=0}function u(){S[0]=r(0)<<4|r(1)>>4;S[1]=((r(1)&15)<<8|r(2))&4095;S[2]=r(3)>>6&3;S[3]=(r(3)&63)<<2|r(4)>>6;
S[4]=(r(4)&63)<<2|r(5)>>6;S[5]=(r(5)&63)<<2|r(6)>>6;S[6]=r(6)>>4&3;S[7]=(r(6)&15)<<4|r(7)>>4;S[8]=(r(7)&15)<<4|r(8)>>4;
S[9]=(r(8)&15)<<4|r(9)>>4;S[10]=r(9)>>2&3;S[11]=(r(9)&3)<<6|r(10)>>2;S[12]=(r(10)&3)<<6|r(11)>>2;S[13]=(r(11)&3)<<6|r(12)>>2;
S[14]=r(12)&3;S[15]=r(13);S[16]=r(14);S[17]=r(15);s+=16;g=0}function _(){P[0]=0;P[1]=0;h[0]=0;h[1]=0}if(D==7){throw D}else if(D==6){var R=w==12,f=R?u:m,A=R?14:11,ah=R?128:512,a6=R?2048:8192,p=R?16383:65535,d=R?4095:16383,a=$/A,aB=a*16,ai=R?18:14;
for(b=0;b<Y-15;b+=16){var aY=Math.min(16,Y-b),t=aB*aY;J=new Uint8Array(F,T+i,t);s=0;i+=t;for(G=0,E=0;
G<aY;G++,E=0){L=(b+G)*$;for(var c=0;c<a;c++){f();_();V=0;n=0;for(Z=0;Z<A;Z++){M=Z&1;if(Z%3==2){var aH=g<ai?S[g++]:0;
if(aH==3)aH=4;n=ah<<aH;V=1<<aH}var O=g<ai?S[g++]:0;if(P[M]){O*=V;if(n<a6&&h[M]>n)O+=h[M]-n;h[M]=O}else{P[M]=O;
if(O)h[M]=O;else O=h[M]}X[L+E++]=O-15<=p?O-15&p:O+2147483633>>31&d}}}}}else if(D==5){var aI=w==12?10:9;
for(b=0;b<Y;b++){for(E=0;E<$;E+=aI){B(0);if(w==12){X[L++]=((S[1]&15)<<8)+S[0];X[L++]=16*S[2]+(S[1]>>4);
X[L++]=((S[4]&15)<<8)+S[3];X[L++]=16*S[5]+(S[4]>>4);X[L++]=((S[7]&15)<<8)+S[6];X[L++]=16*S[8]+(S[7]>>4);
X[L++]=((S[10]&15)<<8)+S[9];X[L++]=16*S[11]+(S[10]>>4);X[L++]=((S[13]&15)<<8)+S[12];X[L++]=16*S[14]+(S[13]>>4)}else if(w==14){X[L++]=S[0]+((S[1]&63)<<8);
X[L++]=(S[1]>>6)+4*S[2]+((S[3]&15)<<10);X[L++]=(S[3]>>4)+16*S[4]+((S[5]&3)<<12);X[L++]=((S[5]&252)>>2)+(S[6]<<6);
X[L++]=S[7]+((S[8]&63)<<8);X[L++]=(S[8]>>6)+4*S[9]+((S[10]&15)<<10);X[L++]=(S[10]>>4)+16*S[11]+((S[12]&3)<<12);
X[L++]=((S[12]&252)>>2)+(S[13]<<6);X[L++]=S[14]+((S[15]&63)<<8)}}}}else if(D==4){for(b=0;b<Y;b++){for(E=0;
E<$;E++){Z=E%14;M=Z&1;if(Z==0)_();if(Z%3==2)V=4>>3-B(2);if(h[M]){K=B(8);if(K!=0){P[M]-=128<<V;if(P[M]<0||V==4)P[M]&=~(-1<<V);
P[M]+=K<<V}}else{h[M]=B(8);if(h[M]||Z>11)P[M]=h[M]<<4|B(4)}X[L++]=P[E&1]}}}else throw D};j.decode._decodeVC5=function(){var x=[1,0,1,0,2,2,1,1,3,7,1,2,5,25,1,3,6,48,1,4,6,54,1,5,7,111,1,8,7,99,1,6,7,105,12,0,7,107,1,7,8,209,20,0,8,212,1,9,8,220,1,10,9,393,1,11,9,394,32,0,9,416,1,12,9,427,1,13,10,887,1,18,10,784,1,14,10,790,1,15,10,835,60,0,10,852,1,16,10,885,1,17,11,1571,1,19,11,1668,1,20,11,1669,100,0,11,1707,1,21,11,1772,1,22,12,3547,1,29,12,3164,1,24,12,3166,1,25,12,3140,1,23,12,3413,1,26,12,3537,1,27,12,3539,1,28,13,7093,1,35,13,6283,1,30,13,6331,1,31,13,6335,180,0,13,6824,1,32,13,7072,1,33,13,7077,320,0,13,7076,1,34,14,12565,1,36,14,12661,1,37,14,12669,1,38,14,13651,1,39,14,14184,1,40,15,28295,1,46,15,28371,1,47,15,25320,1,42,15,25336,1,43,15,25128,1,41,15,27300,1,44,15,28293,1,45,16,50259,1,48,16,50643,1,49,16,50675,1,50,16,56740,1,53,16,56584,1,51,16,56588,1,52,17,113483,1,61,17,113482,1,60,17,101285,1,55,17,101349,1,56,17,109205,1,57,17,109207,1,58,17,100516,1,54,17,113171,1,59,18,202568,1,62,18,202696,1,63,18,218408,1,64,18,218412,1,65,18,226340,1,66,18,226356,1,67,18,226358,1,68,19,402068,1,69,19,405138,1,70,19,405394,1,71,19,436818,1,72,19,436826,1,73,19,452714,1,75,19,452718,1,76,19,452682,1,74,20,804138,1,77,20,810279,1,78,20,810790,1,79,20,873638,1,80,20,873654,1,81,20,905366,1,82,20,905430,1,83,20,905438,1,84,21,1608278,1,85,21,1620557,1,86,21,1621582,1,87,21,1621583,1,88,21,1747310,1,89,21,1810734,1,90,21,1810735,1,91,21,1810863,1,92,21,1810879,1,93,22,3621725,1,99,22,3621757,1,100,22,3241112,1,94,22,3494556,1,95,22,3494557,1,96,22,3494622,1,97,22,3494623,1,98,23,6482227,1,102,23,6433117,1,101,23,6989117,1,103,23,6989119,1,105,23,6989118,1,104,23,7243449,1,106,23,7243512,1,107,24,13978233,1,111,24,12964453,1,109,24,12866232,1,108,24,14486897,1,113,24,13978232,1,110,24,14486896,1,112,24,14487026,1,114,24,14487027,1,115,25,25732598,1,225,25,25732597,1,189,25,25732596,1,188,25,25732595,1,203,25,25732594,1,202,25,25732593,1,197,25,25732592,1,207,25,25732591,1,169,25,25732590,1,223,25,25732589,1,159,25,25732522,1,235,25,25732579,1,152,25,25732575,1,192,25,25732489,1,179,25,25732573,1,201,25,25732472,1,172,25,25732576,1,149,25,25732488,1,178,25,25732566,1,120,25,25732571,1,219,25,25732577,1,150,25,25732487,1,127,25,25732506,1,211,25,25732548,1,125,25,25732588,1,158,25,25732486,1,247,25,25732467,1,238,25,25732508,1,163,25,25732552,1,228,25,25732603,1,183,25,25732513,1,217,25,25732587,1,168,25,25732520,1,122,25,25732484,1,128,25,25732562,1,249,25,25732505,1,187,25,25732504,1,186,25,25732483,1,136,25,25928905,1,181,25,25732560,1,255,25,25732500,1,230,25,25732482,1,135,25,25732555,1,233,25,25732568,1,222,25,25732583,1,145,25,25732481,1,134,25,25732586,1,167,25,25732521,1,248,25,25732518,1,209,25,25732480,1,243,25,25732512,1,216,25,25732509,1,164,25,25732547,1,140,25,25732479,1,157,25,25732544,1,239,25,25732574,1,191,25,25732564,1,251,25,25732478,1,156,25,25732546,1,139,25,25732498,1,242,25,25732557,1,133,25,25732477,1,162,25,25732515,1,213,25,25732584,1,165,25,25732514,1,212,25,25732476,1,227,25,25732494,1,198,25,25732531,1,236,25,25732530,1,234,25,25732529,1,117,25,25732528,1,215,25,25732527,1,124,25,25732526,1,123,25,25732525,1,254,25,25732524,1,253,25,25732523,1,148,25,25732570,1,218,25,25732580,1,146,25,25732581,1,147,25,25732569,1,224,25,25732533,1,143,25,25732540,1,184,25,25732541,1,185,25,25732585,1,166,25,25732556,1,132,25,25732485,1,129,25,25732563,1,250,25,25732578,1,151,25,25732501,1,119,25,25732502,1,193,25,25732536,1,176,25,25732496,1,245,25,25732553,1,229,25,25732516,1,206,25,25732582,1,144,25,25732517,1,208,25,25732558,1,137,25,25732543,1,241,25,25732466,1,237,25,25732507,1,190,25,25732542,1,240,25,25732551,1,131,25,25732554,1,232,25,25732565,1,252,25,25732475,1,171,25,25732493,1,205,25,25732492,1,204,25,25732491,1,118,25,25732490,1,214,25,25928904,1,180,25,25732549,1,126,25,25732602,1,182,25,25732539,1,175,25,25732545,1,141,25,25732559,1,138,25,25732537,1,177,25,25732534,1,153,25,25732503,1,194,25,25732606,1,160,25,25732567,1,121,25,25732538,1,174,25,25732497,1,246,25,25732550,1,130,25,25732572,1,200,25,25732474,1,170,25,25732511,1,221,25,25732601,1,196,25,25732532,1,142,25,25732519,1,210,25,25732495,1,199,25,25732605,1,155,25,25732535,1,154,25,25732499,1,244,25,25732510,1,220,25,25732600,1,195,25,25732607,1,161,25,25732604,1,231,25,25732473,1,173,25,25732599,1,226,26,51465122,1,116,26,51465123,0,1],l,T,H,I=[3,3,3,3,2,2,2,1,1,1],C=24576,F=16384,$=8192,w=F|$;
function D(V){var M=V[1],n=V[0][M>>>3]>>>7-(M&7)&1;V[1]++;return n}function i(V,M){if(l==null){l={};
for(var n=0;n<x.length;n+=4)l[x[n+1]]=x.slice(n,n+4)}var E=D(V),J=l[E];while(J==null){E=E<<1|D(V);J=l[E]}var X=J[3];
if(X!=0)X=D(V)==0?X:-X;M[0]=J[2];M[1]=X}function s(V,M){for(var n=0;n<M;n++){if((V&1)==1)V++;V=V>>>1}return V}function g(V,M){return V>>M}function N(V,M,n,E,J,X){M[n]=g(g(11*V[J]-4*V[J+X]+V[J+X+X]+4,3)+V[E],1);
M[n+X]=g(g(5*V[J]+4*V[J+X]-V[J+X+X]+4,3)-V[E],1)}function o(V,M,n,E,J,X){var r=V[J-X]-V[J+X],u=V[J],R=V[E];
M[n]=g(g(r+4,3)+u+R,1);M[n+X]=g(g(-r+4,3)+u-R,1)}function S(V,M,n,E,J,X){M[n]=g(g(5*V[J]+4*V[J-X]-V[J-X-X]+4,3)+V[E],1);
M[n+X]=g(g(11*V[J]-4*V[J-X]+V[J-X-X]+4,3)-V[E],1)}function Z(V){V=V<0?0:V>4095?4095:V;V=H[V]>>>2;return V}function K(V,M,n,E,J,X){E=new Uint16Array(E.buffer);
var r=Date.now(),u=j._binBE,R=M+n,f,a6,p,d,a,aB,c,aH,O,aR,ak,ad,y,aj,U,ay,b5,aa;M+=4;var Q=X[0]==1;while(M<R){var W=u.readShort(V,M),v=u.readUshort(V,M+2);
M+=4;if(W==12)f=v;else if(W==20)a6=v;else if(W==21)p=v;else if(W==48)d=v;else if(W==53)a=v;else if(W==35)aB=v;
else if(W==62)c=v;else if(W==101)aH=v;else if(W==109)O=v;else if(W==84)aR=v;else if(W==106)ak=v;else if(W==107)ad=v;
else if(W==108)y=v;else if(W==102)aj=v;else if(W==104)U=v;else if(W==105)ay=v;else{var k=W<0?-W:W,aF=k&65280,aU=0;
if(k&w){if(k&$){aU=v&65535;aU+=(k&255)<<16}else{aU=v&65535}}if((k&C)==C){if(b5==null){b5=[];for(var aA=0;
aA<4;aA++)b5[aA]=new Int16Array((a6>>>1)*(p>>>1));aa=new Int16Array((a6>>>1)*(p>>>1));T=new Int16Array(1024);
for(var aA=0;aA<1024;aA++){var av=aA-512,a_=Math.abs(av),f=Math.floor(768*a_*a_*a_/(255*255*255))+a_;
T[aA]=Math.sign(av)*f}H=new Uint16Array(4096);var an=(1<<16)-1;for(var aA=0;aA<4096;aA++){var aD=aA,b0=an*(Math.pow(113,aD/4095)-1)/112;
H[aA]=Math.min(b0,an)}}var aO=b5[c],aE=s(a6,1+I[d]),ab=s(p,1+I[d]);if(d==0){for(var ao=0;ao<ab;ao++)for(var ax=0;
ax<aE;ax++){var aw=M+(ao*aE+ax)*2;aO[ao*(a6>>>1)+ax]=V[aw]<<8|V[aw+1]}}else{var ag=[V,M*8],b4=[],b2=0,aW=aE*ab,aG=[0,0],af=0,v=0;
while(b2<aW){i(ag,aG);af=aG[0];v=aG[1];while(af>0){b4[b2++]=v;af--}}var aZ=(d-1)%3,aq=aZ!=1?aE:0,a7=aZ!=0?ab:0;
for(var ao=0;ao<ab;ao++){var aK=(ao+a7)*(a6>>>1)+aq,ae=ao*aE;for(var ax=0;ax<aE;ax++)aO[aK+ax]=T[b4[ae+ax]+512]*a}if(aZ==2){var U=a6>>>1,aJ=aE*2,aM=ab*2;
for(var ao=0;ao<ab;ao++){for(var ax=0;ax<aJ;ax++){var aA=ao*2*U+ax,ap=ao*U+ax,a5=ab*U+ap;if(ao==0)N(aO,aa,aA,a5,ap,U);
else if(ao==ab-1)S(aO,aa,aA,a5,ap,U);else o(aO,aa,aA,a5,ap,U)}}var aX=aO;aO=aa;aa=aX;for(var ao=0;ao<aM;
ao++){for(var ax=0;ax<aE;ax++){var aA=ao*U+2*ax,ap=ao*U+ax,a5=aE+ap;if(ax==0)N(aO,aa,aA,a5,ap,1);else if(ax==aE-1)S(aO,aa,aA,a5,ap,1);
else o(aO,aa,aA,a5,ap,1)}}var aX=aO;aO=aa;aa=aX;var b8=[],at=2-~~((d-1)/3);for(var az=0;az<3;az++)b8[az]=O>>14-az*2&3;
var a2=b8[at];if(a2!=0)for(var ao=0;ao<aM;ao++)for(var ax=0;ax<aJ;ax++){var aA=ao*U+ax;aO[aA]=aO[aA]<<a2}}}if(d==9&&c==3){var ac=b5[0],b3=b5[1],aS=b5[2],a3=b5[3];
for(var ao=0;ao<p;ao+=2)for(var ax=0;ax<a6;ax+=2){var al=ao*a6+ax,aw=(ao>>>1)*(a6>>>1)+(ax>>>1),as=ac[aw],aN=b3[aw]-2048,a4=aS[aw]-2048,a$=a3[aw]-2048,aP=(aN<<1)+as,aC=(a4<<1)+as,ar=as+a$,am=as-a$;
if(Q){E[al]=Z(ar);E[al+1]=Z(aC);E[al+a6]=Z(aP);E[al+a6+1]=Z(am)}else{E[al]=Z(aP);E[al+1]=Z(ar);E[al+a6]=Z(am);
E[al+a6+1]=Z(aC)}}}M+=aU*4}else if(k==16388){M+=aU*4}else if(aF==8192||aF==8448||aF==9216){}else throw k.toString(16)}}console.log(Date.now()-r)}return K}();
j.decode._decodeLogLuv32=function(x,l,T,H,I,C){var F=x.width,$=F*4,Y=0,w=new Uint8Array($);while(Y<H){var D=0;
while(D<$){var i=l[T+Y];Y++;if(i<128){for(var e=0;e<i;e++)w[D+e]=l[T+Y+e];D+=i;Y+=i}else{i=i-126;for(var e=0;
e<i;e++)w[D+e]=l[T+Y];D+=i;Y++}}for(var s=0;s<F;s++){I[C+0]=w[s];I[C+1]=w[s+F];I[C+2]=w[s+F*2];I[C+4]=w[s+F*3];
C+=6}}};j.decode._ljpeg_diff=function(x,l,T){var H=j.decode._getbithuff,I,C;I=H(x,l,T[0],T);C=H(x,l,I,0);
if((C&1<<I-1)==0)C-=(1<<I)-1;return C};j.decode._decodeARW=function(x,l,T,H,I,C){var F=x.t256[0],$=x.t257[0],Y=x.t258[0],w=x.isLE?j._binLE:j._binBE,D=F*$==H||F*$*1.5==H,Z,S,E,G,J,X,B,r,m,g,u;
if(!D){$+=8;var i=[T,0,0,0],e=new Uint16Array(32770),s=[3857,3856,3599,3342,3085,2828,2571,2314,2057,1800,1543,1286,1029,772,771,768,514,513],g,N,o,S,Z,K=0,V=j.decode._ljpeg_diff;
e[0]=15;for(o=g=0;g<18;g++){var P=32768>>>(s[g]>>>8);for(var N=0;N<P;N++)e[++o]=s[g]}for(S=F;S--;)for(Z=0;
Z<$+1;Z+=2){if(Z==$)Z=1;K+=V(l,i,e);if(Z<$){var h=K&4095;j.decode._putsF(I,(Z*F+S)*Y,h<<16-Y)}}return}if(F*$*1.5==H){for(var g=0;
g<H;g+=3){var M=l[T+g+0],L=l[T+g+1],n=l[T+g+2];I[C+g]=L<<4|M>>>4;I[C+g+1]=M<<4|n>>>4;I[C+g+2]=n<<4|L>>>4}return}var b=new Uint16Array(16),_=new Uint8Array(F+1);
for(Z=0;Z<$;Z++){for(var R=0;R<F;R++)_[R]=l[T++];for(u=0,S=0;S<F-30;u+=16){G=2047&(E=w.readUint(_,u));
J=2047&E>>>11;X=15&E>>>22;B=15&E>>>26;for(r=0;r<4&&128<<r<=G-J;r++);for(m=30,g=0;g<16;g++)if(g==X)b[g]=G;
else if(g==B)b[g]=J;else{b[g]=((w.readUshort(_,u+(m>>3))>>>(m&7)&127)<<r)+J;if(b[g]>2047)b[g]=2047;m+=7}for(g=0;
g<16;g++,S+=2){var h=b[g]<<1;j.decode._putsF(I,(Z*F+S)*Y,h<<16-Y)}S-=S&1?1:31}}};j.decode._decodeNikon=function(x,l,T,H,I,C,F){var $=[[0,0,1,5,1,1,1,1,1,1,2,0,0,0,0,0,0,5,4,3,6,2,7,1,0,8,9,11,10,12],[0,0,1,5,1,1,1,1,1,1,2,0,0,0,0,0,0,57,90,56,39,22,5,4,3,2,1,0,11,12,12],[0,0,1,4,2,3,1,2,0,0,0,0,0,0,0,0,0,5,4,6,3,7,2,8,1,9,0,10,11,12],[0,0,1,4,3,1,1,1,1,1,2,0,0,0,0,0,0,5,6,4,7,8,3,9,2,1,0,10,11,12,13,14],[0,0,1,5,1,1,1,1,1,1,1,2,0,0,0,0,0,8,92,75,58,41,7,6,5,4,3,2,1,0,13,14],[0,0,1,4,2,2,3,1,2,0,0,0,0,0,0,0,0,7,6,8,5,9,4,10,3,11,12,2,0,1,13,14]],Y=x.t256[0],w=x.t257[0],D=x.t258[0],i=0,e=0,s=j.decode._make_decoder,g=j.decode._getbithuff,N=l[0].exifIFD.makerNote,o=N.t150?N.t150:N.t140,S=0,B=0,L,m,u,_,R,f,A=0;
if(N.t147&&N.t147[0]==2){var Z=Math.ceil(Y/10),K=Z*16,V=Y*3>>>1;for(var P=0;P<w;P++){for(var M=0;M<Z;
M++){for(var L=0;L<15;L++)C[P*V+M*15+L]=T[H+P*K+M*16+L]}}return}var n=o[S++],b=o[S++];if(n==73||b==88)S+=2110;
if(n==70)i=2;if(D==14)i+=3;var E=[[0,0],[0,0]],G=x.isLE?j._binLE:j._binBE;for(var L=0;L<2;L++)for(var J=0;
J<2;J++){E[L][J]=G.readShort(o,S);S+=2}var X=1<<D&32767,r=G.readShort(o,S);S+=2;if(r>1)B=Math.floor(X/(r-1));
if(n==68&&b==32&&B>0)e=G.readShort(o,562);var ah=[0,0],a6=s($[i]),p=[H,0,0,0];for(A=m=0;m<w;m++){if(e&&m==e){a6=s($[i+1])}for(u=0;
u<Y;u++){L=g(T,p,a6[0],a6);_=L&15;R=L>>>4;f=(g(T,p,_-R,0)<<1)+1<<R>>>1;if((f&1<<_-1)==0)f-=(1<<_)-(R==0?1:0);
if(u<2)ah[u]=E[m&1][u]+=f;else ah[u&1]+=f;var d=Math.min(Math.max(ah[u&1],0),(1<<D)-1),a=(m*Y+u)*D;j.decode._putsF(C,a,d<<16-D)}}};
j.decode._putsF=function(x,l,T){T=T<<8-(l&7);var H=l>>>3;x[H]|=T>>>16;x[H+1]|=T>>>8;x[H+2]|=T};j.decode._getbithuff=function(x,l,T,H){var I=0,C=j.decode._get_byte,F,$=l[0],Y=l[1],w=l[2],D=l[3];
if(T==0||w<0)return 0;while(!D&&w<T&&(F=x[$++])!=-1&&!(D=I&&F==255&&x[$++])){Y=(Y<<8)+F;w+=8}F=Y<<32-w>>>32-T;
if(H){w-=H[F+1]>>>8;F=H[F+1]&255}else w-=T;if(w<0)throw"e";l[0]=$;l[1]=Y;l[2]=w;l[3]=D;return F};j.decode._make_decoder=function(x){var l,T,H,I,$,Y=[],w=17;
for(l=16;l!=0&&!x[l];l--);Y[0]=l;for(H=T=1;T<=l;T++)for(I=0;I<x[T];I++,++w)for($=0;$<1<<l-T;$++)if(H<=1<<l)Y[H++]=T<<8|x[w];
return Y};j.decode._decodeNewJPEG=function(x,l,T,H,I,C){H=Math.min(H,l.length-T);var F=x.t347,$=F?F.length:0,Y=new Uint8Array($+H);
if(F){var w=216,D=217,i=0;for(var e=0;e<$-1;e++){if(F[e]==255&&F[e+1]==D)break;Y[i++]=F[e]}var s=l[T],g=l[T+1];
if(s!=255||g!=w){Y[i++]=s;Y[i++]=g}for(var e=2;e<H;e++)Y[i++]=l[T+e]}else for(var e=0;e<H;e++)Y[e]=l[T+e];
if(x.t262[0]==32803||x.t259[0]==7&&x.t262[0]==34892){var N=x.t258[0],o=j.LosslessJpegDecode(Y),S=o[0],Z=S.length;
if(o[3]==4&&x.t29456){var K=S.slice(0);K.fill(0);var V=o[1],P=o[2],h=V*2;for(var M=0;M<P;M++)for(var L=0;
L<V;L++){var n=M*V*4+L*2,b=n+L*2;K[n]=S[b];K[n+1]=S[b+1];K[n+h]=S[b+2];K[n+h+1]=S[b+3]}S=K}if(!1){}else if(N==16){if(x.isLE)for(var e=0;
e<Z;e++){I[C+(e<<1)]=S[e]&255;I[C+(e<<1)+1]=S[e]>>>8}else for(var e=0;e<Z;e++){I[C+(e<<1)]=S[e]>>>8;
I[C+(e<<1)+1]=S[e]&255}}else if(N==14||N==12||N==10){var E=16-N;for(var e=0;e<Z;e++)j.decode._putsF(I,e*N,S[e]<<E)}else if(N==8){for(var e=0;
e<Z;e++)I[C+e]=S[e]}else throw new Error("unsupported bit depth "+N)}else{var G=new j.JpegDecoder;G.parse(Y);
var J=G.getData({width:G.width,height:G.height,forceRGB:!0,isSourcePDF:!1});for(var e=0;e<J.length;e++)I[C+e]=J[e]}if(x.t262[0]==6)x.t262[0]=2};
j.decode._decodeOldJPEGInit=function(x,l,T,H){var I=216,C=217,F=219,$=196,Y=221,w=192,D=218,i=0,e=0,s,g,N=!1,o,S,Z,K=x.t513,V=K?K[0]:0,P=x.t514,h=P?P[0]:0,M=x.t324||x.t273||K,L=x.t530,n=0,b=0,E=x.t277?x.t277[0]:1,G=x.t515;
if(M){e=M[0];N=M.length>1}if(!N){if(l[T]==255&&l[T+1]==I)return{jpegOffset:T};if(K!=null){if(l[T+V]==255&&l[T+V+1]==I)i=T+V;
else aQ("JPEGInterchangeFormat does not point to SOI");if(P==null)aQ("JPEGInterchangeFormatLength field is missing");
else if(V>=e||V+h<=e)aQ("JPEGInterchangeFormatLength field value is invalid");if(i!=null)return{jpegOffset:i}}}if(L!=null){n=L[0];
b=L[1]}if(K!=null)if(P!=null)if(h>=2&&V+h<=e){if(l[T+V+h-2]==255&&l[T+V+h-1]==I)s=new Uint8Array(h-2);
else s=new Uint8Array(h);for(o=0;o<s.length;o++)s[o]=l[T+V+o];aQ("Incorrect JPEG interchange format: using JPEGInterchangeFormat offset to derive tables")}else aQ("JPEGInterchangeFormat+JPEGInterchangeFormatLength > offset to first strip or tile");
if(s==null){var J=0,X=[];X[J++]=255;X[J++]=I;var B=x.t519;if(B==null)throw new Error("JPEGQTables tag is missing");
for(o=0;o<B.length;o++){X[J++]=255;X[J++]=F;X[J++]=0;X[J++]=67;X[J++]=o;for(S=0;S<64;S++)X[J++]=l[T+B[o]+S]}for(Z=0;
Z<2;Z++){var r=x[Z==0?"t520":"t521"];if(r==null)throw new Error((Z==0?"JPEGDCTables":"JPEGACTables")+" tag is missing");
for(o=0;o<r.length;o++){X[J++]=255;X[J++]=$;var m=19;for(S=0;S<16;S++)m+=l[T+r[o]+S];X[J++]=m>>>8;X[J++]=m&255;
X[J++]=o|Z<<4;for(S=0;S<16;S++)X[J++]=l[T+r[o]+S];for(S=0;S<m;S++)X[J++]=l[T+r[o]+16+S]}}X[J++]=255;
X[J++]=w;X[J++]=0;X[J++]=8+3*E;X[J++]=8;X[J++]=x.height>>>8&255;X[J++]=x.height&255;X[J++]=x.width>>>8&255;
X[J++]=x.width&255;X[J++]=E;if(E==1){X[J++]=1;X[J++]=17;X[J++]=0}else for(o=0;o<3;o++){X[J++]=o+1;X[J++]=o!=0?17:(n&15)<<4|b&15;
X[J++]=o}if(G!=null&&G[0]!=0){X[J++]=255;X[J++]=Y;X[J++]=0;X[J++]=4;X[J++]=G[0]>>>8&255;X[J++]=G[0]&255}s=new Uint8Array(X)}var u=-1;
o=0;while(o<s.length-1){if(s[o]==255&&s[o+1]==w){u=o;break}o++}if(u==-1){var _=new Uint8Array(s.length+10+3*E);
_.set(s);var R=s.length;u=s.length;s=_;s[R++]=255;s[R++]=w;s[R++]=0;s[R++]=8+3*E;s[R++]=8;s[R++]=x.height>>>8&255;
s[R++]=x.height&255;s[R++]=x.width>>>8&255;s[R++]=x.width&255;s[R++]=E;if(E==1){s[R++]=1;s[R++]=17;s[R++]=0}else for(o=0;
o<3;o++){s[R++]=o+1;s[R++]=o!=0?17:(n&15)<<4|b&15;s[R++]=o}}if(l[e]==255&&l[e+1]==D){var f=l[e+2]<<8|l[e+3];
g=new Uint8Array(f+2);g[0]=l[e];g[1]=l[e+1];g[2]=l[e+2];g[3]=l[e+3];for(o=0;o<f-2;o++)g[o+4]=l[e+o+4]}else{g=new Uint8Array(2+6+2*E);
var A=0;g[A++]=255;g[A++]=D;g[A++]=0;g[A++]=6+2*E;g[A++]=E;if(E==1){g[A++]=1;g[A++]=0}else for(o=0;o<3;
o++){g[A++]=o+1;g[A++]=o<<4|o}g[A++]=0;g[A++]=63;g[A++]=0}return{jpegOffset:T,tables:s,sosMarker:g,sofPosition:u}};
j.decode._decodeOldJPEG=function(x,l,T,H,I,C){var F,$,Y,w,D,i=j.decode._decodeOldJPEGInit(x,l,T,H);if(i.jpegOffset!=null){$=T+H-i.jpegOffset;
w=new Uint8Array($);for(F=0;F<$;F++)w[F]=l[i.jpegOffset+F]}else{Y=i.tables.length;w=new Uint8Array(Y+i.sosMarker.length+H+2);
w.set(i.tables);D=Y;w[i.sofPosition+5]=x.height>>>8&255;w[i.sofPosition+6]=x.height&255;w[i.sofPosition+7]=x.width>>>8&255;
w[i.sofPosition+8]=x.width&255;if(l[T]!=255||l[T+1]!=SOS){w.set(i.sosMarker,D);D+=sosMarker.length}for(F=0;
F<H;F++)w[D++]=l[T+F];w[D++]=255;w[D++]=EOI}var e=new j.JpegDecoder;e.parse(w);var s=e.getData({width:e.width,height:e.height,forceRGB:!0,isSourcePDF:!1}),g=e.width*e.height;
if(x.t262&&x.t262[0]==1)for(var F=0;F<g;F++)I[C+F]=s[F*3];else for(var F=0;F<s.length;F++)I[C+F]=s[F];
if(x.t262&&x.t262[0]==6)x.t262[0]=2};j.decode._decodePackBits=function(x,l,T,H,I){var C=new Int8Array(x.buffer),F=new Int8Array(H.buffer),$=l+T;
while(l<$){var Y=C[l];l++;if(Y>=0&&Y<128)for(var w=0;w<Y+1;w++){F[I]=C[l];I++;l++}if(Y>=-127&&Y<0){for(var w=0;
w<-Y+1;w++){F[I]=C[l];I++}l++}}return I};j.decode._decodeThunder=function(x,l,T,H,I){var C=[0,1,0,-1],F=[0,1,2,3,0,-3,-2,-1],$=l+T,Y=I*2,w=0;
while(l<$){var D=x[l],i=D>>>6,e=D&63;l++;if(i==3){w=e&15;H[Y>>>1]|=w<<4*(1-Y&1);Y++}if(i==0)for(var s=0;
s<e;s++){H[Y>>>1]|=w<<4*(1-Y&1);Y++}if(i==2)for(var s=0;s<2;s++){var g=e>>>3*(1-s)&7;if(g!=4){w+=F[g];
H[Y>>>1]|=w<<4*(1-Y&1);Y++}}if(i==1)for(var s=0;s<3;s++){var g=e>>>2*(2-s)&3;if(g!=2){w+=C[g];H[Y>>>1]|=w<<4*(1-Y&1);
Y++}}}};j.decode._dmap={"1":0,"011":1,"000011":2,"0000011":3,"010":-1,"000010":-2,"0000010":-3};j.decode._lens=function(){var x=function(Y,w,D,i){for(var e=0;
e<w.length;e++)Y[w[e]]=D+e*i},l="00110101,000111,0111,1000,1011,1100,1110,1111,10011,10100,00111,01000,001000,000011,110100,110101,"+"101010,101011,0100111,0001100,0001000,0010111,0000011,0000100,0101000,0101011,0010011,0100100,0011000,00000010,00000011,00011010,"+"00011011,00010010,00010011,00010100,00010101,00010110,00010111,00101000,00101001,00101010,00101011,00101100,00101101,00000100,00000101,00001010,"+"00001011,01010010,01010011,01010100,01010101,00100100,00100101,01011000,01011001,01011010,01011011,01001010,01001011,00110010,00110011,00110100",T="0000110111,010,11,10,011,0011,0010,00011,000101,000100,0000100,0000101,0000111,00000100,00000111,000011000,"+"0000010111,0000011000,0000001000,00001100111,00001101000,00001101100,00000110111,00000101000,00000010111,00000011000,000011001010,000011001011,000011001100,000011001101,000001101000,000001101001,"+"000001101010,000001101011,000011010010,000011010011,000011010100,000011010101,000011010110,000011010111,000001101100,000001101101,000011011010,000011011011,000001010100,000001010101,000001010110,000001010111,"+"000001100100,000001100101,000001010010,000001010011,000000100100,000000110111,000000111000,000000100111,000000101000,000001011000,000001011001,000000101011,000000101100,000001011010,000001100110,000001100111",H="11011,10010,010111,0110111,00110110,00110111,01100100,01100101,01101000,01100111,011001100,011001101,011010010,011010011,011010100,011010101,011010110,"+"011010111,011011000,011011001,011011010,011011011,010011000,010011001,010011010,011000,010011011",I="0000001111,000011001000,000011001001,000001011011,000000110011,000000110100,000000110101,0000001101100,0000001101101,0000001001010,0000001001011,0000001001100,"+"0000001001101,0000001110010,0000001110011,0000001110100,0000001110101,0000001110110,0000001110111,0000001010010,0000001010011,0000001010100,0000001010101,0000001011010,"+"0000001011011,0000001100100,0000001100101",C="00000001000,00000001100,00000001101,000000010010,000000010011,000000010100,000000010101,000000010110,000000010111,000000011100,000000011101,000000011110,000000011111";
l=l.split(",");T=T.split(",");H=H.split(",");I=I.split(",");C=C.split(",");var F={},$={};x(F,l,0,1);
x(F,H,64,64);x(F,C,1792,64);x($,T,0,1);x($,I,64,64);x($,C,1792,64);return[F,$]}();j.decode._decodeG4=function(x,l,T,H,I,C,F){var $=j.decode,Y=l<<3,w=0,D="",i=[],e=[],g=0,N=0,o=0,S=0,Z=0,K=0,P=0,M="",L=0;
for(var s=0;s<C;s++)e.push(0);e=$._makeDiff(e);var n=Math.ceil(C/8)*8;while(Y>>>3<l+T){S=$._findDiff(e,g+(g==0?0:1),1-K),Z=$._findDiff(e,S,K);
var b=0;if(F==1)b=x[Y>>>3]>>>7-(Y&7)&1;if(F==2)b=x[Y>>>3]>>>(Y&7)&1;Y++;D+=b;if(M=="H"){if($._lens[K][D]!=null){var E=$._lens[K][D];
D="";w+=E;if(E<64){$._addNtimes(i,w,K);g+=w;K=1-K;w=0;L--;if(L==0)M=""}}}else{if(D=="0001"){D="";$._addNtimes(i,Z-g,K);
g=Z}if(D=="001"){D="";M="H";L=2}if($._dmap[D]!=null){N=S+$._dmap[D];$._addNtimes(i,N-g,K);g=N;D="";K=1-K}}if(i.length==C&&M==""){$._writeBits(i,H,I*8+P*n);
K=0;P++;g=0;e=$._makeDiff(i);i=[]}}};j.decode._findDiff=function(x,l,T){for(var H=0;H<x.length;H+=2)if(x[H]>=l&&x[H+1]==T)return x[H]};
j.decode._makeDiff=function(x){var l=[];if(x[0]==1)l.push(0,1);for(var T=1;T<x.length;T++)if(x[T-1]!=x[T])l.push(T,x[T]);
l.push(x.length,0,x.length,1);return l};j.decode._decodeG2=function(x,l,T,H,I,C,F){var $=j.decode,Y=l<<3,w=0,D="",i=[],e=0,s=0,g=Math.ceil(C/8)*8;
while(Y>>>3<l+T){var N=0;if(F==1)N=x[Y>>>3]>>>7-(Y&7)&1;if(F==2)N=x[Y>>>3]>>>(Y&7)&1;Y++;D+=N;w=$._lens[e][D];
if(w!=null){$._addNtimes(i,w,e);D="";if(w<64)e=1-e;if(i.length==C){$._writeBits(i,H,I*8+s*g);i=[];s++;
e=0;if((Y&7)!=0)Y+=8-(Y&7);if(w>=64)Y+=8}}}};j.decode._decodeG3=function(x,l,T,H,I,C,F,$){var Y=j.decode,w=l<<3,D=0,i="",e=[],s=[],N=0,o=0,S=0,Z=0,K=0,P=0,M="",L=0,n=!0;
for(var g=0;g<C;g++)e.push(0);var h=-1,b=Math.ceil(C/8)*8;while(w>>>3<l+T){Z=Y._findDiff(s,N+(N==0?0:1),1-P),K=Y._findDiff(s,Z,P);
var E=0;if(F==1)E=x[w>>>3]>>>7-(w&7)&1;if(F==2)E=x[w>>>3]>>>(w&7)&1;w++;i+=E;if(n){if(Y._lens[P][i]!=null){var G=Y._lens[P][i];
i="";D+=G;if(G<64){Y._addNtimes(e,D,P);P=1-P;D=0}}}else{if(M=="H"){if(Y._lens[P][i]!=null){var G=Y._lens[P][i];
i="";D+=G;if(G<64){Y._addNtimes(e,D,P);N+=D;P=1-P;D=0;L--;if(L==0)M=""}}}else{if(i=="0001"){i="";Y._addNtimes(e,K-N,P);
N=K}if(i=="001"){i="";M="H";L=2}if(Y._dmap[i]!=null){o=Z+Y._dmap[i];Y._addNtimes(e,o-N,P);N=o;i="";P=1-P}}}if(i.endsWith("000000000001")){if(h>=0)Y._writeBits(e,H,I*8+h*b);
if($){if(F==1)n=(x[w>>>3]>>>7-(w&7)&1)==1;if(F==2)n=(x[w>>>3]>>>(w&7)&1)==1;w++}i="";P=0;h++;N=0;s=Y._makeDiff(e);
e=[]}}if(e.length==C)Y._writeBits(e,H,I*8+h*b)};j.decode._addNtimes=function(x,l,T){for(var H=0;H<l;
H++)x.push(T)};j.decode._writeBits=function(x,l,T){for(var H=0;H<x.length;H++)l[T+H>>>3]|=x[H]<<7-(T+H&7)};
j.decode._decodeLZW=j.decode._decodeLZW=function(){var x,l,H,I,C=0,F=0,$=0,Y=0,w=function(){var S=x>>>3,K=l[S]<<16|l[S+1]<<8|l[S+2],P=K>>>24-(x&7)-F&(1<<F)-1;
x+=F;return P},D=new Uint32Array(4096*4),i=0,e=function(S){if(S==i)return;i=S;$=1<<S;Y=$+1;for(var K=0;
K<Y+1;K++){D[4*K]=D[4*K+3]=K;D[4*K+1]=65535;D[4*K+2]=1}},s=function(S){F=S+1;C=Y+1},g=function(S){var K=S<<2,P=D[K+2],h=I+P-1;
while(K!=65535){H[h--]=D[K];K=D[K+1]}I+=P},N=function(S,K){var P=C<<2,h=S<<2;D[P]=D[(K<<2)+3];D[P+1]=h;
D[P+2]=D[h+2]+1;D[P+3]=D[h+3];C++;if(C+1==1<<F&&F!=12)F++},o=function(S,K,P,h,M,n){x=K<<3;l=S;H=h;I=M;
var b=K+P<<3,G=0,J=0;e(n);s(n);while(x<b&&(G=w())!=Y){if(G==$){s(n);G=w();if(G==Y)break;g(G)}else{if(G<C){g(G);
N(J,G)}else{N(J,J);g(C-1)}}J=G}return I};return o}();j.tags={};j._types=function(){var x=new Array(250);
x.fill(0);x=x.concat([0,0,0,0,4,3,3,3,3,3,0,0,3,0,0,0,3,0,0,2,2,2,2,4,3,0,0,3,4,4,3,3,5,5,3,2,5,5,0,0,0,0,4,4,0,0,3,3,0,0,0,0,0,0,0,2,2,0,0,0,0,0,0,0,0,2,2,3,5,5,3,0,3,3,4,4,4,3,4,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);
var l={33432:2,33434:5,33437:5,34665:4,34850:3,34853:4,34855:3,34864:3,34866:4,36864:7,36867:2,36868:2,37121:7,37377:10,37378:5,37380:10,37381:5,37383:3,37384:3,37385:3,37386:5,37510:7,37520:2,37521:2,37522:2,40960:7,40961:3,40962:4,40963:4,40965:4,41486:5,41487:5,41488:3,41985:3,41986:3,41987:3,41988:5,41989:3,41990:3,41993:3,41994:3,41995:7,41996:3,42032:2,42033:2,42034:5,42036:2,42037:2,59932:7};
return{basic:{main:x,rest:l},gps:{main:[1,2,5,2,5,1,5,5,0,9],rest:{18:2,29:2}}}}();j._readIFD=function(x,l,T,H,I,C){var F=x.readUshort(l,T);
T+=2;var $={};if(C.debug)aQ("   ".repeat(I),H.length-1,">>>----------------");for(var Y=0;Y<F;Y++){var w=x.readUshort(l,T);
T+=2;var D=x.readUshort(l,T);T+=2;var i=x.readUint(l,T);T+=4;var e=x.readUint(l,T);T+=4;var s=[];if(D==1||D==7){var g=i<5?T-4:e;
if(g+i>l.buffer.byteLength)i=l.buffer.byteLength-g;s=new Uint8Array(l.buffer,g,i)}if(D==2){var N=i<5?T-4:e,o=l[N],S=Math.max(0,Math.min(i-1,l.length-N));
if(o<128||S==0)s.push(x.readASCII(l,N,S));else s=new Uint8Array(l.buffer,N,S)}if(D==3){for(var Z=0;Z<i;
Z++)s.push(x.readUshort(l,(i<3?T-4:e)+2*Z))}if(D==4||D==13){for(var Z=0;Z<i;Z++)s.push(x.readUint(l,(i<2?T-4:e)+4*Z))}if(D==5||D==10){var K=D==5?x.readUint:x.readInt;
for(var Z=0;Z<i;Z++)s.push([K(l,e+Z*8),K(l,e+Z*8+4)])}if(D==8){for(var Z=0;Z<i;Z++)s.push(x.readShort(l,(i<3?T-4:e)+2*Z))}if(D==9){for(var Z=0;
Z<i;Z++)s.push(x.readInt(l,(i<2?T-4:e)+4*Z))}if(D==11){for(var Z=0;Z<i;Z++)s.push(x.readFloat(l,e+Z*4))}if(D==12){for(var Z=0;
Z<i;Z++)s.push(x.readDouble(l,e+Z*8))}if(i!=0&&s.length==0){aQ(w,"unknown TIFF tag type: ",D,"num:",i);
if(Y==0)return;continue}if(C.debug)aQ("   ".repeat(I),w,D,j.tags[w],s);$["t"+w]=s;if(w==330&&$.t272&&$.t272[0]=="DSLR-A100"){}else if(w==330||w==34665||w==34853||w==50740&&x.readUshort(l,x.readUint(s,0))<300||w==61440){var V=w==50740?[x.readUint(s,0)]:s,P=[];
for(var Z=0;Z<V.length;Z++)j._readIFD(x,l,V[Z],P,I+1,C);if(w==330)$.subIFD=P;if(w==34665)$.exifIFD=P[0];
if(w==34853)$.gpsiIFD=P[0];if(w==50740)$.dngPrvt=P[0];if(w==61440)$.fujiIFD=P[0]}if(w==37500&&C.parseMN){var h=s;
if(x.readASCII(h,0,5)=="Nikon")$.makerNote=j.decode(h.slice(10).buffer)[0];else if(x.readASCII(h,0,5)=="OLYMP"||x.readASCII(h,0,9)=="OM SYSTEM"){var M=[8208,8224,8240,8256,8272],L=[];
j._readIFD(x,h,h[1]==77?16:h[5]==85?12:8,L,I+1,C);var n=$.makerNote=L.pop();for(var Z=0;Z<M.length;Z++){var b="t"+M[Z];
if(n[b]==null)continue;if(n[b].length==1)j._readIFD(x,h,n[b][0],L,I+1,C);else j._readIFD(x,n[b],0,L,I+1,C);
n[b]=L.pop()}if(n.t12288){j._readIFD(x,n.t12288,0,L,I+1,C);n.t12288=L.pop()}}else if(x.readUshort(l,e)<300&&x.readUshort(l,e+4)<=12){var L=[];
j._readIFD(x,l,e,L,I+1,C);$.makerNote=L[0]}}}H.push($);if(C.debug)aQ("   ".repeat(I),"<<<---------------");
return T};j._writeIFD=function(x,l,T,H,I){var C=Object.keys(I),F=C.length;if(I.exifIFD)F--;if(I.gpsiIFD)F--;
x.writeUshort(T,H,F);H+=2;var $=H+F*12+4;for(var Y=0;Y<C.length;Y++){var w=C[Y];if(w=="t34665"||w=="t34853")continue;
if(w=="exifIFD")w="t34665";if(w=="gpsiIFD")w="t34853";var D=parseInt(w.slice(1)),i=l.main[D];if(i==null)i=l.rest[D];
if(i==null||i==0)throw new Error("unknown type of tag: "+D);var e=I[w];if(D==34665){var s=j._writeIFD(x,l,T,$,I.exifIFD);
e=[$];$=s[1]}if(D==34853){var s=j._writeIFD(x,j._types.gps,T,$,I.gpsiIFD);e=[$];$=s[1]}if(i==2)e=e[0]+"\0";
var g=e.length;x.writeUshort(T,H,D);H+=2;x.writeUshort(T,H,i);H+=2;x.writeUint(T,H,g);H+=4;var N=[-1,1,1,2,4,8,0,1,0,4,8,0,8][i]*g,o=H;
if(N>4){x.writeUint(T,H,$);o=$}if(i==1||i==7){for(var S=0;S<g;S++)T[o+S]=e[S]}else if(i==2){x.writeASCII(T,o,e)}else if(i==3){for(var S=0;
S<g;S++)x.writeUshort(T,o+2*S,e[S])}else if(i==4){for(var S=0;S<g;S++)x.writeUint(T,o+4*S,e[S])}else if(i==5||i==10){var Z=i==5?x.writeUint:x.writeInt;
for(var S=0;S<g;S++){var K=e[S],V=K[0],P=K[1];if(V==null)throw"e";Z(T,o+8*S,V);Z(T,o+8*S+4,P)}}else if(i==9){for(var S=0;
S<g;S++)x.writeInt(T,o+4*S,e[S])}else if(i==12){for(var S=0;S<g;S++)x.writeDouble(T,o+8*S,e[S])}else throw i;
if(N>4){N+=N&1;$+=N}H+=4}return[H,$]};j.toRGBA8=function(x,l){function T(u){return u<.0031308?12.92*u:1.055*Math.pow(u,1/2.4)-.055}var H=x.width,I=x.height,F=H*I,$=F*4,Y=x.data,w=new Uint8Array(F*4),D=x.t262?x.t262[0]:2,i=x.t258?Math.min(32,x.t258[0]):1;
if(x.t262==null&&i==1)D=0;var e=x.t277?x.t277[0]:x.t258?x.t258.length:[1,1,3,1,1,4,3][D],s=x.t339?x.t339[0]:null;
if(D==1&&i==32&&s!=3)throw"e";var g=Math.ceil(e*i*H/8);if(!1){}else if(D==0){l=1/256;for(var N=0;N<I;
N++){var o=N*g,S=N*H;if(i==1)for(var Z=0;Z<H;Z++){var K=S+Z<<2,P=Y[o+(Z>>3)]>>7-(Z&7)&1;w[K]=w[K+1]=w[K+2]=(1-P)*255;
w[K+3]=255}if(i==4)for(var Z=0;Z<H;Z++){var K=S+Z<<2,P=Y[o+(Z>>1)]>>4-4*(Z&1)&15;w[K]=w[K+1]=w[K+2]=(15-P)*17;
w[K+3]=255}if(i==8)for(var Z=0;Z<H;Z++){var K=S+Z<<2,P=Y[o+Z];w[K]=w[K+1]=w[K+2]=255-P;w[K+3]=255}if(i==16)for(var Z=0;
Z<H;Z++){var K=S+Z<<2,M=o+2*Z,P=Y[M+1]<<8|Y[M];w[K]=w[K+1]=w[K+2]=Math.min(255,255-~~(P*l));w[K+3]=255}}}else if(D==1){if(l==null)l=1/256;
var L=(Y.length&3)==0?new Float32Array(Y.buffer):null;for(var N=0;N<I;N++){var o=N*g,S=N*H;if(i==1)for(var Z=0;
Z<H;Z++){var K=S+Z<<2,P=Y[o+(Z>>3)]>>7-(Z&7)&1;w[K]=w[K+1]=w[K+2]=P*255;w[K+3]=255}if(i==2)for(var Z=0;
Z<H;Z++){var K=S+Z<<2,P=Y[o+(Z>>2)]>>6-2*(Z&3)&3;w[K]=w[K+1]=w[K+2]=P*85;w[K+3]=255}if(i==8)for(var Z=0;
Z<H;Z++){var K=S+Z<<2,P=Y[o+Z*e];w[K]=w[K+1]=w[K+2]=P;w[K+3]=255}if(i==16)for(var Z=0;Z<H;Z++){var K=S+Z<<2,M=o+2*Z,P=Y[M+1]<<8|Y[M];
w[K]=w[K+1]=w[K+2]=Math.min(255,~~(P*l));w[K+3]=255}if(i==32)for(var Z=0;Z<H;Z++){var K=S+Z<<2,M=(o>>>2)+Z,P=L[M];
w[K]=w[K+1]=w[K+2]=~~(.5+255*P);w[K+3]=255}}}else if(D==2){if(i==8){if(e==1)for(var Z=0;Z<F;Z++){w[4*Z]=w[4*Z+1]=w[4*Z+2]=Y[Z];
w[4*Z+3]=255}if(e==3)for(var Z=0;Z<F;Z++){var K=Z<<2,n=Z*3;w[K]=Y[n];w[K+1]=Y[n+1];w[K+2]=Y[n+2];w[K+3]=255}if(e>=4)for(var Z=0;
Z<F;Z++){var K=Z<<2,n=Z*e;w[K]=Y[n];w[K+1]=Y[n+1];w[K+2]=Y[n+2];w[K+3]=Y[n+3]}}else if(i==16){if(e==4)for(var Z=0;
Z<F;Z++){var K=Z<<2,n=Z*8+1;w[K]=Y[n];w[K+1]=Y[n+2];w[K+2]=Y[n+4];w[K+3]=Y[n+6]}if(e==3)for(var Z=0;
Z<F;Z++){var K=Z<<2,n=Z*6+1;w[K]=Y[n];w[K+1]=Y[n+2];w[K+2]=Y[n+4];w[K+3]=255}}else if(i==32){var b=new Float32Array(Y.buffer),E=0;
for(var Z=0;Z<b.length;Z++)E=Math.min(E,b[Z]);if(E<0)for(var Z=0;Z<Y.length;Z+=4){var G=Y[Z];Y[Z]=Y[Z+3];
Y[Z+3]=G;G=Y[Z+1];Y[Z+1]=Y[Z+2];Y[Z+2]=G}var J=[];for(var Z=0;Z<65536;Z++)J.push(T(Z/65535));for(var Z=0;
Z<b.length;Z++){var X=Math.max(0,Math.min(1,b[Z]));b[Z]=J[~~(.5+X*65535)]}if(e==3)for(var Z=0;Z<F;Z++){var K=Z<<2,n=Z*3;
w[K]=~~(.5+b[n]*255);w[K+1]=~~(.5+b[n+1]*255);w[K+2]=~~(.5+b[n+2]*255);w[K+3]=255}else if(e==4)for(var Z=0;
Z<F;Z++){var K=Z<<2,n=Z*4;w[K]=~~(.5+b[n]*255);w[K+1]=~~(.5+b[n+1]*255);w[K+2]=~~(.5+b[n+2]*255);w[K+3]=~~(.5+b[n+3]*255)}else throw e}else throw i}else if(D==3){var B=x.t320,r=1<<i,m=i==8&&e>1&&x.t338&&x.t338[0]!=0;
for(var N=0;N<I;N++)for(var u=0;u<H;u++){var Z=N*H+u,K=Z<<2,_=0,R=N*g;if(!1){}else if(i==1)_=Y[R+(u>>>3)]>>>7-(u&7)&1;
else if(i==2)_=Y[R+(u>>>2)]>>>6-2*(u&3)&3;else if(i==4)_=Y[R+(u>>>1)]>>>4-4*(u&1)&15;else if(i==8)_=Y[R+u*e];
else throw i;w[K]=B[_]>>8;w[K+1]=B[r+_]>>8;w[K+2]=B[r+r+_]>>8;w[K+3]=m?Y[R+u*e+1]:255}}else if(D==5){var f=e>4?1:0;
for(var Z=0;Z<F;Z++){var K=Z<<2,A=Z*e;if(window.UDOC){var ah=Y[A],a6=Y[A+1],p=Y[A+2],d=Y[A+3],a=UDOC.C.cmykToRgb([ah*(1/255),a6*(1/255),p*(1/255),d*(1/255)]);
w[K]=~~(.5+255*a[0]);w[K+1]=~~(.5+255*a[1]);w[K+2]=~~(.5+255*a[2])}else{var ah=255-Y[A],a6=255-Y[A+1],p=255-Y[A+2],d=(255-Y[A+3])*(1/255);
w[K]=~~(ah*d+.5);w[K+1]=~~(a6*d+.5);w[K+2]=~~(p*d+.5)}w[K+3]=255*(1-f)+Y[A+4]*f}}else if(D==6&&x.t278){var aB=x.t278[0];
for(var N=0;N<I;N+=aB){var Z=N*H,ai=aB*H;for(var aY=0;aY<ai;aY++){var K=4*(Z+aY),A=3*Z+4*(aY>>>1),p=Y[A+(aY&1)],t=Y[A+2]-128,aH=Y[A+3]-128,O=p+((aH>>2)+(aH>>3)+(aH>>5)),aI=p-((t>>2)+(t>>4)+(t>>5))-((aH>>1)+(aH>>3)+(aH>>4)+(aH>>5)),aR=p+(t+(t>>1)+(t>>2)+(t>>6));
w[K]=Math.max(0,Math.min(255,O));w[K+1]=Math.max(0,Math.min(255,aI));w[K+2]=Math.max(0,Math.min(255,aR));
w[K+3]=255}}}else if(D==8){if(e!=3||i!=16)throw"e";var ak=new Uint16Array(Y.buffer),ad=new Int16Array(Y.buffer),a6=[3.1338561,-1.6168667,-.4906146,-.9787684,1.9161415,.033454,.0719453,-.2289914,1.4052427];
for(var N=0;N<I;N++)for(var u=0;u<H;u++){var Z=N*H+u,K=Z*4,n=Z*3,a0=ak[n]*(100/65535),y=ad[n+1]*(255/65535),aR=ad[n+2]*(255/65535),aj=903.3,U=.008856,ay=(a0+16)/116,b5=ay*ay*ay,aa=ay-aR/200,z=aa*aa*aa,Q=y/500+ay,W=Q*Q*Q,v=z>U?z:(116*aa-16)/aj,q=b5>U?b5:(116*ay-16)/aj,k=W>U?W:(116*Q-16)/aj,b6=k*(96.42/100),p=q*(100/100),b1=v*(82.49/100);
w[K]=Math.max(0,Math.min(255,T(b6*a6[0]+p*a6[1]+b1*a6[2])*255));w[K+1]=Math.max(0,Math.min(255,T(b6*a6[3]+p*a6[4]+b1*a6[5])*255));
w[K+2]=Math.max(0,Math.min(255,T(b6*a6[6]+p*a6[7]+b1*a6[8])*255));w[K+3]=255}}else if(D==32845){for(var N=0;
N<I;N++)for(var u=0;u<H;u++){var A=(N*H+u)*6,K=(N*H+u)*4,a0=Y[A+1]<<8|Y[A],a0=Math.pow(2,(a0+.5)/256-64),b7=(Y[A+3]+.5)/410,aF=(Y[A+5]+.5)/410,aU=9*b7/(6*b7-16*aF+12),a1=4*aF/(6*b7-16*aF+12),aA=a0,b6=aU*aA/a1,p=aA,b1=(1-aU-a1)*aA/a1,O=2.69*b6-1.276*p-.414*b1,aI=-1.022*b6+1.978*p+.044*b1,aR=.061*b6-.224*p+1.163*b1;
w[K]=T(Math.min(O,1))*255;w[K+1]=T(Math.min(aI,1))*255;w[K+2]=T(Math.min(aR,1))*255;w[K+3]=255}}else aQ("Unknown Photometric interpretation: "+D);
return w};j.replaceIMG=function(x){if(x==null)x=document.getElementsByTagName("img");var l=["tif","tiff","dng","cr2","nef"];
for(var T=0;T<x.length;T++){var H=x[T],I=H.getAttribute("src");if(I==null)continue;var C=I.split(".").pop().toLowerCase();
if(l.indexOf(C)==-1)continue;var $=new XMLHttpRequest;j._xhrs.push($);j._imgs.push(H);$.open("GET",I);
$.responseType="arraybuffer";$.onload=j._imgLoaded;$.send()}};j._xhrs=[];j._imgs=[];j._imgLoaded=function(x){var l=j._xhrs.indexOf(x.target),H=j._imgs[l];
j._xhrs.splice(l,1);j._imgs.splice(l,1);H.setAttribute("src",j.bufferToURI(x.target.response))};j.bufferToURI=function(x){var l=j.decode(x),T=l,H=0,I=T[0];
if(l[0].subIFD)T=T.concat(l[0].subIFD);for(var C=0;C<T.length;C++){var $=T[C];if($.t258==null||$.t258.length<3)continue;
var Y=$.t256*$.t257;if(Y>H){H=Y;I=$}}j.decodeImage(x,I,l);var w=j.toRGBA8(I),D=I.width,i=I.height,e=document.createElement("canvas");
e.width=D;e.height=i;var s=e.getContext("2d"),g=new ImageData(new Uint8ClampedArray(w.buffer),D,i);s.putImageData(g,0,0);
return e.toDataURL()};j._binBE={nextZero:function(x,l){while(x[l]!=0)l++;return l},readUshort:function(x,l){return x[l]<<8|x[l+1]},readShort:function(x,l){var T=j._binBE.ui8;
T[0]=x[l+1];T[1]=x[l+0];return j._binBE.i16[0]},readInt:function(x,l){var T=j._binBE.ui8;T[0]=x[l+3];
T[1]=x[l+2];T[2]=x[l+1];T[3]=x[l+0];return j._binBE.i32[0]},readUint:function(x,l){var T=j._binBE.ui8;
T[0]=x[l+3];T[1]=x[l+2];T[2]=x[l+1];T[3]=x[l+0];return j._binBE.ui32[0]},readASCII:function(x,l,T){var H="";
for(var I=0;I<T;I++)H+=String.fromCharCode(x[l+I]);return H},readFloat:function(x,l){var T=j._binBE.ui8;
for(var H=0;H<4;H++)T[H]=x[l+3-H];return j._binBE.fl32[0]},readDouble:function(x,l){var T=j._binBE.ui8;
for(var H=0;H<8;H++)T[H]=x[l+7-H];return j._binBE.fl64[0]},writeUshort:function(x,l,T){x[l]=T>>8&255;
x[l+1]=T&255},writeInt:function(x,l,T){var H=j._binBE.ui8;j._binBE.i32[0]=T;x[l+3]=H[0];x[l+2]=H[1];
x[l+1]=H[2];x[l+0]=H[3]},writeUint:function(x,l,T){x[l]=T>>24&255;x[l+1]=T>>16&255;x[l+2]=T>>8&255;x[l+3]=T>>0&255},writeASCII:function(x,l,T){for(var H=0;
H<T.length;H++)x[l+H]=T.charCodeAt(H)},writeDouble:function(x,l,T){j._binBE.fl64[0]=T;for(var H=0;H<8;
H++)x[l+H]=j._binBE.ui8[7-H]}};j._binBE.ui8=new Uint8Array(8);j._binBE.i16=new Int16Array(j._binBE.ui8.buffer);
j._binBE.i32=new Int32Array(j._binBE.ui8.buffer);j._binBE.ui32=new Uint32Array(j._binBE.ui8.buffer);
j._binBE.fl32=new Float32Array(j._binBE.ui8.buffer);j._binBE.fl64=new Float64Array(j._binBE.ui8.buffer);
j._binLE={nextZero:j._binBE.nextZero,readUshort:function(x,l){return x[l+1]<<8|x[l]},readShort:function(x,l){var T=j._binBE.ui8;
T[0]=x[l+0];T[1]=x[l+1];return j._binBE.i16[0]},readInt:function(x,l){var T=j._binBE.ui8;T[0]=x[l+0];
T[1]=x[l+1];T[2]=x[l+2];T[3]=x[l+3];return j._binBE.i32[0]},readUint:function(x,l){var T=j._binBE.ui8;
T[0]=x[l+0];T[1]=x[l+1];T[2]=x[l+2];T[3]=x[l+3];return j._binBE.ui32[0]},readASCII:j._binBE.readASCII,readFloat:function(x,l){var T=j._binBE.ui8;
for(var H=0;H<4;H++)T[H]=x[l+H];return j._binBE.fl32[0]},readDouble:function(x,l){var T=j._binBE.ui8;
for(var H=0;H<8;H++)T[H]=x[l+H];return j._binBE.fl64[0]},writeUshort:function(x,l,T){x[l]=T&255;x[l+1]=T>>8&255},writeInt:function(x,l,T){var H=j._binBE.ui8;
j._binBE.i32[0]=T;x[l+0]=H[0];x[l+1]=H[1];x[l+2]=H[2];x[l+3]=H[3]},writeUint:function(x,l,T){x[l]=T>>>0&255;
x[l+1]=T>>>8&255;x[l+2]=T>>>16&255;x[l+3]=T>>>24&255},writeASCII:j._binBE.writeASCII};j._copyTile=function(x,l,T,H,I,C,F,$){var Y=Math.min(l,I-F),w=Math.min(T,C-$);
for(var D=0;D<w;D++){var i=($+D)*I+F,e=D*l;for(var s=0;s<Y;s++)H[i+s]=x[e+s]}};j._inflateRaw=function(){var x=function(){var s=Uint16Array,g=Uint32Array;
return{m:new s(16),v:new s(16),d:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],o:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],z:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],B:new s(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],w:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],h:new g(32),g:new s(512),s:[],A:new s(32),t:[],k:new s(32768),c:[],a:[],n:new s(32768),e:[],C:new s(512),b:[],i:new s(1<<15),r:new g(286),f:new g(30),l:new g(19),u:new g(15e3),q:new s(1<<16),j:new s(1<<15)}}();
function l(s,g){var N=s.length,Z,P,h,M,G,m=x.v;for(var M=0;M<=g;M++)m[M]=0;for(M=1;M<N;M+=2)m[s[M]]++;
var u=x.m;Z=0;m[0]=0;for(P=1;P<=g;P++){Z=Z+m[P-1]<<1;u[P]=Z}for(h=0;h<N;h+=2){G=s[h+1];if(G!=0){s[h]=u[G];
u[G]++}}}function T(s,g,N){var Z=s.length,P=x.i;for(var h=0;h<Z;h+=2)if(s[h+1]!=0){var M=h>>1,G=s[h+1],m=M<<4|G,u=g-G,_=s[h]<<u,R=_+(1<<u);
while(_!=R){var A=P[_]>>>15-g;N[A]=m;_++}}}function H(s,g){var N=x.i,Z=15-g;for(var P=0;P<s.length;P+=2){var h=s[P]<<g-s[P+1];
s[P]=N[h]>>>Z}}(function(){var s=1<<15;for(var g=0;g<s;g++){var N=g;N=(N&2863311530)>>>1|(N&1431655765)<<1;
N=(N&3435973836)>>>2|(N&858993459)<<2;N=(N&4042322160)>>>4|(N&252645135)<<4;N=(N&4278255360)>>>8|(N&16711935)<<8;
x.i[g]=(N>>>16|N<<16)>>>17}function Z(P,h,M){while(h--!=0)P.push(0,M)}for(var g=0;g<32;g++){x.B[g]=x.o[g]<<3|x.z[g];
x.h[g]=x.p[g]<<4|x.w[g]}Z(x.s,144,8);Z(x.s,255-143,9);Z(x.s,279-255,7);Z(x.s,287-279,8);l(x.s,9);T(x.s,9,x.g);
H(x.s,9);Z(x.t,32,5);l(x.t,5);T(x.t,5,x.A);H(x.t,5);Z(x.b,19,0);Z(x.c,286,0);Z(x.e,30,0);Z(x.a,320,0)}());
function C(s,g,N){return(s[g>>>3]|s[(g>>>3)+1]<<8)>>>(g&7)&(1<<N)-1}function F(s,g,N){return(s[g>>>3]|s[(g>>>3)+1]<<8|s[(g>>>3)+2]<<16)>>>(g&7)&(1<<N)-1}function $(s,g){return(s[g>>>3]|s[(g>>>3)+1]<<8|s[(g>>>3)+2]<<16)>>>(g&7)}function Y(s,g){return(s[g>>>3]|s[(g>>>3)+1]<<8|s[(g>>>3)+2]<<16|s[(g>>>3)+3]<<24)>>>(g&7)}function w(s,g){var N=Uint8Array,Z=0,P=0,h=0,M=0,L=0,G=0,m=0,u=0,_=0,R,A;
if(s[0]==3&&s[1]==0)return g?g:new N(0);var a6=g==null;if(a6)g=new N(s.length>>>2<<3);while(Z==0){Z=F(s,_,1);
P=F(s,_+1,2);_+=3;if(P==0){if((_&7)!=0)_+=8-(_&7);var p=(_>>>3)+4,d=s[p-4]|s[p-3]<<8;if(a6)g=D(g,u+d);
g.set(new N(s.buffer,s.byteOffset+p,d),u);_=p+d<<3;u+=d;continue}if(a6)g=D(g,u+(1<<17));if(P==1){R=x.g;
A=x.A;G=(1<<9)-1;m=(1<<5)-1}if(P==2){h=C(s,_,5)+257;M=C(s,_+5,5)+1;L=C(s,_+10,4)+4;_+=14;var a=_,aB=1;
for(var ai=0;ai<38;ai+=2){x.b[ai]=0;x.b[ai+1]=0}for(var ai=0;ai<L;ai++){var aY=C(s,_+ai*3,3);x.b[(x.d[ai]<<1)+1]=aY;
if(aY>aB)aB=aY}_+=3*L;l(x.b,aB);T(x.b,aB,x.C);R=x.k;A=x.n;_=i(x.C,(1<<aB)-1,h+M,s,_,x.a);var t=e(x.a,0,h,x.c);
G=(1<<t)-1;var c=e(x.a,h,M,x.e);m=(1<<c)-1;l(x.c,t);T(x.c,t,R);l(x.e,c);T(x.e,c,A)}while(!0){var aH=R[$(s,_)&G];
_+=aH&15;var O=aH>>>4;if(O>>>8==0){g[u++]=O}else if(O==256){break}else{var aI=u+O-254;if(O>264){var aR=x.B[O-257];
aI=u+(aR>>>3)+C(s,_,aR&7);_+=aR&7}var ak=A[$(s,_)&m];_+=ak&15;var ad=ak>>>4,a0=x.h[ad],y=(a0>>>4)+F(s,_,a0&15);
_+=a0&15;if(a6)g=D(g,u+(1<<17));while(u<aI){g[u]=g[u++-y];g[u]=g[u++-y];g[u]=g[u++-y];g[u]=g[u++-y]}u=aI}}}return g.length==u?g:g.slice(0,u)}function D(s,g){var N=s.length;
if(g<=N)return s;var Z=new Uint8Array(Math.max(N<<1,g));Z.set(s,0);return Z}function i(s,g,N,Z,P,h){var M=0;
while(M<N){var G=s[$(Z,P)&g];P+=G&15;var m=G>>>4;if(m<=15){h[M]=m;M++}else{var u=0,_=0;if(m==16){_=3+C(Z,P,2);
P+=2;u=h[M-1]}else if(m==17){_=3+C(Z,P,3);P+=3}else if(m==18){_=11+C(Z,P,7);P+=7}var R=M+_;while(M<R){h[M]=u;
M++}}}return P}function e(s,g,N,Z){var P=0,h=0,M=Z.length>>>1;while(h<N){var G=s[h+g];Z[h<<1]=0;Z[(h<<1)+1]=G;
if(G>P)P=G;h++}while(h<M){Z[h<<1]=0;Z[(h<<1)+1]=0;h++}return P}return w}();j.LosslessJpegDecode=function(){var x,l;
function T(){return x[l++]}function H(){return x[l++]<<8|x[l++]}function I(S){var Z=T(),K=[0,0,0,255],V=[],P=8;
for(var h=0;h<16;h++)V[h]=T();for(var h=0;h<16;h++){for(var M=0;M<V[h];M++){var n=C(K,0,h+1,1);K[n+3]=T()}}var G=new Uint8Array(1<<P);
S[Z]=[new Uint8Array(K),G];for(var h=0;h<1<<P;h++){var J=P,_=h,f=0,A=0;while(K[f+3]==255&&J!=0){A=_>>--J&1;
f=K[f+A]}G[h]=f}}function C(S,Z,K,V){if(S[Z+3]!=255)return 0;if(K==0)return Z;for(var P=0;P<2;P++){if(S[Z+P]==0){S[Z+P]=S.length;
S.push(0,0,V,255)}var M=C(S,S[Z+P],K-1,V+1);if(M!=0)return M}return 0}function F(S){var Z=S.c,K=S.f;
while(Z<25&&S.d<S.a){var V=S.data[S.d++];if(V==255&&!S.b)S.d++;K=K<<8|V;Z+=8}if(Z<0)throw"e";S.c=Z;S.f=K}function $(S,Z){if(Z.c<S)F(Z);
return Z.f>>(Z.c-=S)&65535>>16-S}function Y(S,Z){var K=S[0],V=0,P=255,M=0;if(Z.c<16)F(Z);var n=Z.f>>Z.c-8&255;
V=S[1][n];P=K[V+3];Z.c-=K[V+2];while(P==255){M=Z.f>>--Z.c&1;V=K[V+M];P=K[V+3]}return P}function w(S,Z){if(S<32768>>16-Z)S+=-(1<<Z)+1;
return S}function D(S,Z){var K=Y(S,Z);if(K==0)return 0;if(K==16)return-32768;var V=$(K,Z);return w(V,K)}function i(S,Z,K,V,P,M){var n=0;
for(var G=0;G<M;G++){var J=G*Z;for(var _=0;_<Z;_+=P){n++;for(var f=0;f<P;f++)S[J+_+f]=D(V[f],K)}if(K.e!=0&&n%K.e==0&&G!=0){var A=K.d,a6=K.data;
while(a6[A]!=255||!(208<=a6[A+1]&&a6[A+1]<=215))A--;K.d=A+2;K.f=0;K.c=0}}}function e(S,Z){return w($(S,Z),S)}function s(S,Z,K,V,P){var M=x.length-l;
for(var n=0;n<M;n+=4){var G=x[l+n];x[l+n]=x[l+n+3];x[l+n+3]=G;var G=x[l+n+1];x[l+n+1]=x[l+n+2];x[l+n+2]=G}for(var J=0;
J<P;J++){var _=32768,f=32768;for(var A=0;A<Z;A+=2){var a6=Y(V,K),a=Y(V,K);if(a6!=0)_+=e(a6,K);if(a!=0)f+=e(a,K);
S[J*Z+A]=_&65535;S[J*Z+A+1]=f&65535}}}function g(S){x=S;l=0;if(H()!=65496)throw"e";var Z=[],K=0,V=0,P=0,M=[],n=[],G=[],J=0,_=0,f=0;
while(!0){var A=H();if(A==65535){l--;continue}var a6=H();if(A==65475){V=T();_=H();f=H();J=T();for(var a=0;
a<J;a++){var aB=T(),ai=T(),aY=T();if(aY!=0)throw"e";Z[aB]=[a,ai>>4,ai&15]}}else if(A==65476){var t=l+a6-2;
while(l<t)I(n)}else if(A==65498){l++;for(var a=0;a<J;a++){var aR=T(),y=Z[aR];G[y[0]]=n[T()>>>4];M[y[0]]=y.slice(1)}K=T();
l+=2;break}else if(A==65501){P=H()}else{l+=a6-2}}var U=V>8?Uint16Array:Uint8Array,ay=new U(_*f*J),b5={c:0,f:0,b:K==8,d:l,data:x,a:x.length,e:P};
if(b5.b)s(ay,f*J,b5,G[0],_);else{var aa=[],z=0,Q=0;for(var a=0;a<J;a++){var W=M[a],v=W[0],q=W[1];if(v>z)z=v;
if(q>Q)Q=q;aa.push(v*q)}if(z!=1||Q!=1){if(J!=3||aa[1]!=1||aa[2]!=1)throw"e";if(z!=2||Q!=1&&Q!=2)throw"e";
var k=[],b6=0;for(var a=0;a<J;a++){for(var b1=0;b1<aa[a];b1++)k.push(G[a]);b6+=aa[a]}var b7=f/z,aF=_/Q,aU=b7*aF;
i(ay,b7*b6,b5,k,b6,aF);o(ay,K,b7,aF,b6-2,b6,b6,V);var a1=new Uint16Array(aU*aa[0]);if(z==2&&Q==2){for(var a=0;
a<aU;a++){a1[4*a]=ay[6*a];a1[4*a+1]=ay[6*a+1];a1[4*a+2]=ay[6*a+2];a1[4*a+3]=ay[6*a+3]}o(a1,K,b7*4,aF,0,1,1,V);
for(var a=0;a<aU;a++){ay[6*a]=a1[4*a];ay[6*a+1]=a1[4*a+1];ay[6*a+2]=a1[4*a+2];ay[6*a+3]=a1[4*a+3]}}if(z==2&&Q==1){for(var a=0;
a<aU;a++){a1[2*a]=ay[4*a];a1[2*a+1]=ay[4*a+1]}o(a1,K,b7*2,aF,0,1,1,V);for(var a=0;a<aU;a++){ay[4*a]=a1[2*a];
ay[4*a+1]=a1[2*a+1]}}var aA=ay.slice(0);for(var q=0;q<_;q++){if(Q==2)for(var v=0;v<f;v++){var av=(q*f+v)*J,a_=((q>>>1)*b7+(v>>>1))*b6,a9=(q&1)*2+(v&1);
ay[av]=aA[a_+a9];ay[av+1]=aA[a_+4];ay[av+2]=aA[a_+5]}else for(var v=0;v<f;v++){var av=(q*f+v)*J,a_=(q*b7+(v>>>1))*b6,a9=v&1;
ay[av]=aA[a_+a9];ay[av+1]=aA[a_+2];ay[av+2]=aA[a_+3]}}}else{i(ay,f*J,b5,G,J,_);if(P==0)o(ay,K,f,_,0,J,J,V);
else{var an=Math.floor(P/f);for(var q=0;q<_;q+=an){var a8=ay.slice(q*f*J,(q+an)*f*J);o(a8,K,f,an,0,J,J,V);
ay.set(a8,q*f*J)}}}}return[ay,f,_,J]}function o(S,Z,K,V,P,M,n,G){var J=K*n;for(var _=P;_<M;_++)S[_]+=1<<G-1;
for(var f=n;f<J;f+=n)for(var _=P;_<M;_++)S[f+_]+=S[f+_-n];for(var A=1;A<V;A++){var a6=A*J;for(var _=P;
_<M;_++)S[a6+_]+=S[a6+_-J];for(var f=n;f<J;f+=n){for(var _=P;_<M;_++){var a=a6+f+_,aB=a-J,ai=S[a-n],aY=0;
if(Z==0)aY=0;else if(Z==1)aY=ai;else if(Z==2)aY=S[aB];else if(Z==3)aY=S[aB-n];else if(Z==4)aY=ai+(S[aB]-S[aB-n]);
else if(Z==5)aY=ai+(S[aB]-S[aB-n]>>>1);else if(Z==6)aY=S[aB]+(ai-S[aB-n]>>>1);else if(Z==7)aY=ai+S[aB]>>>1;
else throw Z;S[a]+=aY}}}}return g}();(function(){var x=0,l=1,T=2,H=3,I=4,C=5,$=6,Y=7,w=8,D=9,i=10,e=11,s=12,N=13,S=14,Z=15,K=16,V=17,h=18;
function M(t){var c=j._binBE.readUshort,z={b:c(t,0),i:t[2],C:t[3],u:t[4],q:c(t,5),k:c(t,7),e:c(t,9),l:c(t,11),s:t[13],d:c(t,14)};
if(z.b!=18771||z.i>1||z.q<6||z.q%6||z.e<768||z.e%24||z.l!=768||z.k<z.l||z.k%z.l||z.k-z.e>=z.l||z.s>16||z.s!=z.k/z.l||z.s!=Math.ceil(z.e/z.l)||z.d!=z.q/6||z.u!=12&&z.u!=14&&z.u!=16||z.C!=16&&z.C!=0){throw"Invalid data"}if(z.i==0){throw"Not implemented. We need this file!"}z.h=z.C==16;
z.m=(z.h?z.l*2/3:z.l>>>1)|0;z.A=z.m+2;z.f=64;z.g=(1<<z.u)-1;z.n=4*z.u;return z}function L(t,c){var z=new Array(c.s),Q=4*c.s,W=16+Q;
if(Q&12)W+=16-(Q&12);for(var v=0,q=16;v<c.s;q+=4){var k=j._binBE.readUint(t,q);z[v]=t.slice(W,W+k);z[v].j=0;
z[v].a=0;W+=k;v++}if(W!=t.length)throw"Invalid data";return z}function n(t,c){for(var z=-c[4],Q=0;z<=c[4];
Q++,z++){t[Q]=z<=-c[3]?-4:z<=-c[2]?-3:z<=-c[1]?-2:z<-c[0]?-1:z<=c[0]?0:z<c[1]?1:z<c[2]?2:z<c[3]?3:4}}function b(t,c,z){var Q=[c,3*c+18,5*c+67,7*c+276,z];
t.o=c;t.w=(Q[4]+2*c)/(2*c+1)+1|0;t.v=Math.ceil(Math.log2(t.w));t.t=9;n(t.c,Q)}function E(t){var c={c:new Int8Array(2<<t.u)};
b(c,0,t.g);return c}function B(t){var c=[[],[],[]],z=Math.max(2,t.w+32>>>6);for(var Q=0;Q<3;Q++){for(var W=0;
W<41;W++){c[Q][W]=[z,1]}}return c}function r(t){for(var c=-1,z=0;!z;c++){z=t[t.j]>>>7-t.a&1;t.a++;t.a&=7;
if(!t.a)t.j++}return c}function u(t,c){var z=0,Q=8-t.a,W=t.j,v=t.a;if(c){if(c>=Q){do{z<<=Q;c-=Q;z|=t[t.j]&(1<<Q)-1;
t.j++;Q=8}while(c>=8)}if(c){z<<=c;Q-=c;z|=t[t.j]>>>Q&(1<<c)-1}t.a=8-Q}return z}function A(t,c){var z=0;
if(c<t){while(z<=14&&c<<++z<t);}return z}function ah(t,c,z,Q,W,v,q,k){if(k==null)k=0;var b6=v+1,b1=b6%2,b7=0,aF=0,aU=0,a1,aA,av=Q[W],a_=Q[W-1],a9=Q[W-2][b6],an=a_[b6-1],a8=a_[b6],aD=a_[b6+1],b9=av[b6-1],b0=av[b6+1],bb=Math.abs,aO,au,aE,aT;
if(b1){aO=bb(aD-a8);au=bb(a9-a8);aE=bb(an-a8)}if(b1){aT=aO>aE&&au<aO?a9+an:aO<aE&&au<aE?a9+aD:aD+an;
aT=aT+2*a8>>>2;if(k){av[b6]=aT;return}a1=c.t*c.c[t.g+a8-a9]+c.c[t.g+an-a8]}else{aT=a8>an&&a8>aD||a8<an&&a8<aD?b0+b9+2*a8>>>2:b9+b0>>>1;
a1=c.t*c.c[t.g+a8-an]+c.c[t.g+an-b9]}aA=bb(a1);var aV=r(z);if(aV<t.n-c.v-1){var ab=A(q[aA][0],q[aA][1]);
aU=u(z,ab)+(aV<<ab)}else{aU=u(z,c.v)+1}aU=aU&1?-1-(aU>>>1):aU>>>1;q[aA][0]+=bb(aU);if(q[aA][1]==t.f){q[aA][0]>>>=1;
q[aA][1]>>>=1}q[aA][1]++;aT=a1<0?aT-aU:aT+aU;if(t.i){if(aT<0)aT+=c.w;else if(aT>t.g)aT-=c.w}av[b6]=aT>=0?Math.min(aT,t.g):0}function a6(t,c,z){var Q=t[0].length;
for(var W=c;W<=z;W++){t[W][0]=t[W-1][1];t[W][Q-1]=t[W-1][Q-2]}}function p(t){a6(t,Y,s);a6(t,T,I);a6(t,Z,V)}function d(t,c,z,Q,W,v,q,k,b6,b1,b7,aF,aU){var a1=0,aA=1,av=W<N&&W>I;
while(aA<t.m){if(a1<t.m){ah(t,c,z,Q,W,a1,q[b6],t.h&&(av&&b1||!av&&(b7||(a1&aF)==aU)));ah(t,c,z,Q,v,a1,q[b6],t.h&&(!av&&b1||av&&(b7||(a1&aF)==aU)));
a1+=2}if(a1>8){ah(t,c,z,Q,W,aA,k[b6]);ah(t,c,z,Q,v,aA,k[b6]);aA+=2}}p(Q)}function ai(t,c,z,Q,W,v){d(t,c,z,Q,T,Y,W,v,0,0,1,0,8);
d(t,c,z,Q,w,Z,W,v,1,0,1,0,8);d(t,c,z,Q,H,D,W,v,2,1,0,3,0);d(t,c,z,Q,i,K,W,v,0,0,0,3,2);d(t,c,z,Q,I,e,W,v,1,0,0,3,2);
d(t,c,z,Q,s,V,W,v,2,1,0,3,0)}function aY(t,c,z,Q,W,v){var q=v.length,k=t.l;if(W+1==t.s)k=t.e-W*t.l;var b6=6*t.e*Q+W*t.l;
for(var b1=0;b1<6;b1++){for(var b7=0;b7<k;b7++){var aF=v[b1%q][b7%q],aU;if(aF==0){aU=T+(b1>>>1)}else if(aF==2){aU=Z+(b1>>>1)}else{aU=Y+b1}var a1=t.h?(b7*2/3&2147483646|b7%3&1)+(b7%3>>>1):b7>>>1;
c[b6+b7]=z[aU][a1+1]}b6+=t.e}}j._decompressRAF=function(t,c){var z=M(t),Q=L(t,z),W=E(z),v=new Int16Array(z.e*z.q);
if(c==null){c=z.h?[[1,1,0,1,1,2],[1,1,2,1,1,0],[2,0,1,0,2,1],[1,1,2,1,1,0],[1,1,0,1,1,2],[0,2,1,2,0,1]]:[[0,1],[3,2]]}var q=[[x,H],[l,I],[C,e],[$,s],[N,K],[S,V]],k=[];
for(var b6=0;b6<h;b6++){k[b6]=new Uint16Array(z.A)}for(var b1=0;b1<z.s;b1++){var b7=B(W),aF=B(W);for(var b6=0;
b6<h;b6++){for(var aU=0;aU<z.A;aU++){k[b6][aU]=0}}for(var a1=0;a1<z.d;a1++){ai(z,W,Q[b1],k,b7,aF);for(var b6=0;
b6<6;b6++){for(var aU=0;aU<z.A;aU++){k[q[b6][0]][aU]=k[q[b6][1]][aU]}}aY(z,v,k,a1,b1,c);for(var b6=T;
b6<h;b6++){if([C,$,N,S].indexOf(b6)==-1){for(var aU=0;aU<z.A;aU++){k[b6][aU]=0}}}p(k)}}return v}}())}(j))}());






"use strict";function GifWriter(l,e,c,h){var s=0,h=h===undefined?{}:h,v=h.loop===undefined?null:h.loop,F=h.palette===undefined?null:h.palette,u=0,q=0,d=!1;
if(e<=0||c<=0||e>65535||c>65535)throw new Error("Width/Height invalid.");function m(C){var j=C.length;
if(j<2||j>256||j&j-1){throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.")}return j}l[s++]=71;
l[s++]=73;l[s++]=70;l[s++]=56;l[s++]=57;l[s++]=97;if(F!==null){var i=m(F);while(i>>=1)++u;i=1<<u;--u;
if(h.background!==undefined){q=h.background;if(q>=i)throw new Error("Background index out of range.");
if(q===0)throw new Error("Background index explicitly passed as 0.")}}l[s++]=e&255;l[s++]=e>>8&255;l[s++]=c&255;
l[s++]=c>>8&255;l[s++]=(F!==null?128:0)|u;l[s++]=q;l[s++]=0;if(F!==null){for(var o=0,g=F.length;o<g;
++o){var f=F[o];l[s++]=f>>16&255;l[s++]=f>>8&255;l[s++]=f&255}}if(v!==null){if(v<0||v>65535)throw new Error("Loop count invalid.");
l[s++]=33;l[s++]=255;l[s++]=11;l[s++]=78;l[s++]=69;l[s++]=84;l[s++]=83;l[s++]=67;l[s++]=65;l[s++]=80;
l[s++]=69;l[s++]=50;l[s++]=46;l[s++]=48;l[s++]=3;l[s++]=1;l[s++]=v&255;l[s++]=v>>8&255;l[s++]=0}this.addFrame=function(C,j,z,b,w,E){if(d===!0){--s;
d=!1}E=E===undefined?{}:E;if(C<0||j<0||C>65535||j>65535)throw new Error("x/y invalid.");if(z<=0||b<=0||z>65535||b>65535)throw new Error("Width/Height invalid.");
if(w.length<z*b)throw new Error("Not enough pixels for the frame size.");var r=!0,k=E.palette,t=0,A=!1,D=0;
if(k===undefined||k===null){r=!1;k=F}if(k===undefined||k===null)throw new Error("Must supply either a local or global palette.");
var B=m(k);while(B>>=1)++t;B=1<<t;var G=E.delay===undefined?0:E.delay,a=E.disposal===undefined?0:E.disposal;
if(a<0||a>3)throw new Error("Disposal out of range.");if(E.transparent!==undefined&&E.transparent!==null){A=!0;
D=E.transparent;if(D<0||D>=B)throw new Error("Transparent color index.")}if(a!==0||A||G!==0){l[s++]=33;
l[s++]=249;l[s++]=4;l[s++]=a<<2|(A===!0?1:0);l[s++]=G&255;l[s++]=G>>8&255;l[s++]=D;l[s++]=0}l[s++]=44;
l[s++]=C&255;l[s++]=C>>8&255;l[s++]=j&255;l[s++]=j>>8&255;l[s++]=z&255;l[s++]=z>>8&255;l[s++]=b&255;
l[s++]=b>>8&255;l[s++]=r===!0?128|t-1:0;if(r===!0){for(var o=0,g=k.length;o<g;++o){var f=k[o];l[s++]=f>>16&255;
l[s++]=f>>8&255;l[s++]=f&255}}s=GifWriterOutputLZWCodeStream(l,s,t<2?2:t,w);return s};this.end=function(){if(d===!1){l[s++]=59;
d=!0}return s};this.getOutputBuffer=function(){return l};this.setOutputBuffer=function(C){l=C};this.getOutputBufferPosition=function(){return s};
this.setOutputBufferPosition=function(C){s=C}}function GifWriterOutputLZWCodeStream(l,e,c,h){l[e++]=c;
var s=e++,v=1<<c,F=v-1,m=v+1,u=m+1,q=c+1,i=0,o=0;function g(n){while(i>=n){l[e++]=o&255;o>>=8;i-=8;if(e===s+256){l[s]=255;
s=e++}}}function f(n){o|=n<<i;i+=q;g(8)}var d=h[0]&F,C={};f(v);for(var j=1,z=h.length;j<z;++j){var b=h[j]&F,w=d<<8|b,E=C[w];
if(E===undefined){o|=d<<i;i+=q;while(i>=8){l[e++]=o&255;o>>=8;i-=8;if(e===s+256){l[s]=255;s=e++}}if(u===4096){f(v);
u=m+1;q=c+1;C={}}else{if(u>=1<<q)++q;C[w]=u++}d=b}else{d=E}}f(d);f(m);g(1);if(s+1===e){l[s]=0}else{l[s]=e-s-1;
l[e++]=0}return e}

var UGIF=function(){var I=function(){var m,g,w,v,c=0,C=0,M=0,f=0,d=function(){var P=m>>>3,j=g[P+2]<<16|g[P+1]<<8|g[P],h=j>>>(m&7)&(1<<C)-1;
m+=C;return h},x=new Uint32Array(4096*4),n=0,J=function(P){if(P==n)return;n=P;M=1<<P;f=M+1;for(var j=0;
j<f+1;j++){x[4*j]=x[4*j+3]=j;x[4*j+1]=65535;x[4*j+2]=1}},y=function(P){C=P+1;c=f+1},t=function(P){var j=P<<2,h=x[j+2],q=v+h-1;
while(j!=65535){w[q--]=x[j];j=x[j+1]}v+=h},E=function(P,j){var h=c<<2,q=P<<2;x[h]=x[(j<<2)+3];x[h+1]=q;
x[h+2]=x[q+2]+1;x[h+3]=x[q+3];c++;if(c==1<<C&&C!=12)C++},G=function(P,j,h,q,r,b){m=j<<3;g=P;w=q;v=r;
var e=j+h<<3,L=0,l=65535;J(b);y(b);while(m<e&&(L=d())!=f){if(L==M){y(b);L=d();if(L==f)break;t(L)}else{if(L<c){t(L);
if(l!=65535)E(l,L)}else{E(l,l);t(c-1)}}l=L}return v};return G}(),z,H,A=new Uint8Array(128),B=function(){return z[H++]},s=function(){var m=z[H+1]<<8|z[H];
H+=2;return m},o=function(){while(z[H]!=0)H+=1+z[H];H++},p=function(m){z=new Uint8Array(m);H=6;var N=s(),g=s(),w=B(),v=B(),c=B(),a=w>>>7,C=w>>>4&7,M=w>>>3&1,f=w>>>0&7,d=H,x=0,O,J=0,y=0,t=0,E=260;
if(a==1)H+=3*(1<<f+1);var n=[];while(H+1<z.length){var G=B();if(G==33){var P=B();if(P==249){var j=B(),w=B();
J=w>>>2&7;y=s();E=B();if((w&1)==0)E=260;B()}else if(P==254){o()}else if(P==255){o()}else throw P}else if(G==44){var h=s(),q=s(),r=s(),b=s(),e=B(),L=e>>>7;
t=e>>>6&1;if(L==1){var f=e>>>0&7;x=H;H+=3*(1<<f+1)}O={x:h,y:q,c:r,e:b,b:J,delay:y,a:E,f:x==0?d:x,d:t};
n.push(O);x=0}else if(G<=8){var r=O.c,b=O.e,l=r*b,D=0;if(A.length<l*1.2)A=new Uint8Array(~~(l*1.3));
while(H<z.length&&z[H]!=0){var i=B();for(var k=0;k<i;k++)A[D+k]=z[H+k];D+=i;H+=i}if(H>=z.length){alert("Some frames are damaged.");
n.pop();break}B();O.g=new Uint8Array(l);var K=I(A,0,D,O.g,0,G)}else if(G==59)break;else throw G}return{width:N,height:g,data:z,frames:n}};
function u(m,N,z,g,w,v,c,a){for(var C=0;C<c;C++){var M=w[v+C];if(M!=a){var f=N+C<<2,d=g+M*3;m[f]=z[d];
m[f+1]=z[d+1];m[f+2]=z[d+2];m[f+3]=255}}}var F=function(m){var N=m.frames,g=m.width,w=m.height,v=new Uint8Array(g*w*4),c,a=[],z=m.data;
for(var C=0;C<N.length;C++){var M=N[C],f=M.x,d=M.y,x=M.c,O=M.e,J=M.b;if(J==3){if(c==null)c=v.slice(0);
else c.set(v)}var y=[];if(M.d==1){for(var t=0;t<O;t+=8)y.push(t);for(var t=4;t<O;t+=8)y.push(t);for(var t=2;
t<O;t+=4)y.push(t);for(var t=1;t<O;t+=2)y.push(t)}var E=M.g,G=M.f,P=M.a,j=M.d;for(var t=0;t<O;t++){var h=j==0?t:y[t];
u(v,(h+d)*g+f,z,G,E,t*x,x,P)}a.push(v.slice(0).buffer);if(J<2){}else if(J==2){for(var t=0;t<O;t++){var q=((d+t)*g+f)*4;
v.fill(0,q,q+x*4)}}else if(J==3)v.set(c)}return a};return{decode:p,toRGBA8:F}}()

var linear=function(){function f(j,k){this.data=new Array(j.length);for(var i=0,a=j[0].length;i<j.length;
i++){this.data[i]=new Array(a);for(var e=0;e<a;e++){this.data[i][e]=j[i][e]}}if(k){if(typeof k[0]!=="object"){for(var i=0;
i<k.length;i++){k[i]=[k[i]]}}this.mirror=new f(k)}}f.prototype.swap=function(j,k){if(this.mirror)this.mirror.swap(j,k);
var i=this.data[j];this.data[j]=this.data[k];this.data[k]=i};f.prototype.multline=function(j,k){if(this.mirror)this.mirror.multline(j,k);
var i=this.data[j];for(var a=i.length-1;a>=0;a--){i[a]*=k}};f.prototype.addmul=function(j,k,i){if(this.mirror)this.mirror.addmul(j,k,i);
var e=this.data[j],c=this.data[k];for(var b=e.length-1;b>=0;b--){e[b]=e[b]+i*c[b]}};f.prototype.hasNullLine=function(j){for(var k=0;
k<this.data[j].length;k++){if(this.data[j][k]!==0){return!1}}return!0};f.prototype.gauss=function(){var j=0,k=this.data.length,i=this.data[0].length,o=[];
for(var a=0;a<i;a++){var e=0,m=0;for(var c=j;c<k;c++){var b=this.data[c][a];if(Math.abs(b)>Math.abs(e)){m=c;
e=b}}if(e===0){o.push(j)}else{this.multline(m,1/e);this.swap(m,j);for(var n=0;n<k;n++){if(n!==j){this.addmul(n,j,-this.data[n][a])}}}j++}for(var n=0;
n<o.length;n++){if(!this.mirror.hasNullLine(o[n])){throw new Error("singular matrix")}}return this.mirror.data};
var d={};d.solve=function l(j,k){var i=new f(j,k).gauss();if(i.length>0&&i[0].length===1){for(var o=0;
o<i.length;o++)i[o]=i[o][0]}return i};function h(j){var k=new Array(j);for(var i=0;i<j;i++){k[i]=new Array(j);
for(var a=0;a<j;a++){k[i][a]=i===a?1:0}}return k}d.invert=function g(j){return new f(j,h(j.length)).gauss()};
return d}()



var Typr=function(){var s={};s.parse=function(K){var L=s.B,C=function(J,O,S,w){var W=s.T,f={cmap:W.X,head:W.head,hhea:W.aP,maxp:W.a9,hmtx:W.b1,name:W.name,"OS/2":W.S,post:W.aW,loca:W.ba,kern:W.I,glyf:W.J,"CFF ":W.u,GSUB:W.aD,CBLC:W.a5,CBDT:W.ae,"SVG ":W.a8,COLR:W.b9,CPAL:W.aF,sbix:W.ay},T={_data:J,_index:O,_offset:S};
for(var z in f){var U=s.findTable(J,z,S);if(U){var x=U[0],b=w[x];if(b==null)b=f[z].T(J,x,U[1],T);T[z]=w[x]=b}}return T};
function j(J){var O=L.B(J,12),W=L.h(J,16),f=new Uint8Array(W),T=12+O*16,z=44;L.D(f,0,"OTTO");L.aa(f,4,O);
for(var g=0;g<O;g++){var $=L.e(J,z,4),U=L.h(J,z+4),x=L.h(J,z+8),b=L.h(J,z+12);z+=20;var D=J.slice(U,U+x);
if(x!=b)D=pako.inflate(D);var M=12+g*16;L.D(f,M,$);L.a(f,M+8,T);L.a(f,M+12,b);f.set(D,T);T+=b}return f}var J=new Uint8Array(K);
if(J[0]==119)J=j(J);var w={},$=L.e(J,0,4);if($=="ttcf"){var S=4,I=L.B(J,S);S+=2;var q=L.B(J,S);S+=2;
var a=L.h(J,S);S+=4;var V=[];for(var g=0;g<a;g++){var r=L.h(J,S);S+=4;V.push(C(J,g,r,w))}return V}else return[C(J,0,0,w)]};
s.findTable=function(K,L,C){var j=s.B,J=j.B(K,C+4),w=C+12;for(var $=0;$<J;$++){var I=j.e(K,w,4),q=j.h(K,w+4),a=j.h(K,w+8),V=j.h(K,w+12);
if(I==L)return[a,V];w+=16}return null};s.T={};s.B={_:function(K,L){return(K[L]<<8|K[L+1])+(K[L+2]<<8|K[L+3])/(256*256+4)},H:function(K,L){var C=s.B.n(K,L);
return C/16384},W:function(K,L){var C=s.B.r.m;C[0]=K[L+3];C[1]=K[L+2];C[2]=K[L+1];C[3]=K[L];return s.B.r.aR[0]},R:function(K,L){var C=s.B.r.m;
C[0]=K[L];return s.B.r.aC[0]},n:function(K,L){var C=s.B.r.ad;C[0]=K[L]<<8|K[L+1];return s.B.r.bf[0]},B:function(K,L){return K[L]<<8|K[L+1]},aa:function(K,L,C){K[L]=C>>8&255;
K[L+1]=C&255},aQ:function(K,L,C){var j=[];for(var J=0;J<C;J++){var w=s.B.B(K,L+J*2);j.push(w)}return j},h:function(K,L){var C=s.B.r.m;
C[3]=K[L];C[2]=K[L+1];C[1]=K[L+2];C[0]=K[L+3];return s.B.r.aT[0]},a:function(K,L,C){K[L]=C>>24&255;K[L+1]=C>>16&255;
K[L+2]=C>>8&255;K[L+3]=C>>0&255},P:function(K,L){return s.B.h(K,L)*(4294967295+1)+s.B.h(K,L+4)},e:function(K,L,C){var j="";
for(var J=0;J<C;J++)j+=String.fromCharCode(K[L+J]);return j},D:function(K,L,C){for(var j=0;j<C.length;
j++)K[L+j]=C.charCodeAt(j)},p:function(K,L,C){var j="";for(var J=0;J<C;J++){var w=K[L++]<<8|K[L++];j+=String.fromCharCode(w)}return j},aK:window.TextDecoder?new window.TextDecoder:null,aS:function(K,L,C){var j=s.B.aK;
if(j&&L==0&&C==K.length)return j.decode(K);return s.B.e(K,L,C)},w:function(K,L,C){var j=[];for(var J=0;
J<C;J++)j.push(K[L+J]);return j},a7:function(K,L,C){var j=[];for(var J=0;J<C;J++)j.push(String.fromCharCode(K[L+J]));
return j},r:function(){var K=new ArrayBuffer(8);return{a3:K,aC:new Int8Array(K),m:new Uint8Array(K),bf:new Int16Array(K),ad:new Uint16Array(K),aR:new Int32Array(K),aT:new Uint32Array(K)}}()};
s.T.u={T:function(K,L,C){var j=s.B,J=s.T.u;K=new Uint8Array(K.buffer,L,C);L=0;var w=K[L];L++;var $=K[L];
L++;var S=K[L];L++;var I=K[L];L++;var q=[];L=J.U(K,L,q);var a=[];for(var V=0;V<q.length-1;V++)a.push(j.e(K,L+q[V],q[V+1]-q[V]));
L+=q[q.length-1];var g=[];L=J.U(K,L,g);var r=[];for(var V=0;V<g.length-1;V++)r.push(J.K(K,L+g[V],L+g[V+1]));
L+=g[g.length-1];var O=r[0],W=[];L=J.U(K,L,W);var f=[];for(var V=0;V<W.length-1;V++)f.push(j.e(K,L+W[V],W[V+1]-W[V]));
L+=W[W.length-1];J.i(K,L,O);if(O.CharStrings)O.CharStrings=J.w(K,O.CharStrings);if(O.ROS){L=O.FDArray;
var T=[];L=J.U(K,L,T);O.FDArray=[];for(var V=0;V<T.length-1;V++){var z=J.K(K,L+T[V],L+T[V+1]);J.F(K,z,f);
O.FDArray.push(z)}L+=T[T.length-1];L=O.FDSelect;O.FDSelect=[];var U=K[L];L++;if(U==3){var x=j.B(K,L);
L+=2;for(var V=0;V<x+1;V++){O.FDSelect.push(j.B(K,L),K[L+2]);L+=3}}else throw U}if(O.charset)O.charset=J.aH(K,O.charset,O.CharStrings.length);
J.F(K,O,f);return O},F:function(K,L,C){var j=s.T.u,J;if(L.Private){J=L.Private[1];L.Private=j.K(K,J,J+L.Private[0]);
if(L.Private.Subrs)j.i(K,J+L.Private.Subrs,L.Private)}for(var w in L)if("FamilyName FontName FullName Notice version Copyright".split(" ").indexOf(w)!=-1)L[w]=C[L[w]-426+35]},i:function(K,L,C){C.Subrs=s.T.u.w(K,L);
var j,J=C.Subrs.length+1;if(!1)j=0;else if(J<1240)j=107;else if(J<33900)j=1131;else j=32768;C.Bias=j},w:function(K,L){var C=s.B,j=[];
L=s.T.u.U(K,L,j);var J=[],w=j.length-1,$=K.byteOffset+L;for(var S=0;S<w;S++){var I=j[S];J.push(new Uint8Array(K.buffer,$+I,j[S+1]-I))}return J},bd:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],b4:function(K,L){for(var C=0;
C<K.charset.length;C++)if(K.charset[C]==L)return C;return-1},b:function(K,L){if(L<0||L>255)return-1;
return s.T.u.b4(K,s.T.u.bd[L])},aH:function(K,L,C){var j=s.B,J=[".notdef"],w=K[L];L++;if(w==0){for(var $=0;
$<C;$++){var I=j.B(K,L);L+=2;J.push(I)}}else if(w==1||w==2){while(J.length<C){var I=j.B(K,L),q=0;L+=2;
if(w==1){q=K[L];L++}else{q=j.B(K,L);L+=2}for(var $=0;$<=q;$++){J.push(I);I++}}}else throw"error: format: "+w;
return J},U:function(K,L,C){var j=s.B,J=j.B(K,L)+1;L+=2;var w=K[L];L++;if(w==1)for(var $=0;$<J;$++)C.push(K[L+$]);
else if(w==2)for(var $=0;$<J;$++)C.push(j.B(K,L+$*2));else if(w==3)for(var $=0;$<J;$++)C.push(j.h(K,L+$*3-1)&16777215);
else if(w==4)for(var $=0;$<J;$++)C.push(j.h(K,L+$*4));else if(J!=1)throw"unsupported offset size: "+w+", count: "+J;
L+=J*w;return L-1},ai:function(K,L,C){var j=s.B,J=K[L],w=K[L+1],$=K[L+2],S=K[L+3],I=K[L+4],q=1,a=null,V=null;
if(J<=20){a=J;q=1}if(J==12){a=J*100+w;q=2}if(21<=J&&J<=27){a=J;q=1}if(J==28){V=j.n(K,L+1);q=3}if(29<=J&&J<=31){a=J;
q=1}if(32<=J&&J<=246){V=J-139;q=1}if(247<=J&&J<=250){V=(J-247)*256+w+108;q=2}if(251<=J&&J<=254){V=-(J-251)*256-w-108;
q=2}if(J==255){V=j.W(K,L+1)/65535;q=5}C.ar=V!=null?V:"o"+a;C.size=q},be:function(K,L,C){var j=L+C,J=s.B,w=[];
while(L<j){var $=K[L],S=K[L+1],I=K[L+2],q=K[L+3],a=K[L+4],V=1,g=null,r=null;if($<=20){g=$;V=1}if($==12){g=$*100+S;
V=2}if($==19||$==20){g=$;V=2}if(21<=$&&$<=27){g=$;V=1}if($==28){r=J.n(K,L+1);V=3}if(29<=$&&$<=31){g=$;
V=1}if(32<=$&&$<=246){r=$-139;V=1}if(247<=$&&$<=250){r=($-247)*256+S+108;V=2}if(251<=$&&$<=254){r=-($-251)*256-S-108;
V=2}if($==255){r=J.W(K,L+1)/65535;V=5}w.push(r!=null?r:"o"+g);L+=V}return w},K:function(K,L,C){var j=s.B,J={},w=[];
while(L<C){var $=K[L],S=K[L+1],I=K[L+2],q=K[L+3],a=K[L+4],V=1,g=null,r=null;if($==28){r=j.n(K,L+1);V=3}if($==29){r=j.W(K,L+1);
V=5}if(32<=$&&$<=246){r=$-139;V=1}if(247<=$&&$<=250){r=($-247)*256+S+108;V=2}if(251<=$&&$<=254){r=-($-251)*256-S-108;
V=2}if($==255){r=j.W(K,L+1)/65535;V=5;throw"unknown number"}if($==30){var O=[],z="";V=1;while(!0){var W=K[L+V];
V++;var f=W>>4,T=W&15;if(f!=15)O.push(f);if(T!=15)O.push(T);if(T==15)break}var U=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"];
for(var x=0;x<O.length;x++)z+=U[O[x]];r=parseFloat(z)}if($<=21){var b="version Notice FullName FamilyName Weight FontBBox BlueValues OtherBlues FamilyBlues FamilyOtherBlues StdHW StdVW escape UniqueID XUID charset Encoding CharStrings Private Subrs defaultWidthX nominalWidthX".split(" ");
g=b[$];V=1;if($==12){var b="Copyright isFixedPitch ItalicAngle UnderlinePosition UnderlineThickness PaintType CharstringType FontMatrix StrokeWidth BlueScale BlueShift BlueFuzz StemSnapH StemSnapV ForceBold   LanguageGroup ExpansionFactor initialRandomSeed SyntheticBase PostScript BaseFontName BaseFontBlend       ROS CIDFontVersion CIDFontRevision CIDFontType CIDCount UIDBase FDArray FDSelect FontName".split(" ");
g=b[S];V=2}}if(g!=null){J[g]=w.length==1?w[0]:w;w=[]}else w.push(r);L+=V}return J}};s.T.X={T:function(K,L,C){var j={A:[],d:{},av:L};
K=new Uint8Array(K.buffer,L,C);L=0;var J=L,w=s.B,$=w.B,S=s.T.X,I=$(K,L);L+=2;var q=$(K,L);L+=2;var a=[];
for(var V=0;V<q;V++){var g=$(K,L);L+=2;var r=$(K,L);L+=2;var O=w.h(K,L);L+=4;var W="p"+g+"e"+r,f=a.indexOf(O);
if(f==-1){f=j.A.length;var T={};a.push(O);var z=T.ax=$(K,O);if(z==0)T=S.b7(K,O,T);else if(z==4)T=S.ao(K,O,T);
else if(z==6)T=S.a4(K,O,T);else if(z==12)T=S.ab(K,O,T);j.A.push(T)}if(j.d[W]!=null)console.log("multiple tables for one platform+encoding: "+W);
j.d[W]=f}return j},b7:function(K,L,C){var j=s.B;L+=2;var J=j.B(K,L);L+=2;var w=j.B(K,L);L+=2;C.map=[];
for(var $=0;$<J-6;$++)C.map.push(K[L+$]);return C},ao:function(K,L,C){var j=s.B,J=j.B,w=j.aQ,$=L;L+=2;
var S=J(K,L);L+=2;var I=J(K,L);L+=2;var q=J(K,L);L+=2;var a=q>>>1;C.ac=J(K,L);L+=2;C.aB=J(K,L);L+=2;
C.b3=J(K,L);L+=2;C.aY=w(K,L,a);L+=a*2;L+=2;C.aZ=w(K,L,a);L+=a*2;C.aN=[];for(var V=0;V<a;V++){C.aN.push(j.n(K,L));
L+=2}C.v=w(K,L,a);L+=a*2;C.C=w(K,L,$+S-L>>1);return C},a4:function(K,L,C){var j=s.B,J=L;L+=2;var w=j.B(K,L);
L+=2;var $=j.B(K,L);L+=2;C.aV=j.B(K,L);L+=2;var S=j.B(K,L);L+=2;C.C=[];for(var I=0;I<S;I++){C.C.push(j.B(K,L));
L+=2}return C},ab:function(K,L,C){var j=s.B,J=j.h,w=L;L+=4;var $=J(K,L);L+=4;var S=J(K,L);L+=4;var I=J(K,L)*3;
L+=4;var q=C.az=new Uint32Array(I);for(var a=0;a<I;a+=3){q[a]=J(K,L+(a<<2));q[a+1]=J(K,L+(a<<2)+4);q[a+2]=J(K,L+(a<<2)+8)}return C}};
s.T.a5={T:function(K,L,C){var j=s.B,J=L,w=j.B(K,L);L+=2;var $=j.B(K,L);L+=2;var S=j.h(K,L);L+=4;var I=[];
for(var q=0;q<S;q++){var a=j.h(K,L);L+=4;var V=j.h(K,L);L+=4;var g=j.h(K,L);L+=4;L+=4;L+=2*12;var r=j.B(K,L);
L+=2;var O=j.B(K,L);L+=2;L+=4;var W=J+a;for(var f=0;f<3;f++){var T=j.B(K,W);W+=2;var z=j.B(K,W);W+=2;
var U=j.h(K,W);W+=4;var x=z-T+1,b=J+a+U,D=j.B(K,b);b+=2;if(D!=1)throw D;var M=j.B(K,b);b+=2;var N=j.h(K,b);
b+=4;var t=[];for(var B=0;B<x;B++){var h=j.h(K,b+B*4);t.push(N+h)}I.push([T,z,M,t])}}return I}};s.T.ae={T:function(K,L,C){var j=s.B,J=L;
return new Uint8Array(K.buffer,K.byteOffset+L,C)}};s.T.J={T:function(K,L,C,j){var J=[],w=j.maxp.numGlyphs;
for(var $=0;$<w;$++)J.push(null);return J},a6:function(K,L){var C=s.B,j=K._data,J=K.loca;if(J[L]==J[L+1])return null;
var $=s.findTable(j,"glyf",K._offset)[0]+J[L],S={};S.z=C.n(j,$);$+=2;S.ag=C.n(j,$);$+=2;S.aO=C.n(j,$);
$+=2;S.aG=C.n(j,$);$+=2;S.ap=C.n(j,$);$+=2;if(S.ag>=S.aG||S.aO>=S.ap)return null;if(S.z>0){S.Q=[];for(var I=0;
I<S.z;I++){S.Q.push(C.B(j,$));$+=2}var q=C.B(j,$),f=0,T=0;$+=2;if(j.length-$<q)return null;S.aI=C.w(j,$,q);
$+=q;var a=S.Q[S.z-1]+1;S.M=[];for(var I=0;I<a;I++){var V=j[$];$++;S.M.push(V);if((V&8)!=0){var g=j[$];
$++;for(var r=0;r<g;r++){S.M.push(V);I++}}}S.k=[];for(var I=0;I<a;I++){var O=(S.M[I]&2)!=0,W=(S.M[I]&16)!=0;
if(O){S.k.push(W?j[$]:-j[$]);$++}else{if(W)S.k.push(0);else{S.k.push(C.n(j,$));$+=2}}}S.f=[];for(var I=0;
I<a;I++){var O=(S.M[I]&4)!=0,W=(S.M[I]&32)!=0;if(O){S.f.push(W?j[$]:-j[$]);$++}else{if(W)S.f.push(0);
else{S.f.push(C.n(j,$));$+=2}}}for(var I=0;I<a;I++){f+=S.k[I];T+=S.f[I];S.k[I]=f;S.f[I]=T}}else{var z=1<<0,U=1<<1,x=1<<2,b=1<<3,N=1<<4,t=1<<5,B=1<<6,h=1<<7,m=1<<8,F=1<<9,Y=1<<10,Q=1<<11,R=1<<12,_;
S.Z=[];do{_=C.B(j,$);$+=2;var X={q:{g:1,a$:0,af:0,c:1,a2:0,bb:0},bc:-1,aE:-1};S.Z.push(X);X.at=C.B(j,$);
$+=2;if(_&z){var H=C.n(j,$);$+=2;var A=C.n(j,$);$+=2}else{var H=C.R(j,$);$++;var A=C.R(j,$);$++}if(_&U){X.q.a2=H;
X.q.bb=A}else{X.bc=H;X.aE=A}if(_&b){X.q.g=X.q.c=C.H(j,$);$+=2}else if(_&B){X.q.g=C.H(j,$);$+=2;X.q.c=C.H(j,$);
$+=2}else if(_&h){X.q.g=C.H(j,$);$+=2;X.q.a$=C.H(j,$);$+=2;X.q.af=C.H(j,$);$+=2;X.q.c=C.H(j,$);$+=2}}while(_&t);
if(_&m){var n=C.B(j,$);$+=2;S.a1=[];for(var I=0;I<n;I++){S.a1.push(j[$]);$++}}}return S}};s.T.head={T:function(K,L,C){var j=s.B,J={},w=j._(K,L);
L+=4;J.fontRevision=j._(K,L);L+=4;var $=j.h(K,L);L+=4;var S=j.h(K,L);L+=4;J.flags=j.B(K,L);L+=2;J.unitsPerEm=j.B(K,L);
L+=2;J.created=j.P(K,L);L+=8;J.modified=j.P(K,L);L+=8;J.xMin=j.n(K,L);L+=2;J.yMin=j.n(K,L);L+=2;J.xMax=j.n(K,L);
L+=2;J.yMax=j.n(K,L);L+=2;J.macStyle=j.B(K,L);L+=2;J.lowestRecPPEM=j.B(K,L);L+=2;J.fontDirectionHint=j.n(K,L);
L+=2;J.indexToLocFormat=j.n(K,L);L+=2;J.glyphDataFormat=j.n(K,L);L+=2;return J}};s.T.aP={T:function(K,L,C){var j=s.B,J={},w=j._(K,L);
L+=4;var $="ascender descender lineGap advanceWidthMax minLeftSideBearing minRightSideBearing xMaxExtent caretSlopeRise caretSlopeRun caretOffset res0 res1 res2 res3 metricDataFormat numberOfHMetrics".split(" ");
for(var S=0;S<$.length;S++){var I=$[S],q=I=="advanceWidthMax"||I=="numberOfHMetrics"?j.B:j.n;J[I]=q(K,L+S*2)}return J}};
s.T.b1={T:function(K,L,C,j){var J=s.B,w=[],$=[],S=j.maxp.numGlyphs,I=j.hhea.numberOfHMetrics,q=0,a=0,V=0;
while(V<I){q=J.B(K,L+(V<<2));a=J.n(K,L+(V<<2)+2);w.push(q);$.push(a);V++}while(V<S){w.push(q);$.push(a);
V++}return{aw:w,b5:$}}};s.T.I={T:function(K,L,C,j){var J=s.B,w=s.T.I,$=J.B(K,L);if($==1)return w.aJ(K,L,C,j);
var S=J.B(K,L+2);L+=4;var I={O:[],j:[]};for(var q=0;q<S;q++){L+=2;var C=J.B(K,L);L+=2;var a=J.B(K,L);
L+=2;var V=a>>>8;V&=15;if(V==0)L=w.b2(K,L,I)}return I},aJ:function(K,L,C,j){var J=s.B,w=s.T.I,$=J._(K,L),S=J.h(K,L+4);
L+=8;var I={O:[],j:[]};for(var q=0;q<S;q++){var C=J.h(K,L);L+=4;var a=J.B(K,L);L+=2;var V=J.B(K,L);L+=2;
var g=a&255;if(g==0)L=w.b2(K,L,I)}return I},b2:function(K,L,C){var j=s.B,J=j.B,w=-1,$=J(K,L),S=J(K,L+2),I=J(K,L+4),q=J(K,L+6);
L+=8;for(var a=0;a<$;a++){var V=J(K,L);L+=2;var g=J(K,L);L+=2;var r=j.n(K,L);L+=2;if(V!=w){C.O.push(V);
C.j.push({aM:[],b8:[]})}var O=C.j[C.j.length-1];O.aM.push(g);O.b8.push(r);w=V}return L}};s.T.ba={T:function(K,L,C,j){var J=s.B,w=[],$=j.head.indexToLocFormat,S=j.maxp.numGlyphs+1;
if($==0)for(var I=0;I<S;I++)w.push(J.B(K,L+(I<<1))<<1);if($==1)for(var I=0;I<S;I++)w.push(J.h(K,L+(I<<2)));
return w}};s.T.a9={T:function(K,L,C){var j=s.B,J=j.B,w={},$=j.h(K,L);L+=4;w.numGlyphs=J(K,L);L+=2;return w}};
s.T.name={T:function(K,L,C){var j=s.B,J={},w=j.B(K,L),D="fontFamily";L+=2;var $=j.B(K,L);L+=2;var S=j.B(K,L);
L+=2;var I=L-6+S,q="copyright fontFamily fontSubfamily ID fullName version postScriptName trademark manufacturer designer description urlVendor urlDesigner licence licenceURL --- typoFamilyName typoSubfamilyName compatibleFull sampleText postScriptCID wwsFamilyName wwsSubfamilyName lightPalette darkPalette".split(" "),a=j.B;
for(var V=0;V<$;V++){var g=a(K,L),U;L+=2;var r=a(K,L);L+=2;var O=a(K,L);L+=2;var W=a(K,L);L+=2;var f=a(K,L);
L+=2;var T=a(K,L);L+=2;var z=I+T;if(!1){}else if(g==0)U=j.p(K,z,f/2);else if(g==3&&r==0)U=j.p(K,z,f/2);
else if(g==1&&r==25)U=j.p(K,z,f/2);else if(r==0)U=j.e(K,z,f);else if(r==1)U=j.p(K,z,f/2);else if(r==3)U=j.p(K,z,f/2);
else if(r==4)U=j.p(K,z,f/2);else if(r==5)U=j.p(K,z,f/2);else if(r==10)U=j.p(K,z,f/2);else if(g==1){U=j.e(K,z,f);
console.log("reading unknown MAC encoding "+r+" as ASCII")}else{console.log("unknown encoding "+r+", platformID: "+g);
U=j.e(K,z,f)}var x="p"+g+","+O.toString(16);if(J[x]==null)J[x]={};J[x][q[W]]=U;J[x]._lang=O}var b=s.T.name.aX(J);
if(b[D]==null)for(var M in J)if(J[M][D]!=null)b[D]=J[M][D];return b},aX:function(K){var L="postScriptName",j;
for(var C in K)if(K[C][L]!=null&&K[C]._lang==1033)return K[C];for(var C in K)if(K[C][L]!=null&&K[C]._lang==0)return K[C];
for(var C in K)if(K[C][L]!=null&&K[C]._lang==3084)return K[C];for(var C in K)if(K[C][L]!=null)return K[C];
for(var C in K){j=K[C];break}console.log("returning name table with languageID "+j.al);if(j[L]==null&&j.ID!=null)j[L]=j.ID;
return j}};s.T.S={T:function(K,L,C){var j=s.B,J=j.B(K,L);L+=2;var w=s.T.S,$={};if(J==0)w.aL(K,L,$);else if(J==1)w.b0(K,L,$);
else if(J==2||J==3||J==4)w.an(K,L,$);else if(J==5)w.ah(K,L,$);else throw"unknown OS/2 table version: "+J;
return $},aL:function(K,L,C){var j=s.B;C.xAvgCharWidth=j.n(K,L);L+=2;C.usWeightClass=j.B(K,L);L+=2;C.usWidthClass=j.B(K,L);
L+=2;C.fsType=j.B(K,L);L+=2;C.ySubscriptXSize=j.n(K,L);L+=2;C.ySubscriptYSize=j.n(K,L);L+=2;C.ySubscriptXOffset=j.n(K,L);
L+=2;C.ySubscriptYOffset=j.n(K,L);L+=2;C.ySuperscriptXSize=j.n(K,L);L+=2;C.ySuperscriptYSize=j.n(K,L);
L+=2;C.ySuperscriptXOffset=j.n(K,L);L+=2;C.ySuperscriptYOffset=j.n(K,L);L+=2;C.yStrikeoutSize=j.n(K,L);
L+=2;C.yStrikeoutPosition=j.n(K,L);L+=2;C.sFamilyClass=j.n(K,L);L+=2;C.panose=j.w(K,L,10);L+=10;C.ulUnicodeRange1=j.h(K,L);
L+=4;C.ulUnicodeRange2=j.h(K,L);L+=4;C.ulUnicodeRange3=j.h(K,L);L+=4;C.ulUnicodeRange4=j.h(K,L);L+=4;
C.achVendID=j.e(K,L,4);L+=4;C.fsSelection=j.B(K,L);L+=2;C.usFirstCharIndex=j.B(K,L);L+=2;C.usLastCharIndex=j.B(K,L);
L+=2;C.sTypoAscender=j.n(K,L);L+=2;C.sTypoDescender=j.n(K,L);L+=2;C.sTypoLineGap=j.n(K,L);L+=2;C.usWinAscent=j.B(K,L);
L+=2;C.usWinDescent=j.B(K,L);L+=2;return L},b0:function(K,L,C){var j=s.B;L=s.T.S.aL(K,L,C);C.ulCodePageRange1=j.h(K,L);
L+=4;C.ulCodePageRange2=j.h(K,L);L+=4;return L},an:function(K,L,C){var j=s.B,J=j.B;L=s.T.S.b0(K,L,C);
C.sxHeight=j.n(K,L);L+=2;C.sCapHeight=j.n(K,L);L+=2;C.usDefault=J(K,L);L+=2;C.usBreak=J(K,L);L+=2;C.usMaxContext=J(K,L);
L+=2;return L},ah:function(K,L,C){var j=s.B.B;L=s.T.S.an(K,L,C);C.usLowerOpticalPointSize=j(K,L);L+=2;
C.usUpperOpticalPointSize=j(K,L);L+=2;return L}};s.T.aW={T:function(K,L,C){var j=s.B,J={};J.version=j._(K,L);
L+=4;J.italicAngle=j._(K,L);L+=4;J.underlinePosition=j.n(K,L);L+=2;J.underlineThickness=j.n(K,L);L+=2;
return J}};s.T.a8={T:function(K,L,C){var j=s.B,J={entries:[],L:[]},w=L,$=j.B(K,L);L+=2;var S=j.h(K,L);
L+=4;var I=j.h(K,L);L+=4;L=S+w;var q=j.B(K,L);L+=2;for(var a=0;a<q;a++){var V=j.B(K,L);L+=2;var g=j.B(K,L);
L+=2;var r=j.h(K,L);L+=4;var O=j.h(K,L);L+=4;var W=new Uint8Array(K.buffer,w+r+S,O);if(W[0]==31&&W[1]==139&&W[2]==8)W=pako.inflate(W);
var f=j.aS(W,0,W.length);for(var T=V;T<=g;T++){J.entries[T]=J.L.length}J.L.push(f)}return J}};s.T.ay={T:function(K,L,C,j){var J=j.maxp.numGlyphs,w=L,$=s.B,S=$.h(K,L+4),I=[];
for(var q=S-1;q<S;q++){var a=w+$.h(K,L+8+q*4);for(var V=0;V<J;V++){var g=$.h(K,a+4+V*4),r=$.h(K,a+4+V*4+4);
if(g==r){I[V]=null;continue}var O=a+g,W=$.e(K,O+4,4);if(W!="png ")throw W;I[V]=new Uint8Array(K.buffer,K.byteOffset+O+8,r-g-8)}}return I}};
s.T.b9={T:function(K,L,C){var j=s.B,J=L;L+=2;var w=j.B(K,L);L+=2;var $=j.h(K,L);L+=4;var S=j.h(K,L);
L+=4;var I=j.B(K,L);L+=2;var q={},a=J+$;for(var V=0;V<w;V++){q["g"+j.B(K,a)]=[j.B(K,a+2),j.B(K,a+4)];
a+=6}var g=[];a=J+S;for(var V=0;V<I;V++){g.push(j.B(K,a),j.B(K,a+2));a+=4}return[q,g]}};s.T.aF={T:function(K,L,C){var j=s.B,J=L,w=j.B(K,L);
L+=2;if(w==0){var $=j.B(K,L);L+=2;var S=j.B(K,L);L+=2;var I=j.B(K,L);L+=2;var q=j.h(K,L);L+=4;return new Uint8Array(K.buffer,J+q,I*4)}else throw w}};
s.T.aD={T:function(K,L,C,j){var J=s.B,w=J.B,$=J.h,S=L,I=w(K,S);S+=2;var q=w(K,S);S+=2;var a=w(K,S);S+=2;
var V=w(K,S);S+=2;var g=w(K,S);S+=2;S=L+V;var r={},O=w(K,S);S+=2;for(var W=0;W<O;W++){var f=J.e(K,S,4);
S+=4;var T=w(K,S);S+=2;r[f]=!0}return r}};s.U={shape:function(K,L,C){var j=function(K,J,O,C){var W=J[O],f=J[O+1],T=K.kern;
if(T){var z=T.O.indexOf(W);if(z!=-1){var U=T.j[z].aM.indexOf(f);if(U!=-1)return[0,0,T.j[z].b8[U],0]}}return[0,0,0,0]},J=[],q=0,a=0;
for(var w=0;w<L.length;w++){var $=L.codePointAt(w);if($>65535)w++;J.push(s.U.codeToGlyph(K,$))}var I=[];
for(var w=0;w<J.length;w++){var V=j(K,J,w,C),g=J[w],r=K.hmtx.aw[g]+V[2];I.push({g:g,cl:w,dx:0,dy:0,ax:r,ay:0});
q+=r}return I},shapeToPath:function(K,L,C){var j={s:[],l:[]},J=0,w=0;for(var $=0;$<L.length;$++){var I=L[$],q=s.U.glyphToPath(K,I.g),a=q.crds;
for(var V=0;V<a.length;V+=2){j.l.push(a[V]+J+I.dx);j.l.push(a[V+1]+w+I.dy)}if(C)j.s.push(C);for(var V=0;
V<q.cmds.length;V++)j.s.push(q.cmds[V]);var g=j.s.length;if(C)if(g!=0&&j.s[g-1]!="X")j.s.push("X");J+=I.ax;
w+=I.ay}return{cmds:j.s,crds:j.l}},codeToGlyph:function(){function K(w,$,I){var a=0,V=~~(w.length/$);
while(a+1!=V){var g=a+(V-a>>>1);if(w[g*$]<=I)a=g;else V=g}return a*$}var L=[9,10,11,12,13,32,133,160,5760,6158,8232,8233,8239,8288,12288,65279],C={};
for(var j=0;j<L.length;j++)C[L[j]]=1;for(var j=8192;j<=8205;j++)C[j]=1;function J(w,$){if(w._ctab==null){var I=w.cmap,q=-1,a="p3e10 p0e4 p3e1 p1e0 p0e3 p0e1 p3e0 p3e5".split(" ");
for(var j=0;j<a.length;j++)if(I.d[a[j]]!=null){q=I.d[a[j]];break}if(q==-1)throw"no familiar platform and encoding!";
w._ctab=I.A[q]}var V=w._ctab,g=V.ax,r=-1;if(g==0){if($>=V.map.length)r=0;else r=V.map[$]}else if(g==4){var O=V.aY;
r=0;if($<=O[O.length-1]){var W=K(O,1,$);if(O[W]<$)W++;if($>=V.aZ[W]){var f=0;if(V.v[W]!=0)f=V.C[$-V.aZ[W]+(V.v[W]>>1)-(V.v.length-W)];
else f=$+V.aN[W];r=f&65535}}}else if(g==6){var T=$-V.aV,z=V.C;if(T<0||T>=z.length)r=0;else r=z[T]}else if(g==12){var U=V.az;
r=0;if($<=U[U.length-2]){var j=K(U,3,$);if(U[j]<=$&&$<=U[j+1]){r=U[j+2]+($-U[j])}}}else throw"unknown cmap table format "+V.ax;
var x=w["SVG "],b=w.loca;if(r!=0&&w["CFF "]==null&&(x==null||x.entries[r]==null)&&b&&b[r]==b[r+1]&&C[$]==null)r=0;
return r}return J}(),glyphToPath:function(K,L,C){var j={s:[],l:[]},J=K["SVG "],w=K["CFF "],$=K.COLR,S=K.CBLC,I=K.CBDT,q=K.sbix,a=window.UPNG,V=s.U,g=null;
if(S&&a)for(var r=0;r<S.length;r++)if(S[r][0]<=L&&L<=S[r][1])g=S[r];if(g||q&&q[L]){if(g&&g[2]!=17)throw"not a PNG";
if(K.__tmp==null)K.__tmp={};var O=K.__tmp["g"+L];if(O==null){var W,f,z="";if(q){W=q[L];f=W.length}else{var T=g[3][L-g[0]]+5;
f=I[T+1]<<16|I[T+2]<<8|I[T+3];T+=4;W=new Uint8Array(I.buffer,I.byteOffset+T,f)}for(var r=0;r<f;r++)z+=String.fromCharCode(W[r]);
O=K.__tmp["g"+L]="data:image/png;base64,"+btoa(z)}j.s.push(O);var U=K.head.unitsPerEm*1.15,x=Math.round(U),b=Math.round(U),D=Math.round(-b*.15);
j.l.push(0,b+D,x,b+D,x,D,0,D)}else if(J&&J.entries[L]){var M=J.entries[L];if(M!=null){if(typeof M=="number"){var N=J.L[M];
if(typeof N=="string"){var t=new DOMParser,B=t.parseFromString(N,"image/svg+xml");N=J.L[M]=B.getElementsByTagName("svg")[0]}M=V.SVG.a_(N,L);
J.entries[L]=M}j=M}}else if(C!=!0&&$&&$[0]["g"+L]&&$[0]["g"+L][1]>1){function h(E){var c=E.toString(16);
return(c.length==1?"0":"")+c}var m=K.CPAL,F=$[0]["g"+L];for(var r=0;r<F[1];r++){var Y=F[0]+r,Q=$[1][2*Y],R=$[1][2*Y+1]*4,_=s.U.glyphToPath(K,Q,Q==L),X="#"+h(m[R+2])+h(m[R+1])+h(m[R+0]);
j.s.push(X);j.s=j.s.concat(_.cmds);j.l=j.l.concat(_.crds);j.s.push("X")}}else if(w){var H=w.Private,A={x:0,y:0,stack:[],G:0,V:!1,width:H?H.defaultWidthX:0,open:!1};
if(w.ROS){var n=0;while(w.FDSelect[n+2]<=L)n+=2;H=w.FDArray[w.FDSelect[n+1]].Private}V._drawCFF(w.CharStrings[L],A,w,H,j)}else if(K.glyf){V._drawGlyf(L,K,j)}return{cmds:j.s,crds:j.l}},_drawGlyf:function(K,L,C){var j=L.glyf[K];
if(j==null)j=L.glyf[K]=s.T.J.a6(L,K);if(j!=null){if(j.z>-1)s.U._simpleGlyph(j,C);else s.U._compoGlyph(j,L,C)}},_simpleGlyph:function(K,L){var C=s.U.P;
for(var j=0;j<K.z;j++){var J=j==0?0:K.Q[j-1]+1,w=K.Q[j];for(var $=J;$<=w;$++){var I=$==J?w:$-1,q=$==w?J:$+1,a=K.M[$]&1,V=K.M[I]&1,g=K.M[q]&1,r=K.k[$],W=K.f[$];
if($==J){if(a){if(V)C.$(L,K.k[I],K.f[I]);else{C.$(L,r,W);continue}}else{if(V)C.$(L,K.k[I],K.f[I]);else C.$(L,Math.floor((K.k[I]+r)*.5),Math.floor((K.f[I]+W)*.5))}}if(a){if(V)C.N(L,r,W)}else{if(g)C.b6(L,r,W,K.k[q],K.f[q]);
else C.b6(L,r,W,Math.floor((r+K.k[q])*.5),Math.floor((W+K.f[q])*.5))}}C.Y(L)}},_compoGlyph:function(K,L,C){for(var j=0;
j<K.Z.length;j++){var J={s:[],l:[]},w=K.Z[j];s.U._drawGlyf(w.at,L,J);var $=w.q;for(var S=0;S<J.l.length;
S+=2){var q=J.l[S],a=J.l[S+1];C.l.push(q*$.g+a*$.af+$.a2);C.l.push(q*$.a$+a*$.c+$.bb)}for(var S=0;S<J.s.length;
S++)C.s.push(J.s[S])}},pathToSVG:function(K,L){var C=K.cmds,j=K.crds,S=0,q=0,a=0,V=0,g=0,r=0,O=0;if(L==null)L=5;
function J(h){return parseFloat(h.toFixed(L))}function w(h){var m=[],F=!1,Y="";for(var W=0;W<h.length;
W++){var Q=h[W],R=typeof Q=="number";if(!R){if(Q==Y&&Q.length==1&&Q!="m")continue;Y=Q}if(F&&R&&Q>=0)m.push(" ");
m.push(Q);F=R}return m.join("")}var $=[],I={M:2,L:2,Q:4,C:6};for(var W=0;W<C.length;W++){var f=C[W],T=I[f]?I[f]:0,z=[],U,x,b,N;
if(f=="L"){U=j[S]-q;x=j[S+1]-a;b=J(U+V);N=J(x+g);if(C[W+1]=="Z"&&j[S]==r&&j[S+1]==O){b=U;N=x}else if(b==0&&N==0){}else if(b==0)z.push("v",N);
else if(N==0)z.push("h",b);else{z.push("l",b,N)}}else{z.push(f.toLowerCase());for(var t=0;t<T;t+=2){U=j[S+t]-q;
x=j[S+t+1]-a;b=J(U+V);N=J(x+g);z.push(b,N)}}if(T!=0){V+=U-b;g+=x-N}var B=z;for(var t=0;t<B.length;t++)$.push(B[t]);
if(T!=0){S+=T;q=j[S-2];a=j[S-1]}if(f=="M"){r=q;O=a}if(f=="Z"){q=r;a=O}}return w($)},SVGToPath:function(K){var L={s:[],l:[]};
s.U.SVG.as(K,L);return{cmds:L.s,crds:L.l}},pathToContext:function(){var K,L;function C(J,w){var $=0,S=J.cmds,I=J.crds;
for(var q=0;q<S.length;q++){var a=S[q];if(a=="M"){w.moveTo(I[$],I[$+1]);$+=2}else if(a=="L"){w.lineTo(I[$],I[$+1]);
$+=2}else if(a=="C"){w.bezierCurveTo(I[$],I[$+1],I[$+2],I[$+3],I[$+4],I[$+5]);$+=6}else if(a=="Q"){w.quadraticCurveTo(I[$],I[$+1],I[$+2],I[$+3]);
$+=4}else if(a[0]=="d"){var V=window.UPNG,g=I[$],r=I[$+1],O=I[$+2],W=I[$+3],f=I[$+4],T=I[$+5],z=I[$+6],U=I[$+7];
$+=8;if(V==null){w.moveTo(g,r);w.lineTo(O,W);w.lineTo(f,T);w.lineTo(z,U);w.closePath();continue}var x=O-g,b=W-r,D=z-g,M=U-r,N=atob(a.slice(22)),t=new Uint8Array(N.length);
for(var B=0;B<N.length;B++)t[B]=N.charCodeAt(B);var h=V.decode(t.buffer),m=h.width,F=h.height,Y=new Uint8Array(V.toRGBA8(h)[0]),Q=w.getTransform(),R=Math.sqrt(Math.abs(Q.a*Q.d-Q.b*Q.c))*Math.sqrt(D*D+M*M)/F;
while(R<.5){var _=j(Y,m,F);Y=_.a3;m=_.am;F=_.aA;R*=2}if(K==null){K=document.createElement("canvas");
L=K.getContext("2d")}if(K.width!=m||K.height!=F){K.width=m;K.height=F}L.putImageData(new ImageData(new Uint8ClampedArray(Y.buffer),m,F),0,0);
w.save();w.transform(x,b,D,M,g,r);w.scale(1/m,1/F);w.drawImage(K,0,0);w.restore()}else if(a.charAt(0)=="#"||a.charAt(0)=="r"){w.beginPath();
w.fillStyle=a}else if(a.charAt(0)=="O"&&a!="OX"){w.beginPath();var X=a.split("-");w.lineWidth=parseFloat(X[2]);
w.lineCap=["butt","round","square"][parseFloat(X[3])];w.lineJoin=["miter","round","bevel"][parseFloat(X[4])];
w.miterLimit=parseFloat(X[5]);w.lineDashOffset=parseFloat(X[6]);w.setLineDash(X[7].split(",").map(parseFloat));
w.strokeStyle=X[1]}else if(a=="Z"){w.closePath()}else if(a=="X"){w.fill()}else if(a=="OX"){w.stroke()}}}function j(J,w,$,S){var I=w>>1,q=$>>1,a=S&&S.length==I*q*4?S:new Uint8Array(I*q*4),V=new Uint32Array(J.buffer),g=new Uint32Array(a.buffer);
for(var r=0;r<q;r++)for(var O=0;O<I;O++){var W=r*I+O,f=(r<<1)*w+(O<<1),T=V[f],z=V[f+1],U=V[f+w],x=V[f+w+1],N=T>>>24,t=z>>>24,B=U>>>24,h=x>>>24,m=N+t+B+h;
if(m==1020){var F=(T>>>0&255)+(z>>>0&255)+(U>>>0&255)+(x>>>0&255)+2>>>2,Y=(T>>>8&255)+(z>>>8&255)+(U>>>8&255)+(x>>>8&255)+2>>>2,Q=(T>>>16&255)+(z>>>16&255)+(U>>>16&255)+(x>>>16&255)+2>>>2;
g[W]=255<<24|Q<<16|Y<<8|F}else if(m==0)g[W]=0;else{var F=(T>>>0&255)*N+(z>>>0&255)*t+(U>>>0&255)*B+(x>>>0&255)*h,Y=(T>>>8&255)*N+(z>>>8&255)*t+(U>>>8&255)*B+(x>>>8&255)*h,Q=(T>>>16&255)*N+(z>>>16&255)*t+(U>>>16&255)*B+(x>>>16&255)*h,R=1/m;
F=~~(F*R+.5);Y=~~(Y*R+.5);Q=~~(Q*R+.5);g[W]=m+2>>>2<<24|Q<<16|Y<<8|F}}return{a3:a,am:I,aA:q}}return C}(),P:{$:function(K,L,C){K.s.push("M");
K.l.push(L,C)},N:function(K,L,C){K.s.push("L");K.l.push(L,C)},o:function(K,L,C,j,J,w,$){K.s.push("C");
K.l.push(L,C,j,J,w,$)},b6:function(K,L,C,j,J){K.s.push("Q");K.l.push(L,C,j,J)},Y:function(K){K.s.push("Z")}},_drawCFF:function(K,L,C,j,J){var w=L.stack,$=L.G,S=L.V,I=L.width,q=L.open,a=0,V=L.x,g=L.y,r=0,W=0,f=0,T=0,z=0,U=0,x=0,b=0,N=0,t=0,B=s.T.u,h=s.U.P,m=j.nominalWidthX,F={ar:0,size:0};
while(a<K.length){B.ai(K,a,F);var Y=F.ar;a+=F.size;if(!1){}else if(Y=="o1"||Y=="o18"){var Q;Q=w.length%2!==0;
if(Q&&!S){I=w.shift()+m}$+=w.length>>1;w.length=0;S=!0}else if(Y=="o3"||Y=="o23"){var Q;Q=w.length%2!==0;
if(Q&&!S){I=w.shift()+m}$+=w.length>>1;w.length=0;S=!0}else if(Y=="o4"){if(w.length>1&&!S){I=w.shift()+m;
S=!0}if(q)h.Y(J);g+=w.pop();h.$(J,V,g);q=!0}else if(Y=="o5"){while(w.length>0){V+=w.shift();g+=w.shift();
h.N(J,V,g)}}else if(Y=="o6"||Y=="o7"){var R=w.length,_=Y=="o6";for(var X=0;X<R;X++){var H=w.shift();
if(_)V+=H;else g+=H;_=!_;h.N(J,V,g)}}else if(Y=="o8"||Y=="o24"){var R=w.length,A=0;while(A+6<=R){r=V+w.shift();
W=g+w.shift();f=r+w.shift();T=W+w.shift();V=f+w.shift();g=T+w.shift();h.o(J,r,W,f,T,V,g);A+=6}if(Y=="o24"){V+=w.shift();
g+=w.shift();h.N(J,V,g)}}else if(Y=="o11")break;else if(Y=="o1234"||Y=="o1235"||Y=="o1236"||Y=="o1237"){if(Y=="o1234"){r=V+w.shift();
W=g;f=r+w.shift();T=W+w.shift();N=f+w.shift();t=T;z=N+w.shift();U=T;x=z+w.shift();b=g;V=x+w.shift();
h.o(J,r,W,f,T,N,t);h.o(J,z,U,x,b,V,g)}if(Y=="o1235"){r=V+w.shift();W=g+w.shift();f=r+w.shift();T=W+w.shift();
N=f+w.shift();t=T+w.shift();z=N+w.shift();U=t+w.shift();x=z+w.shift();b=U+w.shift();V=x+w.shift();g=b+w.shift();
w.shift();h.o(J,r,W,f,T,N,t);h.o(J,z,U,x,b,V,g)}if(Y=="o1236"){r=V+w.shift();W=g+w.shift();f=r+w.shift();
T=W+w.shift();N=f+w.shift();t=T;z=N+w.shift();U=T;x=z+w.shift();b=U+w.shift();V=x+w.shift();h.o(J,r,W,f,T,N,t);
h.o(J,z,U,x,b,V,g)}if(Y=="o1237"){r=V+w.shift();W=g+w.shift();f=r+w.shift();T=W+w.shift();N=f+w.shift();
t=T+w.shift();z=N+w.shift();U=t+w.shift();x=z+w.shift();b=U+w.shift();if(Math.abs(x-V)>Math.abs(b-g)){V=x+w.shift()}else{g=b+w.shift()}h.o(J,r,W,f,T,N,t);
h.o(J,z,U,x,b,V,g)}}else if(Y=="o14"){if(w.length>0&&w.length!=4&&!S){I=w.shift()+C.nominalWidthX;S=!0}if(w.length==4){var n=0,E=w.shift(),c=w.shift(),Z=w.shift(),av=w.shift(),ak=B.b(C,Z),an=B.b(C,av);
s.U._drawCFF(C.CharStrings[ak],L,C,j,J);L.x=E;L.y=c;s.U._drawCFF(C.CharStrings[an],L,C,j,J)}if(q){h.Y(J);
q=!1}}else if(Y=="o19"||Y=="o20"){var Q;Q=w.length%2!==0;if(Q&&!S){I=w.shift()+m}$+=w.length>>1;w.length=0;
S=!0;a+=$+7>>3}else if(Y=="o21"){if(w.length>2&&!S){I=w.shift()+m;S=!0}g+=w.pop();V+=w.pop();if(q)h.Y(J);
h.$(J,V,g);q=!0}else if(Y=="o22"){if(w.length>1&&!S){I=w.shift()+m;S=!0}V+=w.pop();if(q)h.Y(J);h.$(J,V,g);
q=!0}else if(Y=="o25"){while(w.length>6){V+=w.shift();g+=w.shift();h.N(J,V,g)}r=V+w.shift();W=g+w.shift();
f=r+w.shift();T=W+w.shift();V=f+w.shift();g=T+w.shift();h.o(J,r,W,f,T,V,g)}else if(Y=="o26"){if(w.length%2){V+=w.shift()}while(w.length>0){r=V;
W=g+w.shift();f=r+w.shift();T=W+w.shift();V=f;g=T+w.shift();h.o(J,r,W,f,T,V,g)}}else if(Y=="o27"){if(w.length%2){g+=w.shift()}while(w.length>0){r=V+w.shift();
W=g;f=r+w.shift();T=W+w.shift();V=f+w.shift();g=T;h.o(J,r,W,f,T,V,g)}}else if(Y=="o10"||Y=="o29"){var d=Y=="o10"?j:C;
if(w.length==0){console.log("error: empty stack")}else{var a7=w.pop(),u=d.Subrs[a7+d.Bias];L.x=V;L.y=g;
L.G=$;L.V=S;L.width=I;L.open=q;s.U._drawCFF(u,L,C,j,J);V=L.x;g=L.y;$=L.G;S=L.V;I=L.width;q=L.open}}else if(Y=="o30"||Y=="o31"){var R,o=w.length,A=0,y=Y=="o31";
R=o&~2;A+=o-R;while(A<R){if(y){r=V+w.shift();W=g;f=r+w.shift();T=W+w.shift();g=T+w.shift();if(R-A==5){V=f+w.shift();
A++}else V=f;y=!1}else{r=V;W=g+w.shift();f=r+w.shift();T=W+w.shift();V=f+w.shift();if(R-A==5){g=T+w.shift();
A++}else g=T;y=!0}h.o(J,r,W,f,T,V,g);A+=4}}else if((Y+"").charAt(0)=="o"){console.log("Unknown operation: "+Y,K);
throw Y}else w.push(Y)}L.x=V;L.y=g;L.G=$;L.V=S;L.width=I;L.open=q},SVG:function(){var K={aU:function(V){return Math.sqrt(Math.abs(V[0]*V[3]-V[1]*V[2]))},translate:function(V,g,r){K.concat(V,[1,0,0,1,g,r])},rotate:function(V,g){K.concat(V,[Math.cos(g),-Math.sin(g),Math.sin(g),Math.cos(g),0,0])},scale:function(V,g,r){K.concat(V,[g,0,0,r,0,0])},concat:function(V,g){var r=V[0],O=V[1],W=V[2],f=V[3],T=V[4],z=V[5];
V[0]=r*g[0]+O*g[2];V[1]=r*g[1]+O*g[3];V[2]=W*g[0]+f*g[2];V[3]=W*g[1]+f*g[3];V[4]=T*g[0]+z*g[2]+g[4];
V[5]=T*g[1]+z*g[3]+g[5]},aq:function(V){var g=V[0],r=V[1],O=V[2],W=V[3],f=V[4],T=V[5],z=g*W-r*O;V[0]=W/z;
V[1]=-r/z;V[2]=-O/z;V[3]=g/z;V[4]=(O*T-W*f)/z;V[5]=(r*f-g*T)/z},a0:function(V,g){var r=g[0],W=g[1];return[r*V[0]+W*V[2]+V[4],r*V[1]+W*V[3]+V[5]]},ak:function(V,g){for(var r=0;
r<g.length;r+=2){var O=g[r],W=g[r+1];g[r]=O*V[0]+W*V[2]+V[4];g[r+1]=O*V[1]+W*V[3]+V[5]}}};function L(V,g,r){var O=[],W=0,f=0,T=0;
while(!0){var z=V.indexOf(g,f),U=V.indexOf(r,f);if(z==-1&&U==-1)break;if(U==-1||z!=-1&&z<U){if(T==0){O.push(V.slice(W,z).trim());
W=z+1}T++;f=z+1}else if(z==-1||U!=-1&&U<z){T--;if(T==0){O.push(V.slice(W,U).trim());W=U+1}f=U+1}}return O}function C(V){var g=L(V,"{","}"),r={};
for(var O=0;O<g.length;O+=2){var W=g[O].split(",");for(var f=0;f<W.length;f++){var T=W[f].trim();if(r[T]==null)r[T]="";
r[T]+=g[O+1]}}return r}function j(V){var g=L(V,"(",")"),r=[1,0,0,1,0,0];for(var O=0;O<g.length;O+=2){var W=r;
r=J(g[O],g[O+1]);K.concat(r,W)}return r}function J(V,g){var r=[1,0,0,1,0,0],O=!0;for(var W=0;W<g.length;
W++){var f=g.charAt(W);if(f==","||f==" ")O=!0;else if(f=="."){if(!O){g=g.slice(0,W)+","+g.slice(W);W++}O=!1}else if(f=="-"&&W>0&&g[W-1]!="e"){g=g.slice(0,W)+" "+g.slice(W);
W++;O=!0}}g=g.split(/\s*[\s,]\s*/).map(parseFloat);if(!1){}else if(V=="translate"){if(g.length==1)K.translate(r,g[0],0);
else K.translate(r,g[0],g[1])}else if(V=="translateX"){K.translate(r,g[0],0)}else if(V=="translateY"){K.translate(r,0,g[0])}else if(V=="scale"){if(g.length==1)K.scale(r,g[0],g[0]);
else K.scale(r,g[0],g[1])}else if(V=="rotate"){var T=0,z=0;if(g.length!=1){T=g[1];z=g[2]}K.translate(r,-T,-z);
K.rotate(r,-Math.PI*g[0]/180);K.translate(r,T,z)}else if(V=="matrix")r=g;else if(V=="skewX")r=[1,Math.tan(g[0]*Math.PI/180),0,1,0,0];
else if(V=="skewY")r=[1,0,Math.tan(g[0]*Math.PI/180),1,0,0];else console.log("unknown transform: ",V);
return r}function w(V,g){var r={s:[],l:[]},O=V.getAttribute("viewBox");if(O)O=O.trim().split(" ").map(parseFloat);
else O=[0,0,1e3,1e3];var W=V;if(g!=null){var f=V.getElementById("glyph"+g);if(f)W=f}S(W.children,r,null,V);
for(var T=0;T<r.l.length;T+=2){var z=r.l[T],U=r.l[T+1];z-=O[0];U-=O[1];U=-U;r.l[T]=z;r.l[T+1]=U}return r}var $={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};
function S(V,g,r,O){for(var W=0;W<V.length;W++){var f=V[W],T=f.tagName,z=f.getAttribute("fill");if(z==null)z=r;
if(z&&z.startsWith("url")){var U=z.slice(5,-1),x=O.getElementById(U),b=x.children[0];if(b.getAttribute("stop-opacity")!=null)continue;
z=b.getAttribute("stop-color")}if($[z])z=$[z];if(T=="g"||T=="use"){var D={l:[],s:[]};if(T=="g")S(f.children,D,z,O);
else{var M=f.getAttribute("xlink:href").slice(1),N=O.getElementById(M);S([N],D,z,O)}var t=[1,0,0,1,0,0],B=f.getAttribute("x"),h=f.getAttribute("y");
B=B?parseFloat(B):0;h=h?parseFloat(h):0;K.concat(t,[1,0,0,1,B,h]);var m=f.getAttribute("transform");
if(m)K.concat(t,j(m));K.ak(t,D.l);g.l=g.l.concat(D.l);g.s=g.s.concat(D.s)}else if(T=="path"||T=="circle"||T=="ellipse"){g.s.push(z?z:"#000000");
var F;if(T=="path")F=f.getAttribute("d");if(T=="circle"||T=="ellipse"){var Y=[0,0,0,0],Q=["cx","cy","rx","ry","r"];
for(var R=0;R<5;R++){var _=f.getAttribute(Q[R]);if(_){_=parseFloat(_);if(R<4)Y[R]=_;else Y[2]=Y[3]=_}}var X=Y[0],H=Y[1],A=Y[2],E=Y[3];
F=["M",X-A,H,"a",A,E,0,1,0,A*2,0,"a",A,E,0,1,0,-A*2,0].join(" ")}a(F,g);g.s.push("X")}else if(T=="image"){var c=parseFloat(f.getAttribute("width")),k=parseFloat(f.getAttribute("height"));
g.s.push(f.getAttribute("xlink:href"));g.l.push(0,0,c,0,c,k,0,k)}else if(T=="defs"){}else console.log(T)}}function I(V){var g=[],r=0,O=!1,W="",f="",T="",z=0;
while(r<V.length){var U=V.charCodeAt(r),x=V.charAt(r);r++;var b=48<=U&&U<=57||x=="."||x=="-"||x=="+"||x=="e"||x=="E";
if(O){if((x=="+"||x=="-")&&f!="e"||x=="."&&W.indexOf(".")!=-1||b&&(T=="a"||T=="A")&&(z%7==3||z%7==4)){g.push(parseFloat(W));
z++;W=x}else if(b)W+=x;else{g.push(parseFloat(W));z++;if(x!=","&&x!=" "){g.push(x);T=x;z=0}O=!1}}else{if(b){W=x;
O=!0}else if(x!=","&&x!=" "){g.push(x);T=x;z=0}}f=x}if(O)g.push(parseFloat(W));return g}function q(V,g,r){var O=g;
while(O<V.length){if(typeof V[O]=="string")break;O+=r}return(O-g)/r}function a(V,g){var r=I(V),O=0,W=0,f=0,T=0,z=0,U=g.l.length,x={M:2,L:2,H:1,V:1,T:2,S:4,A:7,Q:4,C:6},b=g.s,N=g.l;
while(O<r.length){var t=r[O];O++;var B=t.toUpperCase();if(B=="Z"){b.push("Z");W=T;f=z}else{var h=x[B],m=q(r,O,h);
for(var F=0;F<m;F++){if(F==1&&B=="M"){t=t==B?"L":"l";B="L"}var Y=0,Q=0;if(t!=B){Y=W;Q=f}if(!1){}else if(B=="M"){W=Y+r[O++];
f=Q+r[O++];b.push("M");N.push(W,f);T=W;z=f}else if(B=="L"){W=Y+r[O++];f=Q+r[O++];b.push("L");N.push(W,f)}else if(B=="H"){W=Y+r[O++];
b.push("L");N.push(W,f)}else if(B=="V"){f=Q+r[O++];b.push("L");N.push(W,f)}else if(B=="Q"){var R=Y+r[O++],_=Q+r[O++],X=Y+r[O++],H=Q+r[O++];
b.push("Q");N.push(R,_,X,H);W=X;f=H}else if(B=="T"){var A=Math.max(N.length-(b[b.length-1]=="Q"?4:2),U),R=W+W-N[A],_=f+f-N[A+1],X=Y+r[O++],H=Q+r[O++];
b.push("Q");N.push(R,_,X,H);W=X;f=H}else if(B=="C"){var R=Y+r[O++],_=Q+r[O++],X=Y+r[O++],H=Q+r[O++],E=Y+r[O++],c=Q+r[O++];
b.push("C");N.push(R,_,X,H,E,c);W=E;f=c}else if(B=="S"){var A=Math.max(N.length-(b[b.length-1]=="C"?4:2),U),R=W+W-N[A],_=f+f-N[A+1],X=Y+r[O++],H=Q+r[O++],E=Y+r[O++],c=Q+r[O++];
b.push("C");N.push(R,_,X,H,E,c);W=E;f=c}else if(B=="A"){var R=W,_=f,k=r[O++],Z=r[O++],av=r[O++]*(Math.PI/180),ak=r[O++],an=r[O++],X=Y+r[O++],H=Q+r[O++];
if(X==W&&H==f&&k==0&&Z==0)continue;if(k==0||Z==0){b.push("L");N.push(X,H);continue}var d=(R-X)/2,a7=(_-H)/2,u=Math.cos(av),o=Math.sin(av),y=u*d+o*a7,am=-o*d+u*a7,ao=k*k,af=Z*Z,ap=y*y,ae=am*am,ai=(ao*af-ao*ae-af*ap)/(ao*ae+af*ap),aq=(ak!=an?1:-1)*Math.sqrt(Math.max(ai,0)),au=aq*(k*am)/Z,ab=-aq*(Z*y)/k,at=u*au-o*ab+(R+X)/2,a9=o*au+u*ab+(_+H)/2,a2=function(l,e,G,i){var a5=Math.sqrt(l*l+e*e),ag=Math.sqrt(G*G+i*i),ac=(l*G+e*i)/(a5*ag);
return(l*i-e*G>=0?1:-1)*Math.acos(Math.max(-1,Math.min(1,ac)))},a3=(y-au)/k,al=(am-ab)/Z,a8=a2(1,0,a3,al),as=a2(a3,al,(-y-au)/k,(-am-ab)/Z);
as=as%(2*Math.PI);var aj=function(a1,W,f,l,e,G,i){var a5=function(p,P){var ah=Math.sin(P),A=Math.cos(P),P=p[0],a0=p[1],a4=p[2],V=p[3];
p[0]=P*A+a0*ah;p[1]=-P*ah+a0*A;p[2]=a4*A+V*ah;p[3]=-a4*ah+V*A},ag=function(p,P){for(var F=0;F<P.length;
F+=2){var W=P[F],f=P[F+1];P[F]=p[0]*W+p[2]*f+p[4];P[F+1]=p[1]*W+p[3]*f+p[5]}},ac=function(p,P){for(var F=0;
F<P.length;F++)p.push(P[F])},ar=function(p,l){ac(p.s,l.s);ac(p.l,l.l)};if(i)while(G>e)G-=2*Math.PI;else while(G<e)G+=2*Math.PI;
var a6=(G-e)/4,ad=Math.cos(a6/2),aa=-Math.sin(a6/2),R=(4-ad)/3,_=aa==0?aa:(1-ad)*(3-ad)/(3*aa),X=R,H=-_,E=ad,c=-aa,h=[R,_,X,H,E,c],g={s:["C","C","C","C"],l:h.slice(0)},v=[1,0,0,1,0,0];
a5(v,-a6);for(var F=0;F<3;F++){ag(v,h);ac(g.l,h)}a5(v,-e+a6/2);v[0]*=l;v[1]*=l;v[2]*=l;v[3]*=l;v[4]=W;
v[5]=f;ag(v,g.l);ag(a1.au,g.l);ar(a1.aj,g)},a1={aj:g,au:[k*u,k*o,-Z*o,Z*u,at,a9]};aj(a1,0,0,1,a8,a8+as,an==0);
W=X;f=H}else console.log("Unknown SVG command "+t)}}}}return{cssMap:C,readTrnf:j,as:a,a_:w}}(),initHB:function(K,L){var C=function(j){var J=0;
if((j&4294967295-(1<<7)+1)==0){J=1}else if((j&4294967295-(1<<11)+1)==0){J=2}else if((j&4294967295-(1<<16)+1)==0){J=3}else if((j&4294967295-(1<<21)+1)==0){J=4}return J};
fetch(K).then(function(j){return j.arrayBuffer()}).then(function(j){return WebAssembly.instantiate(j)}).then(function(j){console.log("HB ready");
var J=j.instance.exports,w=J.memory,$,S,I,q,a,V,g,r;s.U.shapeHB=function(){var O=function(f){var T=J.hb_buffer_get_length(f),z=[],U=J.hb_buffer_get_glyph_infos(f,0)>>>2,x=J.hb_buffer_get_glyph_positions(f,0)>>>2;
for(var b=0;b<T;++b){var D=U+b*5,M=x+b*5;z.push({g:S[D+0],cl:S[D+2],ax:I[M+0],ay:I[M+1],dx:I[M+2],dy:I[M+3]})}return z},W;
return function(f,T,z,U){var x=f._data,b=f.name.postScriptName,h=0,X=0,H=0;$=new Uint8Array(w.buffer);
S=new Uint32Array(w.buffer);I=new Int32Array(w.buffer);if(q!=b){if(a!=null){J.hb_blob_destroy(a);J.free(V);
J.hb_face_destroy(g);J.hb_font_destroy(r)}V=J.malloc(x.byteLength);$.set(x,V);a=J.hb_blob_create(V,x.byteLength,2,0,0);
g=J.hb_face_create(a,f._index);r=J.hb_font_create(g);q=b}if(window.TextEncoder==null){alert("Your browser is too old. Please, update it.");
return}if(W==null)W=new window.TextEncoder("utf8");var D=J.hb_buffer_create(),M=W.encode(T),N=M.length,t=J.malloc(N);
$.set(M,t);J.hb_buffer_add_utf8(D,t,N,0,N);J.free(t);var B=s.B;if(U){h=J.malloc(16*U.length);for(var m=0;
m<U.length;m++){var F=U[m],Y=h+m*16,Q=Y>>>2;B.D($,Y,F[0].split("").reverse().join(""));S[Q+1]=F[1];S[Q+2]=F[2];
S[Q+3]=F[3]}}J.hb_buffer_set_direction(D,z?4:5);J.hb_buffer_guess_segment_properties(D);J.hb_shape(r,D,h,U?U.length:0);
var R=O(D);J.hb_buffer_destroy(D);if(U)J.free(h);var _=R.slice(0);if(!z)_.reverse();for(var m=1;m<_.length;
m++){var A=_[m],n=A.cl;while(!0){var E=T.codePointAt(X),c=C(E);if(H+c<=n){H+=c;X+=E<=65535?1:2}else break}A.cl=X}return R}}();
L()})}};return s}();




var UZIP={};(function(){var K={H:function(t,a){return t[a]|t[a+1]<<8},r:function(t,a,X){t[a]=X&255;t[a+1]=X>>8&255},k:function(t,a){return t[a+3]*(256*256*256)+(t[a+2]<<16|t[a+1]<<8|t[a])},c:function(t,a,X){t[a]=X&255;
t[a+1]=X>>8&255;t[a+2]=X>>16&255;t[a+3]=X>>24&255},j:function(t,a,X){var A="";for(var M=0;M<X;M++)A+=String.fromCharCode(t[a+M]);
return A},P:function(t,a,X){for(var A=0;A<X.length;A++)t[a+A]=X.charCodeAt(A)},G:function(t){return t.length<2?"0"+t:t},K:function(t,a,X){var A=[199,252,233,226,228,224,229,231,234,235,232,239,238,236,196,197,201,230,198,244,246,242,251,249,255,214,220,162,163,165,167,402,225,237,243,250,241,209,170,186,191,8976,172,189,188,161,171,187],V="";
for(var M=0;M<X;M++){var x=t[a+M];if(x<128)x=x;else if(x<176)x=A[x-128];else return null;V+=String.fromCharCode(x)}return V},Q:function(t,a,X){var A="",M;
for(var x=0;x<X;x++)A+="%"+K.G(t[a+x].toString(16));try{M=decodeURIComponent(A)}catch(S){return K.j(t,a,X)}return M},t:function(t,a,X){var A=X.length,V=0;
for(var M=0;M<A;M++){var x=X.charCodeAt(M);if((x&4294967295-(1<<7)+1)==0){t[a+V]=x;V++}else if((x&4294967295-(1<<11)+1)==0){t[a+V]=192|x>>6;
t[a+V+1]=128|x>>0&63;V+=2}else if((x&4294967295-(1<<16)+1)==0){t[a+V]=224|x>>12;t[a+V+1]=128|x>>6&63;
t[a+V+2]=128|x>>0&63;V+=3}else if((x&4294967295-(1<<21)+1)==0){t[a+V]=240|x>>18;t[a+V+1]=128|x>>12&63;
t[a+V+2]=128|x>>6&63;t[a+V+3]=128|x>>0&63;V+=4}else throw"e"}return V},a:function(t){var a=t.length,X=0;
for(var A=0;A<a;A++){var V=t.charCodeAt(A);if((V&4294967295-(1<<7)+1)==0){X++}else if((V&4294967295-(1<<11)+1)==0){X+=2}else if((V&4294967295-(1<<16)+1)==0){X+=3}else if((V&4294967295-(1<<21)+1)==0){X+=4}else throw"e"}return X}},Q={u:function(){var t=new Uint32Array(256);
for(var a=0;a<256;a++){var X=a;for(var A=0;A<8;A++){if(X&1)X=3988292384^X>>>1;else X=X>>>1}t[a]=X}return t}(),update:function(t,a,X,A){for(var V=0;
V<A;V++)t=Q.u[(t^a[X+V])&255]^t>>>8;return t},N:function(t,a,X){return Q.update(4294967295,t,a,X)^4294967295}};
function J(t,a,X){var A=1,V=0,M=a,x=a+X;while(M<x){var _=Math.min(M+5552,x);while(M<_){A+=t[M++];V+=A}A=A%65521;
V=V%65521}return V<<16|A}function B(t,a){var X=K.H,A=K.k,V=0,M={},x=new Uint8Array(t),_=x.length-4;while(A(x,_)!=101010256)_--;
var V=_;V+=4;V+=4;var m=X(x,V);V+=2;var j=X(x,V);V+=2;var g=A(x,V);V+=4;var k=A(x,V);V+=4;V=k;for(var r=0;
r<m;r++){var I=A(x,V),E=0;V+=4;V+=4;V+=4;var L=S(x,V);V+=4;var P=A(x,V);V+=4;var g=A(x,V);V+=4;var z=A(x,V);
V+=4;var O=X(x,V),C=X(x,V+2),l=X(x,V+4);V+=6;V+=8;var D=A(x,V);V+=4;V+=O;while(E<C){var R=X(x,V+E);E+=2;
var N=X(x,V+E);E+=2;if(R==1){if(z==4294967295){z=A(x,V+E);E+=8}if(g==4294967295){g=A(x,V+E);E+=8}if(D==4294967295){D=A(x,V+E);
E+=8}}else E+=N}V+=C+l;G(x,D,M,g,z,a)}return M}function S(t,a){var X=K.H(t,a),A=K.H(t,a+2),V=1980+(A>>>9),M=A>>>5&15,x=A&31,_=X>>>11,m=X>>>5&63,j=2*(X&31),g=new Date(V,M,x,_,m,j).getTime();
return g}function a6(t,a,X){var A=new Date(X),V=A.getFullYear()-1980<<9|A.getMonth()+1<<5|A.getDate(),M=A.getHours()<<11|A.getMinutes()<<5|A.getSeconds()>>>1;
K.r(t,a,M);K.r(t,a+2,V)}function G(t,a,X,A,V,M){var x=K.H,_=K.k,m=_(t,a);a+=4;var j=x(t,a);a+=2;var g=x(t,a);
a+=2;var k=x(t,a);a+=2;var r=S(t,a);a+=4;var I=_(t,a);a+=4;a+=8;var L=x(t,a);a+=2;var P=x(t,a);a+=2;
var z=(g&2048)==0?K.K(t,a,L):K.Q(t,a,L);if(z==null)z=K.Q(t,a,L);a+=L;a+=P;if(M){X[z]={size:V,F:A};return}var O=new Uint8Array(t.buffer,a);
if(g&1){X[z]=new Uint8Array(0);alert("ZIPs with a password are not supported.",3e3)}else if(k==0)X[z]=new Uint8Array(O.buffer.slice(a,a+A));
else if(k==8){var C=new Uint8Array(V);W(O,C);X[z]=C}else throw"unknown compression method: "+k}function W(t,a){return UZIP.F.inflate(t,a)}function a1(t,a){var X=t[0],A=t[1],V=X&15,M=X>>>4;
return W(new Uint8Array(t.buffer,t.byteOffset+2,t.length-6),a)}function a7(t,a){if(a==null)a={level:6};
var X=0,A=new Uint8Array(50+Math.floor(t.length*1.1));A[X]=120;A[X+1]=156;X+=2;X=UZIP.F.deflateRaw(t,A,X,a.level);
var Q=J(t,0,t.length);A[X+0]=Q>>>24&255;A[X+1]=Q>>>16&255;A[X+2]=Q>>>8&255;A[X+3]=Q>>>0&255;return new Uint8Array(A.buffer,0,X+4)}function a0(t,a){if(a==null)a={level:6};
var X=new Uint8Array(50+Math.floor(t.length*1.1)),A=UZIP.F.deflateRaw(t,X,A,a.level);return new Uint8Array(X.buffer,0,A)}function ae(t,a){if(a==null)a=!1;
var X=0,A=K.c,V=K.r,M={},k=0,L=0;for(var x in t){var _=!a2(x)&&!a,m=t[x],j=Q.N(m,0,m.length);M[x]={X:_,O:m.length,N:j,file:_?a0(m):m}}for(var x in M)X+=M[x].file.length+30+46+2*K.a(x);
X+=22;var g=new Uint8Array(X),r=[];for(var x in M){var I=M[x];r.push(k);k=a3(g,k,x,I,0)}var P=k;for(var x in M){var I=M[x];
r.push(k);k=a3(g,k,x,I,1,r[L++])}var z=k-P;A(g,k,101010256);k+=4;k+=4;V(g,k,L);k+=2;V(g,k,L);k+=2;A(g,k,z);
k+=4;A(g,k,P);k+=4;k+=2;return g.buffer}function a2(t){var a=t.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(a)!=-1}function a3(t,a,X,A,V,x){var _=K.c,m=K.r,j=A.file;
_(t,a,V==0?67324752:33639248);a+=4;if(V==1)a+=2;m(t,a,20);a+=2;m(t,a,2048);a+=2;m(t,a,A.X?8:0);a+=2;
a6(t,a,Date.now());a+=4;_(t,a,A.N);a+=4;_(t,a,j.length);a+=4;_(t,a,A.O);a+=4;m(t,a,K.a(X));a+=2;m(t,a,0);
a+=2;if(V==1){a+=2;a+=2;a+=6;_(t,a,x);a+=4}var g=K.t(t,a,X);a+=g;if(V==0){t.set(j,a);a+=j.length}return a}UZIP.crc=Q;
UZIP.adler=J;UZIP.inflate=a1;UZIP.inflateRaw=W;UZIP.deflate=a7;UZIP.deflateRaw=a0;UZIP.parse=B;UZIP.encode=ae}());
(function(){var K=function(){var z=Uint16Array,O=Uint32Array;return{v:new z(16),W:new z(16),w:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],R:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],d:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],f:new z(32),T:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],L:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],B:new O(32),g:new z(512),I:[],S:new z(32),e:[],A:new z(32768),i:[],n:[],m:new z(32768),b:[],M:new z(512),U:[],Y:new z(1<<15),D:new O(286),q:new O(30),h:new O(19),p:new O(15e3),J:new z(1<<16),z:new z(1<<15)}}();
function Q(z,O){var C=z.length,l,D,E,R,N,H=K.W;for(var R=0;R<=O;R++)H[R]=0;for(R=1;R<C;R+=2)H[z[R]]++;
var s=K.v;l=0;H[0]=0;for(D=1;D<=O;D++){l=l+H[D-1]<<1;s[D]=l}for(E=0;E<C;E+=2){N=z[E+1];if(N!=0){z[E]=s[N];
s[N]++}}}function J(z,O,C){var l=z.length,D=K.Y;for(var E=0;E<l;E+=2)if(z[E+1]!=0){var R=E>>1,N=z[E+1],H=R<<4|N,s=O-N,Z=z[E]<<s,T=Z+(1<<s);
while(Z!=T){var v=D[Z]>>>15-O;C[v]=H;Z++}}}function B(z,O){var C=K.Y,l=15-O;for(var D=0;D<z.length;D+=2){var E=z[D]<<O-z[D+1];
z[D]=C[E]>>>l}}function S(z,O,C){C=C<<(O&7);var l=O>>>3;z[l]|=C;z[l+1]|=C>>>8}function a6(z,O,C){C=C<<(O&7);
var l=O>>>3;z[l]|=C;z[l+1]|=C>>>8;z[l+2]|=C>>>16}function G(z,O,C){return(z[O>>>3]|z[(O>>>3)+1]<<8)>>>(O&7)&(1<<C)-1}function W(z,O,C){return(z[O>>>3]|z[(O>>>3)+1]<<8|z[(O>>>3)+2]<<16)>>>(O&7)&(1<<C)-1}function a1(z,O){return(z[O>>>3]|z[(O>>>3)+1]<<8|z[(O>>>3)+2]<<16)>>>(O&7)}function a7(z,O){return(z[O>>>3]|z[(O>>>3)+1]<<8|z[(O>>>3)+2]<<16|z[(O>>>3)+3]<<24)>>>(O&7)}(function(){var z=1<<15;
for(var O=0;O<z;O++){var C=O;C=(C&2863311530)>>>1|(C&1431655765)<<1;C=(C&3435973836)>>>2|(C&858993459)<<2;
C=(C&4042322160)>>>4|(C&252645135)<<4;C=(C&4278255360)>>>8|(C&16711935)<<8;K.Y[O]=(C>>>16|C<<16)>>>17}function l(D,E,R){while(E--!=0)D.push(0,R)}for(var O=0;
O<32;O++){K.f[O]=K.R[O]<<3|K.d[O];K.B[O]=K.T[O]<<4|K.L[O]}l(K.I,144,8);l(K.I,255-143,9);l(K.I,279-255,7);
l(K.I,287-279,8);Q(K.I,9);J(K.I,9,K.g);B(K.I,9);l(K.e,32,5);Q(K.e,5);J(K.e,5,K.S);B(K.e,5);l(K.U,19,0);
l(K.i,286,0);l(K.b,30,0);l(K.n,320,0)}());function a0(z,O,C,l){var D=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]],E=D[l],R=0,N=C<<3,H=0,s=z.length,c=0,$=0,w=0,n=0,Y=0,e=0,y=0,b=0;
if(l==0){while(R<s){var Z=Math.min(65535,s-R);S(O,N,R+Z==s?1:0);N=a(z,R,Z,O,N+8);R+=Z}return N>>>3}var T=K.p,v=K.J,f=K.z;
if(s>2){e=a3(z,0);v[e]=0}for(R=0;R<s;R++){Y=e;if(R+1<s-2){e=a3(z,R+1);var p=R+1&32767;f[p]=v[e];v[e]=p}if(H<=R){if((c>14e3||$>26697)&&s-R>100){if(H<R){T[c]=R-H;
c+=2;H=R}N=t(R==s-1||H==s?1:0,T,c,n,z,w,R-w,O,N);c=$=n=0;w=R}var F=0;if(R<s-2)F=ae(z,R,f,Y,Math.min(E[2],s-R),E[3]);
var Z=F>>>16,u=F&65535;if(F!=0){var Z=F>>>16,u=F&65535,h=k(Z,K.R);K.D[257+h]++;var o=k(u,K.T);K.q[o]++;
n+=K.d[h]+K.L[o];T[c]=Z<<23|R-H;T[c+1]=u<<16|h<<8|o;c+=2;H=R+Z}else{K.D[z[R]]++}$++}}if(w!=R||z.length==0){if(H<R){T[c]=R-H;
c+=2;H=R}N=t(1,T,c,n,z,w,R-w,O,N);c=0;$=0;c=$=n=0;w=R}while((N&7)!=0)N++;return N>>>3}function ae(z,O,C,l,D,E){var R=O&32767,N=C[R],H=R-N+(1<<15)&32767,s=0,Z=0;
if(N==R||l!=a3(z,O-H))return 0;var T=Math.min(32767,O);while(H<=T&&--E!=0&&N!=R){if(s==0||z[O+s]==z[O+s-H]){var v=a2(z,O,H);
if(v>s){s=v;Z=H;if(s>=D)break;if(H+2<v)v=H+2;var f=0;for(var c=0;c<v-2;c++){var $=O-H+c+(1<<15)&32767,w=C[$],n=$-w+(1<<15)&32767;
if(n>f){f=n;N=$}}}}R=N;N=C[R];H+=R-N+(1<<15)&32767}return s<<16|Z}function a2(z,O,C){if(z[O]!=z[O-C]||z[O+1]!=z[O+1-C]||z[O+2]!=z[O+2-C])return 0;
var l=O,D=Math.min(z.length,O+258);O+=3;while(O<D&&z[O]==z[O-C])O++;return O-l}function a3(z,O){return(z[O]<<8|z[O+1])+(z[O+2]<<4)&65535}function t(z,O,C,l,D,E,R,N,H){var s,Z,T,v,f,$,w,n,Y;
K.D[256]++;s=X();Z=s[0];T=s[1];v=s[2];f=s[3];$=s[4];w=s[5];n=s[6];Y=s[7];var e=((H+3&7)==0?0:8-(H+3&7))+32+(R<<3),y=l+M(K.I,K.D)+M(K.e,K.q),b=l+M(K.i,K.D)+M(K.b,K.q);
b+=14+3*w+M(K.U,K.h)+(K.h[16]*2+K.h[17]*3+K.h[18]*7);for(var p=0;p<286;p++)K.D[p]=0;for(var p=0;p<30;
p++)K.q[p]=0;for(var p=0;p<19;p++)K.h[p]=0;var F=e<y&&e<b?0:y<b?1:2;a6(N,H,z);a6(N,H+1,F);H+=3;var u=H;
if(F==0){while((H&7)!=0)H++;H=a(D,E,R,N,H)}else{var h,o;if(F==1){h=K.I;o=K.e}if(F==2){Q(K.i,Z);B(K.i,Z);
Q(K.b,T);B(K.b,T);Q(K.U,v);B(K.U,v);h=K.i;o=K.b;S(N,H,f-257);H+=5;S(N,H,$-1);H+=5;S(N,H,w-4);H+=4;for(var i=0;
i<w;i++)S(N,H+i*3,K.U[(K.w[i]<<1)+1]);H+=3*w;H=x(n,K.U,N,H);H=x(Y,K.U,N,H)}var a9=E;for(var q=0;q<C;
q+=2){var d=O[q],a5=d>>>23,ab=a9+(d&(1<<23)-1);while(a9<ab)H=r(D[a9++],h,N,H);if(a5!=0){var a8=O[q+1],aa=a8>>16,ac=a8>>8&255,ad=a8&255;
H=r(257+ac,h,N,H);S(N,H,a5-K.R[ac]);H+=K.d[ac];H=r(ad,o,N,H);a6(N,H,aa-K.T[ad]);H+=K.L[ad];a9+=a5}}H=r(256,h,N,H)}return H}function a(z,O,C,l,D){var E=D>>>3;
l[E]=C;l[E+1]=C>>>8;l[E+2]=255-l[E];l[E+3]=255-l[E+1];E+=4;l.set(new Uint8Array(z.buffer,O,C),E);return D+(C+4<<3)}function X(){var z=m(K.D,K.i,15),O=m(K.q,K.b,15),C=[],l=_(K.i,C),D=[],E=_(K.b,D),H=19;
for(var R=0;R<C.length;R+=2)K.h[C[R]]++;for(var R=0;R<D.length;R+=2)K.h[D[R]]++;var N=m(K.h,K.U,7);while(H>4&&K.U[(K.w[H-1]<<1)+1]==0)H--;
return[z,O,N,l,E,H,C,D]}function A(z){var O=[];for(var C=0;C<z.length;C+=2)O.push(z[C+1]);return O}function V(z){var O="";
for(var C=0;C<z.length;C+=2)if(z[C+1]!=0)O+=(C>>1)+",";return O}function M(z,O){var C=0;for(var l=0;
l<O.length;l++)C+=O[l]*z[(l<<1)+1];return C}function x(z,O,C,l){for(var D=0;D<z.length;D+=2){var E=z[D],R=z[D+1];
l=r(E,O,C,l);var N=E==16?2:E==17?3:7;if(E>15){S(C,l,R,N);l+=N}}return l}function _(z,O){var C=z.length;
while(C!=2&&z[C-1]==0)C-=2;for(var l=0;l<C;l+=2){var D=z[l+1],E=l+3<C?z[l+3]:-1,R=l+5<C?z[l+5]:-1,N=l==0?-1:z[l-1];
if(D==0&&E==D&&R==D){var H=l+5;while(H+2<C&&z[H+2]==D)H+=2;var s=Math.min(H+1-l>>>1,138);if(s<11)O.push(17,s-3);
else O.push(18,s-11);l+=s*2-2}else if(D==N&&E==D&&R==D){var H=l+5;while(H+2<C&&z[H+2]==D)H+=2;var s=Math.min(H+1-l>>>1,6);
O.push(16,s-3);l+=s*2-2}else O.push(D,0)}return C>>>1}function m(z,O,C){var l=[],D=z.length,E=O.length,R=0,v=0,f=1,c=2;
for(R=0;R<E;R+=2){O[R]=0;O[R+1]=0}for(R=0;R<D;R++)if(z[R]!=0)l.push({l:R,s:z[R]});var N=l.length,H=l.slice(0);
if(N==0)return 0;if(N==1){var s=l[0].l,H=s==0?1:0;O[(s<<1)+1]=1;O[(H<<1)+1]=1;return 1}l.sort(function(Z,T){return Z.s-T.s});
var Z=l[0],T=l[1];l[0]={l:-1,s:Z.s+T.s,o:Z,V:T,C:0};while(f!=N-1){if(v!=f&&(c==N||l[v].s<l[c].s)){Z=l[v++]}else{Z=l[c++]}if(v!=f&&(c==N||l[v].s<l[c].s)){T=l[v++]}else{T=l[c++]}l[f++]={l:-1,s:Z.s+T.s,o:Z,V:T}}var $=j(l[f-1],0);
if($>C){g(H,C,$);$=C}for(R=0;R<N;R++)O[(H[R].l<<1)+1]=H[R].C;return $}function j(z,O){if(z.l!=-1){z.C=O;
return O}return Math.max(j(z.o,O+1),j(z.V,O+1))}function g(z,O,C){var l=0,D=1<<C-O,E=0;z.sort(function(N,H){return H.C==N.C?N.s-H.s:H.C-N.C});
for(l=0;l<z.length;l++)if(z[l].C>O){var R=z[l].C;z[l].C=O;E+=D-(1<<C-R)}else break;E=E>>>C-O;while(E>0){var R=z[l].C;
if(R<O){z[l].C++;E-=1<<O-R-1}else l++}for(;l>=0;l--)if(z[l].C==O&&E<0){z[l].C--;E++}if(E!=0)console.log("debt left")}function k(z,O){var C=0;
if(O[C|16]<=z)C|=16;if(O[C|8]<=z)C|=8;if(O[C|4]<=z)C|=4;if(O[C|2]<=z)C|=2;if(O[C|1]<=z)C|=1;return C}function r(z,O,C,l){a6(C,l,O[z<<1]);
return l+O[(z<<1)+1]}function a4(z,O){var C=Uint8Array,D=0,E=0,R=0,N=0,H=0,s=0,Z=0,T=0,v=0,f,c;if(z[0]==3&&z[1]==0)return O?O:new C(0);
var l=O==null;if(l)O=new C(z.length>>>2<<3);while(D==0){D=W(z,v,1);E=W(z,v+1,2);v+=3;if(E==0){if((v&7)!=0)v+=8-(v&7);
var $=(v>>>3)+4,w=z[$-4]|z[$-3]<<8;if(l)O=I(O,T+w);O.set(new C(z.buffer,z.byteOffset+$,w),T);v=$+w<<3;
T+=w;continue}if(l)O=I(O,T+(1<<17));if(E==1){f=K.g;c=K.S;s=(1<<9)-1;Z=(1<<5)-1}if(E==2){R=G(z,v,5)+257;
N=G(z,v+5,5)+1;H=G(z,v+10,4)+4;v+=14;var n=v,e=1;for(var Y=0;Y<38;Y+=2){K.U[Y]=0;K.U[Y+1]=0}for(var Y=0;
Y<H;Y++){var y=G(z,v+Y*3,3);K.U[(K.w[Y]<<1)+1]=y;if(y>e)e=y}v+=3*H;Q(K.U,e);J(K.U,e,K.M);f=K.A;c=K.m;
v=L(K.M,(1<<e)-1,R+N,z,v,K.n);var b=P(K.n,0,R,K.i);s=(1<<b)-1;var p=P(K.n,R,N,K.b);Z=(1<<p)-1;Q(K.i,b);
J(K.i,b,f);Q(K.b,p);J(K.b,p,c)}while(!0){var F=f[a1(z,v)&s];v+=F&15;var u=F>>>4;if(u>>>8==0){O[T++]=u}else if(u==256){break}else{var h=T+u-254;
if(u>264){var o=K.f[u-257];h=T+(o>>>3)+G(z,v,o&7);v+=o&7}var i=c[a1(z,v)&Z];v+=i&15;var a9=i>>>4,q=K.B[a9],d=(q>>>4)+W(z,v,q&15);
v+=q&15;if(l)O=I(O,T+(1<<17));while(T<h){O[T]=O[T++-d];O[T]=O[T++-d];O[T]=O[T++-d];O[T]=O[T++-d]}T=h}}}return O.length==T?O:O.slice(0,T)}function I(z,O){var C=z.length;
if(O<=C)return z;var l=new Uint8Array(Math.max(C<<1,O));l.set(z,0);return l}function L(z,O,C,l,D,E){var R=0;
while(R<C){var N=z[a1(l,D)&O];D+=N&15;var H=N>>>4;if(H<=15){E[R]=H;R++}else{var s=0,Z=0;if(H==16){Z=3+G(l,D,2);
D+=2;s=E[R-1]}else if(H==17){Z=3+G(l,D,3);D+=3}else if(H==18){Z=11+G(l,D,7);D+=7}var T=R+Z;while(R<T){E[R]=s;
R++}}}return D}function P(z,O,C,l){var D=0,E=0,R=l.length>>>1;while(E<C){var N=z[E+O];l[E<<1]=0;l[(E<<1)+1]=N;
if(N>D)D=N;E++}while(E<R){l[E<<1]=0;l[(E<<1)+1]=0;E++}return D}UZIP.F={inflate:a4,deflateRaw:a0}}());

var paper=function(t,e){var i=(t=t||require("./node/self.js")).window,n=t.document,r=new function(){function t(t,e,r,s,a){function u(n,u){"string"==typeof(u=u||(u=o(e,n))&&(u.get?u:u.value))&&"#"===u[0]&&(u=t[u.substring(1)]||u);var c,f="function"==typeof u,d=u,_=a||f&&!u.base?u&&u.get?n in t:t[n]:null;a&&_||(f&&_&&(u.base=_),f&&!1!==s&&(c=n.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(l[c[3].toLowerCase()+c[4]]=c[2]),d&&!f&&d.get&&"function"==typeof d.get&&i.isPlainObject(d)||(d={value:d,writable:!0}),(o(t,n)||{configurable:!0}).configurable&&(d.configurable=!0,d.enumerable=null!=r?r:!c),h(t,n,d))}var l={};if(e){for(var c in e)e.hasOwnProperty(c)&&!n.test(c)&&u(c);for(var c in l){var f=l[c],d=t["set"+f],_=t["get"+f]||d&&t["is"+f];!_||!0!==s&&0!==_.length||u(c,{get:_,set:d})}}return t}function i(){for(var t=0,e=arguments.length;t<e;t++){var i=arguments[t];i&&c(this,i)}return this}var n=/^(statics|enumerable|beans|preserve)$/,r=[],s=r.slice,a=Object.create,o=Object.getOwnPropertyDescriptor,h=Object.defineProperty,u=r.forEach||function(t,e){for(var i=0,n=this.length;i<n;i++)t.call(e,this[i],i,this)},l=function(t,e){for(var i in this)this.hasOwnProperty(i)&&t.call(e,this[i],i,this)},c=Object.assign||function(t){for(var e=1,i=arguments.length;e<i;e++){var n=arguments[e];for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])}return t},f=function(t,e,i){if(t){var n=o(t,"length");(n&&"number"==typeof n.value?u:l).call(t,e,i=i||t)}return i};return t(i,{inject:function(e){if(e){var i=!0===e.statics?e:e.statics,n=e.beans,r=e.preserve;i!==e&&t(this.prototype,e,e.enumerable,n,r),t(this,i,null,n,r)}for(var s=1,a=arguments.length;s<a;s++)this.inject(arguments[s]);return this},extend:function(){for(var e,i,n,r=this,s=0,o=arguments.length;s<o&&(!e||!i);s++)n=arguments[s],e=e||n.initialize,i=i||n.prototype;return e=e||function(){r.apply(this,arguments)},i=e.prototype=i||a(this.prototype),h(i,"constructor",{value:e,writable:!0,configurable:!0}),t(e,this),arguments.length&&this.inject.apply(e,arguments),e.base=r,e}}).inject({enumerable:!1,initialize:i,set:i,inject:function(){for(var e=0,i=arguments.length;e<i;e++){var n=arguments[e];n&&t(this,n,n.enumerable,n.beans,n.preserve)}return this},extend:function(){var t=a(this);return t.inject.apply(t,arguments)},each:function(t,e){return f(this,t,e)},clone:function(){return new this.constructor(this)},statics:{set:c,each:f,create:a,define:h,describe:o,clone:function(t){return c(new t.constructor,t)},isPlainObject:function(t){var e=null!=t&&t.constructor;return e&&(e===Object||e===i||"Object"===e.name)},pick:function(t,i){return t!==e?t:i},slice:function(t,e,i){return s.call(t,e,i)}}})};"undefined"!=typeof module&&(module.exports=r),r.inject({enumerable:!1,toString:function(){return null!=this._id?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+r.each(this,function(t,e){if(!/^_/.test(e)){var i=typeof t;this.push(e+": "+("number"===i?h.instance.number(t):"string"===i?"'"+t+"'":t))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(t){return r.importJSON(t,this)},exportJSON:function(t){return r.exportJSON(this,t)},toJSON:function(){return r.serialize(this)},set:function(t,e){return t&&r.filter(this,t,e,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function t(){var e=t.base.apply(this,arguments),i=e.prototype._class;return i&&!r.exports[i]&&(r.exports[i]=e),e},equals:function(t,e){if(t===e)return!0;if(t&&t.equals)return t.equals(e);if(e&&e.equals)return e.equals(t);if(t&&e&&"object"==typeof t&&"object"==typeof e){if(Array.isArray(t)&&Array.isArray(e)){if((n=t.length)!==e.length)return!1;for(;n--;)if(!r.equals(t[n],e[n]))return!1}else{var i=Object.keys(t),n=i.length;if(n!==Object.keys(e).length)return!1;for(;n--;){var s=i[n];if(!e.hasOwnProperty(s)||!r.equals(t[s],e[s]))return!1}}return!0}return!1},read:function(t,i,n,s){if(this===r){var a=this.peek(t,i);return t.__index++,a}var o=this.prototype,h=o._readIndex,u=i||h&&t.__index||0,l=t.length,c=t[u];if(s=s||l-u,c instanceof this||n&&n.readNull&&null==c&&s<=1)return h&&(t.__index=u+1),c&&n&&n.clone?c.clone():c;if(c=r.create(o),h&&(c.__read=!0),c=c.initialize.apply(c,u>0||u+s<l?r.slice(t,u,u+s):t)||c,h){t.__index=u+c.__read;var f=c.__filtered;f&&(t.__filtered=f,c.__filtered=e),c.__read=e}return c},peek:function(t,e){return t[t.__index=e||t.__index||0]},remain:function(t){return t.length-(t.__index||0)},readList:function(t,e,i,n){for(var r,s=[],a=e||0,o=n?a+n:t.length,h=a;h<o;h++)s.push(Array.isArray(r=t[h])?this.read(r,0,i):this.read(t,h,i,1));return s},readNamed:function(t,i,n,s,a){var o=this.getNamed(t,i),h=o!==e;if(h){var u=t.__filtered;u||((u=t.__filtered=r.create(t[0])).__unfiltered=t[0]),u[i]=e}var l=h?[o]:t;return this.read(l,n,s,a)},getNamed:function(t,i){var n=t[0];if(t._hasObject===e&&(t._hasObject=1===t.length&&r.isPlainObject(n)),t._hasObject)return i?n[i]:t.__filtered||n},hasNamed:function(t,e){return!!this.getNamed(t,e)},filter:function(t,i,n,r){function s(r){if(!(n&&r in n||a&&r in a)){var s=i[r];s!==e&&(t[r]=s)}}var a;if(r){for(var o,h={},u=0,l=r.length;u<l;u++)(o=r[u])in i&&(s(o),h[o]=!0);a=h}return Object.keys(i.__unfiltered||i).forEach(s),t},isPlainValue:function(t,e){return r.isPlainObject(t)||Array.isArray(t)||e&&"string"==typeof t},serialize:function(t,e,i,n){e=e||{};var s,a=!n;if(a&&(e.formatter=new h(e.precision),n={length:0,definitions:{},references:{},add:function(t,e){var i="#"+t._id,n=this.references[i];if(!n){this.length++;var r=e.call(t),s=t._class;s&&r[0]!==s&&r.unshift(s),this.definitions[i]=r,n=this.references[i]=[i]}return n}}),t&&t._serialize){s=t._serialize(e,n);var o=t._class;!o||t._compactSerialize||!a&&i||s[0]===o||s.unshift(o)}else if(Array.isArray(t)){s=[];for(var u=0,l=t.length;u<l;u++)s[u]=r.serialize(t[u],e,i,n)}else if(r.isPlainObject(t)){s={};for(var c=Object.keys(t),u=0,l=c.length;u<l;u++){var f=c[u];s[f]=r.serialize(t[f],e,i,n)}}else s="number"==typeof t?e.formatter.number(t,e.precision):t;return a&&n.length>0?[["dictionary",n.definitions],s]:s},deserialize:function(t,e,i,n,s){var a=t,o=!i,h=o&&t&&t.length&&"dictionary"===t[0][0];if(i=i||{},Array.isArray(t)){var u=t[0],l="dictionary"===u;if(1==t.length&&/^#/.test(u))return i.dictionary[u];a=[];for(var c=(u=r.exports[u])?1:0,f=t.length;c<f;c++)a.push(r.deserialize(t[c],e,i,l,h));if(u){var d=a;e?a=e(u,d,o||s):(a=r.create(u.prototype),u.apply(a,d))}}else if(r.isPlainObject(t)){a={},n&&(i.dictionary=a);for(var _ in t)a[_]=r.deserialize(t[_],e,i)}return h?a[1]:a},exportJSON:function(t,e){var i=r.serialize(t,e);return e&&0==e.asString?i:JSON.stringify(i)},importJSON:function(t,e){return r.deserialize("string"==typeof t?JSON.parse(t):t,function(t,i,n){var s=n&&e&&e.constructor===t,a=s?e:r.create(t.prototype);if(1===i.length&&a instanceof w&&(s||!(a instanceof b))){var o=i[0];r.isPlainObject(o)&&(o.insert=!1)}return(s?a.set:t).apply(a,i),s&&(e=null),a})},splice:function(t,i,n,r){var s=i&&i.length,a=n===e;(n=a?t.length:n)>t.length&&(n=t.length);for(u=0;u<s;u++)i[u]._index=n+u;if(a)return t.push.apply(t,i),[];var o=[n,r];i&&o.push.apply(o,i);for(var h=t.splice.apply(t,o),u=0,l=h.length;u<l;u++)h[u]._index=e;for(var u=n+s,l=t.length;u<l;u++)t[u]._index=u;return h},capitalize:function(t){return t.replace(/\b[a-z]/g,function(t){return t.toUpperCase()})},camelize:function(t){return t.replace(/-(.)/g,function(t,e){return e.toUpperCase()})},hyphenate:function(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var s={on:function(t,e){if("string"!=typeof t)r.each(t,function(t,e){this.on(e,t)},this);else{var i=this._eventTypes,n=i&&i[t],s=this._callbacks=this._callbacks||{};-1===(s=s[t]=s[t]||[]).indexOf(e)&&(s.push(e),n&&n.install&&1===s.length&&n.install.call(this,t))}return this},off:function(t,e){if("string"==typeof t){var i,n=this._eventTypes,s=n&&n[t],a=this._callbacks&&this._callbacks[t];return a&&(!e||-1!==(i=a.indexOf(e))&&1===a.length?(s&&s.uninstall&&s.uninstall.call(this,t),delete this._callbacks[t]):-1!==i&&a.splice(i,1)),this}r.each(t,function(t,e){this.off(e,t)},this)},once:function(t,e){return this.on(t,function(){e.apply(this,arguments),this.off(t,e)})},emit:function(t,e){var i=this._callbacks&&this._callbacks[t];if(!i)return!1;var n=r.slice(arguments,1),s=e&&e.target&&!e.currentTarget;i=i.slice(),s&&(e.currentTarget=this);for(var a=0,o=i.length;a<o;a++)if(0==i[a].apply(this,n)){e&&e.stop&&e.stop();break}return s&&delete e.currentTarget,!0},responds:function(t){return!(!this._callbacks||!this._callbacks[t])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(t){var e=this._eventTypes,i=this._callbacks,n=t?"install":"uninstall";if(e)for(var r in i)if(i[r].length>0){var s=e[r],a=s&&s[n];a&&a.call(this,r)}},statics:{inject:function t(e){var i=e._events;if(i){var n={};r.each(i,function(t,i){var s="string"==typeof t,a=s?t:i,o=r.capitalize(a),h=a.substring(2).toLowerCase();n[h]=s?{}:t,a="_"+a,e["get"+o]=function(){return this[a]},e["set"+o]=function(t){var e=this[a];e&&this.off(h,e),t&&this.on(h,t),this[a]=t}}),e._eventTypes=n}return t.base.apply(this,arguments)}}},a=r.extend({_class:"PaperScope",initialize:function e(){paper=this,this.settings=new r({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=e._id++,e._scopes[this._id]=this;var i=e.prototype;if(!this.support){var n=Q.getContext(1,1)||{};i.support={nativeDash:"setLineDash"in n||"mozDash"in n,nativeBlendModes:tt.nativeModes},Q.release(n)}if(!this.agent){var s=t.navigator.userAgent.toLowerCase(),a=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(s)||[])[0],o="darwin"===a?"mac":a,h=i.agent=i.browser={platform:o};o&&(h[o]=!0),s.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(t,e,i,n,r){if(!h.chrome){var s="opera"===e?n:/^(node|trident)$/.test(e)?r:i;h.version=s,h.versionNumber=parseFloat(s),e="trident"===e?"msie":e,h.name=e,h[e]=!0}}),h.chrome&&delete h.webkit,h.atom&&delete h.chrome}},version:"0.11.5",getView:function(){var t=this.project;return t&&t._view},getPaper:function(){return this},execute:function(t,e){paper.PaperScript.execute(t,this,e),U.updateFocus()},install:function(t){var e=this;r.each(["project","view","tool"],function(i){r.define(t,i,{configurable:!0,get:function(){return e[i]}})});for(var i in this)!/^_/.test(i)&&this[i]&&(t[i]=this[i])},setup:function(t){return paper=this,this.project=new y(t),this},createCanvas:function(t,e){return Q.getCanvas(t,e)},activate:function(){paper=this},clear:function(){for(var t=this.projects,e=this.tools,i=t.length-1;i>=0;i--)t[i].remove();for(i=e.length-1;i>=0;i--)e[i].remove()},remove:function(){this.clear(),delete a._scopes[this._id]},statics:new function(){function t(t){return t+="Attribute",function(e,i){return e[t](i)||e[t]("data-paper-"+i)}}return{_scopes:{},_id:0,get:function(t){return this._scopes[t]||null},getAttribute:t("get"),hasAttribute:t("has")}}}),o=r.extend(s,{initialize:function(t){this._scope=paper,this._index=this._scope[this._list].push(this)-1,!t&&this._scope[this._reference]||this.activate()},activate:function(){if(!this._scope)return!1;var t=this._scope[this._reference];return t&&t!==this&&t.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",t),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return null!=this._index&&(r.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),h=r.extend({initialize:function(t){this.precision=r.pick(t,5),this.multiplier=Math.pow(10,this.precision)},number:function(t){return this.precision<16?Math.round(t*this.multiplier)/this.multiplier:t},pair:function(t,e,i){return this.number(t)+(i||",")+this.number(e)},point:function(t,e){return this.number(t.x)+(e||",")+this.number(t.y)},size:function(t,e){return this.number(t.width)+(e||",")+this.number(t.height)},rectangle:function(t,e){return this.point(t,e)+(e||",")+this.size(t,e)}});h.instance=new h;var u=new function(){function t(t,e,i){return t<e?e:t>i?i:t}function e(t,e,i){function n(t){var e=134217729*t,i=t-e+e;return[i,t-i]}var r=e*e-t*i,a=e*e+t*i;if(3*s(r)<a){var o=n(t),h=n(e),u=n(i),l=e*e,c=t*i;r=l-c+(h[0]*h[0]-l+2*h[0]*h[1]+h[1]*h[1]-(o[0]*u[0]-c+o[0]*u[1]+o[1]*u[0]+o[1]*u[1]))}return r}function i(){var t=Math.max.apply(Math,arguments);return t&&(t<1e-8||t>1e8)?o(2,-Math.round(h(t))):0}var n=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],r=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],s=Math.abs,a=Math.sqrt,o=Math.pow,h=Math.log2||function(t){return Math.log(t)*Math.LOG2E};return{EPSILON:1e-12,MACHINE_EPSILON:1.12e-16,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,KAPPA:4*(a(2)-1)/3,isZero:function(t){return t>=-1e-12&&t<=1e-12},clamp:t,integrate:function(t,e,i,s){for(var a=n[s-2],o=r[s-2],h=.5*(i-e),u=h+e,l=0,c=s+1>>1,f=1&s?o[l++]*t(u):0;l<c;){var d=h*a[l];f+=o[l++]*(t(u+d)+t(u-d))}return h*f},findRoot:function(e,i,n,r,a,o,h){for(var u=0;u<o;u++){var l=e(n),c=l/i(n),f=n-c;if(s(c)<h){n=f;break}l>0?(a=n,n=f<=r?.5*(r+a):f):(r=n,n=f>=a?.5*(r+a):f)}return t(n,r,a)},solveQuadratic:function(n,r,o,h,u,l){var c,f=1/0;if(s(n)<1e-12){if(s(r)<1e-12)return s(o)<1e-12?-1:0;c=-o/r}else{var d=e(n,r*=-.5,o);if(d&&s(d)<1.12e-16){var _=i(s(n),s(r),s(o));_&&(d=e(n*=_,r*=_,o*=_))}if(d>=-1.12e-16){var g=d<0?0:a(d),v=r+(r<0?-g:g);0===v?f=-(c=o/n):(c=v/n,f=o/v)}}var p=0,m=null==u,y=u-1e-12,w=l+1e-12;return isFinite(c)&&(m||c>y&&c<w)&&(h[p++]=m?c:t(c,u,l)),f!==c&&isFinite(f)&&(m||f>y&&f<w)&&(h[p++]=m?f:t(f,u,l)),p},solveCubic:function(e,n,r,h,l,c,f){function d(t){var i=e*(_=t);p=(i+(g=i+n))*_+(v=g*_+r),m=v*_+h}var _,g,v,p,m,y=i(s(e),s(n),s(r),s(h));if(y&&(e*=y,n*=y,r*=y,h*=y),s(e)<1e-12)e=n,g=r,v=h,_=1/0;else if(s(h)<1e-12)g=n,v=r,_=0;else{d(-n/e/3);var w=m/e,x=o(s(w),1/3),b=w<0?-1:1,C=-p/e,S=C>0?1.324717957244746*Math.max(x,a(C)):x,P=_-b*S;if(P!==_){do{d(P),P=0===p?_:_-m/p/(1+1.12e-16)}while(b*P>b*_);s(e)*_*_>s(h/_)&&(g=((v=-h/_)-r)/_)}}var I=u.solveQuadratic(e,g,v,l,c,f),M=null==c;return isFinite(_)&&(0===I||I>0&&_!==l[0]&&_!==l[1])&&(M||_>c-1e-12&&_<f+1e-12)&&(l[I++]=M?_:t(_,c,f)),I}}},l={_id:1,_pools:{},get:function(t){if(t){var e=this._pools[t];return e||(e=this._pools[t]={_id:1}),e._id++}return this._id++}},c=r.extend({_class:"Point",_readIndex:!0,initialize:function(t,e){var i=typeof t,n=this.__read,r=0;if("number"===i){var s="number"==typeof e;this._set(t,s?e:t),n&&(r=s?2:1)}else if("undefined"===i||null===t)this._set(0,0),n&&(r=null===t?1:0);else{var a="string"===i?t.split(/[\s,]+/)||[]:t;r=1,Array.isArray(a)?this._set(+a[0],+(a.length>1?a[1]:a[0])):"x"in a?this._set(a.x||0,a.y||0):"width"in a?this._set(a.width||0,a.height||0):"angle"in a?(this._set(a.length||0,0),this.setAngle(a.angle||0)):(this._set(0,0),r=0)}return n&&(this.__read=r),this},set:"#initialize",_set:function(t,e){return this.x=t,this.y=e,this},equals:function(t){return this===t||t&&(this.x===t.x&&this.y===t.y||Array.isArray(t)&&this.x===t[0]&&this.y===t[1])||!1},clone:function(){return new c(this.x,this.y)},toString:function(){var t=h.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(t){if(this.isZero()){var e=this._angle||0;this._set(Math.cos(e)*t,Math.sin(e)*t)}else{var i=t/this.getLength();u.isZero(i)&&this.getAngle(),this._set(this.x*i,this.y*i)}},getAngle:function(){return 180*this.getAngleInRadians.apply(this,arguments)/Math.PI},setAngle:function(t){this.setAngleInRadians.call(this,t*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var t=c.read(arguments),e=this.getLength()*t.getLength();if(u.isZero(e))return NaN;var i=this.dot(t)/e;return Math.acos(i<-1?-1:i>1?1:i)}return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(t){if(this._angle=t,!this.isZero()){var e=this.getLength();this._set(Math.cos(t)*e,Math.sin(t)*e)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var t=c.read(arguments);return 180*Math.atan2(this.cross(t),this.dot(t))/Math.PI},getDistance:function(){var t=c.read(arguments),e=t.x-this.x,i=t.y-this.y,n=e*e+i*i;return r.read(arguments)?n:Math.sqrt(n)},normalize:function(t){t===e&&(t=1);var i=this.getLength(),n=0!==i?t/i:0,r=new c(this.x*n,this.y*n);return n>=0&&(r._angle=this._angle),r},rotate:function(t,e){if(0===t)return this.clone();t=t*Math.PI/180;var i=e?this.subtract(e):this,n=Math.sin(t),r=Math.cos(t);return i=new c(i.x*r-i.y*n,i.x*n+i.y*r),e?i.add(e):i},transform:function(t){return t?t._transformPoint(this):this},add:function(){var t=c.read(arguments);return new c(this.x+t.x,this.y+t.y)},subtract:function(){var t=c.read(arguments);return new c(this.x-t.x,this.y-t.y)},multiply:function(){var t=c.read(arguments);return new c(this.x*t.x,this.y*t.y)},divide:function(){var t=c.read(arguments);return new c(this.x/t.x,this.y/t.y)},modulo:function(){var t=c.read(arguments);return new c(this.x%t.x,this.y%t.y)},negate:function(){return new c(-this.x,-this.y)},isInside:function(){return g.read(arguments).contains(this)},isClose:function(){var t=c.read(arguments),e=r.read(arguments);return this.getDistance(t)<=e},isCollinear:function(){var t=c.read(arguments);return c.isCollinear(this.x,this.y,t.x,t.y)},isColinear:"#isCollinear",isOrthogonal:function(){var t=c.read(arguments);return c.isOrthogonal(this.x,this.y,t.x,t.y)},isZero:function(){var t=u.isZero;return t(this.x)&&t(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(t){return this.x*(t>1&&t<4?-1:1)>=0&&this.y*(t>2?-1:1)>=0},dot:function(){var t=c.read(arguments);return this.x*t.x+this.y*t.y},cross:function(){var t=c.read(arguments);return this.x*t.y-this.y*t.x},project:function(){var t=c.read(arguments),e=t.isZero()?0:this.dot(t)/t.dot(t);return new c(t.x*e,t.y*e)},statics:{min:function(){var t=c.read(arguments),e=c.read(arguments);return new c(Math.min(t.x,e.x),Math.min(t.y,e.y))},max:function(){var t=c.read(arguments),e=c.read(arguments);return new c(Math.max(t.x,e.x),Math.max(t.y,e.y))},random:function(){return new c(Math.random(),Math.random())},isCollinear:function(t,e,i,n){return Math.abs(t*n-e*i)<=1e-8*Math.sqrt((t*t+e*e)*(i*i+n*n))},isOrthogonal:function(t,e,i,n){return Math.abs(t*i+e*n)<=1e-8*Math.sqrt((t*t+e*e)*(i*i+n*n))}}},r.each(["round","ceil","floor","abs"],function(t){var e=Math[t];this[t]=function(){return new c(e(this.x),e(this.y))}},{})),f=c.extend({initialize:function(t,e,i,n){this._x=t,this._y=e,this._owner=i,this._setter=n},_set:function(t,e,i){return this._x=t,this._y=e,i||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){return"setPosition"===this._setter?4:0}}),d=r.extend({_class:"Size",_readIndex:!0,initialize:function(t,e){var i=typeof t,n=this.__read,r=0;if("number"===i){var s="number"==typeof e;this._set(t,s?e:t),n&&(r=s?2:1)}else if("undefined"===i||null===t)this._set(0,0),n&&(r=null===t?1:0);else{var a="string"===i?t.split(/[\s,]+/)||[]:t;r=1,Array.isArray(a)?this._set(+a[0],+(a.length>1?a[1]:a[0])):"width"in a?this._set(a.width||0,a.height||0):"x"in a?this._set(a.x||0,a.y||0):(this._set(0,0),r=0)}return n&&(this.__read=r),this},set:"#initialize",_set:function(t,e){return this.width=t,this.height=e,this},equals:function(t){return t===this||t&&(this.width===t.width&&this.height===t.height||Array.isArray(t)&&this.width===t[0]&&this.height===t[1])||!1},clone:function(){return new d(this.width,this.height)},toString:function(){var t=h.instance;return"{ width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.width),e.number(this.height)]},add:function(){var t=d.read(arguments);return new d(this.width+t.width,this.height+t.height)},subtract:function(){var t=d.read(arguments);return new d(this.width-t.width,this.height-t.height)},multiply:function(){var t=d.read(arguments);return new d(this.width*t.width,this.height*t.height)},divide:function(){var t=d.read(arguments);return new d(this.width/t.width,this.height/t.height)},modulo:function(){var t=d.read(arguments);return new d(this.width%t.width,this.height%t.height)},negate:function(){return new d(-this.width,-this.height)},isZero:function(){var t=u.isZero;return t(this.width)&&t(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(t,e){return new d(Math.min(t.width,e.width),Math.min(t.height,e.height))},max:function(t,e){return new d(Math.max(t.width,e.width),Math.max(t.height,e.height))},random:function(){return new d(Math.random(),Math.random())}}},r.each(["round","ceil","floor","abs"],function(t){var e=Math[t];this[t]=function(){return new d(e(this.width),e(this.height))}},{})),_=d.extend({initialize:function(t,e,i,n){this._width=t,this._height=e,this._owner=i,this._setter=n},_set:function(t,e,i){return this._width=t,this._height=e,i||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(t){this._width=t,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(t){this._height=t,this._owner[this._setter](this)}}),g=r.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(t,i,n,s){var a,o=typeof t;if("number"===o?(this._set(t,i,n,s),a=4):"undefined"===o||null===t?(this._set(0,0,0,0),a=null===t?1:0):1===arguments.length&&(Array.isArray(t)?(this._set.apply(this,t),a=1):t.x!==e||t.width!==e?(this._set(t.x||0,t.y||0,t.width||0,t.height||0),a=1):t.from===e&&t.to===e&&(this._set(0,0,0,0),r.filter(this,t),a=1)),a===e){var h,u,l=c.readNamed(arguments,"from"),f=r.peek(arguments),_=l.x,g=l.y;if(f&&f.x!==e||r.hasNamed(arguments,"to")){var v=c.readNamed(arguments,"to");h=v.x-_,u=v.y-g,h<0&&(_=v.x,h=-h),u<0&&(g=v.y,u=-u)}else{var p=d.read(arguments);h=p.width,u=p.height}this._set(_,g,h,u),a=arguments.__index;var m=arguments.__filtered;m&&(this.__filtered=m)}return this.__read&&(this.__read=a),this},set:"#initialize",_set:function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this},clone:function(){return new g(this.x,this.y,this.width,this.height)},equals:function(t){var e=r.isPlainValue(t)?g.read(arguments):t;return e===this||e&&this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height||!1},toString:function(){var t=h.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+", width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y),e.number(this.width),e.number(this.height)]},getPoint:function(t){return new(t?c:f)(this.x,this.y,this,"setPoint")},setPoint:function(){var t=c.read(arguments);this.x=t.x,this.y=t.y},getSize:function(t){return new(t?d:_)(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var t=d.read(arguments),e=this._sx,i=this._sy,n=t.width,r=t.height;e&&(this.x+=(this.width-n)*e),i&&(this.y+=(this.height-r)*i),this.width=n,this.height=r,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(t){if(!this._fw){var e=t-this.x;this.width-=.5===this._sx?2*e:e}this.x=t,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(t){if(!this._fh){var e=t-this.y;this.height-=.5===this._sy?2*e:e}this.y=t,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(t){if(!this._fw){var e=t-this.x;this.width=.5===this._sx?2*e:e}this.x=t-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(t){if(!this._fh){var e=t-this.y;this.height=.5===this._sy?2*e:e}this.y=t-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(t){this._fw||.5===this._sx?this.x=t-this.width/2:(this._sx&&(this.x+=2*(t-this.x)*this._sx),this.width=2*(t-this.x)),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(t){this._fh||.5===this._sy?this.y=t-this.height/2:(this._sy&&(this.y+=2*(t-this.y)*this._sy),this.height=2*(t-this.y)),this._sy=.5,this._fh=0},getCenter:function(t){return new(t?c:f)(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var t=c.read(arguments);return this.setCenterX(t.x),this.setCenterY(t.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return 0===this.width||0===this.height},contains:function(t){return t&&t.width!==e||4===(Array.isArray(t)?t:arguments).length?this._containsRectangle(g.read(arguments)):this._containsPoint(c.read(arguments))},_containsPoint:function(t){var e=t.x,i=t.y;return e>=this.x&&i>=this.y&&e<=this.x+this.width&&i<=this.y+this.height},_containsRectangle:function(t){var e=t.x,i=t.y;return e>=this.x&&i>=this.y&&e+t.width<=this.x+this.width&&i+t.height<=this.y+this.height},intersects:function(){var t=g.read(arguments),e=r.read(arguments)||0;return t.x+t.width>this.x-e&&t.y+t.height>this.y-e&&t.x<this.x+this.width+e&&t.y<this.y+this.height+e},intersect:function(){var t=g.read(arguments),e=Math.max(this.x,t.x),i=Math.max(this.y,t.y),n=Math.min(this.x+this.width,t.x+t.width),r=Math.min(this.y+this.height,t.y+t.height);return new g(e,i,n-e,r-i)},unite:function(){var t=g.read(arguments),e=Math.min(this.x,t.x),i=Math.min(this.y,t.y),n=Math.max(this.x+this.width,t.x+t.width),r=Math.max(this.y+this.height,t.y+t.height);return new g(e,i,n-e,r-i)},include:function(){var t=c.read(arguments),e=Math.min(this.x,t.x),i=Math.min(this.y,t.y),n=Math.max(this.x+this.width,t.x),r=Math.max(this.y+this.height,t.y);return new g(e,i,n-e,r-i)},expand:function(){var t=d.read(arguments),e=t.width,i=t.height;return new g(this.x-e/2,this.y-i/2,this.width+e,this.height+i)},scale:function(t,i){return this.expand(this.width*t-this.width,this.height*(i===e?t:i)-this.height)}},r.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(t,e){var i=t.join(""),n=/^[RL]/.test(i);e>=4&&(t[1]+=n?"Y":"X");var r=t[n?0:1],s=t[n?1:0],a="get"+r,o="get"+s,h="set"+r,u="set"+s,l="set"+i;this["get"+i]=function(t){return new(t?c:f)(this[a](),this[o](),this,l)},this[l]=function(){var t=c.read(arguments);this[h](t.x),this[u](t.y)}},{beans:!0})),v=g.extend({initialize:function(t,e,i,n,r,s){this._set(t,e,i,n,!0),this._owner=r,this._setter=s},_set:function(t,e,i,n,r){return this._x=t,this._y=e,this._width=i,this._height=n,r||this._owner[this._setter](this),this}},new function(){var t=g.prototype;return r.each(["x","y","width","height"],function(t){var e=r.capitalize(t),i="_"+t;this["get"+e]=function(){return this[i]},this["set"+e]=function(t){this[i]=t,this._dontNotify||this._owner[this._setter](this)}},r.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(e){var i="set"+e;this[i]=function(){this._dontNotify=!0,t[i].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(2&this._owner._selection)},setSelected:function(t){var e=this._owner;e._changeSelection&&e._changeSelection(2,t)}}))}),p=r.extend({_class:"Matrix",initialize:function t(e,i){var n=arguments.length,r=!0;if(n>=6?this._set.apply(this,arguments):1===n||2===n?e instanceof t?this._set(e._a,e._b,e._c,e._d,e._tx,e._ty,i):Array.isArray(e)?this._set.apply(this,i?e.concat([i]):e):r=!1:n?r=!1:this.reset(),!r)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(t,e,i,n,r,s,a){return this._a=t,this._b=e,this._c=i,this._d=n,this._tx=r,this._ty=s,a||this._changed(),this},_serialize:function(t,e){return r.serialize(this.getValues(),t,!0,e)},_changed:function(){var t=this._owner;t&&(t._applyMatrix?t.transform(null,!0):t._changed(9))},clone:function(){return new p(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(t){return t===this||t&&this._a===t._a&&this._b===t._b&&this._c===t._c&&this._d===t._d&&this._tx===t._tx&&this._ty===t._ty},toString:function(){var t=h.instance;return"[["+[t.number(this._a),t.number(this._c),t.number(this._tx)].join(", ")+"], ["+[t.number(this._b),t.number(this._d),t.number(this._ty)].join(", ")+"]]"},reset:function(t){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,t||this._changed(),this},apply:function(t,e){var i=this._owner;return!!i&&(i.transform(null,!0,r.pick(t,!0),e),this.isIdentity())},translate:function(){var t=c.read(arguments),e=t.x,i=t.y;return this._tx+=e*this._a+i*this._c,this._ty+=e*this._b+i*this._d,this._changed(),this},scale:function(){var t=c.read(arguments),e=c.read(arguments,0,{readNull:!0});return e&&this.translate(e),this._a*=t.x,this._b*=t.x,this._c*=t.y,this._d*=t.y,e&&this.translate(e.negate()),this._changed(),this},rotate:function(t){t*=Math.PI/180;var e=c.read(arguments,1),i=e.x,n=e.y,r=Math.cos(t),s=Math.sin(t),a=i-i*r+n*s,o=n-i*s-n*r,h=this._a,u=this._b,l=this._c,f=this._d;return this._a=r*h+s*l,this._b=r*u+s*f,this._c=-s*h+r*l,this._d=-s*u+r*f,this._tx+=a*h+o*l,this._ty+=a*u+o*f,this._changed(),this},shear:function(){var t=c.read(arguments),e=c.read(arguments,0,{readNull:!0});e&&this.translate(e);var i=this._a,n=this._b;return this._a+=t.y*this._c,this._b+=t.y*this._d,this._c+=t.x*i,this._d+=t.x*n,e&&this.translate(e.negate()),this._changed(),this},skew:function(){var t=c.read(arguments),e=c.read(arguments,0,{readNull:!0}),i=Math.PI/180,n=new c(Math.tan(t.x*i),Math.tan(t.y*i));return this.shear(n,e)},append:function(t,e){if(t){var i=this._a,n=this._b,r=this._c,s=this._d,a=t._a,o=t._c,h=t._b,u=t._d,l=t._tx,c=t._ty;this._a=a*i+h*r,this._c=o*i+u*r,this._b=a*n+h*s,this._d=o*n+u*s,this._tx+=l*i+c*r,this._ty+=l*n+c*s,e||this._changed()}return this},prepend:function(t,e){if(t){var i=this._a,n=this._b,r=this._c,s=this._d,a=this._tx,o=this._ty,h=t._a,u=t._c,l=t._b,c=t._d,f=t._tx,d=t._ty;this._a=h*i+u*n,this._c=h*r+u*s,this._b=l*i+c*n,this._d=l*r+c*s,this._tx=h*a+u*o+f,this._ty=l*a+c*o+d,e||this._changed()}return this},appended:function(t){return this.clone().append(t)},prepended:function(t){return this.clone().prepend(t)},invert:function(){var t=this._a,e=this._b,i=this._c,n=this._d,r=this._tx,s=this._ty,a=t*n-e*i,o=null;return a&&!isNaN(a)&&isFinite(r)&&isFinite(s)&&(this._a=n/a,this._b=-e/a,this._c=-i/a,this._d=t/a,this._tx=(i*s-n*r)/a,this._ty=(e*r-t*s)/a,o=this),o},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new p(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return 1===this._a&&0===this._b&&0===this._c&&1===this._d&&0===this._tx&&0===this._ty},isInvertible:function(){var t=this._a*this._d-this._c*this._b;return t&&!isNaN(t)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(t,e,i){return arguments.length<3?this._transformPoint(c.read(arguments)):this._transformCoordinates(t,e,i)},_transformPoint:function(t,e,i){var n=t.x,r=t.y;return e||(e=new c),e._set(n*this._a+r*this._c+this._tx,n*this._b+r*this._d+this._ty,i)},_transformCoordinates:function(t,e,i){for(var n=0,r=2*i;n<r;n+=2){var s=t[n],a=t[n+1];e[n]=s*this._a+a*this._c+this._tx,e[n+1]=s*this._b+a*this._d+this._ty}return e},_transformCorners:function(t){var e=t.x,i=t.y,n=e+t.width,r=i+t.height,s=[e,i,n,i,n,r,e,r];return this._transformCoordinates(s,s,4)},_transformBounds:function(t,e,i){for(var n=this._transformCorners(t),r=n.slice(0,2),s=r.slice(),a=2;a<8;a++){var o=n[a],h=1&a;o<r[h]?r[h]=o:o>s[h]&&(s[h]=o)}return e||(e=new g),e._set(r[0],r[1],s[0]-r[0],s[1]-r[1],i)},inverseTransform:function(){return this._inverseTransform(c.read(arguments))},_inverseTransform:function(t,e,i){var n=this._a,r=this._b,s=this._c,a=this._d,o=this._tx,h=this._ty,u=n*a-r*s,l=null;if(u&&!isNaN(u)&&isFinite(o)&&isFinite(h)){var f=t.x-this._tx,d=t.y-this._ty;e||(e=new c),l=e._set((f*a-d*s)/u,(d*n-f*r)/u,i)}return l},decompose:function(){var t,e,i,n=this._a,r=this._b,s=this._c,a=this._d,o=n*a-r*s,h=Math.sqrt,u=Math.atan2,l=180/Math.PI;if(0!==n||0!==r){var f=h(n*n+r*r);t=Math.acos(n/f)*(r>0?1:-1),e=[f,o/f],i=[u(n*s+r*a,f*f),0]}else if(0!==s||0!==a){var d=h(s*s+a*a);t=Math.asin(s/d)*(a>0?1:-1),e=[o/d,d],i=[0,u(n*s+r*a,d*d)]}else t=0,i=e=[0,0];return{translation:this.getTranslation(),rotation:t*l,scaling:new c(e),skewing:new c(i[0]*l,i[1]*l)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new c(this._tx,this._ty)},getScaling:function(){return(this.decompose()||{}).scaling},getRotation:function(){return(this.decompose()||{}).rotation},applyToContext:function(t){this.isIdentity()||t.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},r.each(["a","b","c","d","tx","ty"],function(t){var e=r.capitalize(t),i="_"+t;this["get"+e]=function(){return this[i]},this["set"+e]=function(t){this[i]=t,this._changed()}},{})),m=r.extend({_class:"Line",initialize:function(t,e,i,n,r){var s=!1;arguments.length>=4?(this._px=t,this._py=e,this._vx=i,this._vy=n,s=r):(this._px=t.x,this._py=t.y,this._vx=e.x,this._vy=e.y,s=i),s||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new c(this._px,this._py)},getVector:function(){return new c(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(t,e){return m.intersect(this._px,this._py,this._vx,this._vy,t._px,t._py,t._vx,t._vy,!0,e)},getSide:function(t,e){return m.getSide(this._px,this._py,this._vx,this._vy,t.x,t.y,!0,e)},getDistance:function(t){return Math.abs(this.getSignedDistance(t))},getSignedDistance:function(t){return m.getSignedDistance(this._px,this._py,this._vx,this._vy,t.x,t.y,!0)},isCollinear:function(t){return c.isCollinear(this._vx,this._vy,t._vx,t._vy)},isOrthogonal:function(t){return c.isOrthogonal(this._vx,this._vy,t._vx,t._vy)},statics:{intersect:function(t,e,i,n,r,s,a,o,h,l){h||(i-=t,n-=e,a-=r,o-=s);var f=i*o-n*a;if(!u.isZero(f)){var d=t-r,_=e-s,g=(a*_-o*d)/f,v=(i*_-n*d)/f;if(l||-1e-12<g&&g<1+1e-12&&-1e-12<v&&v<1+1e-12)return l||(g=g<=0?0:g>=1?1:g),new c(t+g*i,e+g*n)}},getSide:function(t,e,i,n,r,s,a,o){a||(i-=t,n-=e);var h=r-t,l=h*n-(s-e)*i;return!o&&u.isZero(l)&&(l=(h*i+h*i)/(i*i+n*n))>=0&&l<=1&&(l=0),l<0?-1:l>0?1:0},getSignedDistance:function(t,e,i,n,r,s,a){return a||(i-=t,n-=e),0===i?n>0?r-t:t-r:0===n?i<0?s-e:e-s:((r-t)*n-(s-e)*i)/Math.sqrt(i*i+n*n)},getDistance:function(t,e,i,n,r,s,a){return Math.abs(m.getSignedDistance(t,e,i,n,r,s,a))}}}),y=o.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(t){o.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new V(null,null,this),this._view=U.create(this,t||Q.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(t,e){return r.serialize(this._children,t,!0,e)},_changed:function(t,e){if(1&t){var i=this._view;i&&(i._needsUpdate=!0,!i._requested&&i._autoUpdate&&i.requestUpdate())}var n=this._changes;if(n&&e){var r=this._changesById,s=e._id,a=r[s];a?a.flags|=t:n.push(r[s]={item:e,flags:t})}},clear:function(){for(var t=this._children,e=t.length-1;e>=0;e--)t[e].remove()},isEmpty:function(){return!this._children.length},remove:function t(){return!!t.base.call(this)&&(this._view&&this._view.remove(),!0)},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(t){this._currentStyle.set(t)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new b({project:this,insert:!0})},getSymbolDefinitions:function(){var t=[],e={};return this.getItems({class:P,match:function(i){var n=i._definition,r=n._id;return e[r]||(e[r]=!0,t.push(n)),!1}}),t},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var t=this._selectionItems,e=[];for(var i in t){var n=t[i],r=n._selection;1&r&&n.isInserted()?e.push(n):r||this._updateSelection(n)}return e},_updateSelection:function(t){var e=t._id,i=this._selectionItems;t._selection?i[e]!==t&&(this._selectionCount++,i[e]=t):i[e]===t&&(this._selectionCount--,delete i[e])},selectAll:function(){for(var t=this._children,e=0,i=t.length;e<i;e++)t[e].setFullySelected(!0)},deselectAll:function(){var t=this._selectionItems;for(var e in t)t[e].setFullySelected(!1)},addLayer:function(t){return this.insertLayer(e,t)},insertLayer:function(t,e){if(e instanceof b){e._remove(!1,!0),r.splice(this._children,[e],t,0),e._setProject(this,!0);var i=e._name;i&&e.setName(i),this._changes&&e._changed(5),this._activeLayer||(this._activeLayer=e)}else e=null;return e},_insertItem:function(t,i,n){return i=this.insertLayer(t,i)||(this._activeLayer||this._insertItem(e,new b(w.NO_INSERT),!0)).insertChild(t,i),n&&i.activate&&i.activate(),i},getItems:function(t){return w._getItems(this,t)},getItem:function(t){return w._getItems(this,t,null,null,!0)[0]||null},importJSON:function(t){this.activate();var e=this._activeLayer;return r.importJSON(t,e&&e.isEmpty()&&e)},removeOn:function(t){var e=this._removeSets;if(e){"mouseup"===t&&(e.mousedrag=null);var i=e[t];if(i){for(var n in i){var r=i[n];for(var s in e){var a=e[s];a&&a!=i&&delete a[r._id]}r.remove()}e[t]=null}}},draw:function(t,e,i){this._updateVersion++,t.save(),e.applyToContext(t);for(var n=this._children,s=new r({offset:new c(0,0),pixelRatio:i,viewMatrix:e.isIdentity()?null:e,matrices:[new p],updateMatrix:!0}),a=0,o=n.length;a<o;a++)n[a].draw(t,s);if(t.restore(),this._selectionCount>0){t.save(),t.strokeWidth=1;var h=this._selectionItems,u=this._scope.settings.handleSize,l=this._updateVersion;for(var f in h)h[f]._drawSelection(t,e,u,h,l);t.restore()}}}),w=r.extend(s,{statics:{extend:function t(e){return e._serializeFields&&(e._serializeFields=r.set({},this.prototype._serializeFields,e._serializeFields)),t.base.apply(this,arguments)},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new p,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var t=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return r.each(t,function(t){this._events[t]={install:function(t){this.getView()._countItemEvent(t,1)},uninstall:function(t){this.getView()._countItemEvent(t,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:t}})},{initialize:function(){},_initialize:function(t,i){var n=t&&r.isPlainObject(t),s=n&&!0===t.internal,a=this._matrix=new p,o=n&&t.project||paper.project,h=paper.settings;return this._id=s?null:l.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&h.applyMatrix,i&&a.translate(i),a._owner=this,this._style=new V(o._currentStyle,this,o),s||n&&0==t.insert||!h.insertItems&&(!n||!0!==t.insert)?this._setProject(o):(n&&t.parent||o)._insertItem(e,this,!0),n&&t!==w.NO_INSERT&&this.set(t,{internal:!0,insert:!0,project:!0,parent:!0}),n},_serialize:function(t,e){function i(i){for(var a in i){var o=s[a];r.equals(o,"leading"===a?1.2*i.fontSize:i[a])||(n[a]=r.serialize(o,t,"data"!==a,e))}}var n={},s=this;return i(this._serializeFields),this instanceof x||i(this._style._defaults),[this._class,n]},_changed:function(t){var i=this._symbol,n=this._parent||i,r=this._project;8&t&&(this._bounds=this._position=this._decomposed=this._globalMatrix=e),n&&40&t&&w._clearBoundsCache(n),2&t&&w._clearBoundsCache(this),r&&r._changed(t,this),i&&i._changed(t)},getId:function(){return this._id},getName:function(){return this._name},setName:function(t){if(this._name&&this._removeNamed(),t===+t+"")throw new Error("Names consisting only of numbers are not supported.");var i=this._getOwner();if(t&&i){var n=i._children,r=i._namedChildren;(r[t]=r[t]||[]).push(this),t in n||(n[t]=this)}this._name=t||e,this._changed(128)},getStyle:function(){return this._style},setStyle:function(t){this.getStyle().set(t)}},r.each(["locked","visible","blendMode","opacity","guide"],function(t){var e=r.capitalize(t),i="_"+t,n={locked:128,visible:137};this["get"+e]=function(){return this[i]},this["set"+e]=function(e){e!=this[i]&&(this[i]=e,this._changed(n[t]||129))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(t){if(t!==this._selection){this._selection=t;var e=this._project;e&&(e._updateSelection(this),this._changed(129))}},_changeSelection:function(t,e){var i=this._selection;this.setSelection(e?i|t:i&~t)},isSelected:function(){if(this._selectChildren)for(var t=this._children,e=0,i=t.length;e<i;e++)if(t[e].isSelected())return!0;return!!(1&this._selection)},setSelected:function(t){if(this._selectChildren)for(var e=this._children,i=0,n=e.length;i<n;i++)e[i].setSelected(t);this._changeSelection(1,t)},isFullySelected:function(){var t=this._children,e=!!(1&this._selection);if(t&&e){for(var i=0,n=t.length;i<n;i++)if(!t[i].isFullySelected())return!1;return!0}return e},setFullySelected:function(t){var e=this._children;if(e)for(var i=0,n=e.length;i<n;i++)e[i].setFullySelected(t);this._changeSelection(1,t)},isClipMask:function(){return this._clipMask},setClipMask:function(t){this._clipMask!=(t=!!t)&&(this._clipMask=t,t&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(129),this._parent&&this._parent._changed(1024))},getData:function(){return this._data||(this._data={}),this._data},setData:function(t){this._data=t},getPosition:function(t){var e=this._position,i=t?c:f;if(!e){var n=this._pivot;e=this._position=n?this._matrix._transformPoint(n):this.getBounds().getCenter(!0)}return new i(e.x,e.y,this,"setPosition")},setPosition:function(){this.translate(c.read(arguments).subtract(this.getPosition(!0)))},getPivot:function(){var t=this._pivot;return t?new f(t.x,t.y,this,"setPivot"):null},setPivot:function(){this._pivot=c.read(arguments,0,{clone:!0,readNull:!0}),this._position=e}},r.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(t,e){this[e]=function(e){return this.getBounds(e,t)}},{beans:!0,getBounds:function(t,e){var i=e||t instanceof p,n=r.set({},i?e:t,this._boundsOptions);n.stroke&&!this.getStrokeScaling()||(n.cacheItem=this);var s=this._getCachedBounds(i&&t,n).rect;return arguments.length?s:new v(s.x,s.y,s.width,s.height,this,"setBounds")},setBounds:function(){var t=g.read(arguments),e=this.getBounds(),i=this._matrix,n=new p,r=t.getCenter();n.translate(r),t.width==e.width&&t.height==e.height||(i.isInvertible()||(i.set(i._backup||(new p).translate(i.getTranslation())),e=this.getBounds()),n.scale(0!==e.width?t.width/e.width:0,0!==e.height?t.height/e.height:0)),r=e.getCenter(),n.translate(-r.x,-r.y),this.transform(n)},_getBounds:function(t,e){var i=this._children;return i&&i.length?(w._updateBoundsCache(this,e.cacheItem),w._getBounds(i,t,e)):new g},_getBoundsCacheKey:function(t,e){return[t.stroke?1:0,t.handle?1:0,e?1:0].join("")},_getCachedBounds:function(t,e,i){t=t&&t._orNullIfIdentity();var n=e.internal&&!i,r=e.cacheItem,s=n?null:this._matrix._orNullIfIdentity(),a=r&&(!t||t.equals(s))&&this._getBoundsCacheKey(e,n),o=this._bounds;if(w._updateBoundsCache(this._parent||this._symbol,r),a&&o&&a in o)return{rect:(f=o[a]).rect.clone(),nonscaling:f.nonscaling};var h=this._getBounds(t||s,e),u=h.rect||h,l=this._style,c=h.nonscaling||l.hasStroke()&&!l.getStrokeScaling();if(a){o||(this._bounds=o={});var f=o[a]={rect:u.clone(),nonscaling:c,internal:n}}return{rect:u,nonscaling:c}},_getStrokeMatrix:function(t,e){var i=this.getStrokeScaling()?null:e&&e.internal?this:this._parent||this._symbol&&this._symbol._item,n=i?i.getViewMatrix().invert():t;return n&&n._shiftless()},statics:{_updateBoundsCache:function(t,e){if(t&&e){var i=e._id,n=t._boundsCache=t._boundsCache||{ids:{},list:[]};n.ids[i]||(n.list.push(e),n.ids[i]=e)}},_clearBoundsCache:function(t){var i=t._boundsCache;if(i){t._bounds=t._position=t._boundsCache=e;for(var n=0,r=i.list,s=r.length;n<s;n++){var a=r[n];a!==t&&(a._bounds=a._position=e,a._boundsCache&&w._clearBoundsCache(a))}}},_getBounds:function(t,e,i){var n=1/0,r=-n,s=n,a=r,o=!1;i=i||{};for(var h=0,u=t.length;h<u;h++){var l=t[h];if(l._visible&&!l.isEmpty()){var c=l._getCachedBounds(e&&e.appended(l._matrix),i,!0),f=c.rect;n=Math.min(f.x,n),s=Math.min(f.y,s),r=Math.max(f.x+f.width,r),a=Math.max(f.y+f.height,a),c.nonscaling&&(o=!0)}}return{rect:isFinite(n)?new g(n,s,r-n,a-s):new g,nonscaling:o}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var t=this._decompose();return t?t.rotation:0},setRotation:function(t){var e=this.getRotation();if(null!=e&&null!=t){var i=this._decomposed;this.rotate(t-e),i&&(i.rotation=t,this._decomposed=i)}},getScaling:function(){var t=this._decompose(),e=t&&t.scaling;return new f(e?e.x:1,e?e.y:1,this,"setScaling")},setScaling:function(){var t=this.getScaling(),e=c.read(arguments,0,{clone:!0,readNull:!0});if(t&&e&&!t.equals(e)){var i=this.getRotation(),n=this._decomposed,r=new p,s=this.getPosition(!0);r.translate(s),i&&r.rotate(i),r.scale(e.x/t.x,e.y/t.y),i&&r.rotate(-i),r.translate(s.negate()),this.transform(r),n&&(n.scaling=e,this._decomposed=n)}},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.initialize.apply(t,arguments)},getGlobalMatrix:function(t){var e=this._globalMatrix,i=this._project._updateVersion;if(e&&e._updateVersion!==i&&(e=null),!e){e=this._globalMatrix=this._matrix.clone();var n=this._parent;n&&e.prepend(n.getGlobalMatrix(!0)),e._updateVersion=i}return t?e:e.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(t){(this._applyMatrix=this._canApplyMatrix&&!!t)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(t,e){if(this._project!==t){this._project&&this._installEvents(!1),this._project=t;for(var i=this._children,n=0,r=i&&i.length;n<r;n++)i[n]._setProject(t);e=!0}e&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function t(e){t.base.call(this,e);for(var i=this._children,n=0,r=i&&i.length;n<r;n++)i[n]._installEvents(e)},getLayer:function(){for(var t=this;t=t._parent;)if(t instanceof b)return t;return null},getParent:function(){return this._parent},setParent:function(t){return t.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(t){this.removeChildren(),this.addChildren(t)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var t=this._getOwner();return t&&t._children[this._index+1]||null},getPreviousSibling:function(){var t=this._getOwner();return t&&t._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(t){return t===this||t&&this._class===t._class&&this._style.equals(t._style)&&this._matrix.equals(t._matrix)&&this._locked===t._locked&&this._visible===t._visible&&this._blendMode===t._blendMode&&this._opacity===t._opacity&&this._clipMask===t._clipMask&&this._guide===t._guide&&this._equals(t)||!1},_equals:function(t){return r.equals(this._children,t._children)},clone:function(t){var i=new this.constructor(w.NO_INSERT),n=this._children,s=r.pick(t?t.insert:e,t===e||!0===t),a=r.pick(t?t.deep:e,!0);n&&i.copyAttributes(this),n&&!a||i.copyContent(this),n||i.copyAttributes(this),s&&i.insertAbove(this);var o=this._name,h=this._parent;if(o&&h){for(var n=h._children,u=o,l=1;n[o];)o=u+" "+l++;o!==u&&i.setName(o)}return i},copyContent:function(t){for(var e=t._children,i=0,n=e&&e.length;i<n;i++)this.addChild(e[i].clone(!1),!0)},copyAttributes:function(t,e){this.setStyle(t._style);for(var i=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],n=0,s=i.length;n<s;n++){var a=i[n];t.hasOwnProperty(a)&&(this[a]=t[a])}e||this._matrix.set(t._matrix,!0),this.setApplyMatrix(t._applyMatrix),this.setPivot(t._pivot),this.setSelection(t._selection);var o=t._data,h=t._name;this._data=o?r.clone(o):null,h&&this.setName(h)},rasterize:function(t,i){var n=this.getStrokeBounds(),s=(t||this.getView().getResolution())/72,a=n.getTopLeft().floor(),o=n.getBottomRight().ceil(),h=new d(o.subtract(a)),u=new S(w.NO_INSERT);if(!h.isZero()){var l=Q.getCanvas(h.multiply(s)),c=l.getContext("2d"),f=(new p).scale(s).translate(a.negate());c.save(),f.applyToContext(c),this.draw(c,new r({matrices:[f]})),c.restore(),u.setCanvas(l)}return u.transform((new p).translate(a.add(h.divide(2))).scale(1/s)),(i===e||i)&&u.insertAbove(this),u},contains:function(){return!!this._contains(this._matrix._inverseTransform(c.read(arguments)))},_contains:function(t){var e=this._children;if(e){for(var i=e.length-1;i>=0;i--)if(e[i].contains(t))return!0;return!1}return t.isInside(this.getInternalBounds())},isInside:function(){return g.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new L.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(t,e){return t instanceof w&&this._asPathItem().getIntersections(t._asPathItem(),null,e,!0).length>0}},new function(){function t(){return this._hitTest(c.read(arguments),M.getOptions(arguments))}function e(){var t=c.read(arguments),e=M.getOptions(arguments),i=[];return this._hitTest(t,r.set({all:i},e)),i}function i(t,e,i,n){var r=this._children;if(r)for(var s=r.length-1;s>=0;s--){var a=r[s],o=a!==n&&a._hitTest(t,e,i);if(o&&!e.all)return o}return null}return y.inject({hitTest:t,hitTestAll:e,_hitTest:i}),{hitTest:t,hitTestAll:e,_hitTestChildren:i}},{_hitTest:function(t,e,i){function n(t){return t&&_&&!_(t)&&(t=null),t&&e.all&&e.all.push(t),t}function s(e,i){var n=i?l["get"+i]():g.getPosition();if(t.subtract(n).divide(u).length<=1)return new M(e,g,{name:i?r.hyphenate(i):e,point:n})}if(this._locked||!this._visible||this._guide&&!e.guides||this.isEmpty())return null;var a=this._matrix,o=i?i.appended(a):this.getGlobalMatrix().prepend(this.getView()._matrix),h=Math.max(e.tolerance,1e-12),u=e._tolerancePadding=new d(L._getStrokePadding(h,a._shiftless().invert()));if(!(t=a._inverseTransform(t))||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(u.multiply(2))._containsPoint(t))return null;var l,c,f=!(e.guides&&!this._guide||e.selected&&!this.isSelected()||e.type&&e.type!==r.hyphenate(this._class)||e.class&&!(this instanceof e.class)),_=e.match,g=this,v=e.position,p=e.center,m=e.bounds;if(f&&this._parent&&(v||p||m)){if((p||m)&&(l=this.getInternalBounds()),!(c=v&&s("position")||p&&s("center","Center"))&&m)for(var y=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],w=0;w<8&&!c;w++)c=s("bounds",y[w]);c=n(c)}return c||(c=this._hitTestChildren(t,e,o)||f&&n(this._hitTestSelf(t,e,o,this.getStrokeScaling()?null:o._shiftless().invert()))||null),c&&c.point&&(c.point=a.transform(c.point)),c},_hitTestSelf:function(t,e){if(e.fill&&this.hasFill()&&this._contains(t))return new M("fill",this)},matches:function(t,e){function i(t,e){for(var n in t)if(t.hasOwnProperty(n)){var s=t[n],a=e[n];if(r.isPlainObject(s)&&r.isPlainObject(a)){if(!i(s,a))return!1}else if(!r.equals(s,a))return!1}return!0}var n=typeof t;if("object"===n){for(var s in t)if(t.hasOwnProperty(s)&&!this.matches(s,t[s]))return!1;return!0}if("function"===n)return t(this);if("match"===t)return e(this);var a=/^(empty|editable)$/.test(t)?this["is"+r.capitalize(t)]():"type"===t?r.hyphenate(this._class):this[t];if("class"===t){if("function"==typeof e)return this instanceof e;a=this._class}if("function"==typeof e)return!!e(a);if(e){if(e.test)return e.test(a);if(r.isPlainObject(e))return i(e,a)}return r.equals(a,e)},getItems:function(t){return w._getItems(this,t,this._matrix)},getItem:function(t){return w._getItems(this,t,this._matrix,null,!0)[0]||null},statics:{_getItems:function t(e,i,n,s,a){if(!s){var o="object"==typeof i&&i,h=o&&o.overlapping,u=o&&o.inside,l=(w=h||u)&&g.read([w]);s={items:[],recursive:o&&!1!==o.recursive,inside:!!u,overlapping:!!h,rect:l,path:h&&new L.Rectangle({rectangle:l,insert:!1})},o&&(i=r.filter({},i,{recursive:!0,inside:!0,overlapping:!0}))}var c=e._children,f=s.items;n=(l=s.rect)&&(n||new p);for(var d=0,_=c&&c.length;d<_;d++){var v=c[d],m=n&&n.appended(v._matrix),y=!0;if(l){var w=v.getBounds(m);if(!l.intersects(w))continue;l.contains(w)||s.overlapping&&(w.contains(l)||s.path.intersects(v,m))||(y=!1)}if(y&&v.matches(i)&&(f.push(v),a))break;if(!1!==s.recursive&&t(v,i,m,s,a),a&&f.length>0)break}return f}}},{importJSON:function(t){var e=r.importJSON(t,this);return e!==this?this.addChild(e):e},addChild:function(t){return this.insertChild(e,t)},insertChild:function(t,e){var i=e?this.insertChildren(t,[e]):null;return i&&i[0]},addChildren:function(t){return this.insertChildren(this._children.length,t)},insertChildren:function(t,e){var i=this._children;if(i&&e&&e.length>0){for(var n={},s=(e=r.slice(e)).length-1;s>=0;s--){var a=(l=e[s])&&l._id;!l||n[a]?e.splice(s,1):(l._remove(!1,!0),n[a]=!0)}r.splice(i,e,t,0);for(var o=this._project,h=o._changes,s=0,u=e.length;s<u;s++){var l=e[s],c=l._name;l._parent=this,l._setProject(o,!0),c&&l.setName(c),h&&l._changed(5)}this._changed(11)}else e=null;return e},_insertItem:"#insertChild",_insertAt:function(t,e){var i=t&&t._getOwner(),n=t!==this&&i?this:null;return n&&(n._remove(!1,!0),i._insertItem(t._index+e,n)),n},insertAbove:function(t){return this._insertAt(t,1)},insertBelow:function(t){return this._insertAt(t,0)},sendToBack:function(){var t=this._getOwner();return t?t._insertItem(0,this):null},bringToFront:function(){var t=this._getOwner();return t?t._insertItem(e,this):null},appendTop:"#addChild",appendBottom:function(t){return this.insertChild(0,t)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(t){return t._insertItem(e,this)},copyTo:function(t){return this.clone(!1).addTo(t)},reduce:function(t){var e=this._children;if(e&&1===e.length){var i=e[0].reduce(t);return this._parent?(i.insertAbove(this),this.remove()):i.remove(),i}return this},_removeNamed:function(){var t=this._getOwner();if(t){var e=t._children,i=t._namedChildren,n=this._name,r=i[n],s=r?r.indexOf(this):-1;-1!==s&&(e[n]==this&&delete e[n],r.splice(s,1),r.length?e[n]=r[0]:delete i[n])}},_remove:function(t,e){var i=this._getOwner(),n=this._project,s=this._index;return!!i&&(this._name&&this._removeNamed(),null!=s&&(n._activeLayer===this&&(n._activeLayer=this.getNextSibling()||this.getPreviousSibling()),r.splice(i._children,null,s,1)),this._installEvents(!1),t&&n._changes&&this._changed(5),e&&i._changed(11,this),this._parent=null,!0)},remove:function(){return this._remove(!0,!0)},replaceWith:function(t){var e=t&&t.insertBelow(this);return e&&this.remove(),e},removeChildren:function(t,e){if(!this._children)return null;t=t||0,e=r.pick(e,this._children.length);for(var i=r.splice(this._children,null,t,e-t),n=i.length-1;n>=0;n--)i[n]._remove(!0,!1);return i.length>0&&this._changed(11),i},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var t=0,e=this._children.length;t<e;t++)this._children[t]._index=t;this._changed(11)}},isEmpty:function(){var t=this._children;return!t||!t.length},isEditable:function(){for(var t=this;t;){if(!t._visible||t._locked)return!1;t=t._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(t){function e(t){var e=[];do{e.unshift(t)}while(t=t._parent);return e}for(var i=e(this),n=e(t),r=0,s=Math.min(i.length,n.length);r<s;r++)if(i[r]!=n[r])return i[r]._index<n[r]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return!!this._parent&&this._parent.isInserted()},isAbove:function(t){return-1===this._getOrder(t)},isBelow:function(t){return 1===this._getOrder(t)},isParent:function(t){return this._parent===t},isChild:function(t){return t&&t._parent===this},isDescendant:function(t){for(var e=this;e=e._parent;)if(e===t)return!0;return!1},isAncestor:function(t){return!!t&&t.isDescendant(this)},isSibling:function(t){return this._parent===t._parent},isGroupedWith:function(t){for(var e=this._parent;e;){if(e._parent&&/^(Group|Layer|CompoundPath)$/.test(e._class)&&t.isDescendant(e))return!0;e=e._parent}return!1}},r.each(["rotate","scale","shear","skew"],function(t){var e="rotate"===t;this[t]=function(){var i=(e?r:c).read(arguments),n=c.read(arguments,0,{readNull:!0});return this.transform((new p)[t](i,n||this.getPosition(!0)))}},{translate:function(){var t=new p;return this.transform(t.translate.apply(t,arguments))},transform:function(t,e,i,n){var r=this._matrix,s=t&&!t.isIdentity(),a=(e||this._applyMatrix)&&(!r.isIdentity()||s||e&&i&&this._children);if(!s&&!a)return this;if(s){!t.isInvertible()&&r.isInvertible()&&(r._backup=r.getValues()),r.prepend(t,!0);var o=this._style,h=o.getFillColor(!0),u=o.getStrokeColor(!0);h&&h.transform(t),u&&u.transform(t)}if(a&&(a=this._transformContent(r,i,n))){var l=this._pivot;l&&r._transformPoint(l,l,!0),r.reset(!0),n&&this._canApplyMatrix&&(this._applyMatrix=!0)}var c=this._bounds,f=this._position;(s||a)&&this._changed(9);var d=s&&c&&t.decompose();if(d&&d.skewing.isZero()&&d.rotation%90==0){for(var _ in c){var g=c[_];if(g.nonscaling)delete c[_];else if(a||!g.internal){var v=g.rect;t._transformBounds(v,v)}}this._bounds=c;var p=c[this._getBoundsCacheKey(this._boundsOptions||{})];p&&(this._position=p.rect.getCenter(!0))}else s&&f&&this._pivot&&(this._position=t._transformPoint(f,f));return this},_transformContent:function(t,e,i){var n=this._children;if(n){for(var r=0,s=n.length;r<s;r++)n[r].transform(t,!0,e,i);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(c.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(c.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(c.read(arguments))},localToParent:function(){return this._matrix._transformPoint(c.read(arguments))},fitBounds:function(t,e){t=g.read(arguments);var i=this.getBounds(),n=i.height/i.width,r=t.height/t.width,s=(e?n>r:n<r)?t.width/i.width:t.height/i.height,a=new g(new c,new d(i.width*s,i.height*s));a.setCenter(t.getCenter()),this.setBounds(a)}}),{_setStyles:function(t,e,i){var n=this._style,r=this._matrix;if(n.hasFill()&&(t.fillStyle=n.getFillColor().toCanvasStyle(t,r)),n.hasStroke()){t.strokeStyle=n.getStrokeColor().toCanvasStyle(t,r),t.lineWidth=n.getStrokeWidth();var s=n.getStrokeJoin(),a=n.getStrokeCap(),o=n.getMiterLimit();if(s&&(t.lineJoin=s),a&&(t.lineCap=a),o&&(t.miterLimit=o),paper.support.nativeDash){var h=n.getDashArray(),u=n.getDashOffset();h&&h.length&&("setLineDash"in t?(t.setLineDash(h),t.lineDashOffset=u):(t.mozDash=h,t.mozDashOffset=u))}}if(n.hasShadow()){var l=e.pixelRatio||1,f=i._shiftless().prepend((new p).scale(l,l)),d=f.transform(new c(n.getShadowBlur(),0)),_=f.transform(this.getShadowOffset());t.shadowColor=n.getShadowColor().toCanvasStyle(t),t.shadowBlur=d.getLength(),t.shadowOffsetX=_.x,t.shadowOffsetY=_.y}},draw:function(t,e,i){var n=this._updateVersion=this._project._updateVersion;if(this._visible&&0!==this._opacity){var r=e.matrices,s=e.viewMatrix,a=this._matrix,o=r[r.length-1].appended(a);if(o.isInvertible()){s=s?s.appended(o):o,r.push(o),e.updateMatrix&&(o._updateVersion=n,this._globalMatrix=o);var h,u,l,c=this._blendMode,f=this._opacity,d="normal"===c,_=tt.nativeModes[c],g=d&&1===f||e.dontStart||e.clip||(_||d&&f<1)&&this._canComposite(),v=e.pixelRatio||1;if(!g){var p=this.getStrokeBounds(s);if(!p.width||!p.height)return;l=e.offset,u=e.offset=p.getTopLeft().floor(),h=t,t=Q.getContext(p.getSize().ceil().add(1).multiply(v)),1!==v&&t.scale(v,v)}t.save();var m=i?i.appended(a):this._canScaleStroke&&!this.getStrokeScaling(!0)&&s,y=!g&&e.clipItem,w=!m||y;if(g?(t.globalAlpha=f,_&&(t.globalCompositeOperation=c)):w&&t.translate(-u.x,-u.y),w&&(g?a:s).applyToContext(t),y&&e.clipItem.draw(t,e.extend({clip:!0})),m){t.setTransform(v,0,0,v,0,0);var x=e.offset;x&&t.translate(-x.x,-x.y)}this._draw(t,e,s,m),t.restore(),r.pop(),e.clip&&!e.dontFinish&&t.clip(),g||(tt.process(c,t,h,f,u.subtract(l).multiply(v)),Q.release(t),e.offset=l)}}},_isUpdated:function(t){var e=this._parent;if(e instanceof N)return e._isUpdated(t);var i=this._updateVersion===t;return!i&&e&&e._visible&&e._isUpdated(t)&&(this._updateVersion=t,i=!0),i},_drawSelection:function(t,e,i,n,r){var s=this._selection,a=1&s,o=2&s||a&&this._selectBounds,h=4&s;if(this._drawSelected||(a=!1),(a||o||h)&&this._isUpdated(r)){var u,l=this.getSelectedColor(!0)||(u=this.getLayer())&&u.getSelectedColor(!0),c=e.appended(this.getGlobalMatrix(!0)),f=i/2;if(t.strokeStyle=t.fillStyle=l?l.toCanvasStyle(t):"#009dec",a&&this._drawSelected(t,c,n),h){var d=this.getPosition(!0),_=d.x,g=d.y;t.beginPath(),t.arc(_,g,f,0,2*Math.PI,!0),t.stroke();for(var v=[[0,-1],[1,0],[0,1],[-1,0]],p=f,m=i+1,y=0;y<4;y++){var w=v[y],x=w[0],b=w[1];t.moveTo(_+x*p,g+b*p),t.lineTo(_+x*m,g+b*m),t.stroke()}}if(o){var C=c._transformCorners(this.getInternalBounds());t.beginPath();for(y=0;y<8;y++)t[y?"lineTo":"moveTo"](C[y],C[++y]);t.closePath(),t.stroke();for(y=0;y<8;y++)t.fillRect(C[y]-f,C[++y]-f,i,i)}}},_canComposite:function(){return!1}},r.each(["down","drag","up","move"],function(t){this["removeOn"+r.capitalize(t)]=function(){var e={};return e[t]=!0,this.removeOn(e)}},{removeOn:function(t){for(var e in t)if(t[e]){var i="mouse"+e,n=this._project,r=n._removeSets=n._removeSets||{};r[i]=r[i]||{},r[i][this._id]=this}return this}})),x=w.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||this.addChildren(Array.isArray(t)?t:arguments)},_changed:function t(i){t.base.call(this,i),1026&i&&(this._clipItem=e)},_getClipItem:function(){var t=this._clipItem;if(t===e){t=null;for(var i=this._children,n=0,r=i.length;n<r;n++)if(i[n]._clipMask){t=i[n];break}this._clipItem=t}return t},isClipped:function(){return!!this._getClipItem()},setClipped:function(t){var e=this.getFirstChild();e&&e.setClipMask(t)},_getBounds:function t(e,i){var n=this._getClipItem();return n?n._getCachedBounds(e&&e.appended(n._matrix),r.set({},i,{stroke:!1})):t.base.call(this,e,i)},_hitTestChildren:function t(e,i,n){var r=this._getClipItem();return(!r||r.contains(e))&&t.base.call(this,e,i,n,r)},_draw:function(t,e){var i=e.clip,n=!i&&this._getClipItem();e=e.extend({clipItem:n,clip:!1}),i?(t.beginPath(),e.dontStart=e.dontFinish=!0):n&&n.draw(t,e.extend({clip:!0}));for(var r=this._children,s=0,a=r.length;s<a;s++){var o=r[s];o!==n&&o.draw(t,e)}}}),b=x.extend({_class:"Layer",initialize:function(){x.apply(this,arguments)},_getOwner:function(){return this._parent||null!=this._index&&this._project},isInserted:function t(){return this._parent?t.base.call(this):null!=this._index},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),C=w.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(t,e){this._initialize(t,e)},_equals:function(t){return this._type===t._type&&this._size.equals(t._size)&&r.equals(this._radius,t._radius)},copyContent:function(t){this.setType(t._type),this.setSize(t._size),this.setRadius(t._radius)},getType:function(){return this._type},setType:function(t){this._type=t},getShape:"#getType",setShape:"#setType",getSize:function(){var t=this._size;return new _(t.width,t.height,this,"setSize")},setSize:function(){var t=d.read(arguments);if(this._size){if(!this._size.equals(t)){var e=this._type,i=t.width,n=t.height;"rectangle"===e?this._radius.set(d.min(this._radius,t.divide(2))):"circle"===e?(i=n=(i+n)/2,this._radius=i/2):"ellipse"===e&&this._radius._set(i/2,n/2),this._size._set(i,n),this._changed(9)}}else this._size=t.clone()},getRadius:function(){var t=this._radius;return"circle"===this._type?t:new _(t.width,t.height,this,"setRadius")},setRadius:function(t){var e=this._type;if("circle"===e){if(t===this._radius)return;i=2*t;this._radius=t,this._size._set(i,i)}else if(t=d.read(arguments),this._radius){if(this._radius.equals(t))return;if(this._radius.set(t),"rectangle"===e){var i=d.max(this._size,t.multiply(2));this._size.set(i)}else"ellipse"===e&&this._size._set(2*t.width,2*t.height)}else this._radius=t.clone();this._changed(9)},isEmpty:function(){return!1},toPath:function(t){var i=new(L[r.capitalize(this._type)])({center:new c,size:this._size,radius:this._radius,insert:!1});return i.copyAttributes(this),paper.settings.applyMatrix&&i.setApplyMatrix(!0),(t===e||t)&&i.insertAbove(this),i},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(t,e,i,n){var r=this._style,s=r.hasFill(),a=r.hasStroke(),o=e.dontFinish||e.clip,h=!n;if(s||a||o){var u=this._type,l=this._radius,c="circle"===u;if(e.dontStart||t.beginPath(),h&&c)t.arc(0,0,l,0,2*Math.PI,!0);else{var f=c?l:l.width,d=c?l:l.height,_=this._size,g=_.width,v=_.height;if(h&&"rectangle"===u&&0===f&&0===d)t.rect(-g/2,-v/2,g,v);else{var p=g/2,m=v/2,y=.44771525016920644,w=f*y,x=d*y,b=[-p,-m+d,-p,-m+x,-p+w,-m,-p+f,-m,p-f,-m,p-w,-m,p,-m+x,p,-m+d,p,m-d,p,m-x,p-w,m,p-f,m,-p+f,m,-p+w,m,-p,m-x,-p,m-d];n&&n.transform(b,b,32),t.moveTo(b[0],b[1]),t.bezierCurveTo(b[2],b[3],b[4],b[5],b[6],b[7]),p!==f&&t.lineTo(b[8],b[9]),t.bezierCurveTo(b[10],b[11],b[12],b[13],b[14],b[15]),m!==d&&t.lineTo(b[16],b[17]),t.bezierCurveTo(b[18],b[19],b[20],b[21],b[22],b[23]),p!==f&&t.lineTo(b[24],b[25]),t.bezierCurveTo(b[26],b[27],b[28],b[29],b[30],b[31])}}t.closePath()}o||!s&&!a||(this._setStyles(t,e,i),s&&(t.fill(r.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),a&&t.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(t,e){var i=new g(this._size).setCenter(0,0),n=this._style,r=e.stroke&&n.hasStroke()&&n.getStrokeWidth();return t&&(i=t._transformBounds(i)),r?i.expand(L._getStrokePadding(r,this._getStrokeMatrix(t,e))):i}},new function(){function t(t,e,i){var n=t._radius;if(!n.isZero())for(var r=t._size.divide(2),s=1;s<=4;s++){var a=new c(s>1&&s<4?-1:1,s>2?-1:1),o=a.multiply(r),h=o.subtract(a.multiply(n));if(new g(i?o.add(a.multiply(i)):o,h).contains(e))return{point:h,quadrant:s}}}function e(t,e,i,n){var r=t.divide(e);return(!n||r.isInQuadrant(n))&&r.subtract(r.normalize()).multiply(e).divide(i).length<=1}return{_contains:function e(i){if("rectangle"===this._type){var n=t(this,i);return n?i.subtract(n.point).divide(this._radius).getLength()<=1:e.base.call(this,i)}return i.divide(this.size).getLength()<=.5},_hitTestSelf:function i(n,r,s,a){var o=!1,h=this._style,u=r.stroke&&h.hasStroke(),l=r.fill&&h.hasFill();if(u||l){var c=this._type,f=this._radius,d=u?h.getStrokeWidth()/2:0,_=r._tolerancePadding.add(L._getStrokePadding(d,!h.getStrokeScaling()&&a));if("rectangle"===c){var v=_.multiply(2),p=t(this,n,v);if(p)o=e(n.subtract(p.point),f,_,p.quadrant);else{var m=new g(this._size).setCenter(0,0),y=m.expand(v),w=m.expand(v.negate());o=y._containsPoint(n)&&!w._containsPoint(n)}}else o=e(n,f,_)}return o?new M(u?"stroke":"fill",this):i.base.apply(this,arguments)}}},{statics:new function(){function t(t,e,i,n,s){var a=new C(r.getNamed(s),e);return a._type=t,a._size=i,a._radius=n,a}return{Circle:function(){var e=c.readNamed(arguments,"center"),i=r.readNamed(arguments,"radius");return t("circle",e,new d(2*i),i,arguments)},Rectangle:function(){var e=g.readNamed(arguments,"rectangle"),i=d.min(d.readNamed(arguments,"radius"),e.getSize(!0).divide(2));return t("rectangle",e.getCenter(!0),e.getSize(!0),i,arguments)},Ellipse:function(){var e=C._readEllipse(arguments),i=e.radius;return t("ellipse",e.center,i.multiply(2),i,arguments)},_readEllipse:function(t){var e,i;if(r.hasNamed(t,"radius"))e=c.readNamed(t,"center"),i=d.readNamed(t,"radius");else{var n=g.readNamed(t,"rectangle");e=n.getCenter(!0),i=n.getSize(!0).divide(2)}return{center:e,radius:i}}}}}),S=w.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],initialize:function(t,i){if(!this._initialize(t,i!==e&&c.read(arguments,1))){var r="string"==typeof t?n.getElementById(t):t;r?this.setImage(r):this.setSource(t)}this._size||(this._size=new d,this._loaded=!1)},_equals:function(t){return this.getSource()===t.getSource()},copyContent:function(t){var e=t._image,i=t._canvas;if(e)this._setImage(e);else if(i){var n=Q.getCanvas(t._size);n.getContext("2d").drawImage(i,0,0),this._setImage(n)}this._crossOrigin=t._crossOrigin},getSize:function(){var t=this._size;return new _(t?t.width:0,t?t.height:0,this,"setSize")},setSize:function(){var t=d.read(arguments);if(!t.equals(this._size))if(t.width>0&&t.height>0){var e=this.getElement();this._setImage(Q.getCanvas(t)),e&&this.getContext(!0).drawImage(e,0,0,t.width,t.height)}else this._canvas&&Q.release(this._canvas),this._size=t.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(t){this.setSize(t,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(t){this.setSize(this.getWidth(),t)},getLoaded:function(){return this._loaded},isEmpty:function(){var t=this._size;return!t||0===t.width&&0===t.height},getResolution:function(){var t=this._matrix,e=new c(0,0).transform(t),i=new c(1,0).transform(t).subtract(e),n=new c(0,1).transform(t).subtract(e);return new d(72/i.getLength(),72/n.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(t){function e(t){var e=i.getView(),n=t&&t.type||"load";e&&i.responds(n)&&(paper=e._scope,i.emit(n,new G(t)))}var i=this;this._setImage(t),this._loaded?setTimeout(e,0):t&&Z.add(t,{load:function(n){i._setImage(t),e(n)},error:e})},_setImage:function(t){this._canvas&&Q.release(this._canvas),t&&t.getContext?(this._image=null,this._canvas=t,this._loaded=!0):(this._image=t,this._canvas=null,this._loaded=!!(t&&t.src&&t.complete)),this._size=new d(t?t.naturalWidth||t.width:0,t?t.naturalHeight||t.height:0),this._context=null,this._changed(521)},getCanvas:function(){if(!this._canvas){var t=Q.getContext(this._size);try{this._image&&t.drawImage(this._image,0,0),this._canvas=t.canvas}catch(e){Q.release(t)}}return this._canvas},setCanvas:"#setImage",getContext:function(t){return this._context||(this._context=this.getCanvas().getContext("2d")),t&&(this._image=null,this._changed(513)),this._context},setContext:function(t){this._context=t},getSource:function(){var t=this._image;return t&&t.src||this.toDataURL()},setSource:function(e){var i=new t.Image,n=this._crossOrigin;n&&(i.crossOrigin=n),i.src=e,this.setImage(i)},getCrossOrigin:function(){var t=this._image;return t&&t.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(t){this._crossOrigin=t;var e=this._image;e&&(e.crossOrigin=t)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var t=g.read(arguments),e=Q.getContext(t.getSize());return e.drawImage(this.getCanvas(),t.x,t.y,t.width,t.height,0,0,t.width,t.height),e.canvas},getSubRaster:function(){var t=g.read(arguments),e=new S(w.NO_INSERT);return e._setImage(this.getSubCanvas(t)),e.translate(t.getCenter().subtract(this.getSize().divide(2))),e._matrix.prepend(this._matrix),e.insertAbove(this),e},toDataURL:function(){var t=this._image,e=t&&t.src;if(/^data:/.test(e))return e;var i=this.getCanvas();return i?i.toDataURL.apply(i,arguments):null},drawImage:function(t){var e=c.read(arguments,1);this.getContext(!0).drawImage(t,e.x,e.y)},getAverageColor:function(t){var e,i;if(t?t instanceof A?(i=t,e=t.getBounds()):"object"==typeof t&&("width"in t?e=new g(t):"x"in t&&(e=new g(t.x-.5,t.y-.5,1,1))):e=this.getBounds(),!e)return null;var n=Math.min(e.width,32),s=Math.min(e.height,32),a=S._sampleContext;a?a.clearRect(0,0,33,33):a=S._sampleContext=Q.getContext(new d(32)),a.save();var o=(new p).scale(n/e.width,s/e.height).translate(-e.x,-e.y);o.applyToContext(a),i&&i.draw(a,new r({clip:!0,matrices:[o]})),this._matrix.applyToContext(a);var h=this.getElement(),u=this._size;h&&a.drawImage(h,-u.width/2,-u.height/2),a.restore();for(var l=a.getImageData(.5,.5,Math.ceil(n),Math.ceil(s)).data,c=[0,0,0],f=0,_=0,v=l.length;_<v;_+=4){var m=l[_+3];f+=m,m/=255,c[0]+=l[_]*m,c[1]+=l[_+1]*m,c[2]+=l[_+2]*m}for(_=0;_<3;_++)c[_]/=f;return f?F.read(c):null},getPixel:function(){var t=c.read(arguments),e=this.getContext().getImageData(t.x,t.y,1,1).data;return new F("rgb",[e[0]/255,e[1]/255,e[2]/255],e[3]/255)},setPixel:function(){var t=c.read(arguments),e=F.read(arguments),i=e._convert("rgb"),n=e._alpha,r=this.getContext(!0),s=r.createImageData(1,1),a=s.data;a[0]=255*i[0],a[1]=255*i[1],a[2]=255*i[2],a[3]=null!=n?255*n:255,r.putImageData(s,t.x,t.y)},createImageData:function(){var t=d.read(arguments);return this.getContext().createImageData(t.width,t.height)},getImageData:function(){var t=g.read(arguments);return t.isEmpty()&&(t=new g(this._size)),this.getContext().getImageData(t.x,t.y,t.width,t.height)},setImageData:function(t){var e=c.read(arguments,1);this.getContext(!0).putImageData(t,e.x,e.y)},_getBounds:function(t,e){var i=new g(this._size).setCenter(0,0);return t?t._transformBounds(i):i},_hitTestSelf:function(t){if(this._contains(t)){var e=this;return new M("pixel",e,{offset:t.add(e._size.divide(2)).round(),color:{get:function(){return e.getPixel(this.offset)}}})}},_draw:function(t){var e=this.getElement();e&&(t.globalAlpha=this._opacity,t.drawImage(e,-this._size.width/2,-this._size.height/2))},_canComposite:function(){return!0}}),P=w.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(t,i){this._initialize(t,i!==e&&c.read(arguments,1))||this.setDefinition(t instanceof I?t:new I(t))},_equals:function(t){return this._definition===t._definition},copyContent:function(t){this.setDefinition(t._definition)},getDefinition:function(){return this._definition},setDefinition:function(t){this._definition=t,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(t,e){var i=this._definition._item;return i._getCachedBounds(i._matrix.prepended(t),e)},_hitTestSelf:function(t,e,i){var n=this._definition._item._hitTest(t,e,i);return n&&(n.item=this),n},_draw:function(t,e){this._definition._item.draw(t,e)}}),I=r.extend({_class:"SymbolDefinition",initialize:function(t,e){this._id=l.get(),this.project=paper.project,t&&this.setItem(t,e)},_serialize:function(t,e){return e.add(this,function(){return r.serialize([this._class,this._item],t,!1,e)})},_changed:function(t){8&t&&w._clearBoundsCache(this),1&t&&this.project._changed(t)},getItem:function(){return this._item},setItem:function(t,e){t._symbol&&(t=t.clone()),this._item&&(this._item._symbol=null),this._item=t,t.remove(),t.setSelected(!1),e||t.setPosition(new c),t._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(t){return new P(this,t)},clone:function(){return new I(this._item.clone(!1))},equals:function(t){return t===this||t&&this._item.equals(t._item)||!1}}),M=r.extend({_class:"HitResult",initialize:function(t,e,i){this.type=t,this.item=e,i&&this.inject(i)},statics:{getOptions:function(t){var e=t&&r.read(t);return r.set({type:null,tolerance:paper.settings.hitTolerance,fill:!e,stroke:!e,segments:!e,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},e)}}}),T=r.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(t,i,n,r,s,a){var o,h,u,l,c=arguments.length;c>0&&(null==t||"object"==typeof t?1===c&&t&&"point"in t?(o=t.point,h=t.handleIn,u=t.handleOut,l=t.selection):(o=t,h=i,u=n,l=r):(o=[t,i],h=n!==e?[n,r]:null,u=s!==e?[s,a]:null)),new z(o,this,"_point"),new z(h,this,"_handleIn"),new z(u,this,"_handleOut"),l&&this.setSelection(l)},_serialize:function(t,e){var i=this._point,n=this._selection,s=n||this.hasHandles()?[i,this._handleIn,this._handleOut]:i;return n&&s.push(n),r.serialize(s,t,!0,e)},_changed:function(t){var e=this._path;if(e){var i,n=e._curves,r=this._index;n&&(t&&t!==this._point&&t!==this._handleIn||!(i=r>0?n[r-1]:e._closed?n[n.length-1]:null)||i._changed(),t&&t!==this._point&&t!==this._handleOut||!(i=n[r])||i._changed()),e._changed(25)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(c.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(c.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(c.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var t=this._handleIn,e=this._handleOut;return!t.isZero()&&!e.isZero()&&t.isCollinear(e)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(t){var e=this._selection,i=this._path;this._selection=t=t||0,i&&t!==e&&(i._updateSelection(this,e,t),i._changed(129))},_changeSelection:function(t,e){var i=this._selection;this.setSelection(e?i|t:i&~t)},isSelected:function(){return!!(7&this._selection)},setSelected:function(t){this._changeSelection(7,t)},getIndex:function(){return this._index!==e?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var t=this._path,e=this._index;return t?(e>0&&!t._closed&&e===t._segments.length-1&&e--,t.getCurves()[e]||null):null},getLocation:function(){var t=this.getCurve();return t?new O(t,this===t._segment1?0:1):null},getNext:function(){var t=this._path&&this._path._segments;return t&&(t[this._index+1]||this._path._closed&&t[0])||null},smooth:function(t,i,n){var r=t||{},s=r.type,a=r.factor,o=this.getPrevious(),h=this.getNext(),u=(o||this)._point,l=this._point,f=(h||this)._point,d=u.getDistance(l),_=l.getDistance(f);if(s&&"catmull-rom"!==s){if("geometric"!==s)throw new Error("Smoothing method '"+s+"' not supported.");if(o&&h){var g=u.subtract(f),v=a===e?.4:a,p=v*d/(d+_);i||this.setHandleIn(g.multiply(p)),n||this.setHandleOut(g.multiply(p-v))}}else{var m=a===e?.5:a,y=Math.pow(d,m),w=y*y,x=Math.pow(_,m),b=x*x;if(!i&&o){var C=2*b+3*x*y+w,S=3*x*(x+y);this.setHandleIn(0!==S?new c((b*u._x+C*l._x-w*f._x)/S-l._x,(b*u._y+C*l._y-w*f._y)/S-l._y):new c)}if(!n&&h){var C=2*w+3*y*x+b,S=3*y*(y+x);this.setHandleOut(0!==S?new c((w*f._x+C*l._x-b*u._x)/S-l._x,(w*f._y+C*l._y-b*u._y)/S-l._y):new c)}}},getPrevious:function(){var t=this._path&&this._path._segments;return t&&(t[this._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var t=this._path;return t&&this._index===t._segments.length-1||!1},reverse:function(){var t=this._handleIn,e=this._handleOut,i=t.clone();t.set(e),e.set(i)},reversed:function(){return new T(this._point,this._handleOut,this._handleIn)},remove:function(){return!!this._path&&!!this._path.removeSegment(this._index)},clone:function(){return new T(this._point,this._handleIn,this._handleOut)},equals:function(t){return t===this||t&&this._class===t._class&&this._point.equals(t._point)&&this._handleIn.equals(t._handleIn)&&this._handleOut.equals(t._handleOut)||!1},toString:function(){var t=["point: "+this._point];return this._handleIn.isZero()||t.push("handleIn: "+this._handleIn),this._handleOut.isZero()||t.push("handleOut: "+this._handleOut),"{ "+t.join(", ")+" }"},transform:function(t){this._transformCoordinates(t,new Array(6),!0),this._changed()},interpolate:function(t,e,i){var n=1-i,r=i,s=t._point,a=e._point,o=t._handleIn,h=e._handleIn,u=e._handleOut,l=t._handleOut;this._point._set(n*s._x+r*a._x,n*s._y+r*a._y,!0),this._handleIn._set(n*o._x+r*h._x,n*o._y+r*h._y,!0),this._handleOut._set(n*l._x+r*u._x,n*l._y+r*u._y,!0),this._changed()},_transformCoordinates:function(t,e,i){var n=this._point,r=i&&this._handleIn.isZero()?null:this._handleIn,s=i&&this._handleOut.isZero()?null:this._handleOut,a=n._x,o=n._y,h=2;return e[0]=a,e[1]=o,r&&(e[h++]=r._x+a,e[h++]=r._y+o),s&&(e[h++]=s._x+a,e[h++]=s._y+o),t&&(t._transformCoordinates(e,e,h/2),a=e[0],o=e[1],i?(n._x=a,n._y=o,h=2,r&&(r._x=e[h++]-a,r._y=e[h++]-o),s&&(s._x=e[h++]-a,s._y=e[h++]-o)):(r||(e[h++]=a,e[h++]=o),s||(e[h++]=a,e[h++]=o))),e}}),z=c.extend({initialize:function(t,i,n){var r,s,a;if(t)if((r=t[0])!==e)s=t[1];else{var o=t;(r=o.x)===e&&(r=(o=c.read(arguments)).x),s=o.y,a=o.selected}else r=s=0;this._x=r,this._y=s,this._owner=i,i[n]=this,a&&this.setSelected(!0)},_set:function(t,e){return this._x=t,this._y=e,this._owner._changed(this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner._changed(this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner._changed(this)},isZero:function(){var t=u.isZero;return t(this._x)&&t(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){var t=this._owner;return this===t._point?1:this===t._handleIn?2:this===t._handleOut?4:0}}),k=r.extend({_class:"Curve",beans:!0,initialize:function(t,e,i,n,r,s,a,o){var h,u,l,c,f,d,_=arguments.length;3===_?(this._path=t,h=e,u=i):_?1===_?"segment1"in t?(h=new T(t.segment1),u=new T(t.segment2)):"point1"in t?(l=t.point1,f=t.handle1,d=t.handle2,c=t.point2):Array.isArray(t)&&(l=[t[0],t[1]],c=[t[6],t[7]],f=[t[2]-t[0],t[3]-t[1]],d=[t[4]-t[6],t[5]-t[7]]):2===_?(h=new T(t),u=new T(e)):4===_?(l=t,f=e,d=i,c=n):8===_&&(l=[t,e],c=[a,o],f=[i-t,n-e],d=[r-a,s-o]):(h=new T,u=new T),this._segment1=h||new T(l,null,f),this._segment2=u||new T(c,d,null)},_serialize:function(t,e){return r.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],t,!0,e)},_changed:function(){this._length=this._bounds=e},clone:function(){return new k(this._segment1,this._segment2)},toString:function(){var t=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||t.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||t.push("handle2: "+this._segment2._handleIn),t.push("point2: "+this._segment2._point),"{ "+t.join(", ")+" }"},classify:function(){return k.classify(this.getValues())},remove:function(){var t=!1;if(this._path){var e=this._segment2,i=e._handleOut;(t=e.remove())&&this._segment1._handleOut.set(i)}return t},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(c.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(c.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(c.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(c.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index+1]||this._path._closed&&t[0])||null},getPrevious:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var t=this._path;return t&&this._segment1._index===t._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(t){this.getPoint1().setSelected(t),this.getHandle1().setSelected(t),this.getHandle2().setSelected(t),this.getPoint2().setSelected(t)},getValues:function(t){return k.getValues(this._segment1,this._segment2,t)},getPoints:function(){for(var t=this.getValues(),e=[],i=0;i<8;i+=2)e.push(new c(t[i],t[i+1]));return e}},{getLength:function(){return null==this._length&&(this._length=k.getLength(this.getValues(),0,1)),this._length},getArea:function(){return k.getArea(this.getValues())},getLine:function(){return new m(this._segment1._point,this._segment2._point)},getPart:function(t,e){return new k(k.getPart(this.getValues(),t,e))},getPartLength:function(t,e){return k.getLength(this.getValues(),t,e)},divideAt:function(t){return this.divideAtTime(t&&t.curve===this?t.time:this.getTimeAt(t))},divideAtTime:function(t,e){var i=null;if(t>=1e-8&&t<=1-1e-8){var n=k.subdivide(this.getValues(),t),r=n[0],s=n[1],a=e||this.hasHandles(),o=this._segment1,h=this._segment2,u=this._path;a&&(o._handleOut._set(r[2]-r[0],r[3]-r[1]),h._handleIn._set(s[4]-s[6],s[5]-s[7]));var l=r[6],f=r[7],d=new T(new c(l,f),a&&new c(r[4]-l,r[5]-f),a&&new c(s[2]-l,s[3]-f));u?(u.insert(o._index+1,d),i=this.getNext()):(this._segment2=d,this._changed(),i=new k(d,h))}return i},splitAt:function(t){var e=this._path;return e?e.splitAt(t):null},splitAtTime:function(t){return this.splitAt(this.getLocationAtTime(t))},divide:function(t,i){return this.divideAtTime(t===e?.5:i?t:this.getTimeAt(t))},split:function(t,i){return this.splitAtTime(t===e?.5:i?t:this.getTimeAt(t))},reversed:function(){return new k(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(t,e,i,n){var r=t._point,s=t._handleOut,a=e._handleIn,o=e._point,h=r.x,u=r.y,l=o.x,c=o.y,f=n?[h,u,h,u,l,c,l,c]:[h,u,h+s._x,u+s._y,l+a._x,c+a._y,l,c];return i&&i._transformCoordinates(f,f,4),f},subdivide:function(t,i){var n=t[0],r=t[1],s=t[2],a=t[3],o=t[4],h=t[5],u=t[6],l=t[7];i===e&&(i=.5);var c=1-i,f=c*n+i*s,d=c*r+i*a,_=c*s+i*o,g=c*a+i*h,v=c*o+i*u,p=c*h+i*l,m=c*f+i*_,y=c*d+i*g,w=c*_+i*v,x=c*g+i*p,b=c*m+i*w,C=c*y+i*x;return[[n,r,f,d,m,y,b,C],[b,C,w,x,v,p,u,l]]},getMonoCurves:function(t,e){var i=[],n=e?0:1,r=t[n+0],s=t[n+2],a=t[n+4],o=t[n+6];if(r>=s==s>=a&&s>=a==a>=o||k.isStraight(t))i.push(t);else{var h=3*(s-a)-r+o,l=2*(r+a)-4*s,c=s-r,f=[],d=u.solveQuadratic(h,l,c,f,1e-8,1-1e-8);if(d){f.sort();var _=f[0],g=k.subdivide(t,_);i.push(g[0]),d>1&&(_=(f[1]-_)/(1-_),g=k.subdivide(g[1],_),i.push(g[0])),i.push(g[1])}else i.push(t)}return i},solveCubic:function(t,e,i,n,r,s){var a=t[e],o=t[e+2],h=t[e+4],l=t[e+6],c=0;if(!(a<i&&l<i&&o<i&&h<i||a>i&&l>i&&o>i&&h>i)){var f=3*(o-a),d=3*(h-o)-f,_=l-a-f-d;c=u.solveCubic(_,d,f,a-i,n,r,s)}return c},getTimeOf:function(t,e){var i=new c(t[0],t[1]),n=new c(t[6],t[7]);if(null===(e.isClose(i,1e-12)?0:e.isClose(n,1e-12)?1:null))for(var r=[e.x,e.y],s=[],a=0;a<2;a++)for(var o=k.solveCubic(t,a,r[a],s,0,1),h=0;h<o;h++){var u=s[h];if(e.isClose(k.getPoint(t,u),1e-7))return u}return e.isClose(i,1e-7)?0:e.isClose(n,1e-7)?1:null},getNearestTime:function(t,e){function i(i){if(i>=0&&i<=1){var n=e.getDistance(k.getPoint(t,i),!0);if(n<u)return u=n,l=i,!0}}if(k.isStraight(t)){var n=t[0],r=t[1],s=t[6]-n,a=t[7]-r,o=s*s+a*a;if(0===o)return 0;var h=((e.x-n)*s+(e.y-r)*a)/o;return h<1e-12?0:h>.999999999999?1:k.getTimeOf(t,new c(n+h*s,r+h*a))}for(var u=1/0,l=0,f=0;f<=100;f++)i(f/100);for(var d=.005;d>1e-8;)i(l-d)||i(l+d)||(d/=2);return l},getPart:function(t,e,i){var n=e>i;if(n){var r=e;e=i,i=r}return e>0&&(t=k.subdivide(t,e)[1]),i<1&&(t=k.subdivide(t,(i-e)/(1-e))[0]),n?[t[6],t[7],t[4],t[5],t[2],t[3],t[0],t[1]]:t},isFlatEnough:function(t,e){var i=t[0],n=t[1],r=t[2],s=t[3],a=t[4],o=t[5],h=t[6],u=t[7],l=3*r-2*i-h,c=3*s-2*n-u,f=3*a-2*h-i,d=3*o-2*u-n;return Math.max(l*l,f*f)+Math.max(c*c,d*d)<=16*e*e},getArea:function(t){var e=t[0],i=t[1],n=t[2],r=t[3],s=t[4],a=t[5],o=t[6],h=t[7];return 3*((h-i)*(n+s)-(o-e)*(r+a)+r*(e-s)-n*(i-a)+h*(s+e/3)-o*(a+i/3))/20},getBounds:function(t){for(var e=t.slice(0,2),i=e.slice(),n=[0,0],r=0;r<2;r++)k._addBounds(t[r],t[r+2],t[r+4],t[r+6],r,0,e,i,n);return new g(e[0],e[1],i[0]-e[0],i[1]-e[1])},_addBounds:function(t,e,i,n,r,s,a,o,h){function l(t,e){var i=t-e,n=t+e;i<a[r]&&(a[r]=i),n>o[r]&&(o[r]=n)}s/=2;var c=a[r]-s,f=o[r]+s;if(t<c||e<c||i<c||n<c||t>f||e>f||i>f||n>f)if(e<t!=e<n&&i<t!=i<n)l(t,s),l(n,s);else{var d=3*(e-i)-t+n,_=2*(t+i)-4*e,g=e-t,v=u.solveQuadratic(d,_,g,h);l(n,0);for(var p=0;p<v;p++){var m=h[p],y=1-m;1e-8<=m&&m<=1-1e-8&&l(y*y*y*t+3*y*y*m*e+3*y*m*m*i+m*m*m*n,s)}}}}},r.each(["getBounds","getStrokeBounds","getHandleBounds"],function(t){this[t]=function(){this._bounds||(this._bounds={});var e=this._bounds[t];return e||(e=this._bounds[t]=L[t]([this._segment1,this._segment2],!1,this._path)),e.clone()}},{}),r.each({isStraight:function(t,e,i,n){if(e.isZero()&&i.isZero())return!0;var r=n.subtract(t);if(r.isZero())return!1;if(r.isCollinear(e)&&r.isCollinear(i)){var s=new m(t,n);if(s.getDistance(t.add(e))<1e-7&&s.getDistance(n.add(i))<1e-7){var a=r.dot(r),o=r.dot(e)/a,h=r.dot(i)/a;return o>=0&&o<=1&&h<=0&&h>=-1}}return!1},isLinear:function(t,e,i,n){var r=n.subtract(t).divide(3);return e.equals(r)&&i.negate().equals(r)}},function(t,e){this[e]=function(e){var i=this._segment1,n=this._segment2;return t(i._point,i._handleOut,n._handleIn,n._point,e)},this.statics[e]=function(e,i){var n=e[0],r=e[1],s=e[6],a=e[7];return t(new c(n,r),new c(e[2]-n,e[3]-r),new c(e[4]-s,e[5]-a),new c(s,a),i)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(t){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(t||0)},isCollinear:function(t){return t&&this.isStraight()&&t.isStraight()&&this.getLine().isCollinear(t.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(t,e){return this.getLocationAtTime(e?t:this.getTimeAt(t))},getLocationAtTime:function(t){return null!=t&&t>=0&&t<=1?new O(this,t):null},getTimeAt:function(t,e){return k.getTimeAt(this.getValues(),t,e)},getParameterAt:"#getTimeAt",getOffsetAtTime:function(t){return this.getPartLength(0,t)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(c.read(arguments)))},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getTimeOf:function(){return k.getTimeOf(this.getValues(),c.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var t=c.read(arguments),e=this.getValues(),i=k.getNearestTime(e,t),n=k.getPoint(e,i);return new O(this,i,n,null,t.getDistance(n))},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t?t.getPoint():t}},new function(){var t=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return r.each(t,function(t){this[t+"At"]=function(e,i){var n=this.getValues();return k[t](n,i?e:k.getTimeAt(n,e))},this[t+"AtTime"]=function(e){return k[t](this.getValues(),e)}},{statics:{_evaluateMethods:t}})},new function(){function t(t){var e=t[0],i=t[1],n=t[2],r=t[3],s=t[4],a=t[5],o=9*(n-s)+3*(t[6]-e),h=6*(e+s)-12*n,u=3*(n-e),l=9*(r-a)+3*(t[7]-i),c=6*(i+a)-12*r,f=3*(r-i);return function(t){var e=(o*t+h)*t+u,i=(l*t+c)*t+f;return Math.sqrt(e*e+i*i)}}function i(t,e){return Math.max(2,Math.min(16,Math.ceil(32*Math.abs(e-t))))}function n(t,e,i,n){if(null==e||e<0||e>1)return null;var r=t[0],s=t[1],a=t[2],o=t[3],h=t[4],l=t[5],f=t[6],d=t[7],_=u.isZero;_(a-r)&&_(o-s)&&(a=r,o=s),_(h-f)&&_(l-d)&&(h=f,l=d);var g,v,p=3*(a-r),m=3*(h-a)-p,y=f-r-p-m,w=3*(o-s),x=3*(l-o)-w,b=d-s-w-x;if(0===i)g=0===e?r:1===e?f:((y*e+m)*e+p)*e+r,v=0===e?s:1===e?d:((b*e+x)*e+w)*e+s;else{if(e<1e-8?(g=p,v=w):e>1-1e-8?(g=3*(f-h),v=3*(d-l)):(g=(3*y*e+2*m)*e+p,v=(3*b*e+2*x)*e+w),n){0===g&&0===v&&(e<1e-8||e>1-1e-8)&&(g=h-a,v=l-o);var C=Math.sqrt(g*g+v*v);C&&(g/=C,v/=C)}if(3===i){var h=6*y*e+2*m,l=6*b*e+2*x,S=Math.pow(g*g+v*v,1.5);g=0!==S?(g*l-v*h)/S:0,v=0}}return 2===i?new c(v,-g):new c(g,v)}return{statics:{classify:function(t){function i(t,i,n){var r=i!==e,s=r&&i>0&&i<1,a=r&&n>0&&n<1;return!r||(s||a)&&("loop"!==t||s&&a)||(t="arch",s=a=!1),{type:t,roots:s||a?s&&a?i<n?[i,n]:[n,i]:[s?i:n]:null}}var n=t[0],r=t[1],s=t[2],a=t[3],o=t[4],h=t[5],l=t[6],c=t[7],f=s*(r-c)+a*(l-n)+n*c-r*l,d=3*(o*(a-r)+h*(n-s)+s*r-a*n),_=d-f,g=_-f+(n*(c-h)+r*(o-l)+l*h-c*o),v=Math.sqrt(g*g+_*_+d*d),p=0!==v?1/v:0,m=u.isZero;if(g*=p,_*=p,d*=p,m(g))return m(_)?i(m(d)?"line":"quadratic"):i("serpentine",d/(3*_));var y=3*_*_-4*g*d;if(m(y))return i("cusp",_/(2*g));var w=y>0?Math.sqrt(y/3):Math.sqrt(-y),x=2*g;return i(y>0?"serpentine":"loop",(_+w)/x,(_-w)/x)},getLength:function(n,r,s,a){if(r===e&&(r=0),s===e&&(s=1),k.isStraight(n)){var o=n;s<1&&(o=k.subdivide(o,s)[0],r/=s),r>0&&(o=k.subdivide(o,r)[1]);var h=o[6]-o[0],l=o[7]-o[1];return Math.sqrt(h*h+l*l)}return u.integrate(a||t(n),r,s,i(r,s))},getTimeAt:function(n,r,s){if(s===e&&(s=r<0?1:0),0===r)return s;var a=Math.abs,o=r>0,h=o?s:0,l=o?1:s,c=t(n),f=k.getLength(n,h,l,c),d=a(r)-f;if(a(d)<1e-12)return o?l:h;if(d>1e-12)return null;var _=r/f,g=0;return u.findRoot(function(t){return g+=u.integrate(c,s,t,i(s,t)),s=t,g-r},c,s+_,h,l,32,1e-12)},getPoint:function(t,e){return n(t,e,0,!1)},getTangent:function(t,e){return n(t,e,1,!0)},getWeightedTangent:function(t,e){return n(t,e,1,!1)},getNormal:function(t,e){return n(t,e,2,!0)},getWeightedNormal:function(t,e){return n(t,e,2,!1)},getCurvature:function(t,e){return n(t,e,3,!1).x},getPeaks:function(t){var e=t[0],i=t[1],n=t[2],r=t[3],s=t[4],a=t[5],o=3*n-e-3*s+t[6],h=3*e-6*n+3*s,l=-3*e+3*n,c=3*r-i-3*a+t[7],f=3*i-6*r+3*a,d=-3*i+3*r,_=[];return u.solveCubic(9*(o*o+c*c),9*(o*h+f*c),2*(h*h+f*f)+3*(l*o+d*c),l*h+f*d,_,1e-8,1-1e-8),_.sort()}}}},new function(){function t(t,e,i,n,r,s,a){var o=!a&&i.getPrevious()===r,h=!a&&i!==r&&i.getNext()===r;if(null!==n&&n>=(o?1e-8:0)&&n<=(h?1-1e-8:1)&&null!==s&&s>=(h?1e-8:0)&&s<=(o?1-1e-8:1)){var u=new O(i,n,null,a),l=new O(r,s,null,a);u._intersection=l,l._intersection=u,e&&!e(u)||O.insert(t,u,!0)}}function e(r,s,a,o,h,u,l,c,f,d,_,g,v){if(++f>=4096||++c>=40)return f;var p,y,w=s[0],x=s[1],b=s[6],C=s[7],S=m.getSignedDistance,P=S(w,x,b,C,s[2],s[3]),I=S(w,x,b,C,s[4],s[5]),M=P*I>0?.75:4/9,T=M*Math.min(0,P,I),z=M*Math.max(0,P,I),O=S(w,x,b,C,r[0],r[1]),A=S(w,x,b,C,r[2],r[3]),L=S(w,x,b,C,r[4],r[5]),N=S(w,x,b,C,r[6],r[7]),B=i(O,A,L,N),D=B[0],j=B[1];if(0===P&&0===I&&0===O&&0===A&&0===L&&0===N||null==(p=n(D,j,T,z))||null==(y=n(D.reverse(),j.reverse(),T,z)))return f;var E=d+(_-d)*p,F=d+(_-d)*y;if(Math.max(v-g,F-E)<1e-9){var R=(E+F)/2,q=(g+v)/2;t(h,u,l?o:a,l?q:R,l?a:o,l?R:q)}else if(r=k.getPart(r,p,y),y-p>.8)if(F-E>v-g){R=(E+F)/2;f=e(s,(V=k.subdivide(r,.5))[0],o,a,h,u,!l,c,f,g,v,E,R),f=e(s,V[1],o,a,h,u,!l,c,f,g,v,R,F)}else{var V=k.subdivide(s,.5),q=(g+v)/2;f=e(V[0],r,o,a,h,u,!l,c,f,g,q,E,F),f=e(V[1],r,o,a,h,u,!l,c,f,q,v,E,F)}else f=v-g>=1e-9?e(s,r,o,a,h,u,!l,c,f,g,v,E,F):e(r,s,a,o,h,u,l,c,f,E,F,g,v);return f}function i(t,e,i,n){var r,s=[0,t],a=[1/3,e],o=[2/3,i],h=[1,n],u=e-(2*t+n)/3,l=i-(t+2*n)/3;if(u*l<0)r=[[s,a,h],[s,o,h]];else{var c=u/l;r=[c>=2?[s,a,h]:c<=.5?[s,o,h]:[s,a,o,h],[s,h]]}return(u||l)<0?r.reverse():r}function n(t,e,i,n){return t[0][1]<i?r(t,!0,i):e[0][1]>n?r(e,!1,n):t[0][0]}function r(t,e,i){for(var n=t[0][0],r=t[0][1],s=1,a=t.length;s<a;s++){var o=t[s][0],h=t[s][1];if(e?h>=i:h<=i)return h===i?o:n+(i-r)*(o-n)/(h-r);n=o,r=h}return null}function s(t,e,i,n,r){var s=u.isZero;if(s(n)&&s(r)){var a=k.getTimeOf(t,new c(e,i));return null===a?[]:[a]}for(var o=Math.atan2(-r,n),h=Math.sin(o),l=Math.cos(o),f=[],d=[],_=0;_<8;_+=2){var g=t[_]-e,v=t[_+1]-i;f.push(g*l-v*h,g*h+v*l)}return k.solveCubic(f,1,0,d,0,1),d}function a(e,i,n,r,a,o,h){for(var u=i[0],l=i[1],c=s(e,u,l,i[6]-u,i[7]-l),f=0,d=c.length;f<d;f++){var _=c[f],g=k.getPoint(e,_),v=k.getTimeOf(i,g);null!==v&&t(a,o,h?r:n,h?v:_,h?n:r,h?_:v)}}function o(e,i,n,r,s,a){var o=m.intersect(e[0],e[1],e[6],e[7],i[0],i[1],i[6],i[7]);o&&t(s,a,n,k.getTimeOf(e,o),r,k.getTimeOf(i,o))}function h(i,n,r,s,h,u){var l=Math.min,d=Math.max;if(d(i[0],i[2],i[4],i[6])+1e-12>l(n[0],n[2],n[4],n[6])&&l(i[0],i[2],i[4],i[6])-1e-12<d(n[0],n[2],n[4],n[6])&&d(i[1],i[3],i[5],i[7])+1e-12>l(n[1],n[3],n[5],n[7])&&l(i[1],i[3],i[5],i[7])-1e-12<d(n[1],n[3],n[5],n[7])){var _=f(i,n);if(_)for(x=0;x<2;x++){var g=_[x];t(h,u,r,g[0],s,g[1],!0)}else{var v=k.isStraight(i),p=k.isStraight(n),m=v&&p,y=v&&!p,w=h.length;if((m?o:v||p?a:e)(y?n:i,y?i:n,y?s:r,y?r:s,h,u,y,0,0,0,1,0,1),!m||h.length===w)for(var x=0;x<4;x++){var b=x>>1,C=1&x,S=6*b,P=6*C,I=new c(i[S],i[S+1]),M=new c(n[P],n[P+1]);I.isClose(M,1e-12)&&t(h,u,r,b,s,C)}}}return h}function l(e,i,n,r){var s=k.classify(e);if("loop"===s.type){var a=s.roots;t(n,r,i,a[0],i,a[1])}return n}function f(t,e){function i(t){var e=t[6]-t[0],i=t[7]-t[1];return e*e+i*i}var n=Math.abs,r=m.getDistance,s=k.isStraight(t),a=k.isStraight(e),o=s&&a,h=i(t)<i(e),u=h?e:t,l=h?t:e,f=u[0],d=u[1],_=u[6]-f,g=u[7]-d;if(r(f,d,_,g,l[0],l[1],!0)<1e-7&&r(f,d,_,g,l[6],l[7],!0)<1e-7)!o&&r(f,d,_,g,u[2],u[3],!0)<1e-7&&r(f,d,_,g,u[4],u[5],!0)<1e-7&&r(f,d,_,g,l[2],l[3],!0)<1e-7&&r(f,d,_,g,l[4],l[5],!0)<1e-7&&(s=a=o=!0);else if(o)return null;if(s^a)return null;for(var v=[t,e],p=[],y=0;y<4&&p.length<2;y++){var w=1&y,x=1^w,b=y>>1,C=k.getTimeOf(v[w],new c(v[x][b?6:0],v[x][b?7:1]));if(null!=C){var S=w?[b,C]:[C,b];(!p.length||n(S[0]-p[0][0])>1e-8&&n(S[1]-p[0][1])>1e-8)&&p.push(S)}if(y>2&&!p.length)break}if(2!==p.length)p=null;else if(!o){var P=k.getPart(t,p[0][0],p[1][0]),I=k.getPart(e,p[0][1],p[1][1]);(n(I[2]-P[2])>1e-7||n(I[3]-P[3])>1e-7||n(I[4]-P[4])>1e-7||n(I[5]-P[5])>1e-7)&&(p=null)}return p}return{getIntersections:function(t){var e=this.getValues(),i=t&&t!==this&&t.getValues();return i?h(e,i,this,t,[]):l(e,this,[])},statics:{getOverlaps:f,getIntersections:function(t,e,i,n,r,s){var a=!e;a&&(e=t);for(var o,u,c=t.length,f=e.length,d=[],_=[],g=0;g<f;g++)d[g]=e[g].getValues(r);for(g=0;g<c;g++){var v=t[g],p=a?d[g]:v.getValues(n),m=v.getPath();m!==u&&(u=m,o=[],_.push(o)),a&&l(p,v,o,i);for(var y=a?g+1:0;y<f;y++){if(s&&o.length)return o;h(p,d[y],v,e[y],o,i)}}o=[];for(var g=0,w=_.length;g<w;g++)o.push.apply(o,_[g]);return o},getCurveLineIntersections:s}}}),O=r.extend({_class:"CurveLocation",initialize:function(t,e,i,n,r){if(e>=.99999999){var s=t.getNext();s&&(e=0,t=s)}this._setCurve(t),this._time=e,this._point=i||t.getPointAtTime(e),this._overlap=n,this._distance=r,this._intersection=this._next=this._previous=null},_setCurve:function(t){var e=t._path;this._path=e,this._version=e?e._version:0,this._curve=t,this._segment=null,this._segment1=t._segment1,this._segment2=t._segment2},_setSegment:function(t){this._setCurve(t.getCurve()),this._segment=t,this._time=t===this._segment1?0:1,this._point=t._point.clone()},getSegment:function(){var t=this._segment;if(!t){var e=this.getCurve(),i=this.getTime();0===i?t=e._segment1:1===i?t=e._segment2:null!=i&&(t=e.getPartLength(0,i)<e.getPartLength(i,1)?e._segment1:e._segment2),this._segment=t}return t},getCurve:function(){function t(t){var e=t&&t.getCurve();if(e&&null!=(i._time=e.getTimeOf(i._point)))return i._setCurve(e),e}var e=this._path,i=this;return e&&e._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null),this._curve||t(this._segment)||t(this._segment1)||t(this._segment2.getPrevious())},getPath:function(){var t=this.getCurve();return t&&t._path},getIndex:function(){var t=this.getCurve();return t&&t.getIndex()},getTime:function(){var t=this.getCurve(),e=this._time;return t&&null==e?this._time=t.getTimeOf(this._point):e},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var t=this._offset;if(null==t){t=0;var e=this.getPath(),i=this.getIndex();if(e&&null!=i)for(var n=e.getCurves(),r=0;r<i;r++)t+=n[r].getLength();this._offset=t+=this.getCurveOffset()}return t},getCurveOffset:function(){var t=this._curveOffset;if(null==t){var e=this.getCurve(),i=this.getTime();this._curveOffset=t=null!=i&&e&&e.getPartLength(0,i)}return t},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var t=this.getCurve(),e=t&&t.divideAtTime(this.getTime());return e&&this._setSegment(e._segment1),e},split:function(){var t=this.getCurve(),e=t._path,i=t&&t.splitAtTime(this.getTime());return i&&this._setSegment(e.getLastSegment()),i},equals:function(t,e){var i=this===t;if(!i&&t instanceof O){var n=this.getCurve(),r=t.getCurve(),s=n._path;if(s===r._path){var a=Math.abs,o=a(this.getOffset()-t.getOffset()),h=!e&&this._intersection,u=!e&&t._intersection;i=(o<1e-7||s&&a(s.getLength()-o)<1e-7)&&(!h&&!u||h&&u&&h.equals(u,!0))}}return i},toString:function(){var t=[],e=this.getPoint(),i=h.instance;e&&t.push("point: "+e);var n=this.getIndex();null!=n&&t.push("index: "+n);var r=this.getTime();return null!=r&&t.push("time: "+i.number(r)),null!=this._distance&&t.push("distance: "+i.number(this._distance)),"{ "+t.join(", ")+" }"},isTouching:function(){var t=this._intersection;if(t&&this.getTangent().isCollinear(t.getTangent())){var e=this.getCurve(),i=t.getCurve();return!(e.isStraight()&&i.isStraight()&&e.getLine().intersect(i.getLine()))}return!1},isCrossing:function(){function t(t,e){var i=t.getValues(),n=k.classify(i).roots||k.getPeaks(i),r=n.length,s=e&&r>1?n[r-1]:r>0?n[0]:.5;c.push(k.getLength(i,e?s:0,e?1:s)/2)}function e(t,e,i){return e<i?t>e&&t<i:t>e||t<i}var i=this._intersection;if(!i)return!1;var n=this.getTime(),r=i.getTime(),s=n>=1e-8&&n<=1-1e-8,a=r>=1e-8&&r<=1-1e-8;if(s&&a)return!this.isTouching();var o=this.getCurve(),h=n<1e-8?o.getPrevious():o,u=i.getCurve(),l=r<1e-8?u.getPrevious():u;if(n>1-1e-8&&(o=o.getNext()),r>1-1e-8&&(u=u.getNext()),!(h&&o&&l&&u))return!1;var c=[];s||(t(h,!0),t(o,!1)),a||(t(l,!0),t(u,!1));var f=this.getPoint(),d=Math.min.apply(Math,c),_=s?o.getTangentAtTime(n):o.getPointAt(d).subtract(f),g=s?_.negate():h.getPointAt(-d).subtract(f),v=a?u.getTangentAtTime(r):u.getPointAt(d).subtract(f),p=a?v.negate():l.getPointAt(-d).subtract(f),m=g.getAngle(),y=_.getAngle(),w=p.getAngle(),x=v.getAngle();return!!(s?e(m,w,x)^e(y,w,x)&&e(m,x,w)^e(y,x,w):e(w,m,y)^e(x,m,y)&&e(w,y,m)^e(x,y,m))},hasOverlap:function(){return!!this._overlap}},r.each(k._evaluateMethods,function(t){var e=t+"At";this[t]=function(){var t=this.getCurve(),i=this.getTime();return null!=i&&t&&t[e](i,!0)}},{preserve:!0}),new function(){function t(t,e,i){function n(i,n){for(var s=i+n;s>=-1&&s<=r;s+=n){var a=t[(s%r+r)%r];if(!e.getPoint().isClose(a.getPoint(),1e-7))break;if(e.equals(a))return a}return null}for(var r=t.length,s=0,a=r-1;s<=a;){var o,h=s+a>>>1,u=t[h];if(i&&(o=e.equals(u)?u:n(h,-1)||n(h,1)))return e._overlap&&(o._overlap=o._intersection._overlap=!0),o;var l=e.getPath(),c=u.getPath();(l!==c?l._id-c._id:e.getIndex()+e.getTime()-(u.getIndex()+u.getTime()))<0?a=h-1:s=h+1}return t.splice(s,0,e),e}return{statics:{insert:t,expand:function(e){for(var i=e.slice(),n=e.length-1;n>=0;n--)t(i,e[n]._intersection,!1);return i}}}}),A=w.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(t){var e,i,n;if(r.isPlainObject(t)?(i=t.segments,e=t.pathData):Array.isArray(t)?i=t:"string"==typeof t&&(e=t),i){var s=i[0];n=s&&Array.isArray(s[0])}else e&&(n=(e.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(e));return new(n?N:L)(t)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(t){this.isClockwise()!=(t=!!t)&&this.reverse()},setPathData:function(t){function e(t,e){var i=+n[t];return o&&(i+=h[e]),i}function i(t){return new c(e(t,"x"),e(t+1,"y"))}var n,r,s,a=t&&t.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/gi),o=!1,h=new c,u=new c;this.clear();for(var l=0,f=a&&a.length;l<f;l++){var _=a[l],g=_[0],v=g.toLowerCase(),p=(n=_.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g))&&n.length;switch(o=g===v,"z"!==r||/[mz]/.test(v)||this.moveTo(h),v){case"m":case"l":for(var m="m"===v,y=0;y<p;y+=2)this[m?"moveTo":"lineTo"](h=i(y)),m&&(u=h,m=!1);s=h;break;case"h":case"v":var w="h"===v?"x":"y";h=h.clone();for(y=0;y<p;y++)h[w]=e(y,w),this.lineTo(h);s=h;break;case"c":for(y=0;y<p;y+=6)this.cubicCurveTo(i(y),s=i(y+2),h=i(y+4));break;case"s":for(y=0;y<p;y+=4)this.cubicCurveTo(/[cs]/.test(r)?h.multiply(2).subtract(s):h,s=i(y),h=i(y+2)),r=v;break;case"q":for(y=0;y<p;y+=4)this.quadraticCurveTo(s=i(y),h=i(y+2));break;case"t":for(y=0;y<p;y+=2)this.quadraticCurveTo(s=/[qt]/.test(r)?h.multiply(2).subtract(s):h,h=i(y)),r=v;break;case"a":for(y=0;y<p;y+=7)this.arcTo(h=i(y+5),new d(+n[y],+n[y+1]),+n[y+2],+n[y+4],+n[y+3]);break;case"z":this.closePath(1e-12),h=u}r=v}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(t){var e=t.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(t):{};return e.onPath||!!("evenodd"===this.getFillRule()?1&e.windingL||1&e.windingR:e.winding)},getIntersections:function(t,e,i,n){var r=this===t||!t,s=this._matrix._orNullIfIdentity(),a=r?s:(i||t._matrix)._orNullIfIdentity();return r||this.getBounds(s).intersects(t.getBounds(a),1e-12)?k.getIntersections(this.getCurves(),!r&&t.getCurves(),e,s,a,n):[]},getCrossings:function(t){return this.getIntersections(t,function(t){return t.hasOverlap()||t.isCrossing()})},getNearestLocation:function(){for(var t=c.read(arguments),e=this.getCurves(),i=1/0,n=null,r=0,s=e.length;r<s;r++){var a=e[r].getNearestLocation(t);a._distance<i&&(i=a._distance,n=a)}return n},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t?t.getPoint():t},interpolate:function(t,e,i){var n=!this._children,r=n?"_segments":"_children",s=t[r],a=e[r],o=this[r];if(!s||!a||s.length!==a.length)throw new Error("Invalid operands in interpolate() call: "+t+", "+e);var h=o.length,u=a.length;if(h<u)for(var l=n?T:L,c=h;c<u;c++)this.add(new l);else h>u&&this[n?"removeSegments":"removeChildren"](u,h);for(c=0;c<u;c++)o[c].interpolate(s[c],a[c],i);n&&(this.setClosed(t._closed),this._changed(9))},compare:function(t){var e=!1;if(t){var i=this._children||[this],n=t._children?t._children.slice():[t],r=i.length,s=n.length,a=[],o=0;e=!0;for(var h=r-1;h>=0&&e;h--){var u=i[h];e=!1;for(var l=s-1;l>=0&&!e;l--)u.compare(n[l])&&(a[l]||(a[l]=!0,o++),e=!0)}e=e&&o===s}return e}}),L=A.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(t){this._closed=!1,this._segments=[],this._version=0;var i=Array.isArray(t)?"object"==typeof t[0]?t:arguments:!t||t.size!==e||t.x===e&&t.point===e?null:arguments;i&&i.length>0?this.setSegments(i):(this._curves=e,this._segmentSelection=0,i||"string"!=typeof t||(this.setPathData(t),t=null)),this._initialize(!i&&t)},_equals:function(t){return this._closed===t._closed&&r.equals(this._segments,t._segments)},copyContent:function(t){this.setSegments(t._segments),this._closed=t._closed},_changed:function t(i){if(t.base.call(this,i),8&i){if(this._length=this._area=e,16&i)this._version++;else if(this._curves)for(var n=0,r=this._curves.length;n<r;n++)this._curves[n]._changed()}else 32&i&&(this._bounds=e)},getStyle:function(){var t=this._parent;return(t instanceof N?t:this)._style},getSegments:function(){return this._segments},setSegments:function(t){var i=this.isFullySelected(),n=t&&t.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=e,n){var r=t[n-1];"boolean"==typeof r&&(this.setClosed(r),n--),this._add(T.readList(t,0,{},n))}i&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var t=this._curves,e=this._segments;if(!t){var i=this._countCurves();t=this._curves=new Array(i);for(var n=0;n<i;n++)t[n]=new k(this,e[n],e[n+1]||e[0])}return t},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var t=this.getCurves();return t[t.length-1]},isClosed:function(){return this._closed},setClosed:function(t){if(this._closed!=(t=!!t)){if(this._closed=t,this._curves){var e=this._curves.length=this._countCurves();t&&(this._curves[e-1]=new k(this,this._segments[e-1],this._segments[0]))}this._changed(25)}}},{beans:!0,getPathData:function(t,e){function i(e,i){if(e._transformCoordinates(t,g),n=g[0],r=g[1],v)p.push("M"+_.pair(n,r)),v=!1;else if(o=g[2],u=g[3],o===n&&u===r&&l===s&&c===a){if(!i){var h=n-s,f=r-a;p.push(0===h?"v"+_.number(f):0===f?"h"+_.number(h):"l"+_.pair(h,f))}}else p.push("c"+_.pair(l-s,c-a)+" "+_.pair(o-s,u-a)+" "+_.pair(n-s,r-a));s=n,a=r,l=g[4],c=g[5]}var n,r,s,a,o,u,l,c,f=this._segments,d=f.length,_=new h(e),g=new Array(6),v=!0,p=[];if(!d)return"";for(var m=0;m<d;m++)i(f[m]);return this._closed&&d>0&&(i(f[0],!0),p.push("z")),p.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(t){for(var e=this._segments,i=new Array(6),n=0,r=e.length;n<r;n++)e[n]._transformCoordinates(t,i,!0);return!0},_add:function(t,e){for(var i=this._segments,n=this._curves,r=t.length,s=null==e,e=s?i.length:e,a=0;a<r;a++){var o=t[a];o._path&&(o=t[a]=o.clone()),o._path=this,o._index=e+a,o._selection&&this._updateSelection(o,0,o._selection)}if(s)i.push.apply(i,t);else{i.splice.apply(i,[e,0].concat(t));for(var a=e+r,h=i.length;a<h;a++)i[a]._index=a}if(n){var u=this._countCurves(),l=e>0&&e+r-1===u?e-1:e,c=l,f=Math.min(l+r,u);t._curves&&(n.splice.apply(n,[l,0].concat(t._curves)),c+=t._curves.length);for(a=c;a<f;a++)n.splice(a,0,new k(this,null,null));this._adjustCurves(l,f)}return this._changed(25),t},_adjustCurves:function(t,e){for(var i,n=this._segments,r=this._curves,s=t;s<e;s++)(i=r[s])._path=this,i._segment1=n[s],i._segment2=n[s+1]||n[0],i._changed();(i=r[this._closed&&!t?n.length-1:t-1])&&(i._segment2=n[t]||n[0],i._changed()),(i=r[e])&&(i._segment1=n[e],i._changed())},_countCurves:function(){var t=this._segments.length;return!this._closed&&t>0?t-1:t},add:function(t){return arguments.length>1&&"number"!=typeof t?this._add(T.readList(arguments)):this._add([T.read(arguments)])[0]},insert:function(t,e){return arguments.length>2&&"number"!=typeof e?this._add(T.readList(arguments,1),t):this._add([T.read(arguments,1)],t)[0]},addSegment:function(){return this._add([T.read(arguments)])[0]},insertSegment:function(t){return this._add([T.read(arguments,1)],t)[0]},addSegments:function(t){return this._add(T.readList(t))},insertSegments:function(t,e){return this._add(T.readList(e),t)},removeSegment:function(t){return this.removeSegments(t,t+1)[0]||null},removeSegments:function(t,e,i){t=t||0,e=r.pick(e,this._segments.length);var n=this._segments,s=this._curves,a=n.length,o=n.splice(t,e-t),h=o.length;if(!h)return o;for(l=0;l<h;l++){var u=o[l];u._selection&&this._updateSelection(u,u._selection,0),u._index=u._path=null}for(var l=t,c=n.length;l<c;l++)n[l]._index=l;if(s){for(var f=t>0&&e===a+(this._closed?1:0)?t-1:t,l=(s=s.splice(f,h)).length-1;l>=0;l--)s[l]._path=null;i&&(o._curves=s.slice(1)),this._adjustCurves(f,f)}return this._changed(25),o},clear:"#removeSegments",hasHandles:function(){for(var t=this._segments,e=0,i=t.length;e<i;e++)if(t[e].hasHandles())return!0;return!1},clearHandles:function(){for(var t=this._segments,e=0,i=t.length;e<i;e++)t[e].clearHandles()},getLength:function(){if(null==this._length){for(var t=this.getCurves(),e=0,i=0,n=t.length;i<n;i++)e+=t[i].getLength();this._length=e}return this._length},getArea:function(){var t=this._area;if(null==t){var e=this._segments,i=this._closed;t=0;for(var n=0,r=e.length;n<r;n++){var s=n+1===r;t+=k.getArea(k.getValues(e[n],e[s?0:n+1],null,s&&!i))}this._area=t}return t},isFullySelected:function(){var t=this._segments.length;return this.isSelected()&&t>0&&this._segmentSelection===7*t},setFullySelected:function(t){t&&this._selectSegments(!0),this.setSelected(t)},setSelection:function t(e){1&e||this._selectSegments(!1),t.base.call(this,e)},_selectSegments:function(t){var e=this._segments,i=e.length,n=t?7:0;this._segmentSelection=n*i;for(var r=0;r<i;r++)e[r]._selection=n},_updateSelection:function(t,e,i){t._selection=i,(this._segmentSelection+=i-e)>0&&this.setSelected(!0)},divideAt:function(t){var e,i=this.getLocationAt(t);return i&&(e=i.getCurve().divideAt(i.getCurveOffset()))?e._segment1:null},splitAt:function(t){var e=this.getLocationAt(t),i=e&&e.index,n=e&&e.time;n>1-1e-8&&(i++,n=0);var r=this.getCurves();if(i>=0&&i<r.length){n>=1e-8&&r[i++].divideAtTime(n);var s,a=this.removeSegments(i,this._segments.length,!0);return this._closed?(this.setClosed(!1),s=this):((s=new L(w.NO_INSERT)).insertAbove(this),s.copyAttributes(this)),s._add(a,0),this.addSegment(a[0]),s}return null},split:function(t,i){var n,r=i===e?t:(n=this.getCurves()[t])&&n.getLocationAtTime(i);return null!=r?this.splitAt(r):null},join:function(t,e){var i=e||0;if(t&&t!==this){var n=t._segments,r=this.getLastSegment(),s=t.getLastSegment();if(!s)return this;r&&r._point.isClose(s._point,i)&&t.reverse();var a=t.getFirstSegment();if(r&&r._point.isClose(a._point,i))r.setHandleOut(a._handleOut),this._add(n.slice(1));else{var o=this.getFirstSegment();o&&o._point.isClose(a._point,i)&&t.reverse(),s=t.getLastSegment(),o&&o._point.isClose(s._point,i)?(o.setHandleIn(s._handleIn),this._add(n.slice(0,n.length-1),0)):this._add(n.slice())}t._closed&&this._add([n[0]]),t.remove()}var h=this.getFirstSegment(),u=this.getLastSegment();return h!==u&&h._point.isClose(u._point,i)&&(h.setHandleIn(u._handleIn),u.remove(),this.setClosed(!0)),this},reduce:function(t){for(var e=this.getCurves(),i=t&&t.simplify,n=i?1e-7:0,r=e.length-1;r>=0;r--){var s=e[r];!s.hasHandles()&&(!s.hasLength(n)||i&&s.isCollinear(s.getNext()))&&s.remove()}return this},reverse:function(){this._segments.reverse();for(var t=0,e=this._segments.length;t<e;t++){var i=this._segments[t],n=i._handleIn;i._handleIn=i._handleOut,i._handleOut=n,i._index=t}this._curves=null,this._changed(9)},flatten:function(t){for(var e=new B(this,t||.25,256,!0).parts,i=e.length,n=[],r=0;r<i;r++)n.push(new T(e[r].curve.slice(0,2)));!this._closed&&i>0&&n.push(new T(e[i-1].curve.slice(6))),this.setSegments(n)},simplify:function(t){var e=new D(this).fit(t||2.5);return e&&this.setSegments(e),!!e},smooth:function(t){function i(t,e){var i=t&&t.index;if(null!=i){var r=t.path;if(r&&r!==n)throw new Error(t._class+" "+i+" of "+r+" is not part of "+n);e&&t instanceof k&&i++}else i="number"==typeof t?t:e;return Math.min(i<0&&h?i%o:i<0?i+o:i,o-1)}var n=this,r=t||{},s=r.type||"asymmetric",a=this._segments,o=a.length,h=this._closed,u=h&&r.from===e&&r.to===e,l=i(r.from,0),c=i(r.to,o-1);if(l>c)if(h)l-=o;else{var f=l;l=c,c=f}if(/^(?:asymmetric|continuous)$/.test(s)){var d="asymmetric"===s,_=Math.min,g=c-l+1,v=g-1,p=u?_(g,4):1,m=p,y=p,w=[];if(h||(m=_(1,l),y=_(1,o-c-1)),(v+=m+y)<=1)return;for(var x=0,b=l-m;x<=v;x++,b++)w[x]=a[(b<0?b+o:b)%o]._point;for(var C=w[0]._x+2*w[1]._x,S=w[0]._y+2*w[1]._y,P=2,I=v-1,M=[C],T=[S],z=[P],O=[],A=[],x=1;x<v;x++){var L=x<I,N=L?1:d?1:2,B=L?4:d?2:7,D=L?4:d?3:8,j=L?2:d?0:1,E=N/P;P=z[x]=B-E,C=M[x]=D*w[x]._x+j*w[x+1]._x-E*C,S=T[x]=D*w[x]._y+j*w[x+1]._y-E*S}O[I]=M[I]/z[I],A[I]=T[I]/z[I];for(x=v-2;x>=0;x--)O[x]=(M[x]-O[x+1])/z[x],A[x]=(T[x]-A[x+1])/z[x];O[v]=(3*w[v]._x-O[I])/2,A[v]=(3*w[v]._y-A[I])/2;for(var x=m,F=v-y,b=l;x<=F;x++,b++){var R=a[b<0?b+o:b],q=R._point,V=O[x]-q._x,H=A[x]-q._y;(u||x<F)&&R.setHandleOut(V,H),(u||x>m)&&R.setHandleIn(-V,-H)}}else for(x=l;x<=c;x++)a[x<0?x+o:x].smooth(r,!u&&x===l,!u&&x===c)},toShape:function(t){function i(t,e){var i=l[t],n=i.getNext(),r=l[e],s=r.getNext();return i._handleOut.isZero()&&n._handleIn.isZero()&&r._handleOut.isZero()&&s._handleIn.isZero()&&n._point.subtract(i._point).isCollinear(s._point.subtract(r._point))}function n(t){var e=l[t],i=e.getNext(),n=e._handleOut,r=i._handleIn;if(n.isOrthogonal(r)){var s=e._point,a=i._point,o=new m(s,n,!0).intersect(new m(a,r,!0),!0);return o&&u.isZero(n.getLength()/o.subtract(s).getLength()-.5522847498307936)&&u.isZero(r.getLength()/o.subtract(a).getLength()-.5522847498307936)}return!1}function r(t,e){return l[t]._point.getDistance(l[e]._point)}if(!this._closed)return null;var s,a,o,h,l=this._segments;if(!this.hasHandles()&&4===l.length&&i(0,2)&&i(1,3)&&function(t){var e=l[t],i=e.getPrevious(),n=e.getNext();return i._handleOut.isZero()&&e._handleIn.isZero()&&e._handleOut.isZero()&&n._handleIn.isZero()&&e._point.subtract(i._point).isOrthogonal(n._point.subtract(e._point))}(1)?(s=C.Rectangle,a=new d(r(0,3),r(0,1)),h=l[1]._point.add(l[2]._point).divide(2)):8===l.length&&n(0)&&n(2)&&n(4)&&n(6)&&i(1,5)&&i(3,7)?(s=C.Rectangle,o=(a=new d(r(1,6),r(0,3))).subtract(new d(r(0,7),r(1,2))).divide(2),h=l[3]._point.add(l[4]._point).divide(2)):4===l.length&&n(0)&&n(1)&&n(2)&&n(3)&&(u.isZero(r(0,2)-r(1,3))?(s=C.Circle,o=r(0,2)/2):(s=C.Ellipse,o=new d(r(2,0)/2,r(3,1)/2)),h=l[1]._point),s){var c=this.getPosition(!0),f=new s({center:c,size:a,radius:o,insert:!1});return f.copyAttributes(this,!0),f._matrix.prepend(this._matrix),f.rotate(h.subtract(c).getAngle()+90),(t===e||t)&&f.insertAbove(this),f}return null},toPath:"#clone",compare:function t(e){if(!e||e instanceof N)return t.base.call(this,e);var i=this.getCurves(),n=e.getCurves(),r=i.length,s=n.length;if(!r||!s)return r==s;for(var a,o,h=i[0].getValues(),u=[],l=0,c=0,f=0;f<s;f++){g=n[f].getValues();if(u.push(g),v=k.getOverlaps(h,g)){a=!f&&v[0][0]>0?s-1:f,o=v[0][1];break}}for(var d,_=Math.abs,g=u[a];h&&g;){var v=k.getOverlaps(h,g);if(v&&_(v[0][0]-c)<1e-8){1===(c=v[1][0])&&(h=++l<r?i[l].getValues():null,c=0);var p=v[0][1];if(_(p-o)<1e-8){if(d||(d=[a,p]),1===(o=v[1][1])&&(++a>=s&&(a=0),g=u[a]||n[a].getValues(),o=0),!h)return d[0]===a&&d[1]===o;continue}}break}return!1},_hitTestSelf:function(t,e,i,n){function r(e,i){return t.subtract(e).divide(i).length<=1}function s(t,i,n){if(!e.selected||i.isSelected()){var s=t._point;if(i!==s&&(i=i.add(s)),r(i,x))return new M(n,g,{segment:t,point:i})}}function a(t,i){return(i||e.segments)&&s(t,t._point,"segment")||!i&&e.handles&&(s(t,t._handleIn,"handle-in")||s(t,t._handleOut,"handle-out"))}function o(t){f.add(t)}function h(e){var i=y||e._index>0&&e._index<m-1;if("round"===(i?u:l))return r(e._point,x);if(f=new L({internal:!0,closed:!0}),i?e.isSmooth()||L._addBevelJoin(e,u,P,c,null,n,o,!0):"square"===l&&L._addSquareCap(e,l,P,null,n,o,!0),!f.isEmpty()){var s;return f.contains(t)||(s=f.getNearestLocation(t))&&r(s.getPoint(),w)}}var u,l,c,f,d,_,g=this,v=this.getStyle(),p=this._segments,m=p.length,y=this._closed,w=e._tolerancePadding,x=w,b=e.stroke&&v.hasStroke(),C=e.fill&&v.hasFill(),S=e.curves,P=b?v.getStrokeWidth()/2:C&&e.tolerance>0||S?0:null;if(null!==P&&(P>0?(u=v.getStrokeJoin(),l=v.getStrokeCap(),c=v.getMiterLimit(),x=x.add(L._getStrokePadding(P,n))):u=l="round"),!e.ends||e.segments||y){if(e.segments||e.handles)for(T=0;T<m;T++)if(_=a(p[T]))return _}else if(_=a(p[0],!0)||a(p[m-1],!0))return _;if(null!==P){if(d=this.getNearestLocation(t)){var I=d.getTime();0===I||1===I&&m>1?h(d.getSegment())||(d=null):r(d.getPoint(),x)||(d=null)}if(!d&&"miter"===u&&m>1)for(var T=0;T<m;T++){var z=p[T];if(t.getDistance(z._point)<=c*P&&h(z)){d=z.getLocation();break}}}return!d&&C&&this._contains(t)||d&&!b&&!S?new M("fill",this):d?new M(b?"stroke":"curve",this,{location:d,point:d.getPoint()}):null}},r.each(k._evaluateMethods,function(t){this[t+"At"]=function(e){var i=this.getLocationAt(e);return i&&i[t]()}},{beans:!1,getLocationOf:function(){for(var t=c.read(arguments),e=this.getCurves(),i=0,n=e.length;i<n;i++){var r=e[i].getLocationOf(t);if(r)return r}return null},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getLocationAt:function(t){if("number"==typeof t){for(var e=this.getCurves(),i=0,n=0,r=e.length;n<r;n++){var s=i,a=e[n];if((i+=a.getLength())>t)return a.getLocationAt(t-s)}if(e.length>0&&t<=this.getLength())return new O(e[e.length-1],1)}else if(t&&t.getPath&&t.getPath()===this)return t;return null}}),new function(){function t(t,e,i,n){function r(e){var i=h[e],n=h[e+1];s==i&&a==n||(t.beginPath(),t.moveTo(s,a),t.lineTo(i,n),t.stroke(),t.beginPath(),t.arc(i,n,o,0,2*Math.PI,!0),t.fill())}for(var s,a,o=n/2,h=new Array(6),u=0,l=e.length;u<l;u++){var c=e[u],f=c._selection;if(c._transformCoordinates(i,h),s=h[0],a=h[1],2&f&&r(2),4&f&&r(4),t.fillRect(s-o,a-o,n,n),!(1&f)){var d=t.fillStyle;t.fillStyle="#ffffff",t.fillRect(s-o+1,a-o+1,n-2,n-2),t.fillStyle=d}}}function e(t,e,i){function n(e){if(i)e._transformCoordinates(i,_),r=_[0],s=_[1];else{var n=e._point;r=n._x,s=n._y}if(g)t.moveTo(r,s),g=!1;else{if(i)h=_[2],u=_[3];else{f=e._handleIn;h=r+f._x,u=s+f._y}h===r&&u===s&&l===a&&c===o?t.lineTo(r,s):t.bezierCurveTo(l,c,h,u,r,s)}if(a=r,o=s,i)l=_[4],c=_[5];else{var f=e._handleOut;l=a+f._x,c=o+f._y}}for(var r,s,a,o,h,u,l,c,f=e._segments,d=f.length,_=new Array(6),g=!0,v=0;v<d;v++)n(f[v]);e._closed&&d>0&&n(f[0])}return{_draw:function(t,i,n,r){function s(t){return c[(t%f+f)%f]}var a=i.dontStart,o=i.dontFinish||i.clip,h=this.getStyle(),u=h.hasFill(),l=h.hasStroke(),c=h.getDashArray(),f=!paper.support.nativeDash&&l&&c&&c.length;if(a||t.beginPath(),(u||l&&!f||o)&&(e(t,this,r),this._closed&&t.closePath()),!o&&(u||l)&&(this._setStyles(t,i,n),u&&(t.fill(h.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),l)){if(f){a||t.beginPath();var d,_=new B(this,.25,32,!1,r),g=_.length,v=-h.getDashOffset(),p=0;for(v%=g;v>0;)v-=s(p--)+s(p--);for(;v<g;)d=v+s(p++),(v>0||d>0)&&_.drawPart(t,Math.max(v,0),Math.max(d,0)),v=d+s(p++)}t.stroke()}},_drawSelected:function(i,n){i.beginPath(),e(i,this,n),i.stroke(),t(i,this._segments,n,paper.settings.handleSize)}}},new function(){function t(t){var e=t._segments;if(!e.length)throw new Error("Use a moveTo() command first");return e[e.length-1]}return{moveTo:function(){var t=this._segments;1===t.length&&this.removeSegment(0),t.length||this._add([new T(c.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new T(c.read(arguments))])},cubicCurveTo:function(){var e=c.read(arguments),i=c.read(arguments),n=c.read(arguments),r=t(this);r.setHandleOut(e.subtract(r._point)),this._add([new T(n,i.subtract(n))])},quadraticCurveTo:function(){var e=c.read(arguments),i=c.read(arguments),n=t(this)._point;this.cubicCurveTo(e.add(n.subtract(e).multiply(1/3)),e.add(i.subtract(e).multiply(1/3)),i)},curveTo:function(){var e=c.read(arguments),i=c.read(arguments),n=r.pick(r.read(arguments),.5),s=1-n,a=t(this)._point,o=e.subtract(a.multiply(s*s)).subtract(i.multiply(n*n)).divide(2*n*s);if(o.isNaN())throw new Error("Cannot put a curve through points with parameter = "+n);this.quadraticCurveTo(o,i)},arcTo:function(){var e,i,n,s,a=Math.abs,o=Math.sqrt,h=t(this),l=h._point,f=c.read(arguments),_=r.peek(arguments);if("boolean"==typeof(x=r.pick(_,!0)))var g=(C=l.add(f).divide(2)).add(C.subtract(l).rotate(x?-90:90));else if(r.remain(arguments)<=2)g=f,f=c.read(arguments);else{var v=d.read(arguments),y=u.isZero;if(y(v.width)||y(v.height))return this.lineTo(f);var w=r.read(arguments),x=!!r.read(arguments),b=!!r.read(arguments),C=l.add(f).divide(2),S=(W=l.subtract(C).rotate(-w)).x,P=W.y,I=a(v.width),M=a(v.height),z=I*I,k=M*M,O=S*S,A=P*P,L=o(O/z+A/k);if(L>1&&(z=(I*=L)*I,k=(M*=L)*M),L=(z*k-z*A-k*O)/(z*A+k*O),a(L)<1e-12&&(L=0),L<0)throw new Error("Cannot create an arc with the given arguments");e=new c(I*P/M,-M*S/I).multiply((b===x?-1:1)*o(L)).rotate(w).add(C),i=(n=(s=(new p).translate(e).rotate(w).scale(I,M))._inverseTransform(l)).getDirectedAngle(s._inverseTransform(f)),!x&&i>0?i-=360:x&&i<0&&(i+=360)}if(g){var N=new m(l.add(g).divide(2),g.subtract(l).rotate(90),!0),B=new m(g.add(f).divide(2),f.subtract(g).rotate(90),!0),D=new m(l,f),j=D.getSide(g);if(!(e=N.intersect(B,!0))){if(!j)return this.lineTo(f);throw new Error("Cannot create an arc with the given arguments")}i=(n=l.subtract(e)).getDirectedAngle(f.subtract(e));var E=D.getSide(e);0===E?i=j*a(i):j===E&&(i+=i<0?360:-360)}for(var F=a(i),R=F>=360?4:Math.ceil((F-1e-7)/90),q=i/R,V=q*Math.PI/360,H=4/3*Math.sin(V)/(1+Math.cos(V)),Z=[],U=0;U<=R;U++){var W=f,G=null;if(U<R&&(G=n.rotate(90).multiply(H),s?(W=s._transformPoint(n),G=s._transformPoint(n.add(G)).subtract(W)):W=e.add(n)),U){var J=n.rotate(-90).multiply(H);s&&(J=s._transformPoint(n.add(J)).subtract(W)),Z.push(new T(W,J,G))}else h.setHandleOut(G);n=n.rotate(q)}this._add(Z)},lineBy:function(){var e=c.read(arguments),i=t(this)._point;this.lineTo(i.add(e))},curveBy:function(){var e=c.read(arguments),i=c.read(arguments),n=r.read(arguments),s=t(this)._point;this.curveTo(s.add(e),s.add(i),n)},cubicCurveBy:function(){var e=c.read(arguments),i=c.read(arguments),n=c.read(arguments),r=t(this)._point;this.cubicCurveTo(r.add(e),r.add(i),r.add(n))},quadraticCurveBy:function(){var e=c.read(arguments),i=c.read(arguments),n=t(this)._point;this.quadraticCurveTo(n.add(e),n.add(i))},arcBy:function(){var e=t(this)._point,i=e.add(c.read(arguments)),n=r.pick(r.peek(arguments),!0);"boolean"==typeof n?this.arcTo(i,n):this.arcTo(i,e.add(c.read(arguments)))},closePath:function(t){this.setClosed(!0),this.join(this,t)}}},{_getBounds:function(t,e){var i=e.handle?"getHandleBounds":e.stroke?"getStrokeBounds":"getBounds";return L[i](this._segments,this._closed,this,t,e)},statics:{getBounds:function(t,e,i,n,r,s){function a(t){t._transformCoordinates(n,h);for(var e=0;e<2;e++)k._addBounds(u[e],u[e+4],h[e+2],h[e],e,s?s[e]:0,l,c,f);var i=u;u=h,h=i}var o=t[0];if(!o)return new g;for(var h=new Array(6),u=o._transformCoordinates(n,new Array(6)),l=u.slice(0,2),c=l.slice(),f=new Array(2),d=1,_=t.length;d<_;d++)a(t[d]);return e&&a(o),new g(l[0],l[1],c[0]-l[0],c[1]-l[1])},getStrokeBounds:function(t,e,i,n,r){function s(t){v=v.include(t)}function a(t){v=v.unite(x.setCenter(t._point.transform(n)))}function o(t,e){"round"===e||t.isSmooth()?a(t):L._addBevelJoin(t,e,p,w,n,f,s)}function h(t,e){"round"===e?a(t):L._addSquareCap(t,e,p,n,f,s)}var u=i.getStyle(),l=u.hasStroke(),c=u.getStrokeWidth(),f=l&&i._getStrokeMatrix(n,r),_=l&&L._getStrokePadding(c,f),v=L.getBounds(t,e,i,n,r,_);if(!l)return v;for(var p=c/2,m=u.getStrokeJoin(),y=u.getStrokeCap(),w=u.getMiterLimit(),x=new g(new d(_)),b=t.length-(e?0:1),C=1;C<b;C++)o(t[C],m);return e?o(t[0],m):b>0&&(h(t[0],y),h(t[t.length-1],y)),v},_getStrokePadding:function(t,e){if(!e)return[t,t];var i=new c(t,0).transform(e),n=new c(0,t).transform(e),r=i.getAngleInRadians(),s=i.getLength(),a=n.getLength(),o=Math.sin(r),h=Math.cos(r),u=Math.tan(r),l=Math.atan2(a*u,s),f=Math.atan2(a,u*s);return[Math.abs(s*Math.cos(l)*h+a*Math.sin(l)*o),Math.abs(a*Math.sin(f)*h+s*Math.cos(f)*o)]},_addBevelJoin:function(t,e,i,n,r,s,a,o){var h=t.getCurve(),u=h.getPrevious(),l=h.getPoint1().transform(r),f=u.getNormalAtTime(1).multiply(i).transform(s),d=h.getNormalAtTime(0).multiply(i).transform(s);if(f.getDirectedAngle(d)<0&&(f=f.negate(),d=d.negate()),o&&a(l),a(l.add(f)),"miter"===e){var _=new m(l.add(f),new c(-f.y,f.x),!0).intersect(new m(l.add(d),new c(-d.y,d.x),!0),!0);_&&l.getDistance(_)<=n*i&&a(_)}a(l.add(d))},_addSquareCap:function(t,e,i,n,r,s,a){var o=t._point.transform(n),h=t.getLocation(),u=h.getNormal().multiply(0===h.getTime()?i:-i).transform(r);"square"===e&&(a&&(s(o.subtract(u)),s(o.add(u))),o=o.add(u.rotate(-90))),s(o.add(u)),s(o.subtract(u))},getHandleBounds:function(t,e,i,n,r){var s,a,o=i.getStyle();if(r.stroke&&o.hasStroke()){var h=i._getStrokeMatrix(n,r),u=o.getStrokeWidth()/2,l=u;"miter"===o.getStrokeJoin()&&(l=u*o.getMiterLimit()),"square"===o.getStrokeCap()&&(l=Math.max(l,u*Math.SQRT2)),s=L._getStrokePadding(u,h),a=L._getStrokePadding(l,h)}for(var c=new Array(6),f=1/0,d=-f,_=f,v=d,p=0,m=t.length;p<m;p++){t[p]._transformCoordinates(n,c);for(var y=0;y<6;y+=2){var w=y?s:a,x=w?w[0]:0,b=w?w[1]:0,C=c[y],S=c[y+1],P=C-x,I=C+x,M=S-b,T=S+b;P<f&&(f=P),I>d&&(d=I),M<_&&(_=M),T>v&&(v=T)}}return new g(f,_,d-f,v-_)}}});L.inject({statics:new function(){function t(t,e,i){var n=r.getNamed(i),s=new L(n&&0==n.insert&&w.NO_INSERT);return s._add(t),s._closed=e,s.set(n,{insert:!0})}function e(e,i,r){for(var s=new Array(4),a=0;a<4;a++){var o=n[a];s[a]=new T(o._point.multiply(i).add(e),o._handleIn.multiply(i),o._handleOut.multiply(i))}return t(s,!0,r)}var i=.5522847498307936,n=[new T([-1,0],[0,i],[0,-i]),new T([0,-1],[-i,0],[i,0]),new T([1,0],[0,-i],[0,i]),new T([0,1],[i,0],[-i,0])];return{Line:function(){return t([new T(c.readNamed(arguments,"from")),new T(c.readNamed(arguments,"to"))],!1,arguments)},Circle:function(){var t=c.readNamed(arguments,"center"),i=r.readNamed(arguments,"radius");return e(t,new d(i),arguments)},Rectangle:function(){var e,n=g.readNamed(arguments,"rectangle"),r=d.readNamed(arguments,"radius",0,{readNull:!0}),s=n.getBottomLeft(!0),a=n.getTopLeft(!0),o=n.getTopRight(!0),h=n.getBottomRight(!0);if(!r||r.isZero())e=[new T(s),new T(a),new T(o),new T(h)];else{var u=(r=d.min(r,n.getSize(!0).divide(2))).width,l=r.height,c=u*i,f=l*i;e=[new T(s.add(u,0),null,[-c,0]),new T(s.subtract(0,l),[0,f]),new T(a.add(0,l),null,[0,-f]),new T(a.add(u,0),[-c,0],null),new T(o.subtract(u,0),null,[c,0]),new T(o.add(0,l),[0,-f],null),new T(h.subtract(0,l),null,[0,f]),new T(h.subtract(u,0),[c,0])]}return t(e,!0,arguments)},RoundRectangle:"#Rectangle",Ellipse:function(){var t=C._readEllipse(arguments);return e(t.center,t.radius,arguments)},Oval:"#Ellipse",Arc:function(){var t=c.readNamed(arguments,"from"),e=c.readNamed(arguments,"through"),i=c.readNamed(arguments,"to"),n=r.getNamed(arguments),s=new L(n&&0==n.insert&&w.NO_INSERT);return s.moveTo(t),s.arcTo(e,i),s.set(n)},RegularPolygon:function(){for(var e=c.readNamed(arguments,"center"),i=r.readNamed(arguments,"sides"),n=r.readNamed(arguments,"radius"),s=360/i,a=i%3==0,o=new c(0,a?-n:n),h=a?-1:.5,u=new Array(i),l=0;l<i;l++)u[l]=new T(e.add(o.rotate((l+h)*s)));return t(u,!0,arguments)},Star:function(){for(var e=c.readNamed(arguments,"center"),i=2*r.readNamed(arguments,"points"),n=r.readNamed(arguments,"radius1"),s=r.readNamed(arguments,"radius2"),a=360/i,o=new c(0,-1),h=new Array(i),u=0;u<i;u++)h[u]=new T(e.add(o.rotate(a*u).multiply(u%2?s:n)));return t(h,!0,arguments)}}}});var N=A.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||("string"==typeof t?this.setPathData(t):this.addChildren(Array.isArray(t)?t:arguments))},insertChildren:function t(e,i){var n=i,s=n[0];s&&"number"==typeof s[0]&&(n=[n]);for(var a=i.length-1;a>=0;a--){var o=n[a];n!==i||o instanceof L||(n=r.slice(n)),Array.isArray(o)?n[a]=new L({segments:o,insert:!1}):o instanceof N&&(n.splice.apply(n,[a,1].concat(o.removeChildren())),o.remove())}return t.base.call(this,e,n)},reduce:function t(e){for(var i=this._children,n=i.length-1;n>=0;n--)(r=i[n].reduce(e)).isEmpty()&&r.remove();if(!i.length){var r=new L(w.NO_INSERT);return r.copyAttributes(this),r.insertAbove(this),this.remove(),r}return t.base.call(this)},isClosed:function(){for(var t=this._children,e=0,i=t.length;e<i;e++)if(!t[e]._closed)return!1;return!0},setClosed:function(t){for(var e=this._children,i=0,n=e.length;i<n;i++)e[i].setClosed(t)},getFirstSegment:function(){var t=this.getFirstChild();return t&&t.getFirstSegment()},getLastSegment:function(){var t=this.getLastChild();return t&&t.getLastSegment()},getCurves:function(){for(var t=this._children,e=[],i=0,n=t.length;i<n;i++)e.push.apply(e,t[i].getCurves());return e},getFirstCurve:function(){var t=this.getFirstChild();return t&&t.getFirstCurve()},getLastCurve:function(){var t=this.getLastChild();return t&&t.getLastCurve()},getArea:function(){for(var t=this._children,e=0,i=0,n=t.length;i<n;i++)e+=t[i].getArea();return e},getLength:function(){for(var t=this._children,e=0,i=0,n=t.length;i<n;i++)e+=t[i].getLength();return e},getPathData:function(t,e){for(var i=this._children,n=[],r=0,s=i.length;r<s;r++){var a=i[r],o=a._matrix;n.push(a.getPathData(t&&!o.isIdentity()?t.appended(o):t,e))}return n.join("")},_hitTestChildren:function t(e,i,n){return t.base.call(this,e,i.class===L||"path"===i.type?i:r.set({},i,{fill:!1}),n)},_draw:function(t,e,i,n){var r=this._children;if(r.length){e=e.extend({dontStart:!0,dontFinish:!0}),t.beginPath();for(var s=0,a=r.length;s<a;s++)r[s].draw(t,e,n);if(!e.clip){this._setStyles(t,e,i);var o=this._style;o.hasFill()&&(t.fill(o.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),o.hasStroke()&&t.stroke()}}},_drawSelected:function(t,e,i){for(var n=this._children,r=0,s=n.length;r<s;r++){var a=n[r],o=a._matrix;i[a._id]||a._drawSelected(t,o.isIdentity()?e:e.appended(o))}}},new function(){function t(t,e){var i=t._children;if(e&&!i.length)throw new Error("Use a moveTo() command first");return i[i.length-1]}return r.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(e){this[e]=function(){var i=t(this,!0);i[e].apply(i,arguments)}},{moveTo:function(){var e=t(this),i=e&&e.isEmpty()?e:new L(w.NO_INSERT);i!==e&&this.addChild(i),i.moveTo.apply(i,arguments)},moveBy:function(){var e=t(this,!0),i=e&&e.getLastSegment(),n=c.read(arguments);this.moveTo(i?n.add(i._point):n)},closePath:function(e){t(this,!0).closePath(e)}})},r.each(["reverse","flatten","simplify","smooth"],function(t){this[t]=function(e){for(var i,n=this._children,r=0,s=n.length;r<s;r++)i=n[r][t](e)||i;return i}},{}));A.inject(new function(){function t(t,e){var i=t.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);return e?i.resolveCrossings().reorient("nonzero"===i.getFillRule(),!0):i}function i(t,e,i,n,r){var s=new N(w.NO_INSERT);return s.addChildren(t,!0),s=s.reduce({simplify:e}),r&&0==r.insert||s.insertAbove(n&&i.isSibling(n)&&i.getIndex()<n.getIndex()?n:i),s.copyAttributes(i,!0),s}function n(e,n,r,a){function o(t){for(var e=0,i=t.length;e<i;e++){var n=t[e];w.push.apply(w,n._segments),x.push.apply(x,n.getCurves()),n._overlapsOnly=!0}}if(a&&(0==a.trace||a.stroke)&&/^(subtract|intersect)$/.test(r))return s(e,n,r);var u=t(e,!0),c=n&&e!==n&&t(n,!0),_=p[r];_[r]=!0,c&&(_.subtract||_.exclude)^c.isClockwise()^u.isClockwise()&&c.reverse();var g,v=l(O.expand(u.getCrossings(c))),m=u._children||[u],y=c&&(c._children||[c]),w=[],x=[];if(v.length){o(m),y&&o(y);for(var b=0,C=v.length;b<C;b++)f(v[b]._segment,u,c,x,_);for(var b=0,C=w.length;b<C;b++){var S=w[b],P=S._intersection;S._winding||f(S,u,c,x,_),P&&P._overlap||(S._path._overlapsOnly=!1)}g=d(w,_)}else g=h(y?m.concat(y):m.slice(),function(t){return!!_[t]});return i(g,!0,e,n,a)}function s(e,n,r){function s(t){if(!c[t._id]&&(l||o.contains(t.getPointAt(t.getLength()/2))^u))return f.unshift(t),c[t._id]=!0}for(var a=t(e),o=t(n),h=a.getCrossings(o),u="subtract"===r,l="divide"===r,c={},f=[],d=h.length-1;d>=0;d--){var _=h[d].split();_&&(s(_)&&_.getFirstSegment().setHandleIn(0,0),a.getLastSegment().setHandleOut(0,0))}return s(a),i(f,!1,e,n)}function a(t,e){for(var i=t;i;){if(i===e)return;i=i._previous}for(;t._next&&t._next!==e;)t=t._next;if(!t._next){for(;e._previous;)e=e._previous;t._next=e,e._previous=t}}function o(t){for(var e=t.length-1;e>=0;e--)t[e].clearHandles()}function h(t,e,i){var n=t&&t.length;if(n){var s=r.each(t,function(t,e){this[t._id]={container:null,winding:t.isClockwise()?1:-1,index:e}},{}),a=t.slice().sort(function(t,e){return v(e.getArea())-v(t.getArea())}),o=a[0];null==i&&(i=o.isClockwise());for(var h=0;h<n;h++){for(var u=a[h],l=s[u._id],c=u.getInteriorPoint(),f=0,d=h-1;d>=0;d--){var _=a[d];if(_.contains(c)){var g=s[_._id];f=g.winding,l.winding+=f,l.container=g.exclude?g.container:_;break}}if(e(l.winding)===e(f))l.exclude=!0,t[l.index]=null;else{var p=l.container;u.setClockwise(p?!p.isClockwise():i)}}}return t}function l(t,e,i){function n(t){return t._path._id+"."+t._segment1._index}for(var r,s,h,u=e&&[],l=!1,c=i||[],f=i&&{},d=(i&&i.length)-1;d>=0;d--)(y=i[d])._path&&(f[n(y)]=!0);for(d=t.length-1;d>=0;d--){var _,g=t[d],v=g._time,p=v,m=e&&!e(g),y=g._curve;if(y&&(y!==s?(l=!y.hasHandles()||f&&f[n(y)],r=[],h=null,s=y):h>=1e-8&&(v/=h)),m)r&&r.push(g);else{if(e&&u.unshift(g),h=p,v<1e-8)_=y._segment1;else if(v>1-1e-8)_=y._segment2;else{var w=y.divideAtTime(v,!0);l&&c.push(y,w),_=w._segment1;for(var x=r.length-1;x>=0;x--){var b=r[x];b._time=(b._time-v)/(1-v)}}g._setSegment(_);var C=_._intersection,S=g._intersection;if(C){a(C,S);for(var P=C;P;)a(P._intersection,C),P=P._next}else _._intersection=S}}return i||o(c),u||t}function c(t,e,i,n,r){function s(s){var a=s[l+0],h=s[l+6];if(!(p<_(a,h)||p>g(a,h))){var f=s[u+0],v=s[u+2],x=s[u+4],b=s[u+6];if(a!==h){var I=p===a?0:p===h?1:y>g(f,v,x,b)||w<_(f,v,x,b)?1:k.solveCubic(s,l,p,T,0,1)>0?T[0]:1,z=0===I?f:1===I?b:k.getPoint(s,I)[i?"y":"x"],O=a>h?1:-1,A=o[l]>o[l+6]?1:-1,L=o[u+6];return p!==a?(z<y?C+=O:z>w?S+=O:P=!0,z>d-m&&z<d+m&&(M/=2)):(O!==A?f<y?C+=O:f>w&&(S+=O):f!=L&&(L<w&&z>w?(S+=O,P=!0):L>y&&z<y&&(C+=O,P=!0)),M=0),o=s,!r&&z>y&&z<w&&0===k.getTangent(s,I)[i?"x":"y"]&&c(t,e,!i,n,!0)}(f<w&&b>y||b<w&&f>y)&&(P=!0)}}function a(t){var e=t[l+0],n=t[l+2],r=t[l+4],a=t[l+6];if(p<=g(e,n,r,a)&&p>=_(e,n,r,a))for(var o,h=t[u+0],c=t[u+2],f=t[u+4],d=t[u+6],v=y>g(h,c,f,d)||w<_(h,c,f,d)?[t]:k.getMonoCurves(t,i),m=0,x=v.length;m<x;m++)if(o=s(v[m]))return o}for(var o,h,u=i?1:0,l=1^u,f=[t.x,t.y],d=f[u],p=f[l],m=1e-6,y=d-1e-9,w=d+1e-9,x=0,b=0,C=0,S=0,P=!1,I=!1,M=1,T=[],z=0,O=e.length;z<O;z++){var A,L=e[z],N=L._path,B=L.getValues();if(!(z&&e[z-1]._path===N||(o=null,N._closed||(h=k.getValues(N.getLastCurve().getSegment2(),L.getSegment1(),null,!n))[l]!==h[l+6]&&(o=h),o))){o=B;for(var D=N.getLastCurve();D&&D!==L;){var j=D.getValues();if(j[l]!==j[l+6]){o=j;break}D=D.getPrevious()}}if(A=a(B))return A;if(z+1===O||e[z+1]._path!==N){if(h&&(A=a(h)))return A;!P||C||S||(C=S=N.isClockwise(n)^i?1:-1),x+=C,b+=S,C=S=0,P&&(I=!0,P=!1),h=null}}return x=v(x),b=v(b),{winding:g(x,b),windingL:x,windingR:b,quality:M,onPath:I}}function f(t,e,i,n,r){var s=[],a=t,o=0;do{d=(y=t.getCurve()).getLength();s.push({segment:t,curve:y,length:d}),o+=d,t=t.getNext()}while(t&&!t._intersection&&t!==a);for(var h=[.5,.25,.75],l={winding:0,quality:-1},f=0;f<h.length&&l.quality<.5;f++)for(var d=o*h[f],_=0,g=s.length;_<g;_++){var p=s[_],m=p.length;if(d<=m){var y=p.curve,w=y._path,x=w._parent,b=x instanceof N?x:w,C=u.clamp(y.getTimeAt(d),1e-8,1-1e-8),S=y.getPointAtTime(C),P=v(y.getTangentAtTime(C).y)<Math.SQRT1_2,I=r.subtract&&i&&(b===e&&i._getWinding(S,P,!0).winding||b===i&&!e._getWinding(S,P,!0).winding)?{winding:0,quality:1}:c(S,n,P,!0);I.quality>l.quality&&(l=I);break}d-=m}for(_=s.length-1;_>=0;_--)s[_].segment._winding=l}function d(t,e){function i(t){var i;return!(!t||t._visited||e&&(!e[(i=t._winding||{}).winding]||e.unite&&2===i.winding&&i.windingL&&i.windingR))}function n(t){if(t)for(var e=0,i=s.length;e<i;e++)if(t===s[e])return!0;return!1}function r(t){for(var e=t._segments,i=0,n=e.length;i<n;i++)e[i]._visited=!0}var s,a=[];t.sort(function(t,e){var i=t._intersection,n=e._intersection,r=!(!i||!i._overlap),s=!(!n||!n._overlap),a=t._path,o=e._path;return r^s?r?1:-1:!i^!n?i?1:-1:a!==o?a._id-o._id:t._index-e._index});for(var o=0,h=t.length;o<h;o++){var u,l,c,f=t[o],d=i(f),_=null,g=!1,v=!0,p=[];if(d&&f._path._overlapsOnly){var m=f._path,y=f._intersection._segment._path;m.compare(y)&&(m.getArea()&&a.push(m.clone(!1)),r(m),r(y),d=!1)}for(;d;){var x=!_,b=function(t,e){function r(r,a){for(;r&&r!==a;){var o=r._segment,u=o&&o._path;if(u){var l=o.getNext()||u.getFirstSegment(),c=l._intersection;o!==t&&(n(o)||n(l)||l&&i(o)&&(i(l)||c&&i(c._segment)))&&h.push(o),e&&s.push(o)}r=r._next}}var a=t._intersection,o=a,h=[];if(e&&(s=[t]),a){for(r(a);a&&a._prev;)a=a._prev;r(a,o)}return h}(f,x),C=b.shift(),S=!(g=!x&&(n(f)||n(C)))&&C;if(x&&(_=new L(w.NO_INSERT),u=null),g){(f.isFirst()||f.isLast())&&(v=f._path._closed),f._visited=!0;break}if(S&&u&&(p.push(u),u=null),u||(S&&b.push(f),u={start:_._segments.length,crossings:b,visited:l=[],handleIn:c}),S&&(f=C),!i(f)){_.removeSegments(u.start);for(var P=0,I=l.length;P<I;P++)l[P]._visited=!1;l.length=0;do{(f=u&&u.crossings.shift())&&f._path||(f=null,(u=p.pop())&&(l=u.visited,c=u.handleIn))}while(u&&!i(f));if(!f)break}var M=f.getNext();_.add(new T(f._point,c,M&&f._handleOut)),f._visited=!0,l.push(f),f=M||f._path.getFirstSegment(),c=M&&M._handleIn}g&&(v&&(_.getFirstSegment().setHandleIn(c),_.setClosed(v)),0!==_.getArea()&&a.push(_))}return a}var _=Math.min,g=Math.max,v=Math.abs,p={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};return{_getWinding:function(t,e,i){return c(t,this.getCurves(),e,i)},unite:function(t,e){return n(this,t,"unite",e)},intersect:function(t,e){return n(this,t,"intersect",e)},subtract:function(t,e){return n(this,t,"subtract",e)},exclude:function(t,e){return n(this,t,"exclude",e)},divide:function(t,e){return e&&(0==e.trace||e.stroke)?s(this,t,"divide"):i([this.subtract(t,e),this.intersect(t,e)],!0,this,t,e)},resolveCrossings:function(){function t(t,e){var i=t&&t._intersection;return i&&i._overlap&&i._path===e}var e=this._children,i=e||[this],n=!1,s=!1,a=this.getIntersections(null,function(t){return t.hasOverlap()&&(n=!0)||t.isCrossing()&&(s=!0)}),h=n&&s&&[];if(a=O.expand(a),n)for(var u=l(a,function(t){return t.hasOverlap()},h),c=u.length-1;c>=0;c--){var f=u[c],_=f._path,g=f._segment,v=g.getPrevious(),p=g.getNext();t(v,_)&&t(p,_)&&(g.remove(),v._handleOut._set(0,0),p._handleIn._set(0,0),v===g||v.getCurve().hasLength()||(p._handleIn.set(v._handleIn),v.remove()))}s&&(l(a,n&&function(t){var e=t.getCurve(),i=t.getSegment(),n=t._intersection,r=n._curve,s=n._segment;if(e&&r&&e._path&&r._path)return!0;i&&(i._intersection=null),s&&(s._intersection=null)},h),h&&o(h),i=d(r.each(i,function(t){this.push.apply(this,t._segments)},[])));var m,y=i.length;return y>1&&e?(i!==e&&this.setChildren(i),m=this):1!==y||e||(i[0]!==this&&this.setSegments(i[0].removeSegments()),m=this),m||((m=new N(w.NO_INSERT)).addChildren(i),(m=m.reduce()).copyAttributes(this),this.replaceWith(m)),m},reorient:function(t,i){var n=this._children;return n&&n.length?this.setChildren(h(this.removeChildren(),function(e){return!!(t?e:1&e)},i)):i!==e&&this.setClockwise(i),this},getInteriorPoint:function(){var t=this.getBounds().getCenter(!0);if(!this.contains(t)){for(var e=this.getCurves(),i=t.y,n=[],r=[],s=0,a=e.length;s<a;s++){var o=e[s].getValues(),h=o[1],u=o[3],l=o[5],c=o[7];if(i>=_(h,u,l,c)&&i<=g(h,u,l,c))for(var f=k.getMonoCurves(o),d=0,v=f.length;d<v;d++){var p=f[d],m=p[1],y=p[7];if(m!==y&&(i>=m&&i<=y||i>=y&&i<=m)){var w=i===m?p[0]:i===y?p[6]:1===k.solveCubic(p,1,i,r,0,1)?k.getPoint(p,r[0]).x:(p[0]+p[6])/2;n.push(w)}}}n.length>1&&(n.sort(function(t,e){return t-e}),t.x=(n[0]+n[1])/2)}return t}}});var B=r.extend({_class:"PathFlattener",initialize:function(t,e,i,n,r){function s(t,e){var i=k.getValues(t,e,r);h.push(i),a(i,t._index,0,1)}function a(t,i,r,s){if(!(s-r>c)||n&&k.isStraight(t)||k.isFlatEnough(t,e||.25)){var o=t[6]-t[0],h=t[7]-t[1],f=Math.sqrt(o*o+h*h);f>0&&(l+=f,u.push({offset:l,curve:t,index:i,time:s}))}else{var d=k.subdivide(t,.5),_=(r+s)/2;a(d[0],i,r,_),a(d[1],i,_,s)}}for(var o,h=[],u=[],l=0,c=1/(i||32),f=t._segments,d=f[0],_=1,g=f.length;_<g;_++)s(d,o=f[_]),d=o;t._closed&&s(o,f[0]),this.curves=h,this.parts=u,this.length=l,this.index=0},_get:function(t){for(var e,i=this.parts,n=i.length,r=this.index;e=r,r&&!(i[--r].offset<t););for(;e<n;e++){var s=i[e];if(s.offset>=t){this.index=e;var a=i[e-1],o=a&&a.index===s.index?a.time:0,h=a?a.offset:0;return{index:s.index,time:o+(s.time-o)*(t-h)/(s.offset-h)}}}return{index:i[n-1].index,time:1}},drawPart:function(t,e,i){for(var n=this._get(e),r=this._get(i),s=n.index,a=r.index;s<=a;s++){var o=k.getPart(this.curves[s],s===n.index?n.time:0,s===r.index?r.time:1);s===n.index&&t.moveTo(o[0],o[1]),t.bezierCurveTo.apply(t,o.slice(2))}}},r.each(k._evaluateMethods,function(t){this[t+"At"]=function(e){var i=this._get(e);return k[t](this.curves[i.index],i.time)}},{})),D=r.extend({initialize:function(t){for(var e,i=this.points=[],n=t._segments,r=t._closed,s=0,a=n.length;s<a;s++){var o=n[s].point;e&&e.equals(o)||i.push(e=o.clone())}r&&(i.unshift(i[i.length-1]),i.push(i[1])),this.closed=r},fit:function(t){var e=this.points,i=e.length,n=null;return i>0&&(n=[new T(e[0])],i>1&&(this.fitCubic(n,t,0,i-1,e[1].subtract(e[0]),e[i-2].subtract(e[i-1])),this.closed&&(n.shift(),n.pop()))),n},fitCubic:function(t,e,i,n,r,s){var a=this.points;if(n-i!=1){for(var o,h=this.chordLengthParameterize(i,n),u=Math.max(e,e*e),l=!0,c=0;c<=4;c++){var f=this.generateBezier(i,n,h,r,s),d=this.findMaxError(i,n,f,h);if(d.error<e&&l)return void this.addCurve(t,f);if(o=d.index,d.error>=u)break;l=this.reparameterize(i,n,h,f),u=d.error}var _=a[o-1].subtract(a[o+1]);this.fitCubic(t,e,i,o,r,_),this.fitCubic(t,e,o,n,_.negate(),s)}else{var g=a[i],v=a[n],p=g.getDistance(v)/3;this.addCurve(t,[g,g.add(r.normalize(p)),v.add(s.normalize(p)),v])}},addCurve:function(t,e){t[t.length-1].setHandleOut(e[1].subtract(e[0])),t.push(new T(e[3],e[2].subtract(e[3])))},generateBezier:function(t,e,i,n,r){for(var s=Math.abs,a=this.points,o=a[t],h=a[e],u=[[0,0],[0,0]],l=[0,0],c=0,f=e-t+1;c<f;c++){var d=i[c],_=1-d,g=3*d*_,v=_*_*_,p=g*_,m=g*d,y=d*d*d,w=n.normalize(p),x=r.normalize(m),b=a[t+c].subtract(o.multiply(v+p)).subtract(h.multiply(m+y));u[0][0]+=w.dot(w),u[0][1]+=w.dot(x),u[1][0]=u[0][1],u[1][1]+=x.dot(x),l[0]+=w.dot(b),l[1]+=x.dot(b)}var C,S,P=u[0][0]*u[1][1]-u[1][0]*u[0][1];if(s(P)>1e-12){var I=u[0][0]*l[1]-u[1][0]*l[0];C=(l[0]*u[1][1]-l[1]*u[0][1])/P,S=I/P}else{var M=u[0][0]+u[0][1],T=u[1][0]+u[1][1];C=S=s(M)>1e-12?l[0]/M:s(T)>1e-12?l[1]/T:0}var z,k,O=h.getDistance(o),A=1e-12*O;if(C<A||S<A)C=S=O/3;else{var L=h.subtract(o);z=n.normalize(C),k=r.normalize(S),z.dot(L)-k.dot(L)>O*O&&(C=S=O/3,z=k=null)}return[o,o.add(z||n.normalize(C)),h.add(k||r.normalize(S)),h]},reparameterize:function(t,e,i,n){for(r=t;r<=e;r++)i[r-t]=this.findRoot(n,this.points[r],i[r-t]);for(var r=1,s=i.length;r<s;r++)if(i[r]<=i[r-1])return!1;return!0},findRoot:function(t,e,i){for(var n=[],r=[],s=0;s<=2;s++)n[s]=t[s+1].subtract(t[s]).multiply(3);for(s=0;s<=1;s++)r[s]=n[s+1].subtract(n[s]).multiply(2);var a=this.evaluate(3,t,i),o=this.evaluate(2,n,i),h=this.evaluate(1,r,i),l=a.subtract(e),c=o.dot(o)+l.dot(h);return u.isZero(c)?i:i-l.dot(o)/c},evaluate:function(t,e,i){for(var n=e.slice(),r=1;r<=t;r++)for(var s=0;s<=t-r;s++)n[s]=n[s].multiply(1-i).add(n[s+1].multiply(i));return n[0]},chordLengthParameterize:function(t,e){for(var i=[0],n=t+1;n<=e;n++)i[n-t]=i[n-t-1]+this.points[n].getDistance(this.points[n-1]);for(var n=1,r=e-t;n<=r;n++)i[n]/=i[r];return i},findMaxError:function(t,e,i,n){for(var r=Math.floor((e-t+1)/2),s=0,a=t+1;a<e;a++){var o=this.evaluate(3,i,n[a-t]).subtract(this.points[a]),h=o.x*o.x+o.y*o.y;h>=s&&(s=h,r=a)}return{error:s,index:r}}}),j=w.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(t){this._content="",this._lines=[];var i=t&&r.isPlainObject(t)&&t.x===e&&t.y===e;this._initialize(i&&t,!i&&c.read(arguments))},_equals:function(t){return this._content===t._content},copyContent:function(t){this.setContent(t._content)},getContent:function(){return this._content},setContent:function(t){this._content=""+t,this._lines=this._content.split(/\r\n|\n|\r/gm),this._changed(265)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),E=j.extend({_class:"PointText",initialize:function(){j.apply(this,arguments)},getPoint:function(){var t=this._matrix.getTranslation();return new f(t.x,t.y,this,"setPoint")},setPoint:function(){var t=c.read(arguments);this.translate(t.subtract(this._matrix.getTranslation()))},_draw:function(t,e,i){if(this._content){this._setStyles(t,e,i);var n=this._lines,r=this._style,s=r.hasFill(),a=r.hasStroke(),o=r.getLeading(),h=t.shadowColor;t.font=r.getFontStyle(),t.textAlign=r.getJustification();for(var u=0,l=n.length;u<l;u++){t.shadowColor=h;var c=n[u];s&&(t.fillText(c,0,0),t.shadowColor="rgba(0,0,0,0)"),a&&t.strokeText(c,0,0),t.translate(0,o)}}},_getBounds:function(t,e){var i=this._style,n=this._lines,r=n.length,s=i.getJustification(),a=i.getLeading(),o=this.getView().getTextWidth(i.getFontStyle(),n),h=0;"left"!==s&&(h-=o/("center"===s?2:1));var u=new g(h,r?-.75*a:0,o,r*a);return t?t._transformBounds(u,u):u}}),F=r.extend(new function(){function t(t){var n,r=t.match(/^#(\w{1,2})(\w{1,2})(\w{1,2})$/);if(r){n=[0,0,0];for(s=0;s<3;s++){h=r[s+1];n[s]=parseInt(1==h.length?h+h:h,16)/255}}else if(r=t.match(/^rgba?\((.*)\)$/))for(var s=0,o=(n=r[1].split(",")).length;s<o;s++){var h=+n[s];n[s]=s<3?h/255:h}else if(i){var u=a[t];if(!u){e||((e=Q.getContext(1,1)).globalCompositeOperation="copy"),e.fillStyle="rgba(0,0,0,0)",e.fillStyle=t,e.fillRect(0,0,1,1);var l=e.getImageData(0,0,1,1).data;u=a[t]=[l[0]/255,l[1]/255,l[2]/255]}n=u.slice()}else n=[0,0,0];return n}var e,n={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},s={},a={},o=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],u={"rgb-hsb":function(t,e,i){var n=Math.max(t,e,i),r=n-Math.min(t,e,i);return[0===r?0:60*(n==t?(e-i)/r+(e<i?6:0):n==e?(i-t)/r+2:(t-e)/r+4),0===n?0:r/n,n]},"hsb-rgb":function(t,e,i){t=(t/60%6+6)%6;var n=Math.floor(t),r=t-n,s=[i,i*(1-e),i*(1-e*r),i*(1-e*(1-r))];return[s[(n=o[n])[0]],s[n[1]],s[n[2]]]},"rgb-hsl":function(t,e,i){var n=Math.max(t,e,i),r=Math.min(t,e,i),s=n-r,a=0===s,o=(n+r)/2;return[a?0:60*(n==t?(e-i)/s+(e<i?6:0):n==e?(i-t)/s+2:(t-e)/s+4),a?0:o<.5?s/(n+r):s/(2-n-r),o]},"hsl-rgb":function(t,e,i){if(t=(t/360%1+1)%1,0===e)return[i,i,i];for(var n=[t+1/3,t,t-1/3],r=i<.5?i*(1+e):i+e-i*e,s=2*i-r,a=[],o=0;o<3;o++){var h=n[o];h<0&&(h+=1),h>1&&(h-=1),a[o]=6*h<1?s+6*(r-s)*h:2*h<1?r:3*h<2?s+(r-s)*(2/3-h)*6:s}return a},"rgb-gray":function(t,e,i){return[.2989*t+.587*e+.114*i]},"gray-rgb":function(t){return[t,t,t]},"gray-hsb":function(t){return[0,0,t]},"gray-hsl":function(t){return[0,0,t]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return r.each(n,function(t,e){s[e]=[],r.each(t,function(t,i){var a=r.capitalize(t),o=/^(hue|saturation)$/.test(t),h=s[e][i]="gradient"===t?function(t){var e=this._components[0];return t=R.read(Array.isArray(t)?t:arguments,0,{readNull:!0}),e!==t&&(e&&e._removeOwner(this),t&&t._addOwner(this)),t}:"gradient"===e?function(){return c.read(arguments,0,{readNull:"highlight"===t,clone:!0})}:function(t){return null==t||isNaN(t)?0:t};this["get"+a]=function(){return this._type===e||o&&/^hs[bl]$/.test(this._type)?this._components[i]:this._convert(e)[i]},this["set"+a]=function(t){this._type===e||o&&/^hs[bl]$/.test(this._type)||(this._components=this._convert(e),this._properties=n[e],this._type=e),this._components[i]=h.call(this,t),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function e(i){var a,o,h,u,l=arguments,c=this.__read,f=0;Array.isArray(i)&&(i=(l=i)[0]);var d=null!=i&&typeof i;if("string"===d&&i in n&&(a=i,i=l[1],Array.isArray(i)?(o=i,h=l[2]):(c&&(f=1),l=r.slice(l,1),d=typeof i)),!o){if(u="number"===d?l:"object"===d&&null!=i.length?i:null){a||(a=u.length>=3?"rgb":"gray");var _=n[a].length;h=u[_],c&&(f+=u===arguments?_+(null!=h?1:0):1),u.length>_&&(u=r.slice(u,0,_))}else if("string"===d)a="rgb",4===(o=t(i)).length&&(h=o[3],o.length--);else if("object"===d)if(i.constructor===e){if(a=i._type,o=i._components.slice(),h=i._alpha,"gradient"===a)for(var g=1,v=o.length;g<v;g++){var p=o[g];p&&(o[g]=p.clone())}}else if(i.constructor===R)a="gradient",u=l;else{var m=n[a="hue"in i?"lightness"in i?"hsl":"hsb":"gradient"in i||"stops"in i||"radial"in i?"gradient":"gray"in i?"gray":"rgb"],y=s[a];this._components=o=[];for(var g=0,v=m.length;g<v;g++)null==(w=i[m[g]])&&!g&&"gradient"===a&&"stops"in i&&(w={stops:i.stops,radial:i.radial}),null!=(w=y[g].call(this,w))&&(o[g]=w);h=i.alpha}c&&a&&(f=1)}if(this._type=a||"rgb",!o){this._components=o=[];for(var g=0,v=(y=s[this._type]).length;g<v;g++){var w=y[g].call(this,u&&u[g]);null!=w&&(o[g]=w)}}return this._components=o,this._properties=n[this._type],this._alpha=h,c&&(this.__read=f),this},set:"#initialize",_serialize:function(t,e){var i=this.getComponents();return r.serialize(/^(gray|rgb)$/.test(this._type)?i:[this._type].concat(i),t,!0,e)},_changed:function(){this._canvasStyle=null,this._owner&&this._owner._changed(65)},_convert:function(t){var e;return this._type===t?this._components.slice():(e=u[this._type+"-"+t])?e.apply(this,this._components):u["rgb-"+t].apply(this,u[this._type+"-rgb"].apply(this,this._components))},convert:function(t){return new F(t,this._convert(t),this._alpha)},getType:function(){return this._type},setType:function(t){this._components=this._convert(t),this._properties=n[t],this._type=t},getComponents:function(){var t=this._components.slice();return null!=this._alpha&&t.push(this._alpha),t},getAlpha:function(){return null!=this._alpha?this._alpha:1},setAlpha:function(t){this._alpha=null==t?null:Math.min(Math.max(t,0),1),this._changed()},hasAlpha:function(){return null!=this._alpha},equals:function(t){var e=r.isPlainValue(t,!0)?F.read(arguments):t;return e===this||e&&this._class===e._class&&this._type===e._type&&this.getAlpha()===e.getAlpha()&&r.equals(this._components,e._components)||!1},toString:function(){for(var t=this._properties,e=[],i="gradient"===this._type,n=h.instance,r=0,s=t.length;r<s;r++){var a=this._components[r];null!=a&&e.push(t[r]+": "+(i?a:n.number(a)))}return null!=this._alpha&&e.push("alpha: "+n.number(this._alpha)),"{ "+e.join(", ")+" }"},toCSS:function(t){function e(t){return Math.round(255*(t<0?0:t>1?1:t))}var i=this._convert("rgb"),n=t||null==this._alpha?1:this._alpha;return i=[e(i[0]),e(i[1]),e(i[2])],n<1&&i.push(n<0?0:n),t?"#"+((1<<24)+(i[0]<<16)+(i[1]<<8)+i[2]).toString(16).slice(1):(4==i.length?"rgba(":"rgb(")+i.join(",")+")"},toCanvasStyle:function(t,e){if(this._canvasStyle)return this._canvasStyle;if("gradient"!==this._type)return this._canvasStyle=this.toCSS();var i,n=this._components,r=n[0],s=r._stops,a=n[1],o=n[2],h=n[3],u=e&&e.inverted();if(u&&(a=u._transformPoint(a),o=u._transformPoint(o),h&&(h=u._transformPoint(h))),r._radial){var l=o.getDistance(a);if(h){var c=h.subtract(a);c.getLength()>l&&(h=a.add(c.normalize(l-.1)))}var f=h||a;i=t.createRadialGradient(f.x,f.y,0,a.x,a.y,l)}else i=t.createLinearGradient(a.x,a.y,o.x,o.y);for(var d=0,_=s.length;d<_;d++){var g=s[d],v=g._offset;i.addColorStop(null==v?d/(_-1):v,g._color.toCanvasStyle())}return this._canvasStyle=i},transform:function(t){if("gradient"===this._type){for(var e=this._components,i=1,n=e.length;i<n;i++){var r=e[i];t._transformPoint(r,r,!0)}this._changed()}},statics:{_types:n,random:function(){var t=Math.random;return new F(t(),t(),t())}}})},new function(){var t={add:function(t,e){return t+e},subtract:function(t,e){return t-e},multiply:function(t,e){return t*e},divide:function(t,e){return t/e}};return r.each(t,function(t,e){this[e]=function(e){e=F.read(arguments);for(var i=this._type,n=this._components,r=e._convert(i),s=0,a=n.length;s<a;s++)r[s]=t(n[s],r[s]);return new F(i,r,null!=this._alpha?t(this._alpha,e.getAlpha()):null)}},{})}),R=r.extend({_class:"Gradient",initialize:function(t,e){this._id=l.get(),t&&r.isPlainObject(t)&&(this.set(t),t=e=null),null==this._stops&&this.setStops(t||["white","black"]),null==this._radial&&this.setRadial("string"==typeof e&&"radial"===e||e||!1)},_serialize:function(t,e){return e.add(this,function(){return r.serialize([this._stops,this._radial],t,!0,e)})},_changed:function(){for(var t=0,e=this._owners&&this._owners.length;t<e;t++)this._owners[t]._changed()},_addOwner:function(t){this._owners||(this._owners=[]),this._owners.push(t)},_removeOwner:function(t){var i=this._owners?this._owners.indexOf(t):-1;-1!=i&&(this._owners.splice(i,1),this._owners.length||(this._owners=e))},clone:function(){for(var t=[],e=0,i=this._stops.length;e<i;e++)t[e]=this._stops[e].clone();return new R(t,this._radial)},getStops:function(){return this._stops},setStops:function(t){if(t.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var i=this._stops;if(i)for(var n=0,r=i.length;n<r;n++)i[n]._owner=e;for(var n=0,r=(i=this._stops=q.readList(t,0,{clone:!0})).length;n<r;n++)i[n]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(t){this._radial=t,this._changed()},equals:function(t){if(t===this)return!0;if(t&&this._class===t._class){var e=this._stops,i=t._stops,n=e.length;if(n===i.length){for(var r=0;r<n;r++)if(!e[r].equals(i[r]))return!1;return!0}}return!1}}),q=r.extend({_class:"GradientStop",initialize:function(t,i){var n=t,r=i;"object"==typeof t&&i===e&&(Array.isArray(t)&&"number"!=typeof t[0]?(n=t[0],r=t[1]):("color"in t||"offset"in t||"rampPoint"in t)&&(n=t.color,r=t.offset||t.rampPoint||0)),this.setColor(n),this.setOffset(r)},clone:function(){return new q(this._color.clone(),this._offset)},_serialize:function(t,e){var i=this._color,n=this._offset;return r.serialize(null==n?[i]:[i,n],t,!0,e)},_changed:function(){this._owner&&this._owner._changed(65)},getOffset:function(){return this._offset},setOffset:function(t){this._offset=t,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){var t=F.read(arguments,0,{clone:!0});t&&(t._owner=this),this._color=t,this._changed()},equals:function(t){return t===this||t&&this._class===t._class&&this._color.equals(t._color)&&this._offset==t._offset||!1}}),V=r.extend(new function(){var t={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new c,selectedColor:null},i=r.set({},t,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),n=r.set({},i,{fillColor:new F}),s={strokeWidth:97,strokeCap:97,strokeJoin:97,strokeScaling:105,miterLimit:97,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},a={beans:!0},o={_class:"Style",beans:!0,initialize:function(e,r,s){this._values={},this._owner=r,this._project=r&&r._project||s||paper.project,this._defaults=!r||r instanceof x?i:r instanceof j?n:t,e&&this.set(e)}};return r.each(i,function(t,i){var n=/Color$/.test(i),h="shadowOffset"===i,u=r.capitalize(i),l=s[i],f="set"+u,d="get"+u;o[f]=function(t){var r=this._owner,s=r&&r._children;if(s&&s.length>0&&!(r instanceof N))for(var a=0,o=s.length;a<o;a++)s[a]._style[f](t);else if(i in this._defaults){var h=this._values[i];h!==t&&(n&&(h&&h._owner!==e&&(h._owner=e),t&&t.constructor===F&&(t._owner&&(t=t.clone()),t._owner=r)),this._values[i]=t,r&&r._changed(l||65))}},o[d]=function(t){var s,a=this._owner,o=a&&a._children;if(i in this._defaults&&(!o||!o.length||t||a instanceof N))if((s=this._values[i])===e)(s=this._defaults[i])&&s.clone&&(s=s.clone());else{var u=n?F:h?c:null;!u||s&&s.constructor===u||(this._values[i]=s=u.read([s],0,{readNull:!0,clone:!0}),s&&n&&(s._owner=a))}else if(o)for(var l=0,f=o.length;l<f;l++){var _=o[l]._style[d]();if(l){if(!r.equals(s,_))return e}else s=_}return s},a[d]=function(t){return this._style[d](t)},a[f]=function(t){this._style[f](t)}}),r.each({Font:"FontFamily",WindingRule:"FillRule"},function(t,e){var i="get"+e,n="set"+e;o[i]=a[i]="#get"+t,o[n]=a[n]="#set"+t}),w.inject(a),o},{set:function(t){var e=t instanceof V,i=e?t._values:t;if(i)for(var n in i)if(n in this._defaults){var r=i[n];this[n]=r&&e&&r.clone?r.clone():r}},equals:function(t){function i(t,i,n){var s=t._values,a=i._values,o=i._defaults;for(var h in s){var u=s[h],l=a[h];if(!(n&&h in a||r.equals(u,l===e?o[h]:l)))return!1}return!0}return t===this||t&&this._class===t._class&&i(this,t)&&i(t,this,!0)||!1},hasFill:function(){var t=this.getFillColor();return!!t&&t.alpha>0},hasStroke:function(){var t=this.getStrokeColor();return!!t&&t.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var t=this.getShadowColor();return!!t&&t.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var t=this.getFontSize();return this.getFontWeight()+" "+t+(/[a-z]/i.test(t+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function t(){var e=t.base.call(this),i=this.getFontSize();return/pt|em|%|px/.test(i)&&(i=this.getView().getPixelSize(i)),null!=e?e:1.2*i}}),H=new function(){function t(t,e,i,n){for(var r=["","webkit","moz","Moz","ms","o"],s=e[0].toUpperCase()+e.substring(1),a=0;a<6;a++){var o=r[a],h=o?o+s:e;if(h in t){if(!i)return t[h];t[h]=n;break}}}return{getStyles:function(t){var e=t&&9!==t.nodeType?t.ownerDocument:t,i=e&&e.defaultView;return i&&i.getComputedStyle(t,"")},getBounds:function(t,e){var i,n=t.ownerDocument,r=n.body,s=n.documentElement;try{i=t.getBoundingClientRect()}catch(t){i={left:0,top:0,width:0,height:0}}var a=i.left-(s.clientLeft||r.clientLeft||0),o=i.top-(s.clientTop||r.clientTop||0);if(!e){var h=n.defaultView;a+=h.pageXOffset||s.scrollLeft||r.scrollLeft,o+=h.pageYOffset||s.scrollTop||r.scrollTop}return new g(a,o,i.width,i.height)},getViewportBounds:function(t){var e=t.ownerDocument,i=e.defaultView,n=e.documentElement;return new g(0,0,i.innerWidth||n.clientWidth,i.innerHeight||n.clientHeight)},getOffset:function(t,e){return H.getBounds(t,e).getPoint()},getSize:function(t){return H.getBounds(t,!0).getSize()},isInvisible:function(t){return H.getSize(t).equals(new d(0,0))},isInView:function(t){return!H.isInvisible(t)&&H.getViewportBounds(t).intersects(H.getBounds(t,!0))},isInserted:function(t){return n.body.contains(t)},getPrefixed:function(e,i){return e&&t(e,i)},setPrefixed:function(e,i,n){if("object"==typeof i)for(var r in i)t(e,r,!0,i[r]);else t(e,i,!0,n)}}},Z={add:function(t,e){if(t)for(var i in e)for(var n=e[i],r=i.split(/[\s,]+/g),s=0,a=r.length;s<a;s++)t.addEventListener(r[s],n,!1)},remove:function(t,e){if(t)for(var i in e)for(var n=e[i],r=i.split(/[\s,]+/g),s=0,a=r.length;s<a;s++)t.removeEventListener(r[s],n,!1)},getPoint:function(t){var e=t.targetTouches?t.targetTouches.length?t.targetTouches[0]:t.changedTouches[0]:t;return new c(e.pageX||e.clientX+n.documentElement.scrollLeft,e.pageY||e.clientY+n.documentElement.scrollTop)},getTarget:function(t){return t.target||t.srcElement},getRelatedTarget:function(t){return t.relatedTarget||t.toElement},getOffset:function(t,e){return Z.getPoint(t).subtract(H.getOffset(e||Z.getTarget(t)))}};Z.requestAnimationFrame=new function(){function t(){var e=s;s=[];for(var i=0,a=e.length;i<a;i++)e[i]();(r=n&&s.length)&&n(t)}var e,n=H.getPrefixed(i,"requestAnimationFrame"),r=!1,s=[];return function(i){s.push(i),n?r||(n(t),r=!0):e||(e=setInterval(t,1e3/60))}};var U=r.extend(s,{_class:"View",initialize:function t(e,r){function s(t){return r[t]||parseInt(r.getAttribute(t),10)}function o(){var t=H.getSize(r);return t.isNaN()||t.isZero()?new d(s("width"),s("height")):t}var h;if(i&&r){this._id=r.getAttribute("id"),null==this._id&&r.setAttribute("id",this._id="view-"+t._id++),Z.add(r,this._viewEvents);if(H.setPrefixed(r.style,{userDrag:"none",userSelect:"none",touchCallout:"none",contentZooming:"none",tapHighlightColor:"rgba(0,0,0,0)"}),a.hasAttribute(r,"resize")){var u=this;Z.add(i,this._windowEvents={resize:function(){u.setViewSize(o())}})}if(h=o(),a.hasAttribute(r,"stats")&&"undefined"!=typeof Stats){this._stats=new Stats;var l=this._stats.domElement,c=l.style,f=H.getOffset(r);c.position="absolute",c.left=f.x+"px",c.top=f.y+"px",n.body.appendChild(l)}}else h=new d(r),r=null;this._project=e,this._scope=e._scope,this._element=r,this._pixelRatio||(this._pixelRatio=i&&i.devicePixelRatio||1),this._setElementSize(h.width,h.height),this._viewSize=h,t._views.push(this),t._viewsById[this._id]=this,(this._matrix=new p)._owner=this,t._focused||(t._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!paper.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;U._focused===this&&(U._focused=null),U._views.splice(U._views.indexOf(this),1),delete U._viewsById[this._id];var t=this._project;return t._view===this&&(t._view=null),Z.remove(this._element,this._viewEvents),Z.remove(i,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:r.each(w._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(t){this[t]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(t){this._autoUpdate=t,t&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var t=this;Z.requestAnimationFrame(function(){if(t._requested=!1,t._animate){t.requestUpdate();var e=t._element;H.getPrefixed(n,"hidden")&&"true"!==a.getAttribute(e,"keepalive")||!H.isInView(e)||t._handleFrame()}t._autoUpdate&&t.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){paper=this._scope;var t=Date.now()/1e3,e=this._last?t-this._last:0;this._last=t,this.emit("frame",new r({delta:e,time:this._time+=e,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(t,e){var i=this._frameItems;e?(i[t._id]={item:t,time:0,count:0},1==++this._frameItemCount&&this.on("frame",this._handleFrameItems)):(delete i[t._id],0==--this._frameItemCount&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(t){for(var e in this._frameItems){var i=this._frameItems[e];i.item.emit("frame",new r(t,{time:i.time+=t.delta,count:i.count++}))}},_changed:function(){this._project._changed(2049),this._bounds=this._decomposed=e},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return 72*this._pixelRatio},getViewSize:function(){var t=this._viewSize;return new _(t.width,t.height,this,"setViewSize")},setViewSize:function(){var t=d.read(arguments),e=t.subtract(this._viewSize);e.isZero()||(this._setElementSize(t.width,t.height),this._viewSize.set(t),this._changed(),this.emit("resize",{size:t,delta:e}),this._autoUpdate&&this.update())},_setElementSize:function(t,e){var i=this._element;i&&(i.width!==t&&(i.width=t),i.height!==e&&(i.height=e))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new g(new c,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return H.isInView(this._element)},isInserted:function(){return H.isInserted(this._element)},getPixelSize:function(t){var e,i=this._element;if(i){var r=i.parentNode,s=n.createElement("div");s.style.fontSize=t,r.appendChild(s),e=parseFloat(H.getStyles(s).fontSize),r.removeChild(s)}else e=parseFloat(e);return e},getTextWidth:function(t,e){return 0}},r.each(["rotate","scale","shear","skew"],function(t){var e="rotate"===t;this[t]=function(){var i=(e?r:c).read(arguments),n=c.read(arguments,0,{readNull:!0});return this.transform((new p)[t](i,n||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var t=new p;return this.transform(t.translate.apply(t,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var t=c.read(arguments);this.translate(this.getCenter().subtract(t))},getZoom:function(){var t=this._decompose(),e=t&&t.scaling;return e?(e.x+e.y)/2:0},setZoom:function(t){this.transform((new p).scale(t/this.getZoom(),this.getCenter()))},getRotation:function(){var t=this._decompose();return t&&t.rotation},setRotation:function(t){var e=this.getRotation();null!=e&&null!=t&&this.rotate(t-e)},getScaling:function(){var t=this._decompose(),i=t&&t.scaling;return i?new f(i.x,i.y,this,"setScaling"):e},setScaling:function(){var t=this.getScaling(),e=c.read(arguments,0,{clone:!0,readNull:!0});t&&e&&this.scale(e.x/t.x,e.y/t.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.initialize.apply(t,arguments)},transform:function(t){this._matrix.append(t)},scrollBy:function(){this.translate(c.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(c.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(c.read(arguments))},getEventPoint:function(t){return this.viewToProject(Z.getOffset(t,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(t,e){return n&&"string"==typeof e&&(e=n.getElementById(e)),new(i?W:U)(t,e)}}},new function(){function t(t){var e=Z.getTarget(t);return e.getAttribute&&U._viewsById[e.getAttribute("id")]}function e(){var t=U._focused;if(!t||!t.isVisible())for(var e=0,i=U._views.length;e<i;e++)if((t=U._views[e]).isVisible()){U._focused=h=t;break}}function r(t,e,i){t._handleMouseEvent("mousemove",e,i)}function s(t,e,i,n,r,s,a){function o(t,i){if(t.responds(i)){if(h||(h=new X(i,n,r,e||t,s?r.subtract(s):null)),t.emit(i,h)&&(I=!0,h.prevented&&(M=!0),h.stopped))return u=!0}else{var a=T[i];if(a)return o(t,a)}}for(var h,u=!1;t&&t!==a&&!o(t,i);)t=t._parent;return u}function a(t,e,i,n,r,a){return t._project.removeOn(i),M=I=!1,b&&s(b,null,i,n,r,a)||e&&e!==b&&!e.isDescendant(b)&&s(e,null,i,n,r,a,b)||s(t,b||e||t,i,n,r,a)}if(i){var o,h,u,l,c,f=!1,d=!1,_=i.navigator;_.pointerEnabled||_.msPointerEnabled?(u="pointerdown MSPointerDown",l="pointermove MSPointerMove",c="pointerup pointercancel MSPointerUp MSPointerCancel"):(u="touchstart",l="touchmove",c="touchend touchcancel","ontouchstart"in i&&_.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(u+=" mousedown",l+=" mousemove",c+=" mouseup"));var g={},v={mouseout:function(t){var e=U._focused,i=Z.getRelatedTarget(t);if(e&&(!i||"HTML"===i.nodeName)){var n=Z.getOffset(t,e._element),s=n.x,a=Math.abs,o=a(s),h=o-(1<<25);n.x=a(h)<o?h*(s<0?-1:1):s,r(e,t,e.viewToProject(n))}},scroll:e};g[u]=function(e){var i=U._focused=t(e);f||(f=!0,i._handleMouseEvent("mousedown",e))},v[l]=function(i){var n=U._focused;if(!d){var s=t(i);s?n!==s&&(n&&r(n,i),o||(o=n),n=U._focused=h=s):h&&h===n&&(o&&!o.isInserted()&&(o=null),n=U._focused=o,o=null,e())}n&&r(n,i)},v[u]=function(){d=!0},v[c]=function(t){var e=U._focused;e&&f&&e._handleMouseEvent("mouseup",t),d=f=!1},Z.add(n,v),Z.add(i,{load:e});var p,m,y,w,x,b,C,S,P,I=!1,M=!1,T={doubleclick:"click",mousedrag:"mousemove"},z=!1,k={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:g,_handleMouseEvent:function(t,e,i){function n(t){return r.virtual[t]||l.responds(t)||u&&u.responds(t)}var r=this._itemEvents,o=r.native[t],h="mousemove"===t,u=this._scope.tool,l=this;h&&f&&n("mousedrag")&&(t="mousedrag"),i||(i=this.getEventPoint(e));var c=this.getBounds().contains(i),d=o&&c&&l._project.hitTest(i,{tolerance:0,fill:!0,stroke:!0}),_=d&&d.item||null,g=!1,v={};if(v[t.substr(5)]=!0,o&&_!==x&&(x&&s(x,null,"mouseleave",e,i),_&&s(_,null,"mouseenter",e,i),x=_),z^c&&(s(this,null,c?"mouseenter":"mouseleave",e,i),p=c?this:null,g=!0),!c&&!v.drag||i.equals(y)||(a(this,_,h?t:"mousemove",e,i,y),g=!0),z=c,v.down&&c||v.up&&m){if(a(this,_,t,e,i,m),v.down){if(P=_===C&&Date.now()-S<300,w=C=_,!M&&_){for(var T=_;T&&!T.responds("mousedrag");)T=T._parent;T&&(b=_)}m=i}else v.up&&(M||_!==w||(S=Date.now(),a(this,_,P?"doubleclick":"click",e,i,m),P=!1),w=b=null);z=!1,g=!0}y=i,g&&u&&(I=u._handleMouseEvent(t,e,i,v)||I),(I&&!v.move||v.down&&n("mouseup"))&&e.preventDefault()},_handleKeyEvent:function(t,e,i,n){function r(r){r.responds(t)&&(paper=a,r.emit(t,s=s||new J(t,e,i,n)))}var s,a=this._scope,o=a.tool;this.isVisible()&&(r(this),o&&o.responds(t)&&r(o))},_countItemEvent:function(t,e){var i=this._itemEvents,n=i.native,r=i.virtual;for(var s in k)n[s]=(n[s]||0)+(k[s][t]||0)*e;r[t]=(r[t]||0)+e},statics:{updateFocus:e}}}}),W=U.extend({_class:"CanvasView",initialize:function(t,e){if(!(e instanceof i.HTMLCanvasElement)){var n=d.read(arguments,1);if(n.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+r.slice(arguments,1));e=Q.getCanvas(n)}var s=this._context=e.getContext("2d");if(s.save(),this._pixelRatio=1,!/^off|false$/.test(a.getAttribute(e,"hidpi"))){var o=i.devicePixelRatio||1,h=H.getPrefixed(s,"backingStorePixelRatio")||1;this._pixelRatio=o/h}U.call(this,t,e),this._needsUpdate=!0},remove:function t(){return this._context.restore(),t.base.call(this)},_setElementSize:function t(e,i){var n=this._pixelRatio;if(t.base.call(this,e*n,i*n),1!==n){var r=this._element,s=this._context;if(!a.hasAttribute(r,"resize")){var o=r.style;o.width=e+"px",o.height=i+"px"}s.restore(),s.save(),s.scale(n,n)}},getPixelSize:function t(e){var i,n=paper.agent;if(n&&n.firefox)i=t.base.call(this,e);else{var r=this._context,s=r.font;r.font=e+" serif",i=parseFloat(r.font),r.font=s}return i},getTextWidth:function(t,e){var i=this._context,n=i.font,r=0;i.font=t;for(var s=0,a=e.length;s<a;s++)r=Math.max(r,i.measureText(e[s]).width);return i.font=n,r},update:function(){if(!this._needsUpdate)return!1;var t=this._project,e=this._context,i=this._viewSize;return e.clearRect(0,0,i.width+1,i.height+1),t&&t.draw(e,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),G=r.extend({_class:"Event",initialize:function(t){this.event=t,this.type=t&&t.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return $.modifiers}}),J=G.extend({_class:"KeyEvent",initialize:function(t,e,i,n){this.type=t,this.event=e,this.key=i,this.character=n},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),$=new function(){function t(t){var i=t.key||t.keyIdentifier;return i=/^U\+/.test(i)?String.fromCharCode(parseInt(i.substr(2),16)):/^Arrow[A-Z]/.test(i)?i.substr(5):"Unidentified"===i||i===e?String.fromCharCode(t.keyCode):i,h[i]||(i.length>1?r.hyphenate(i):i.toLowerCase())}function s(t,e,i,n){var o,h=U._focused;if(l[e]=t,t?c[e]=i:delete c[e],e.length>1&&(o=r.camelize(e))in f){f[o]=t;var u=paper&&paper.agent;if("meta"===o&&u&&u.mac)if(t)a={};else{for(var d in a)d in c&&s(!1,d,a[d],n);a=null}}else t&&a&&(a[e]=i);h&&h._handleKeyEvent(t?"keydown":"keyup",n,e,i)}var a,o,h={"\t":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},u={tab:"\t",space:" ",enter:"\r"},l={},c={},f=new r({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var t=paper&&paper.agent;return t&&t.mac?this.meta:this.control}}});return Z.add(n,{keydown:function(e){var i=t(e),n=paper&&paper.agent;i.length>1||n&&n.chrome&&(e.altKey||n.mac&&e.metaKey||!n.mac&&e.ctrlKey)?s(!0,i,u[i]||(i.length>1?"":i),e):o=i},keypress:function(e){if(o){var i=t(e),n=e.charCode,r=n>=32?String.fromCharCode(n):i.length>1?"":i;i!==o&&(i=r.toLowerCase()),s(!0,i,r,e),o=null}},keyup:function(e){var i=t(e);i in c&&s(!1,i,c[i],e)}}),Z.add(i,{blur:function(t){for(var e in c)s(!1,e,c[e],t)}}),{modifiers:f,isDown:function(t){return!!l[t]}}},X=G.extend({_class:"MouseEvent",initialize:function(t,e,i,n,r){this.type=t,this.event=e,this.point=i,this.target=n,this.delta=r},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),Y=G.extend({_class:"ToolEvent",_item:null,initialize:function(t,e,i){this.tool=t,this.type=e,this.event=i},_choosePoint:function(t,e){return t||(e?e.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(t){this._point=t},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(t){this._lastPoint=t},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(t){this._downPoint=t},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(t){this._middlePoint=t},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(t){this._delta=t},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(t){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=t},getItem:function(){if(!this._item){var t=this.tool._scope.project.hitTest(this.getPoint());if(t){for(var e=t.item,i=e._parent;/^(Group|CompoundPath)$/.test(i._class);)e=i,i=i._parent;this._item=e}}return this._item},setItem:function(t){this._item=t},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),K=(o.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(t){o.call(this),this._moveCount=-1,this._downCount=-1,this.set(t)},getMinDistance:function(){return this._minDistance},setMinDistance:function(t){this._minDistance=t,null!=t&&null!=this._maxDistance&&t>this._maxDistance&&(this._maxDistance=t)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(t){this._maxDistance=t,null!=this._minDistance&&null!=t&&t<this._minDistance&&(this._minDistance=t)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(t){this._minDistance=this._maxDistance=t},_handleMouseEvent:function(t,e,i,n){function r(t,e){var r=i,s=a?c._point:c._downPoint||r;if(a){if(c._moveCount&&r.equals(s))return!1;if(s&&(null!=t||null!=e)){var o=r.subtract(s),h=o.getLength();if(h<(t||0))return!1;e&&(r=s.add(o.normalize(Math.min(h,e))))}c._moveCount++}return c._point=r,c._lastPoint=s||r,n.down&&(c._moveCount=-1,c._downPoint=r,c._downCount++),!0}function s(){o&&(l=c.emit(t,new Y(c,t,e))||l)}paper=this._scope,n.drag&&!this.responds(t)&&(t="mousemove");var a=n.move||n.drag,o=this.responds(t),h=this.minDistance,u=this.maxDistance,l=!1,c=this;if(n.down)r(),s();else if(n.up)r(null,u),s();else if(o)for(;r(h,u);)s();return l}}),{request:function(e){var i=new t.XMLHttpRequest;return i.open((e.method||"get").toUpperCase(),e.url,r.pick(e.async,!0)),e.mimeType&&i.overrideMimeType(e.mimeType),i.onload=function(){var t=i.status;0===t||200===t?e.onLoad&&e.onLoad.call(i,i.responseText):i.onerror()},i.onerror=function(){var t=i.status,n='Could not load "'+e.url+'" (Status: '+t+")";if(!e.onError)throw new Error(n);e.onError(n,t)},i.send(null)}}),Q={canvases:[],getCanvas:function(t,e){if(!i)return null;var r,s=!0;"object"==typeof t&&(e=t.height,t=t.width),this.canvases.length?r=this.canvases.pop():(r=n.createElement("canvas"),s=!1);var a=r.getContext("2d",{"willReadFrequently":true});if(!a)throw new Error("Canvas "+r+" is unable to provide a 2D context.");return r.width===t&&r.height===e?s&&a.clearRect(0,0,t+1,e+1):(r.width=t,r.height=e),a.save(),r},getContext:function(t,e){var i=this.getCanvas(t,e);return i?i.getContext("2d"):null},release:function(t){var e=t&&t.canvas?t.canvas:t;e&&e.getContext&&(e.getContext("2d").restore(),this.canvases.push(e))}},tt=new function(){function t(t,e,i){return.2989*t+.587*e+.114*i}function e(e,i,n,r){var s=r-t(e,i,n),r=t(d=e+s,_=i+s,g=n+s),a=v(d,_,g),o=p(d,_,g);if(a<0){var h=r-a;d=r+(d-r)*r/h,_=r+(_-r)*r/h,g=r+(g-r)*r/h}if(o>255){var u=255-r,l=o-r;d=r+(d-r)*u/l,_=r+(_-r)*u/l,g=r+(g-r)*u/l}}function i(t,e,i){return p(t,e,i)-v(t,e,i)}function n(t,e,i,n){var r,s=[t,e,i],a=p(t,e,i),o=v(t,e,i);r=0===v(o=o===t?0:o===e?1:2,a=a===t?0:a===e?1:2)?1===p(o,a)?2:1:0,s[a]>s[o]?(s[r]=(s[r]-s[o])*n/(s[a]-s[o]),s[a]=n):s[r]=s[a]=0,s[o]=0,d=s[0],_=s[1],g=s[2]}var s,a,o,h,u,l,c,f,d,_,g,v=Math.min,p=Math.max,m=Math.abs,y={multiply:function(){d=u*s/255,_=l*a/255,g=c*o/255},screen:function(){d=u+s-u*s/255,_=l+a-l*a/255,g=c+o-c*o/255},overlay:function(){d=u<128?2*u*s/255:255-2*(255-u)*(255-s)/255,_=l<128?2*l*a/255:255-2*(255-l)*(255-a)/255,g=c<128?2*c*o/255:255-2*(255-c)*(255-o)/255},"soft-light":function(){var t=s*u/255;d=t+u*(255-(255-u)*(255-s)/255-t)/255,_=(t=a*l/255)+l*(255-(255-l)*(255-a)/255-t)/255,g=(t=o*c/255)+c*(255-(255-c)*(255-o)/255-t)/255},"hard-light":function(){d=s<128?2*s*u/255:255-2*(255-s)*(255-u)/255,_=a<128?2*a*l/255:255-2*(255-a)*(255-l)/255,g=o<128?2*o*c/255:255-2*(255-o)*(255-c)/255},"color-dodge":function(){d=0===u?0:255===s?255:v(255,255*u/(255-s)),_=0===l?0:255===a?255:v(255,255*l/(255-a)),g=0===c?0:255===o?255:v(255,255*c/(255-o))},"color-burn":function(){d=255===u?255:0===s?0:p(0,255-255*(255-u)/s),_=255===l?255:0===a?0:p(0,255-255*(255-l)/a),g=255===c?255:0===o?0:p(0,255-255*(255-c)/o)},darken:function(){d=u<s?u:s,_=l<a?l:a,g=c<o?c:o},lighten:function(){d=u>s?u:s,_=l>a?l:a,g=c>o?c:o},difference:function(){(d=u-s)<0&&(d=-d),(_=l-a)<0&&(_=-_),(g=c-o)<0&&(g=-g)},exclusion:function(){d=u+s*(255-u-u)/255,_=l+a*(255-l-l)/255,g=c+o*(255-c-c)/255},hue:function(){n(s,a,o,i(u,l,c)),e(d,_,g,t(u,l,c))},saturation:function(){n(u,l,c,i(s,a,o)),e(d,_,g,t(u,l,c))},luminosity:function(){e(u,l,c,t(s,a,o))},color:function(){e(s,a,o,t(u,l,c))},add:function(){d=v(u+s,255),_=v(l+a,255),g=v(c+o,255)},subtract:function(){d=p(u-s,0),_=p(l-a,0),g=p(c-o,0)},average:function(){d=(u+s)/2,_=(l+a)/2,g=(c+o)/2},negation:function(){d=255-m(255-s-u),_=255-m(255-a-l),g=255-m(255-o-c)}},w=this.nativeModes=r.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(t){this[t]=!0},{}),x=Q.getContext(1,1);x&&(r.each(y,function(t,e){var i="darken"===e,n=!1;x.save();try{x.fillStyle=i?"#300":"#a00",x.fillRect(0,0,1,1),x.globalCompositeOperation=e,x.globalCompositeOperation===e&&(x.fillStyle=i?"#a00":"#300",x.fillRect(0,0,1,1),n=x.getImageData(0,0,1,1).data[0]!==i?170:51)}catch(t){}x.restore(),w[e]=n}),Q.release(x)),this.process=function(t,e,i,n,r){var v=e.canvas,p="normal"===t;if(p||w[t])i.save(),i.setTransform(1,0,0,1,0,0),i.globalAlpha=n,p||(i.globalCompositeOperation=t),i.drawImage(v,r.x,r.y),i.restore();else{var m=y[t];if(!m)return;for(var x=i.getImageData(r.x,r.y,v.width,v.height),b=x.data,C=e.getImageData(0,0,v.width,v.height).data,S=0,P=b.length;S<P;S+=4){s=C[S],u=b[S],a=C[S+1],l=b[S+1],o=C[S+2],c=b[S+2],h=C[S+3],f=b[S+3],m();var I=h*n/255,M=1-I;b[S]=I*d+M*u,b[S+1]=I*_+M*l,b[S+2]=I*g+M*c,b[S+3]=h*n+M*f}i.putImageData(x,r.x,r.y)}}},et=new function(){function t(t,e,i){for(var n in e){var r=e[n],a=s[n];"number"==typeof r&&i&&(r=i.number(r)),a?t.setAttributeNS(a,n,r):t.setAttribute(n,r)}return t}var e="http://www.w3.org/2000/svg",i="http://www.w3.org/2000/xmlns",r="http://www.w3.org/1999/xlink",s={href:r,xlink:i,xmlns:i+"/","xmlns:xlink":i+"/"};return{svg:e,xmlns:i,xlink:r,create:function(i,r,s){return t(n.createElementNS(e,i),r,s)},get:function(t,e){var i=s[e],n=i?t.getAttributeNS(i,e):t.getAttribute(e);return"null"===n?null:n},set:t}},it=r.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(t,e){return!e&&(t instanceof A||t instanceof C||t instanceof j)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(t,e){var i=r.capitalize(e),n=t[2];this[e]={type:t[1],property:e,attribute:t[0],toSVG:n,fromSVG:n&&r.each(n,function(t,e){this[t]=e},{}),exportFilter:t[3],get:"get"+i,set:"set"+i}},{});return new function(){function e(t,e,i){var n=new r,s=t.getTranslation();if(e){var a=(t=t._shiftless())._inverseTransform(s);n[i?"cx":"x"]=a.x,n[i?"cy":"y"]=a.y,s=null}if(!t.isIdentity()){var o=t.decompose();if(o){var h=[],l=o.rotation,c=o.scaling,f=o.skewing;s&&!s.isZero()&&h.push("translate("+v.point(s)+")"),l&&h.push("rotate("+v.number(l)+")"),u.isZero(c.x-1)&&u.isZero(c.y-1)||h.push("scale("+v.point(c)+")"),f.x&&h.push("skewX("+v.number(f.x)+")"),f.y&&h.push("skewY("+v.number(f.y)+")"),n.transform=h.join(" ")}else n.transform="matrix("+t.getValues().join(",")+")"}return n}function i(t,i){for(var n=e(t._matrix),r=t._children,s=et.create("g",n,v),a=0,o=r.length;a<o;a++){var h=r[a],u=d(h,i);if(u)if(h.isClipMask()){var l=et.create("clipPath");l.appendChild(u),c(h,l,"clip"),et.set(s,{"clip-path":"url(#"+l.id+")"})}else s.appendChild(u)}return s}function n(t){var i=t._type,n=t._radius,r=e(t._matrix,!0,"rectangle"!==i);if("rectangle"===i){i="rect";var s=t._size,a=s.width,o=s.height;r.x-=a/2,r.y-=o/2,r.width=a,r.height=o,n.isZero()&&(n=null)}return n&&("circle"===i?r.r=n:(r.rx=n.width,r.ry=n.height)),et.create(i,r,v)}function s(t){var e=o(t,"color");if(!e){var i,n=t.getGradient(),r=n._radial,s=t.getOrigin(),a=t.getDestination();if(r){i={cx:s.x,cy:s.y,r:s.getDistance(a)};var h=t.getHighlight();h&&(i.fx=h.x,i.fy=h.y)}else i={x1:s.x,y1:s.y,x2:a.x,y2:a.y};i.gradientUnits="userSpaceOnUse",e=et.create((r?"radial":"linear")+"Gradient",i,v);for(var u=n._stops,l=0,f=u.length;l<f;l++){var d=u[l],_=d._color,g=_.getAlpha(),p=d._offset;i={offset:null==p?l/(f-1):p},_&&(i["stop-color"]=_.toCSS(!0)),g<1&&(i["stop-opacity"]=g),e.appendChild(et.create("stop",i,v))}c(t,e,"color")}return"url(#"+e.id+")"}function a(t,e,i){var n={},a=!i&&t.getParent(),o=[];return null!=t._name&&(n.id=t._name),r.each(it,function(e){var i=e.get,h=e.type,u=t[i]();if(e.exportFilter?e.exportFilter(t,u):!a||!r.equals(a[i](),u)){if("color"===h&&null!=u){var l=u.getAlpha();l<1&&(n[e.attribute+"-opacity"]=l)}"style"===h?o.push(e.attribute+": "+u):n[e.attribute]=null==u?"none":"color"===h?u.gradient?s(u,t):u.toCSS(!0):"array"===h?u.join(","):"lookup"===h?e.toSVG[u]:u}}),o.length&&(n.style=o.join(";")),1===n.opacity&&delete n.opacity,t._visible||(n.visibility="hidden"),et.set(e,n,v)}function o(t,e){return m||(m={ids:{},svgs:{}}),t&&m.svgs[e+"-"+(t._id||t.__id||(t.__id=l.get("svg")))]}function c(t,e,i){m||o();var n=m.ids[i]=(m.ids[i]||0)+1;e.id=i+"-"+n,m.svgs[i+"-"+(t._id||t.__id)]=e}function f(e,i){var n=e,r=null;if(m){n="svg"===e.nodeName.toLowerCase()&&e;for(var s in m.svgs)r||(n||(n=et.create("svg")).appendChild(e),r=n.insertBefore(et.create("defs"),n.firstChild)),r.appendChild(m.svgs[s]);m=null}return i.asString?(new t.XMLSerializer).serializeToString(n):n}function d(t,e,i){var n=x[t._class],r=n&&n(t,e);if(r){var s=e.onExport;s&&(r=s(t,r,e)||r);var o=JSON.stringify(t._data);o&&"{}"!==o&&"null"!==o&&r.setAttribute("data-paper-data",o)}return r&&a(t,r,i)}function _(t){return t||(t={}),v=new h(t.precision),t}var v,m,x={Group:i,Layer:i,Raster:function(t,i){var n=e(t._matrix,!0),r=t.getSize(),s=t.getImage();return n.x-=r.width/2,n.y-=r.height/2,n.width=r.width,n.height=r.height,n.href=0==i.embedImages&&s&&s.src||t.toDataURL(),et.create("image",n,v)},Path:function(t,i){var r=i.matchShapes;if(r){var s=t.toShape(!1);if(s)return n(s)}var a,o=t._segments,h=o.length,u=e(t._matrix);if(r&&h>=2&&!t.hasHandles())if(h>2){a=t._closed?"polygon":"polyline";for(var l=[],c=0;c<h;c++)l.push(v.point(o[c]._point));u.points=l.join(" ")}else{a="line";var f=o[0]._point,d=o[1]._point;u.set({x1:f.x,y1:f.y,x2:d.x,y2:d.y})}else a="path",u.d=t.getPathData(null,i.precision);return et.create(a,u,v)},Shape:n,CompoundPath:function(t,i){var n=e(t._matrix),r=t.getPathData(null,i.precision);return r&&(n.d=r),et.create("path",n,v)},SymbolItem:function(t,i){var n=e(t._matrix,!0),r=t._definition,s=o(r,"symbol"),a=r._item,h=a.getBounds();return s||((s=et.create("symbol",{viewBox:v.rectangle(h)})).appendChild(d(a,i)),c(r,s,"symbol")),n.href="#"+s.id,n.x+=h.x,n.y+=h.y,n.width=h.width,n.height=h.height,n.overflow="visible",et.create("use",n,v)},PointText:function(t){var i=et.create("text",e(t._matrix,!0),v);return i.textContent=t._content,i}};w.inject({exportSVG:function(t){return t=_(t),f(d(this,t,!0),t)}}),y.inject({exportSVG:function(t){t=_(t);var i=this._children,n=this.getView(),s=r.pick(t.bounds,"view"),a=t.matrix||"view"===s&&n._matrix,o=a&&p.read([a]),h="view"===s?new g([0,0],n.getViewSize()):"content"===s?w._getBounds(i,o,{stroke:!0}).rect:g.read([s],0,{readNull:!0}),u={version:"1.1",xmlns:et.svg,"xmlns:xlink":et.xlink};h&&(u.width=h.width,u.height=h.height,(h.x||h.y)&&(u.viewBox=v.rectangle(h)));var l=et.create("svg",u,v),c=l;o&&!o.isIdentity()&&(c=l.appendChild(et.create("g",e(o),v)));for(var m=0,y=i.length;m<y;m++)c.appendChild(d(i[m],t,!0));return f(l,t)}})},new function(){function s(t,e,i,n,r){var s=et.get(t,e),a=null==s?n?null:i?"":0:i?s:parseFloat(s);return/%\s*$/.test(s)?a/100*(r?1:z[/x|^width/.test(e)?"width":"height"]):a}function a(t,e,i,n,r){return e=s(t,e||"x",!1,n,r),i=s(t,i||"y",!1,n,r),!n||null!=e&&null!=i?new c(e,i):null}function o(t,e,i,n,r){return e=s(t,e||"width",!1,n,r),i=s(t,i||"height",!1,n,r),!n||null!=e&&null!=i?new d(e,i):null}function h(t,e,i){return"none"===t?null:"number"===e?parseFloat(t):"array"===e?t?t.split(/[\s,]+/g).map(parseFloat):[]:"color"===e?P(t)||t:"lookup"===e?i[t]:t}function u(t,e,i,n){var r=t.childNodes,s="clippath"===e,a="defs"===e,o=new x,h=o._project,u=h._currentStyle,l=[];if(s||a||(o=b(o,t,n),h._currentStyle=o._style.clone()),n)for(var c=t.querySelectorAll("defs"),f=0,d=c.length;f<d;f++)M(c[f],i,!1);for(var f=0,d=r.length;f<d;f++){var _,g=r[f];1!==g.nodeType||/^defs$/i.test(g.nodeName)||!(_=M(g,i,!1))||_ instanceof I||l.push(_)}return o.addChildren(l),s&&(o=b(o.reduce(),t,n)),h._currentStyle=u,(s||a)&&(o.remove(),o=null),o}function l(t,e){for(var i=t.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),n=[],r=0,s=i.length;r<s;r+=2)n.push(new c(parseFloat(i[r]),parseFloat(i[r+1])));var a=new L(n);return"polygon"===e&&a.closePath(),a}function f(t,e){var i,n=(s(t,"href",!0)||"").substring(1),r="radialgradient"===e;if(n)(i=k[n].getGradient())._radial^r&&((i=i.clone())._radial=r);else{for(var o=t.childNodes,h=[],u=0,l=o.length;u<l;u++){var c=o[u];1===c.nodeType&&h.push(b(new q,c))}i=new R(h,r)}var f,d,_,g="userSpaceOnUse"!==s(t,"gradientUnits",!0);return r?(d=(f=a(t,"cx","cy",!1,g)).add(s(t,"r",!1,!1,g),0),_=a(t,"fx","fy",!0,g)):(f=a(t,"x1","y1",!1,g),d=a(t,"x2","y2",!1,g)),b(new F(i,f,d,_),t)._scaleToBounds=g,null}function _(t,e,i,n){if(t.transform){for(var r=(n.getAttribute(i)||"").split(/\)\s*/g),s=new p,a=0,o=r.length;a<o;a++){var h=r[a];if(!h)break;for(var u=h.split(/\(\s*/),l=u[0],c=u[1].split(/[\s,]+/g),f=0,d=c.length;f<d;f++)c[f]=parseFloat(c[f]);switch(l){case"matrix":s.append(new p(c[0],c[1],c[2],c[3],c[4],c[5]));break;case"rotate":s.rotate(c[0],c[1],c[2]);break;case"translate":s.translate(c[0],c[1]);break;case"scale":s.scale(c);break;case"skewX":s.skew(c[0],0);break;case"skewY":s.skew(0,c[0])}}t.transform(s)}}function v(t,e,i){var n="fill-opacity"===i?"getFillColor":"getStrokeColor",r=t[n]&&t[n]();r&&r.setAlpha(parseFloat(e))}function m(t,i,n){var s=t.attributes[i],a=s&&s.value;if(!a){var o=r.camelize(i);(a=t.style[o])||n.node[o]===n.parent[o]||(a=n.node[o])}return a?"none"===a?null:a:e}function b(t,i,n){if(i.style){var s=i.parentNode,a={node:H.getStyles(i)||{},parent:!n&&!/^defs$/i.test(s.tagName)&&H.getStyles(s)||{}};r.each(N,function(n,r){var s=m(i,r,a);t=s!==e&&n(t,s,r,i,a)||t})}return t}function P(t){var e=t&&t.match(/\((?:["'#]*)([^"')]+)/),n=e&&e[1],r=n&&k[i?n.replace(i.location.href.split("#")[0]+"#",""):n];return r&&r._scaleToBounds&&((r=r.clone())._scaleToBounds=!0),r}function M(t,e,i){var s,a,h,u=t.nodeName.toLowerCase(),l="#document"!==u,c=n.body;i&&l&&(z=paper.getView().getSize(),z=o(t,null,null,!0)||z,s=et.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),a=t.parentNode,h=t.nextSibling,s.appendChild(t),c.appendChild(s));var f=paper.settings,d=f.applyMatrix,_=f.insertItems;f.applyMatrix=!1,f.insertItems=!1;var g=O[u],v=g&&g(t,u,e,i)||null;if(f.insertItems=_,f.applyMatrix=d,v){!l||v instanceof x||(v=b(v,t,i));var p=e.onImport,m=l&&t.getAttribute("data-paper-data");p&&(v=p(t,v,e)||v),e.expandShapes&&v instanceof C&&(v.remove(),v=v.toPath()),m&&(v._data=JSON.parse(m))}return s&&(c.removeChild(s),a&&(h?a.insertBefore(t,h):a.appendChild(t))),i&&(k={},v&&r.pick(e.applyMatrix,d)&&v.matrix.apply(!0,!0)),v}function T(i,r,s){function a(n){try{var a="object"==typeof n?n:(new t.DOMParser).parseFromString(n,"image/svg+xml");if(!a.nodeName)throw a=null,new Error("Unsupported SVG source: "+i);paper=h,u=M(a,r,!0),r&&!1===r.insert||s._insertItem(e,u);var l=r.onLoad;l&&l(u,n)}catch(t){o(t)}}function o(t,e){var i=r.onError;if(!i)throw new Error(t);i(t,e)}if(!i)return null;r="function"==typeof r?{onLoad:r}:r||{};var h=paper,u=null;if("string"!=typeof i||/^.*</.test(i)){if("undefined"!=typeof File&&i instanceof File){var l=new FileReader;return l.onload=function(){a(l.result)},l.onerror=function(){o(l.error)},l.readAsText(i)}a(i)}else{var c=n.getElementById(i);c?a(c):K.request({url:i,async:!0,onLoad:a,onError:o})}return u}var z,k={},O={"#document":function(t,e,i,n){for(var r=t.childNodes,s=0,a=r.length;s<a;s++){var o=r[s];if(1===o.nodeType)return M(o,i,n)}},g:u,svg:u,clippath:u,polygon:l,polyline:l,path:function(t){return A.create(t.getAttribute("d"))},lineargradient:f,radialgradient:f,image:function(t){var e=new S(s(t,"href",!0));return e.on("load",function(){var e=o(t);this.setSize(e);var i=this._matrix._transformPoint(a(t).add(e.divide(2)));this.translate(i)}),e},symbol:function(t,e,i,n){return new I(u(t,e,i,n),!0)},defs:u,use:function(t){var e=(s(t,"href",!0)||"").substring(1),i=k[e],n=a(t);return i?i instanceof I?i.place(n):i.clone().translate(n):null},circle:function(t){return new C.Circle(a(t,"cx","cy"),s(t,"r"))},ellipse:function(t){return new C.Ellipse({center:a(t,"cx","cy"),radius:o(t,"rx","ry")})},rect:function(t){return new C.Rectangle(new g(a(t),o(t)),o(t,"rx","ry"))},line:function(t){return new L.Line(a(t,"x1","y1"),a(t,"x2","y2"))},text:function(t){var e=new E(a(t).add(a(t,"dx","dy")));return e.setContent(t.textContent.trim()||""),e}},N=r.set(r.each(it,function(t){this[t.attribute]=function(e,i){if(e[t.set]&&(e[t.set](h(i,t.type,t.fromSVG)),"color"===t.type)){var n=e[t.get]();if(n&&n._scaleToBounds){var r=e.getBounds();n.transform((new p).translate(r.getPoint()).scale(r.getSize()))}}}},{}),{id:function(t,e){k[e]=t,t.setName&&t.setName(e)},"clip-path":function(t,e){var i=P(e);if(i){if((i=i.clone()).setClipMask(!0),!(t instanceof x))return new x(i,t);t.insertChild(0,i)}},gradientTransform:_,transform:_,"fill-opacity":v,"stroke-opacity":v,visibility:function(t,e){t.setVisible&&t.setVisible("visible"===e)},display:function(t,e){t.setVisible&&t.setVisible(null!==e)},"stop-color":function(t,e){t.setColor&&t.setColor(e)},"stop-opacity":function(t,e){t._color&&t._color.setAlpha(parseFloat(e))},offset:function(t,e){if(t.setOffset){var i=e.match(/(.*)%$/);t.setOffset(i?i[1]/100:parseFloat(e))}},viewBox:function(t,e,i,n,r){var s,a=new g(h(e,"array")),u=o(n,null,null,!0);if(t instanceof x){var l=u?u.divide(a.getSize()):1,c=(new p).scale(l).translate(a.getPoint().negate());s=t}else t instanceof I&&(u&&a.setSize(u),s=t._item);if(s){if("visible"!==m(n,"overflow",r)){var f=new C.Rectangle(a);f.setClipMask(!0),s.addChild(f)}c&&s.transform(c)}}});w.inject({importSVG:function(t,e){return T(t,e,this)}}),y.inject({importSVG:function(t,e){return this.activate(),T(t,e,this)}})},(paper=new(a.inject(r.exports,{Base:r,Numerical:u,Key:$,DomEvent:Z,DomElement:H,document:n,window:i,Symbol:I,PlacedSymbol:P}))).agent.node&&require("./node/extend.js")(paper),"function"==typeof define&&define.amd?define("paper",paper):"object"==typeof module&&module&&(module.exports=paper),paper}.call(this,"object"==typeof self?self:null);
if (typeof NETXUS === 'undefined')
	var NETXUS = function() {};		
	
NETXUS.RectanglePacker = function ( width, height ) {
	
	this.root = {};

	// initialize
	this.reset( width, height );	
}

NETXUS.RectanglePacker.prototype.reset = function ( width, height ) {
	this.root.x = 0;
	this.root.y = 0;
	this.root.w = width;
	this.root.h = height;
	delete this.root.lft;
	delete this.root.rgt;
	
	this.usedWidth = 0;
	this.usedHeight = 0;	
}
	
NETXUS.RectanglePacker.prototype.getDimensions = function () {
	return { w: this.usedWidth, h: this.usedHeight };	
}
	
	
NETXUS.RectanglePacker.prototype.findCoords = function ( w, h ) {
	function recursiveFindCoords ( node, w, h ) {

		function cloneNode ( node ) {
			return {
				x: node.x,
				y: node.y,
				w: node.w,
				h: node.h	
			};
		}		
		
		if ( node.lft ) {
			var coords = recursiveFindCoords( node.lft, w, h );
			return coords ? coords : recursiveFindCoords( node.rgt, w, h );	
		}
		else
		{
			if ( node.used || w > node.w || h > node.h )
				return null;
				
			if ( w == node.w && h == node.h ) {
				node.used = true;
				return { x: node.x, y: node.y };
			}
			
			node.lft = cloneNode( node );
			node.rgt = cloneNode( node );
			
			if ( node.w - w > node.h - h ) {
				node.lft.w = w;
				node.rgt.x = node.x + w;
				node.rgt.w = node.w - w;	
			} else {
				node.lft.h = h;
				node.rgt.y = node.y + h;
				node.rgt.h = node.h - h;							
			}
			
			return recursiveFindCoords( node.lft, w, h );		
		}
	}
		
	var coords = recursiveFindCoords( this.root, w, h );
	if (coords) {
		if ( this.usedWidth < coords.x + w )
			this.usedWidth = coords.x + w;
		if ( this.usedHeight < coords.y + h )
			this.usedHeight = coords.y + h;
	}
	return coords;
}

function UnionFind(count) {
	this.roots = new Array(count);
	this.ranks = new Array(count);
	
	for(var i=0; i<count; ++i) {
		this.roots[i] = i;
		this.ranks[i] = 0;
	}
}
// Two calls find(x) always return the same result, if link(..) has not been called in between (unique representatives)
UnionFind.prototype.find = function(x) {
	var x0 = x;
	var roots = this.roots;
	while(roots[x] != x)  x = roots[x];
  
	while(roots[x0] != x) {
		var y = roots[x0];
		roots[x0] = x;
		x0 = y;
	} 
	return x;
}

UnionFind.prototype.link = function(x, y) {
	var xr = this.find(x), yr = this.find(y);
	if(xr == yr)  return;

	var ranks = this.ranks, roots = this.roots, xd = ranks[xr], yd = ranks[yr];
 
	if     (xd < yd) {  roots[xr] = yr;  }
	else if(yd < xd) {  roots[yr] = xr;  }
	else {  roots[yr] = xr;  ++ranks[xr];  }
}


var ICC=function(){var g=new Int16Array(1),O=new Uint8Array(g.buffer);function r(F,p){return F[p]<<8|F[p+1]}function i(F,p){O[0]=F[p+1];
O[1]=F[p];return g[0]}function f(F,p){return F[p]<<24|F[p+1]<<16|F[p+2]<<8|F[p+3]}function h(F,p,s){var K="";
for(var o=0;o<s;o++)K+=String.fromCharCode(F[p+o]);return K}function Q(F,p,s){var K=[];for(var o=0;o<s;
o++)K.push(String.fromCharCode(F[p+o]));return K}function a(F,p,s){var K="";for(var o=0;o<s;o++){var t=F[p++]<<8|F[p++];
K+=String.fromCharCode(t)}return K}function E(F){var p=new Uint8Array(F),s=u(p,128);if(s==null)return null;
return{header:_(p,0),tags:s}}function _(F,p){var s=h,K=f,o={cmmType:s(F,4,4),version:F[8]+"."+(F[9]>>>4)+"."+(F[9]&15),profileClass:s(F,12,4),spaceIn:s(F,16,4),spaceOut:s(F,20,4),date:r(F,24),platform:s(F,40,4),flags:K(F,44),deviceManufac:s(F,48,4),deviceModel:K(F,52),deviceAttribs:[K(F,56),K(F,60)],rendIntent:K(F,64),illuminant:C(F,68),creator:s(F,80,4)};
for(var t=0;t<5;t++)o.date+="."+r(F,26+2*t);return o}function u(F,p){var s=f,K={},o=s(F,p);p+=4;if(o>100)return null;
for(var t=0;t<o;t++){var n=h(F,p,4);p+=4;var M=s(F,p);p+=4;var N=s(F,p);p+=4;K[n]=m(F,M,N)}return K}function m(F,p,s){var K=h(F,p,4),o={j:K,K:s};
p+=4;p+=4;if(K=="mluc"){var t=[];for(var n=0;n<s;n++)t.push(F[p-8+n])}if(K=="mluc")x(o,F,p,s);else if(K=="text")j(o,F,p,s);
else if(K=="desc")c(o,F,p,s);else if(K=="mAB ")k(o,F,p,s);else if(K=="mft1")y(o,F,p,s);else if(K=="mft2")q(o,F,p,s);
else if(K=="XYZ ")J(o,F,p,s);else if(K=="para")z(o,F,p,s);else if(K=="curv")l(o,F,p,s);else if(K=="sf32")T(o,F,p,s);
if((o.K&3)!=0)o.K+=4-(o.K&3);return o}function x(F,p,s,K){var o=s-8,t=f(p,s);s+=4;var n=f(p,s);s+=4;
F.D=[];for(var M=0;M<t;M++){var N={};F.D.push(N);N.code=h(p,s,4);var b=f(p,s+4),S=f(p,s+8);s+=12;N.text=a(p,o+S,b>>>1)}}function c(F,p,s,K){var o=f(p,s);
s+=4;F.p=h(p,s,o-1);s+=o;var t=f(p,s);s+=4;var n=f(p,s);s+=4;F.F=a(p,s,n);s+=n;var M=r(p,s);s+=2;var N=p[s];
s++;F.k=h(p,s,N)}function k(F,p,s,K){var o=s-8;F.I=p[s];s++;F.a=p[s];s++;s+=2;var t=f(p,s);s+=4;var n=f(p,s);
s+=4;var M=f(p,s);s+=4;var N=f(p,s);s+=4;var b=f(p,s);s+=4;if(t!=0){F.N=[];s=o+t;for(var S=0;S<F.a;S++){var A=m(p,s,0);
s+=A.K;F.N.push(A)}}if(n!=0){F.n=[];for(var S=0;S<12;S++)F.n.push(W(p,o+n+S*4))}if(M!=0){F.c=[];s=o+M;
for(var S=0;S<F.a;S++){var A=m(p,s,0);s+=A.K;F.c.push(A)}}if(N!=0){F.g=[];s=o+N;F.h=[];for(var S=0;S<F.I;
S++)F.h.push(p[s+S]);s+=16;var V=p[s];s+=4;var $=F.a;for(var S=0;S<F.I;S++)$*=F.h[S];if(V==1)for(var S=0;
S<$;S++)F.g.push(p[s+S]*(1/255));if(V==2)for(var S=0;S<$;S++)F.g.push(r(p,s+2*S)*(1/65535))}if(b!=0){F.l=[];
s=o+b;for(var S=0;S<F.I;S++){var A=m(p,s,0);s+=A.K;F.l.push(A)}}}function y(F,p,s,K){B(F,p,s);s+=40;
F.J=X(p,s,F.I,256);s+=F.I*256;F.g=[];var o=Math.round(Math.pow(F.d,F.I))*F.a;for(var t=0;t<o;t++)F.g.push(p[s+t]*(1/255));
s+=o;F.w=X(p,s,F.a,256);s+=F.a*256}function q(F,p,s,K){B(F,p,s);s+=40;var o=r(p,s);s+=2;var t=r(p,s);
s+=2;F.J=R(p,s,F.I,o);s+=2*F.I*o;F.g=[];var n=Math.round(Math.pow(F.d,F.I))*F.a;for(var M=0;M<n;M++)F.g.push(r(p,s+M*2)*(1/65535));
s+=n*2;F.w=R(p,s,F.a,t);s+=2*F.a*t}function B(F,p,s){F.I=p[s];s++;F.a=p[s];s++;F.d=p[s];s++;s++;F.n=[];
for(var K=0;K<9;K++){F.n.push(W(p,s));s+=4}}function X(F,p,s,K){var o=[];for(var t=0;t<s;t++){var n=[];
o.push(n);for(var M=0;M<K;M++){n.push(F[p]*(1/255));p++}}return o}function R(F,p,s,K){var o=[];for(var t=0;
t<s;t++){var n=[];o.push(n);for(var M=0;M<K;M++){n.push(r(F,p)*(1/65535));p+=2}}return o}function z(F,p,s,K){F.H=r(p,s);
s+=2;s+=2;var o=[1,3,4,5,7];F.D=[];for(var t=0;t<o[F.H];t++)F.D.push(W(p,s+t*4))}function l(F,p,s,K){var o=f(p,s);
s+=4;F.D=[];if(o==1)F.D.push(L(p,s));else for(var t=0;t<o;t++)F.D.push(r(p,s+t*2)*(1/65535));F.K=12+2*o}function J(F,p,s){F.value=C(p,s)}function j(F,p,s,K){F.value=h(p,s,K-9)}function L(F,p){return F[p]+F[p+1]/256}function W(F,p){return i(F,p)+r(F,p+2)*(1/65536)}function C(F,p){var s=[];
for(var K=0;K<3;K++)s.push(W(F,p+K*4));return s}function T(F,p,s,K){var o=K/4-2;F.value=[];for(var t=0;
t<o;t++)F.value.push(W(p,s+t*4))}return{R:E}}();ICC.U=function(){var g=[.9642,1,.8249],O={e:[3.1338561,-1.6168667,-.4906146,-.9787684,1.9161415,.033454,.0719453,-.2289914,1.4052427],G:[.4360747,.3850649,.14308038,.2225045,.7168786,.0606169,.0139322,.0971045,.7141733],t:function(W){return W<.0031308?12.92*W:1.055*Math.pow(W,1/2.4)-.055},b:function(W){return W<.04045?W/12.92:Math.pow((W+.055)/1.055,2.4)},z:function(W,C,T){var p=O.r[0],s=O.r[1];
W=p[~~(.5+W*4e3)];C=p[~~(.5+C*4e3)];T=p[~~(.5+T*4e3)];var K=O.G,o=K[0]*W+K[1]*C+K[2]*T,t=K[3]*W+K[4]*C+K[5]*T,n=K[6]*W+K[7]*C+K[8]*T;
return{x:o,y:t,C:n}},f:function(W,C,T){var p=O.z(W,C,T);return O.q(p.x,p.y,p.C)},q:function(W,C,T,p){if(p==null)p=g;
W=W*(1/p[0]);C=C*(1/p[1]);T=T<0?0:T*(1/p[2]);var s=O.r[1],K=s[~~(.5+W*4e3)],o=s[~~(.5+C*4e3)],t=s[~~(.5+T*4e3)];
return{u:116*o-16,s:500*(K-o),m:200*(o-t)}},v:function(W,C,T,p){if(p==null)p=g;var s=903.3,K=.008856,o=(W+16)/116,t=o*o*o,n=o-T/200,M=n*n*n,N=C/500+o,S=N*N*N,A=M>K?M:(116*n-16)/s,V=t>K?t:(116*o-16)/s,$=S>K?S:(116*N-16)/s,P=$*p[0],v=V*p[1],T=A*p[2],I=O.e,U=[I[0]*P+I[1]*v+I[2]*T,I[3]*P+I[4]*v+I[5]*T,I[6]*P+I[7]*v+I[8]*T];
for(var Y=0;Y<3;Y++)U[Y]=Math.max(0,Math.min(1,O.t(U[Y])));return{O:U[0],d:U[1],m:U[2]}}};O.r=function(){var W=[],C=[];
for(var T=0;T<8e3;T++){var p=T/4e3;W[T]=O.b(p);C[T]=p>.008856?Math.pow(p,1/3):(903.3*p+16)*(1/116)}return[W,C]}();
function r(W){var C=W[0],T=W[1],p=W[2],s=W[3],K=W[4],o=W[5],t=W[6],n=W[7],M=W[8],N=K*M-n*o,b=o*t-s*M,S=s*n-t*K,A=1/(C*N+T*b+p*S),V=[N,p*n-T*M,T*o-p*K,b,C*M-p*t,s*p-C*o,S,t*T-C*n,C*K-s*T];
for(var M=0;M<9;M++)V[M]=V[M]*A;return V}function i(W,C,T){var p=1/(W-1),s=[],K=[];for(var o=0;o<W;o++)for(var t=0;
t<W;t++)for(var n=0;n<W;n++){if(C==3){s.push([o*p,t*p,n*p,0]);K.push(0,0,0);if(T==4)K.push(0)}else for(var M=0;
M<W;M++){s.push([o*p,t*p,n*p,M*p]);K.push(0,0,0);if(T==4)K.push(0)}}return[s,K]}function f(W,C,T,p){var s=W.tags,K=W.header,o=K.spaceIn.toLowerCase(),t=K.spaceOut.toLowerCase();
if(T){var n=o;o=t;t=n}console.log(T,o,t);var M=o=="cmyk"?4:3,N=t=="cmyk"?4:3,b=i(C,M,N),S=b[0],V=b[1],$=s.wtpt?s.wtpt.value:null;
if(o=="cmyk")$=null;if(p)S=[p];var P=T?"B2A0":"A2B0";for(var v=0;v<S.length;v++){var I=S[v];if(o=="rgb "){}else if(o=="cmyk"){}else if(o=="lab ")h(I,0,O.f(I[0],I[1],I[2]));
else if(o=="xyz "){var U=O.z(I[0],I[1],I[2]);I[0]=U.x;I[1]=U.y;I[2]=U.C}else throw o;if(T){if(s.rXYZ){var Y=s.rXYZ.value,H=s.gXYZ.value,D=s.bXYZ.value,G=Y.concat(H.concat(D)),d=r(G);
_(I,d.slice(0,3),d.slice(3,6),d.slice(6,9))}if(s.rTRC){var Y=s.rTRC,H=s.gTRC,D=s.bTRC;m(I,Y,H,D,!0)}}else{if(s.rTRC){var Y=s.rTRC,H=s.gTRC,D=s.bTRC;
m(I,Y,H,D)}if(s.rXYZ){var Y=s.rXYZ.value,H=s.gXYZ.value,D=s.bXYZ.value;_(I,Y,H,D)}}if(s[P]){var e=s[P],w=e.j;
if(w=="mAB ")a(I,e);else if(w=="mft1"||w=="mft2")Q(I,e);else throw w}if(t=="rgb "){}else if(t=="xyz "||t=="lab "){if(t=="xyz ")h(I,0,O.q(I[0],I[1],I[2],$));
var Z=O.v(I[0]*100,-127.5+255*I[1],-127.5+255*I[2],$);I[0]=Z.O;I[1]=Z.d;I[2]=Z.m}else if(t=="cmyk"){}else throw t;
V[v*N]=I[0];V[v*N+1]=I[1];V[v*N+2]=I[2];if(N==4)V[v*N+3]=I[3]}return V}function h(W,C,T){W[C]=T.u/100;
W[C+1]=(127.5+T.s)/255;W[C+2]=(127.5+T.m)/255}function Q(W,C){for(var T=0;T<C.I;T++)W[T]=c(W[T],C.J[T]);
if(C.I==3){if(C.a==3)J(C.g,C.d,W,W);if(C.a==4)l(C.g,C.d,W,W)}if(C.I==4)j(C.g,C.d,W,W);if(C.w)for(var T=0;
T<C.a;T++)W[T]=c(W[T],C.w[T])}function a(W,C){if(C.g)J(C.g,C.h[0],W,W);if(C.c)m(W,C.c[0],C.c[1],C.c[2]);
if(C.n)E(W,C.n)}function E(W,C){var T=W[0],p=W[1],s=W[2];W[0]=Math.max(0,Math.min(1,C[0]*T+C[1]*p+C[2]*s+C[9]));
W[1]=Math.max(0,Math.min(1,C[3]*T+C[4]*p+C[5]*s+C[10]));W[2]=Math.max(0,Math.min(1,C[6]*T+C[7]*p+C[8]*s+C[11]))}function _(W,C,T,p){var s=W[0],K=W[1],t=W[2];
W[0]=s*C[0]+K*T[0]+t*p[0];W[1]=s*C[1]+K*T[1]+t*p[1];W[2]=s*C[2]+K*T[2]+t*p[2]}function u(W,C){var T=W[0],p=W[1],s=W[2];
W[0]=T*C[0]+p*C[1]+s*C[2];W[1]=T*C[3]+p*C[4]+s*C[5];W[2]=T*C[6]+p*C[7]+s*C[8]}function m(W,C,T,p,s){W[0]=x(W[0],C,s);
W[1]=x(W[1],T,s);W[2]=x(W[2],p,s)}function x(W,C,T){var p=C.j,s=C.D;if(p=="curv")return c(W,s,T);else if(p=="para")return k(W,s,T);
else throw p}function c(W,C,T){var p=C.length;if(p==0)return W;if(p==1)return Math.pow(W,T?1/C[0]:C[0]);
var s=W*(p-1)*.9999999,K=~~s,o=s-K;return(1-o)*C[K]+o*C[K+1]}function k(W,C,T){var p=C.length,s=W,K=C[0],o=C[1],t=C[2],n=C[3],M=C[4],N=C[5],b=C[6];
if(T){if(p==1)W=Math.pow(s,1/K);else if(p==5)W=s/n>=M?(Math.pow(s,1/K)-t)/o:s/n;else throw p;return W}if(p==1)s=Math.pow(W,K);
else if(p==3)s=W>=-t/o?Math.pow(o*W+t,K):0;else if(p==4)s=W>=-t/o?Math.pow(o*W+t,K)+n:n;else if(p==5)s=W>=M?Math.pow(o*W+t,K):n*W;
else if(p==7)s=W>=M?Math.pow(o*W+t,K)+N:n*W+b;return s}function y(W,C,T,p,s,K){var o=~~W,t=~~C,n=~~T,M=p*p,N=n+p*t+p*p*o,b=n+p*(t+1)+p*p*o;
B(N,N+1,s,T-n,0,K);B(b,b+1,s,T-n,1,K);B(N+M,N+1+M,s,T-n,2,K);B(b+M,b+1+M,s,T-n,3,K);B(0,1,K,C-t,0,K);
B(2,3,K,C-t,2,K);B(0,2,K,W-o,0,K)}function q(W,C,T,p,s,K){var o=~~W,t=~~C,n=~~T,M=p*p,N=n+p*t+p*p*o,b=n+p*(t+1)+p*p*o;
X(N,N+1,s,T-n,0,K);X(b,b+1,s,T-n,1,K);X(N+M,N+1+M,s,T-n,2,K);X(b+M,b+1+M,s,T-n,3,K);X(0,1,K,C-t,0,K);
X(2,3,K,C-t,2,K);X(0,2,K,W-o,0,K)}function B(W,C,T,p,s,K){W*=3;C*=3;s*=3;K[s]=(1-p)*T[W]+p*T[C];K[s+1]=(1-p)*T[W+1]+p*T[C+1];
K[s+2]=(1-p)*T[W+2]+p*T[C+2]}function X(W,C,T,p,s,K){var o=W<<2,t=C<<2,n=s<<2;K[n]=(1-p)*T[o]+p*T[t];
K[n+1]=(1-p)*T[o+1]+p*T[t+1];K[n+2]=(1-p)*T[o+2]+p*T[t+2];K[n+3]=(1-p)*T[o+3]+p*T[t+3]}function R(W,C){function T(n){return n<0?0:n>1?1:n}var p=C*C*C,s=new Float32Array(p*4);
for(var K=0;K<p;K++){var o=K*3,t=o+K;s[t]=T(W[o]);s[t+1]=T(W[o+1]);s[t+2]=T(W[o+2]);s[t+3]=1}return s}function z(W){return W instanceof Uint8Array?8:W instanceof Uint16Array?16:32}function l(W,C,T,p){var s=z(T),K=s==8?255:s==16?65535:1,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=(C-1.000001)/K,n=T.length;
for(var M=0;M<n;M+=4){q(t*T[M],t*T[M+1],t*T[M+2],C,W,o);if(s==8){p[M]=~~(.5+o[0]*K);p[M+1]=~~(.5+o[1]*K);
p[M+2]=~~(.5+o[2]*K);p[M+3]=~~(.5+o[3]*K)}else if(s==16){p[M]=~~(.5+o[0]*K);p[M+1]=~~(.5+o[1]*K);p[M+2]=~~(.5+o[2]*K);
p[M+3]=~~(.5+o[3]*K)}else{p[M]=o[0];p[M+1]=o[1];p[M+2]=o[2];p[M+3]=o[3]}}}function J(W,C,T,p){var s=z(T),K=s==8?255:s==16?65535:1,o=[0,0,0,0,0,0,0,0,0,0,0,0],t=(C-1.000001)/K,n=T.length;
for(var M=0;M<n;M+=4){y(t*T[M],t*T[M+1],t*T[M+2],C,W,o);if(s==8){p[M]=~~(.5+o[0]*K);p[M+1]=~~(.5+o[1]*K);
p[M+2]=~~(.5+o[2]*K)}else if(s==16){p[M]=~~(.5+o[0]*K);p[M+1]=~~(.5+o[1]*K);p[M+2]=~~(.5+o[2]*K)}else{p[M]=o[0];
p[M+1]=o[1];p[M+2]=o[2]}}}function j(W,C,T,p){var s=z(T),K=s==8?255:s==16?65535:1,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=(C-1.000001)/K,n=T.length,M=C*C*C;
for(var N=0;N<n;N+=4){var b=t*T[N],S=t*T[N+1],V=t*T[N+2],$=t*T[N+3],P=~~b;y(S,V,$+P*M,C,W,o);o[12]=o[0];
o[13]=o[1];o[14]=o[2];y(S,V,$+(P+1)*M,C,W,o);B(4,0,o,b-P,0,o);if(s==8){p[N]=~~(.5+o[0]*K);p[N+1]=~~(.5+o[1]*K);
p[N+2]=~~(.5+o[2]*K)}else if(s==16){p[N]=~~(.5+o[0]*K);p[N+1]=~~(.5+o[1]*K);p[N+2]=~~(.5+o[2]*K)}else{p[N]=o[0];
p[N+1]=o[1];p[N+2]=o[2]}}}function L(W){var C=W.tags.desc;if(C.p)return C.p;return C.D[0].text}return{lutToRGBA32:R,sampleLUT:f,applyLUT:J,applyLUT4:j,applyLUT3to4:l,profileName:L}}();

/*
 * [js-sha1]{@link https://github.com/emn178/js-sha1}
 *
 * @version 0.6.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */
!function(){"use strict";function t(t){t?(f[0]=f[16]=f[1]=f[2]=f[3]=f[4]=f[5]=f[6]=f[7]=f[8]=f[9]=f[10]=f[11]=f[12]=f[13]=f[14]=f[15]=0,this.blocks=f):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}var h="object"==typeof window?window:{},s=!h.JS_SHA1_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;s&&(h=global);var i=!h.JS_SHA1_NO_COMMON_JS&&"object"==typeof module&&module.exports,e="function"==typeof define&&define.amd,r="0123456789abcdef".split(""),o=[-2147483648,8388608,32768,128],n=[24,16,8,0],a=["hex","array","digest","arrayBuffer"],f=[],u=function(h){return function(s){return new t(!0).update(s)[h]()}},c=function(){var h=u("hex");s&&(h=p(h)),h.create=function(){return new t},h.update=function(t){return h.create().update(t)};for(var i=0;i<a.length;++i){var e=a[i];h[e]=u(e)}return h},p=function(t){var h=eval("require('crypto')"),s=eval("require('buffer').Buffer"),i=function(i){if("string"==typeof i)return h.createHash("sha1").update(i,"utf8").digest("hex");if(i.constructor===ArrayBuffer)i=new Uint8Array(i);else if(void 0===i.length)return t(i);return h.createHash("sha1").update(new s(i)).digest("hex")};return i};t.prototype.update=function(t){if(!this.finalized){var s="string"!=typeof t;s&&t.constructor===h.ArrayBuffer&&(t=new Uint8Array(t));for(var i,e,r=0,o=t.length||0,a=this.blocks;r<o;){if(this.hashed&&(this.hashed=!1,a[0]=this.block,a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0),s)for(e=this.start;r<o&&e<64;++r)a[e>>2]|=t[r]<<n[3&e++];else for(e=this.start;r<o&&e<64;++r)(i=t.charCodeAt(r))<128?a[e>>2]|=i<<n[3&e++]:i<2048?(a[e>>2]|=(192|i>>6)<<n[3&e++],a[e>>2]|=(128|63&i)<<n[3&e++]):i<55296||i>=57344?(a[e>>2]|=(224|i>>12)<<n[3&e++],a[e>>2]|=(128|i>>6&63)<<n[3&e++],a[e>>2]|=(128|63&i)<<n[3&e++]):(i=65536+((1023&i)<<10|1023&t.charCodeAt(++r)),a[e>>2]|=(240|i>>18)<<n[3&e++],a[e>>2]|=(128|i>>12&63)<<n[3&e++],a[e>>2]|=(128|i>>6&63)<<n[3&e++],a[e>>2]|=(128|63&i)<<n[3&e++]);this.lastByteIndex=e,this.bytes+=e-this.start,e>=64?(this.block=a[16],this.start=e-64,this.hash(),this.hashed=!0):this.start=e}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},t.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,h=this.lastByteIndex;t[16]=this.block,t[h>>2]|=o[3&h],this.block=t[16],h>=56&&(this.hashed||this.hash(),t[0]=this.block,t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=this.hBytes<<3|this.bytes>>>29,t[15]=this.bytes<<3,this.hash()}},t.prototype.hash=function(){var t,h,s=this.h0,i=this.h1,e=this.h2,r=this.h3,o=this.h4,n=this.blocks;for(t=16;t<80;++t)h=n[t-3]^n[t-8]^n[t-14]^n[t-16],n[t]=h<<1|h>>>31;for(t=0;t<20;t+=5)s=(h=(i=(h=(e=(h=(r=(h=(o=(h=s<<5|s>>>27)+(i&e|~i&r)+o+1518500249+n[t]<<0)<<5|o>>>27)+(s&(i=i<<30|i>>>2)|~s&e)+r+1518500249+n[t+1]<<0)<<5|r>>>27)+(o&(s=s<<30|s>>>2)|~o&i)+e+1518500249+n[t+2]<<0)<<5|e>>>27)+(r&(o=o<<30|o>>>2)|~r&s)+i+1518500249+n[t+3]<<0)<<5|i>>>27)+(e&(r=r<<30|r>>>2)|~e&o)+s+1518500249+n[t+4]<<0,e=e<<30|e>>>2;for(;t<40;t+=5)s=(h=(i=(h=(e=(h=(r=(h=(o=(h=s<<5|s>>>27)+(i^e^r)+o+1859775393+n[t]<<0)<<5|o>>>27)+(s^(i=i<<30|i>>>2)^e)+r+1859775393+n[t+1]<<0)<<5|r>>>27)+(o^(s=s<<30|s>>>2)^i)+e+1859775393+n[t+2]<<0)<<5|e>>>27)+(r^(o=o<<30|o>>>2)^s)+i+1859775393+n[t+3]<<0)<<5|i>>>27)+(e^(r=r<<30|r>>>2)^o)+s+1859775393+n[t+4]<<0,e=e<<30|e>>>2;for(;t<60;t+=5)s=(h=(i=(h=(e=(h=(r=(h=(o=(h=s<<5|s>>>27)+(i&e|i&r|e&r)+o-1894007588+n[t]<<0)<<5|o>>>27)+(s&(i=i<<30|i>>>2)|s&e|i&e)+r-1894007588+n[t+1]<<0)<<5|r>>>27)+(o&(s=s<<30|s>>>2)|o&i|s&i)+e-1894007588+n[t+2]<<0)<<5|e>>>27)+(r&(o=o<<30|o>>>2)|r&s|o&s)+i-1894007588+n[t+3]<<0)<<5|i>>>27)+(e&(r=r<<30|r>>>2)|e&o|r&o)+s-1894007588+n[t+4]<<0,e=e<<30|e>>>2;for(;t<80;t+=5)s=(h=(i=(h=(e=(h=(r=(h=(o=(h=s<<5|s>>>27)+(i^e^r)+o-899497514+n[t]<<0)<<5|o>>>27)+(s^(i=i<<30|i>>>2)^e)+r-899497514+n[t+1]<<0)<<5|r>>>27)+(o^(s=s<<30|s>>>2)^i)+e-899497514+n[t+2]<<0)<<5|e>>>27)+(r^(o=o<<30|o>>>2)^s)+i-899497514+n[t+3]<<0)<<5|i>>>27)+(e^(r=r<<30|r>>>2)^o)+s-899497514+n[t+4]<<0,e=e<<30|e>>>2;this.h0=this.h0+s<<0,this.h1=this.h1+i<<0,this.h2=this.h2+e<<0,this.h3=this.h3+r<<0,this.h4=this.h4+o<<0},t.prototype.hex=function(){this.finalize();var t=this.h0,h=this.h1,s=this.h2,i=this.h3,e=this.h4;return r[t>>28&15]+r[t>>24&15]+r[t>>20&15]+r[t>>16&15]+r[t>>12&15]+r[t>>8&15]+r[t>>4&15]+r[15&t]+r[h>>28&15]+r[h>>24&15]+r[h>>20&15]+r[h>>16&15]+r[h>>12&15]+r[h>>8&15]+r[h>>4&15]+r[15&h]+r[s>>28&15]+r[s>>24&15]+r[s>>20&15]+r[s>>16&15]+r[s>>12&15]+r[s>>8&15]+r[s>>4&15]+r[15&s]+r[i>>28&15]+r[i>>24&15]+r[i>>20&15]+r[i>>16&15]+r[i>>12&15]+r[i>>8&15]+r[i>>4&15]+r[15&i]+r[e>>28&15]+r[e>>24&15]+r[e>>20&15]+r[e>>16&15]+r[e>>12&15]+r[e>>8&15]+r[e>>4&15]+r[15&e]},t.prototype.toString=t.prototype.hex,t.prototype.digest=function(){this.finalize();var t=this.h0,h=this.h1,s=this.h2,i=this.h3,e=this.h4;return[t>>24&255,t>>16&255,t>>8&255,255&t,h>>24&255,h>>16&255,h>>8&255,255&h,s>>24&255,s>>16&255,s>>8&255,255&s,i>>24&255,i>>16&255,i>>8&255,255&i,e>>24&255,e>>16&255,e>>8&255,255&e]},t.prototype.array=t.prototype.digest,t.prototype.arrayBuffer=function(){this.finalize();var t=new ArrayBuffer(20),h=new DataView(t);return h.setUint32(0,this.h0),h.setUint32(4,this.h1),h.setUint32(8,this.h2),h.setUint32(12,this.h3),h.setUint32(16,this.h4),t};var y=c();i?module.exports=y:(h.sha1=y,e&&define(function(){return y}))}();var EXRLoader={parse:function(e){var r={FloatType:1,UnsignedByteType:2,HalfFloatType:3,RGBEFormat:4};this.type=r.FloatType;var a=65536,n=a>>3,t=14,i=65537,o=1<<t,f=o-1,l=32768,u=65535,s=59,v=63,c=2+v-s,h=8,w=4,p=4,y=2,d=1,g=0,A=1,S=0,U=1,b=2,m=Math.pow(2.7182818,2.2),M=new DataView(new ArrayBuffer(8));function C(e){if(0===e)return[e,0];M.setFloat64(0,e);var r=M.getUint32(0)>>>20&2047;0===r&&(M.setFloat64(0,e*Math.pow(2,64)),r=(M.getUint32(0)>>>20&2047)-64);var a=r-1022;return[function(e,r){for(var a=Math.min(3,Math.ceil(Math.abs(r)/1023)),n=e,t=0;t<a;t++)n*=Math.pow(2,Math.floor((r+t)/a));return n}(e,-a),a]}var O={l:0,c:0,lc:0};function I(e,r,a,n,t){for(;a<e;)r=r<<8|te(n,t),a+=8;a-=e,O.l=r>>a&(1<<e)-1,O.c=r,O.lc=a}var E=new Array(59);function R(e,r,a,n,t,o,f){for(var l=a,u=0,h=0;t<=o;t++){if(l.value-a.value>n)return!1;I(6,u,h,e,l);var w=O.l;if(u=O.c,h=O.lc,f[t]=w,w==v){if(l.value-a.value>n)throw"Something wrong with hufUnpackEncTable";I(8,u,h,e,l);var p=O.l+c;if(u=O.c,h=O.lc,t+p>o+1)throw"Something wrong with hufUnpackEncTable";for(;p--;)f[t++]=0;t--}else if(w>=s){if(t+(p=w-s+2)>o+1)throw"Something wrong with hufUnpackEncTable";for(;p--;)f[t++]=0;t--}}!function(e){for(var r=0;r<=58;++r)E[r]=0;for(r=0;r<i;++r)E[e[r]]+=1;var a=0;for(r=58;r>0;--r){var n=a+E[r]>>1;E[r]=a,a=n}for(r=0;r<i;++r){var t=e[r];t>0&&(e[r]=t|E[t]++<<6)}}(f)}function x(e){return 63&e}function P(e){return e>>6}var z={c:0,lc:0};function N(e,r,a,n){e=e<<8|te(a,n),r+=8,z.c=e,z.lc=r}var T={c:0,lc:0};function k(e,r,a,n,t,i,o,f,l,u){if(e==r){n<8&&(N(a,n,t,o),a=z.c,n=z.lc);var s=a>>(n-=8);s=new Uint8Array([s])[0];if(l.value+s>u)return!1;for(var v=f[l.value-1];s-- >0;)f[l.value++]=v}else{if(!(l.value<u))return!1;f[l.value++]=e}T.c=a,T.lc=n}function _(e){return 65535&e}function D(e){var r=_(e);return r>32767?r-65536:r}var F={a:0,b:0};function B(e,r){var a=D(e),n=D(r),t=a+(1&n)+(n>>1),i=t,o=t-n;F.a=i,F.b=o}function L(e,r){var a=_(e),n=_(r),t=a-(n>>1)&u,i=n+t-l&u;F.a=i,F.b=t}function X(e,r,a,n,t,i,o){for(var f,l=o<16384,u=a>t?t:a,s=1;s<=u;)s<<=1;for(f=s>>=1,s>>=1;s>=1;){for(var v,c,h,w,p=0,y=p+i*(t-f),d=i*s,g=i*f,A=n*s,S=n*f;p<=y;p+=g){for(var U=p,b=p+n*(a-f);U<=b;U+=S){var m=U+A,M=(C=U+d)+A;l?(B(e[U+r],e[C+r]),v=F.a,h=F.b,B(e[m+r],e[M+r]),c=F.a,w=F.b,B(v,c),e[U+r]=F.a,e[m+r]=F.b,B(h,w),e[C+r]=F.a,e[M+r]=F.b):(L(e[U+r],e[C+r]),v=F.a,h=F.b,L(e[m+r],e[M+r]),c=F.a,w=F.b,L(v,c),e[U+r]=F.a,e[m+r]=F.b,L(h,w),e[C+r]=F.a,e[M+r]=F.b)}if(a&s){var C=U+d;l?B(e[U+r],e[C+r]):L(e[U+r],e[C+r]),v=F.a,e[C+r]=F.b,e[U+r]=v}}if(t&s)for(U=p,b=p+n*(a-f);U<=b;U+=S){m=U+A;l?B(e[U+r],e[m+r]):L(e[U+r],e[m+r]),v=F.a,e[m+r]=F.b,e[U+r]=v}f=s,s>>=1}return p}function V(e,r,a,n,l,u){var s=a.value,v=ne(r,a),c=ne(r,a);a.value+=4;var h=ne(r,a);if(a.value+=4,v<0||v>=i||c<0||c>=i)throw"Something wrong with HUF_ENCSIZE";var w=new Array(i),p=new Array(o);if(function(e){for(var r=0;r<o;r++)e[r]={},e[r].len=0,e[r].lit=0,e[r].p=null}(p),R(e,0,a,n-(a.value-s),v,c,w),h>8*(n-(a.value-s)))throw"Something wrong with hufUncompress";!function(e,r,a,n){for(;r<=a;r++){var i=P(e[r]),o=x(e[r]);if(i>>o)throw"Invalid table entry";if(o>t){if((s=n[i>>o-t]).len)throw"Invalid table entry";if(s.lit++,s.p){var f=s.p;s.p=new Array(s.lit);for(var l=0;l<s.lit-1;++l)s.p[l]=f[l]}else s.p=new Array(1);s.p[s.lit-1]=r}else if(o){var u=0;for(l=1<<t-o;l>0;l--){var s;if((s=n[(i<<t-o)+u]).len||s.p)throw"Invalid table entry";s.len=o,s.lit=r,u++}}}}(w,v,c,p),function(e,r,a,n,i,o,l,u,s,v){for(var c=0,h=0,w=u,p=Math.trunc(i.value+(o+7)/8);i.value<p;)for(N(c,h,a,i),c=z.c,h=z.lc;h>=t;)if((A=r[c>>h-t&f]).len)h-=A.len,k(A.lit,l,c,h,a,0,i,s,v,w),c=T.c,h=T.lc;else{if(!A.p)throw"hufDecode issues";var y;for(y=0;y<A.lit;y++){for(var d=x(e[A.p[y]]);h<d&&i.value<p;)N(c,h,a,i),c=z.c,h=z.lc;if(h>=d&&P(e[A.p[y]])==(c>>h-d&(1<<d)-1)){h-=d,k(A.p[y],l,c,h,a,0,i,s,v,w),c=T.c,h=T.lc;break}}if(y==A.lit)throw"hufDecode issues"}var g=8-o&7;for(c>>=g,h-=g;h>0;){var A;if(!(A=r[c<<t-h&f]).len)throw"hufDecode issues";h-=A.len,k(A.lit,l,c,h,a,0,i,s,v,w),c=T.c,h=T.lc}}(w,p,e,0,a,h,c,u,l,{value:0})}function Z(e){for(var r=1;r<e.length;r++){var a=e[r-1]+e[r]-128;e[r]=a}}function H(e,r){for(var a=0,n=Math.floor((e.length+1)/2),t=0,i=e.length-1;!(t>i||(r[t++]=e[a++],t>i));)r[t++]=e[n++]}function W(e){for(var r=e.byteLength,a=new Array,n=0,t=new DataView(e);r>0;){var i=t.getInt8(n++);if(i<0){r-=(f=-i)+1;for(var o=0;o<f;o++)a.push(t.getUint8(n++))}else{var f=i;r-=2;var l=t.getUint8(n++);for(o=0;o<f+1;o++)a.push(l)}}return a}function G(e,r,a){for(var n,t=1;t<64;)65280==(n=r[e.value])?t=64:n>>8==255?t+=255&n:(a[t]=n,t++),e.value++}function Y(e,r){r[0]=le(e[0]),r[1]=le(e[1]),r[2]=le(e[5]),r[3]=le(e[6]),r[4]=le(e[14]),r[5]=le(e[15]),r[6]=le(e[27]),r[7]=le(e[28]),r[8]=le(e[2]),r[9]=le(e[4]),r[10]=le(e[7]),r[11]=le(e[13]),r[12]=le(e[16]),r[13]=le(e[26]),r[14]=le(e[29]),r[15]=le(e[42]),r[16]=le(e[3]),r[17]=le(e[8]),r[18]=le(e[12]),r[19]=le(e[17]),r[20]=le(e[25]),r[21]=le(e[30]),r[22]=le(e[41]),r[23]=le(e[43]),r[24]=le(e[9]),r[25]=le(e[11]),r[26]=le(e[18]),r[27]=le(e[24]),r[28]=le(e[31]),r[29]=le(e[40]),r[30]=le(e[44]),r[31]=le(e[53]),r[32]=le(e[10]),r[33]=le(e[19]),r[34]=le(e[23]),r[35]=le(e[32]),r[36]=le(e[39]),r[37]=le(e[45]),r[38]=le(e[52]),r[39]=le(e[54]),r[40]=le(e[20]),r[41]=le(e[22]),r[42]=le(e[33]),r[43]=le(e[38]),r[44]=le(e[46]),r[45]=le(e[51]),r[46]=le(e[55]),r[47]=le(e[60]),r[48]=le(e[21]),r[49]=le(e[34]),r[50]=le(e[37]),r[51]=le(e[47]),r[52]=le(e[50]),r[53]=le(e[56]),r[54]=le(e[59]),r[55]=le(e[61]),r[56]=le(e[35]),r[57]=le(e[36]),r[58]=le(e[48]),r[59]=le(e[49]),r[60]=le(e[57]),r[61]=le(e[58]),r[62]=le(e[62]),r[63]=le(e[63])}function j(e){for(var r=.5*Math.cos(.7853975),a=.5*Math.cos(.196349375),n=.5*Math.cos(.39269875),t=.5*Math.cos(3*3.14159/16),i=.5*Math.cos(.981746875),o=.5*Math.cos(3*3.14159/8),f=.5*Math.cos(1.374445625),l=new Array(4),u=new Array(4),s=new Array(4),v=new Array(4),c=0;c<8;++c){var h=8*c;l[0]=n*e[h+2],l[1]=o*e[h+2],l[2]=n*e[h+6],l[3]=o*e[h+6],u[0]=a*e[h+1]+t*e[h+3]+i*e[h+5]+f*e[h+7],u[1]=t*e[h+1]-f*e[h+3]-a*e[h+5]-i*e[h+7],u[2]=i*e[h+1]-a*e[h+3]+f*e[h+5]+t*e[h+7],u[3]=f*e[h+1]-i*e[h+3]+t*e[h+5]-a*e[h+7],s[0]=r*(e[h+0]+e[h+4]),s[3]=r*(e[h+0]-e[h+4]),s[1]=l[0]+l[3],s[2]=l[1]-l[2],v[0]=s[0]+s[1],v[1]=s[3]+s[2],v[2]=s[3]-s[2],v[3]=s[0]-s[1],e[h+0]=v[0]+u[0],e[h+1]=v[1]+u[1],e[h+2]=v[2]+u[2],e[h+3]=v[3]+u[3],e[h+4]=v[3]-u[3],e[h+5]=v[2]-u[2],e[h+6]=v[1]-u[1],e[h+7]=v[0]-u[0]}for(var w=0;w<8;++w)l[0]=n*e[16+w],l[1]=o*e[16+w],l[2]=n*e[48+w],l[3]=o*e[48+w],u[0]=a*e[8+w]+t*e[24+w]+i*e[40+w]+f*e[56+w],u[1]=t*e[8+w]-f*e[24+w]-a*e[40+w]-i*e[56+w],u[2]=i*e[8+w]-a*e[24+w]+f*e[40+w]+t*e[56+w],u[3]=f*e[8+w]-i*e[24+w]+t*e[40+w]-a*e[56+w],s[0]=r*(e[w]+e[32+w]),s[3]=r*(e[w]-e[32+w]),s[1]=l[0]+l[3],s[2]=l[1]-l[2],v[0]=s[0]+s[1],v[1]=s[3]+s[2],v[2]=s[3]-s[2],v[3]=s[0]-s[1],e[0+w]=v[0]+u[0],e[8+w]=v[1]+u[1],e[16+w]=v[2]+u[2],e[24+w]=v[3]+u[3],e[32+w]=v[3]-u[3],e[40+w]=v[2]-u[2],e[48+w]=v[1]-u[1],e[56+w]=v[0]-u[0]}function q(e){for(var r=0;r<64;++r){var a=e[0][r],n=e[1][r],t=e[2][r];e[0][r]=a+1.5747*t,e[1][r]=a-.1873*n-.4682*t,e[2][r]=a+1.8556*n}}function J(e,r,a){for(var n=0;n<64;++n)r[a+n]=ue(K(e[n]))}function K(e){return e<=1?Math.sign(e)*Math.pow(Math.abs(e),2.2):Math.sign(e)*Math.pow(m,Math.abs(e)-1)}function Q(e){var r=e.array.slice(e.offset.value,e.offset.value+e.size),a=new Uint8Array(pako.inflate(r).buffer),n=new Uint8Array(a.length);return Z(a),H(a,n),new DataView(n.buffer)}function $(e){var r=e.viewer,a={value:e.offset.value},n=new Uint8Array(e.width*e.lines*(we.channels.length*e.type*y)),t={version:oe(r,a),unknownUncompressedSize:oe(r,a),unknownCompressedSize:oe(r,a),acCompressedSize:oe(r,a),dcCompressedSize:oe(r,a),rleCompressedSize:oe(r,a),rleUncompressedSize:oe(r,a),rleRawSize:oe(r,a),totalAcUncompressedCount:oe(r,a),totalDcUncompressedCount:oe(r,a),acCompression:oe(r,a)};if(t.version<2)throw"EXRLoader.parse: "+we.compression+" version "+t.version+" is unsupported";for(var i=new Array,o=se(r,a)-y;o>0;){var f=ee(r.buffer,a),l=ie(r,a),u=l>>2&3,s=new Int8Array([(l>>4)-1])[0],v=ie(r,a);i.push({name:f,index:s,type:v,compression:u}),o-=f.length+3}for(var c=we.channels,h=new Array(e.channels),w=0;w<e.channels;++w){var p=h[w]={},d=c[w];p.name=d.name,p.compression=S,p.decoded=!1,p.type=d.pixelType,p.pLinear=d.pLinear,p.width=e.width,p.height=e.lines}for(var m={idx:new Array(3)},M=0;M<e.channels;++M)for(p=h[M],w=0;w<i.length;++w){var C=i[w];p.name==C.name&&(p.compression=C.compression,C.index>=0&&(m.idx[C.index]=M),p.offset=M)}if(t.acCompressedSize>0)switch(t.acCompression){case g:var O=new Uint16Array(t.totalAcUncompressedCount);V(e.array,r,a,t.acCompressedSize,O,t.totalAcUncompressedCount);break;case A:var I=e.array.slice(a.value,a.value+t.totalAcUncompressedCount);O=new Uint16Array(pako.inflate(I).buffer);a.value+=t.totalAcUncompressedCount}if(t.dcCompressedSize>0){var E={array:e.array,offset:a,size:t.dcCompressedSize},R=new Uint16Array(Q(E).buffer);a.value+=t.dcCompressedSize}if(t.rleRawSize>0){I=e.array.slice(a.value,a.value+t.rleCompressedSize);var x=W(pako.inflate(I).buffer);a.value+=t.rleCompressedSize}var P=0,z=new Array(h.length);for(w=0;w<z.length;++w)z[w]=new Array;for(var N=0;N<e.lines;++N)for(var T=0;T<h.length;++T)z[T].push(P),P+=h[T].width*e.type*y;!function(e,r,a,n,t,i){for(var o=new DataView(i.buffer),f=a[e.idx[0]].width,l=a[e.idx[0]].height,u=Math.floor(f/8),s=Math.ceil(f/8),v=Math.ceil(l/8),c=f-8*(s-1),h=l-8*(v-1),w={value:0},p=new Array(3),d=new Array(3),g=new Array(3),A=new Array(3),S=new Array(3),U=0;U<3;++U)S[U]=r[e.idx[U]],p[U]=U<1?0:p[U-1]+s*v,d[U]=new Float32Array(64),g[U]=new Uint16Array(64),A[U]=new Uint16Array(64*s);for(var b=0;b<v;++b){var m=8;b==v-1&&(m=h);for(var M=8,C=0;C<s;++C){for(C==s-1&&(M=c),U=0;U<3;++U)g[U].fill(0),g[U][0]=t[p[U]++],G(w,n,g[U]),Y(g[U],d[U]),j(d[U]);for(q(d),U=0;U<3;++U)J(d[U],A[U],64*C)}var O=0;for(U=0;U<3;++U){for(var I=a[e.idx[U]].type,E=8*b;E<8*b+m;++E)for(O=S[U][E],C=0;C<u;++C){var R=64*C+8*(7&E);o.setUint16(O+0*y*I,A[U][R+0],!0),o.setUint16(O+1*y*I,A[U][R+1],!0),o.setUint16(O+2*y*I,A[U][R+2],!0),o.setUint16(O+3*y*I,A[U][R+3],!0),o.setUint16(O+4*y*I,A[U][R+4],!0),o.setUint16(O+5*y*I,A[U][R+5],!0),o.setUint16(O+6*y*I,A[U][R+6],!0),o.setUint16(O+7*y*I,A[U][R+7],!0),O+=8*y*I}if(u!=s)for(E=8*b;E<8*b+m;++E){O=S[U][E]+8*u*y*I,R=64*u+8*(7&E);for(var x=0;x<M;++x)o.setUint16(O+x*y*I,A[U][R+x],!0)}}}var P=new Uint16Array(f);for(o=new DataView(i.buffer),U=0;U<3;++U)if(a[e.idx[U]].decoded=!0,I=a[e.idx[U]].type,2==a[U].type)for(E=0;E<l;++E){for(O=S[U][E],x=0;x<f;++x)P[x]=o.getUint16(O+x*y*I,!0);for(x=0;x<f;++x)o.setFloat32(O+x*y*I,le(P[x]),!0)}}(m,z,h,O,R,n);for(w=0;w<h.length;++w){if(!(p=h[w]).decoded)switch(p.compression){case b:var k=0,_=0;for(N=0;N<e.lines;++N){for(var D=z[w][k],F=0;F<p.width;++F){for(var B=0;B<y*p.type;++B)n[D++]=x[_+B*p.width*p.height];_++}k++}break;case U:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(n.buffer)}function ee(e,r){for(var a=new Uint8Array(e),n=0;0!=a[r.value+n];)n+=1;var t=(new TextDecoder).decode(a.slice(r.value,r.value+n));return r.value=r.value+n+1,t}function re(e,r){var a=e.getUint32(0,!0);return r.value=r.value+h,a}function ae(e,r){var a=e.getInt32(r.value,!0);return r.value=r.value+p,a}function ne(e,r){var a=e.getUint32(r.value,!0);return r.value=r.value+p,a}function te(e,r){var a=e[r.value];return r.value=r.value+d,a}function ie(e,r){var a=e.getUint8(r.value);return r.value=r.value+d,a}function oe(e,r){var a=Number(e.getBigInt64(r.value,!0));return r.value+=h,a}function fe(e,r){var a=e.getFloat32(r.value,!0);return r.value+=w,a}function le(e){var r=(31744&e)>>10,a=1023&e;return(e>>15?-1:1)*(r?31===r?a?NaN:1/0:Math.pow(2,r-15)*(1+a/1024):a/1024*6103515625e-14)}function ue(e){M.setFloat32(0,e);var r=M.getInt32(0),a=r>>16&32768,n=r>>12&2047,t=r>>23&255;return t<103?a:t>142?(a|=31744,a|=(255==t?0:1)&&8388607&r):t<113?a|=((n|=2048)>>114-t)+(n>>113-t&1):(a|=t-112<<10|n>>1,a+=1&n)}function se(e,r){var a=e.getUint16(r.value,!0);return r.value+=y,a}function ve(e,r,a,n,t){return"string"===n||"stringvector"===n||"iccProfile"===n?function(e,r,a){var n=(new TextDecoder).decode(new Uint8Array(e).slice(r.value,r.value+a));return r.value=r.value+a,n}(r,a,t):"chlist"===n?function(e,r,a,n){for(var t=a.value,i=[];a.value<t+n-1;){var o=ee(r,a),f=ae(e,a),l=ie(e,a);a.value+=3;var u=ae(e,a),s=ae(e,a);i.push({name:o,pixelType:f,pLinear:l,xSampling:u,ySampling:s})}return a.value+=1,i}(e,r,a,t):"chromaticities"===n?function(e,r){return{redX:fe(e,r),redY:fe(e,r),greenX:fe(e,r),greenY:fe(e,r),blueX:fe(e,r),blueY:fe(e,r),whiteX:fe(e,r),whiteY:fe(e,r)}}(e,a):"compression"===n?function(e,r){return["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"][ie(e,r)]}(e,a):"box2i"===n?function(e,r){return{xMin:ne(e,r),yMin:ne(e,r),xMax:ne(e,r),yMax:ne(e,r)}}(e,a):"lineOrder"===n?function(e,r){return["INCREASING_Y"][ie(e,r)]}(e,a):"float"===n?fe(e,a):"v2f"===n?function(e,r){return[fe(e,r),fe(e,r)]}(e,a):"v3f"===n?function(e,r){return[fe(e,r),fe(e,r),fe(e,r)]}(e,a):"int"===n?ae(e,a):"rational"===n?function(e,r){return[ae(e,r),ne(e,r)]}(e,a):"timecode"===n?function(e,r){return[ne(e,r),ne(e,r)]}(e,a):(a.value+=t,void console.log("Cannot parse value for unsupported type: "+n))}var ce=new DataView(e),he=new Uint8Array(e),we={};ce.getUint32(0,!0),ce.getUint8(4,!0),ce.getUint8(5,!0);for(var pe={value:8},ye=!0;ye;){var de=ee(e,pe);if(0==de)ye=!1;else{var ge=ve(ce,e,pe,ee(e,pe),ne(ce,pe));we[de]=ge}}var Ae,Se,Ue,be,me=we.dataWindow.yMax+1;switch(we.compression){case"NO_COMPRESSION":Se=1,Ae=function(e){return new DataView(e.array.buffer,e.offset.value,e.size)};break;case"RLE_COMPRESSION":Se=1,Ae=function(e){var r=e.viewer.buffer.slice(e.offset.value,e.offset.value+e.size),a=new Uint8Array(W(r)),n=new Uint8Array(a.length);return Z(a),H(a,n),new DataView(n.buffer)};break;case"ZIPS_COMPRESSION":Se=1,Ae=Q;break;case"ZIP_COMPRESSION":Se=16,Ae=Q;break;case"PXR24_COMPRESSION":Se=16,Ae=function(e){for(var r=e.array.slice(e.offset.value,e.offset.value+e.size),a=new Uint8Array(pako.inflate(r).buffer),n=new Uint8Array(a.length),t=n,i=Ee,o=0;o<t.length;o+=2*i){for(var f=0;f<i;f++)t[o+2*f]=a[o+f+i],t[o+2*f+1]=a[o+f];var l=new Uint16Array(t.buffer,o,i);for(f=1;f<i;f++)l[f]=l[f-1]+l[f]&65535}return new DataView(n.buffer)};break;case"PIZ_COMPRESSION":Se=32,Ae=function(e){for(var r=e.viewer,t={value:e.offset.value},i=e.width*Se*(we.channels.length*e.type),o=new Uint16Array(i),f=new Uint8Array(n),l=0,u=new Array(e.channels),s=0;s<e.channels;s++)u[s]={},u[s].start=l,u[s].end=u[s].start,u[s].nx=e.width,u[s].ny=e.lines,u[s].size=e.type,l+=u[s].nx*u[s].ny*u[s].size;var v=se(r,t),c=se(r,t);if(c>=n)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(v<=c)for(s=0;s<c-v+1;s++)f[s+v]=ie(r,t);var h=new Uint16Array(a),w=function(e,r){for(var n=0,t=0;t<a;++t)(0==t||e[t>>3]&1<<(7&t))&&(r[n++]=t);for(var i=n-1;n<a;)r[n++]=0;return i}(f,h),p=ne(r,t);for(V(e.array,r,t,p,o,l),s=0;s<e.channels;++s)for(var d=u[s],g=0;g<u[s].size;++g)X(o,d.start+g,d.nx,d.size,d.ny,d.nx*d.size,w);!function(e,r,a){for(var n=0;n<a;++n)r[n]=e[r[n]]}(h,o,l);for(var A=0,S=new Uint8Array(o.buffer.byteLength),U=0;U<e.lines;U++)for(var b=0;b<e.channels;b++){var m=(d=u[b]).nx*d.size,M=new Uint8Array(o.buffer,d.end*y,m*y);S.set(M,A),A+=m*y,d.end+=m}return new DataView(S.buffer)};break;case"DWAA_COMPRESSION":Se=32,Ae=$;break;case"DWAB_COMPRESSION":Se=256,Ae=$;break;default:throw"EXRLoader.parse: "+we.compression+" is unsupported"}var Me=we.channels[0].pixelType;if(1===Me)switch(this.type){case r.UnsignedByteType:case r.FloatType:be=function(e,r){return le(se(e,r))},Ue=y;break;case r.HalfFloatType:be=se,Ue=y}else{if(2!==Me)throw"EXRLoader.parse: unsupported pixelType "+Me+" for "+we.compression+".";switch(this.type){case r.UnsignedByteType:case r.FloatType:be=fe,Ue=w;break;case r.HalfFloatType:be=function(e,r){return ue(fe(e,r))},Ue=w}}for(var Ce=me/Se,Oe=0;Oe<Ce;Oe++)re(ce,pe);var Ie=we.dataWindow,Ee=Ie.xMax-Ie.xMin+1,Re=Ie.yMax-Ie.yMin+1,xe=Ee*Re*4;switch(this.type){case r.UnsignedByteType:case r.FloatType:var Pe=new Float32Array(xe);we.channels.length<4&&Pe.fill(1,0,xe);break;case r.HalfFloatType:Pe=new Uint16Array(xe);we.channels.length<4&&Pe.fill(15360,0,xe);break;default:console.error("THREE.EXRLoader: unsupported type: ",this.type)}for(var ze,Ne,Te={R:0,G:1,B:2,A:3},ke={size:0,width:Ee,lines:Se,offset:pe,array:he,viewer:ce,type:Me,channels:we.channels.length},_e={value:0},De=0;De<Re/Se;De++){ze=ne(ce,pe),xe=ne(ce,pe),ke.lines=ze+Se>Re?Re-ze:Se,ke.offset=pe,ke.size=xe,Ne=Ae(ke),pe.value+=xe;for(var Fe=0;Fe<Se;Fe++){var Be=Fe+De*Se;if(Be>=Re)break;for(var Le=0;Le<we.channels.length;Le++)for(var Xe=Te[we.channels[Le].name],Ve=0;Ve<Ee;Ve++){var Ze=Fe*(we.channels.length*Ee)+Le*Ee+Ve;_e.value=Ze*Ue;var He=be(Ne,_e);Pe[4*Ee*(Re-1-Be)+4*Ve+Xe]=He}}}if(this.type===r.UnsignedByteType){xe=Pe.length;for(var We,Ge=new Uint8Array(xe),Ye=0;Ye<Re;++Ye)for(var je=0;je<Ee;++je){var qe=Pe[Oe=Ye*Ee*4+4*je],Je=Pe[Oe+1],Ke=Pe[Oe+2];if((We=Ke>(We=qe>Je?qe:Je)?Ke:We)<1e-32)Ge[Oe]=Ge[Oe+1]=Ge[Oe+2]=Ge[Oe+3]=0;else{var Qe=C(We);We=256*Qe[0]/We,Ge[Oe]=qe*We,Ge[Oe+1]=Je*We,Ge[Oe+2]=Ke*We,Ge[Oe+3]=Qe[1]+128}}Pe=Ge}var $e=this.type===r.UnsignedByteType?r.RGBEFormat:r.RGBAFormat;return{header:we,width:Ee,height:Re,data:Pe,format:$e,type:this.type}}};






(function() {

	var t,n;t=this,n=function(t){const n=0,e=1,o=2,r=4,s=8;function i(t,i,a){let c=n;return t<a.left?c|=e:t>a.right&&(c|=o),i<a.top?c|=r:i>a.bottom&&(c|=s),c}function a(t,n){let[[a,c],[u,f]]=t,d=i(a,c,n),l=i(u,f,n);for(;;){if(!(d|l))return!0;if(d&l)return!1;{const{top:t,right:g,bottom:h,left:p}=n;let m,b;const M=l>d?l:d;M&s?(m=a+(u-a)*(h-c)/(f-c),b=h):M&r?(m=a+(u-a)*(t-c)/(f-c),b=t):M&o?(b=c+(f-c)*(g-a)/(u-a),m=g):M&e&&(b=c+(f-c)*(p-a)/(u-a),m=p),M==d?(a=m,c=b,d=i(a,c,n)):(u=m,f=b,l=i(u,f,n))}}}function c(t,n){return t.left<=n.right&&n.left<=t.right&&t.top<=n.bottom&&n.top<=t.bottom}function u(t,n){return t?{top:Math.min(t.top,n.top),right:Math.max(t.right,n.right),bottom:Math.max(t.bottom,n.bottom),left:Math.min(t.left,n.left)}:n}function f(t,n){return t?{top:Math.min(t.top,n[1]),right:Math.max(t.right,n[0]),bottom:Math.max(t.bottom,n[1]),left:Math.min(t.left,n[0])}:{top:n[1],right:n[0],bottom:n[1],left:n[0]}}function d(t){return Math.max(t.right-t.left,t.bottom-t.top)}function l(t,n){return{top:t[1]-n,right:t[0]+n,bottom:t[1]+n,left:t[0]-n}}class g{static fromPairs(t,n,e=8){if(0===t.length)throw new Error("QuadTree.fromPairs: at least one pair needed.");let o=t[0][0];for(let n=1;n<t.length;n++)o=u(o,t[n][0]);const r=new g(o,n,e);for(const[n,e]of t)r.insert(n,e);return r}constructor(t,n,e=16){this.boundingBox=t,this.depth=n,this.innerNodeCapacity=e,this.subtrees=null,this.pairs=[]}insert(t,n){if(!c(t,this.boundingBox))return!1;if(this.depth>0&&this.pairs.length>=this.innerNodeCapacity){this.ensureSubtrees();for(let e=0;e<this.subtrees.length;e++)this.subtrees[e].insert(t,n)}else this.pairs.push([t,n]);return!0}find(t,n=new Set){if(!c(t,this.boundingBox))return n;for(let e=0;e<this.pairs.length;e++){const[o,r]=this.pairs[e];c(t,o)&&n.add(r)}if(this.subtrees)for(let e=0;e<this.subtrees.length;e++)this.subtrees[e].find(t,n);return n}findOnLineSegment(t,n=new Set){if(!a(t,this.boundingBox))return n;for(const[e,o]of this.pairs)a(t,e)&&n.add(o);if(this.subtrees)for(const e of this.subtrees)e.findOnLineSegment(t,n);return n}ensureSubtrees(){if(this.subtrees)return;const{top:t,right:n,bottom:e,left:o}=this.boundingBox,r=(this.boundingBox.left+this.boundingBox.right)/2,s=(this.boundingBox.top+this.boundingBox.bottom)/2;this.subtrees=[new g({top:t,right:r,bottom:s,left:o},this.depth-1,this.innerNodeCapacity),new g({top:t,right:n,bottom:s,left:r},this.depth-1,this.innerNodeCapacity),new g({top:s,right:r,bottom:e,left:o},this.depth-1,this.innerNodeCapacity),new g({top:s,right:n,bottom:e,left:r},this.depth-1,this.innerNodeCapacity)]}}const h=1e-12;function p(t){const n=t[1],e=t[2],o=t[3],r=t[4],s=-n[0]+3*e[0]-3*o[0]+r[0],i=-n[1]+3*e[1]-3*o[1]+r[1],a=3*n[0]-6*e[0]+3*o[0],c=3*n[1]-6*e[1]+3*o[1],u=-3*n[0]+3*e[0],f=-3*n[1]+3*e[1],d=i*a-s*c,l=s*f-i*u,g=(-3*s*s*f*f+6*s*i*u*f+4*s*a*c*f-4*s*c*c*u-3*i*i*u*u-4*i*a*a*f+4*i*a*c*u)/(s*s*c*c-2*s*i*a*c+i*i*a*a);if(g<0)return null;const p=(l/d+Math.sqrt(g))/2,m=(l/d-Math.sqrt(g))/2;return h<=p&&p<=1-h&&h<=m&&m<=1-h?[p,m]:null}var m="undefined"!=typeof Float32Array?Float32Array:Array;function b(){var t=new m(4);return m!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}function M(t,n){var e=Math.sin(n),o=Math.cos(n);return t[0]=o,t[1]=e,t[2]=-e,t[3]=o,t}function y(){var t=new m(6);return m!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t}function x(t,n){var e=Math.sin(n),o=Math.cos(n);return t[0]=o,t[1]=e,t[2]=-e,t[3]=o,t[4]=0,t[5]=0,t}Math.hypot||(Math.hypot=function(){for(var t=0,n=arguments.length;n--;)t+=arguments[n]*arguments[n];return Math.sqrt(t)});var w=function(t,n,e){var o=n[0],r=n[1],s=n[2],i=n[3],a=n[4],c=n[5],u=e[0],f=e[1],d=e[2],l=e[3],g=e[4],h=e[5];return t[0]=o*u+s*f,t[1]=r*u+i*f,t[2]=o*d+s*l,t[3]=r*d+i*l,t[4]=o*g+s*h+a,t[5]=r*g+i*h+c,t};function k(t,n,e){return t[0]=n,t[1]=e,t}function E(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t}function v(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t}function B(t,n,e,o){var r=n[0],s=n[1];return t[0]=r+o*(e[0]-r),t[1]=s+o*(e[1]-s),t}function P(t,n,e){var o=n[0],r=n[1];return t[0]=e[0]*o+e[2]*r,t[1]=e[1]*o+e[3]*r,t}function F(t,n,e){var o=n[0],r=n[1];return t[0]=e[0]*o+e[2]*r+e[4],t[1]=e[1]*o+e[3]*r+e[5],t}var L,C=function(t){var n=t[0],e=t[1];return Math.hypot(n,e)},V=function(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t};L=new m(2),m!=Float32Array&&(L[0]=0,L[1]=0);const I=2*Math.PI;function A(t,n,e){return t+(n-t)*e}function S(t){return t/180*Math.PI}function Q(t,n){const e=Math.sign(t[0]*n[1]-t[1]*n[0]);return 0===e&&Math.abs(t[0]+n[0])<1e-12&&Math.abs(t[1]+n[1])<1e-12?Math.PI:e*Math.acos((r=n,((o=t)[0]*r[0]+o[1]*r[1])/C(t)/C(n)));var o,r}function T(t,n,e=0){return Math.abs(t[0]-n[0])<=e&&Math.abs(t[1]-n[1])<=e}function O(t){return t[1]}function N(t){switch(t[0]){case"L":return t[2];case"C":return t[4];case"Q":return t[3];case"A":return t[7]}}function q(t){switch(t[0]){case"L":return["L",t[2],t[1]];case"C":return["C",t[4],t[3],t[2],t[1]];case"Q":return["Q",t[3],t[2],t[1]];case"A":return["A",t[7],t[2],t[3],t[4],t[5],!t[6],t[1]]}}const D=(()=>{const t=[0,0],n=b(),e=[0,0],o=[0,0];return function([r,s,i,a,c,u,f,d]){if(0===i||0===a)return null;M(n,-S(c)),V(t,s,d),v(t,t,.5),P(t,t,n);let l=i*i,g=a*a;const h=t[0]*t[0],p=t[1]*t[1];i=Math.abs(i),a=Math.abs(a);const m=h/l+p/g+1e-12;if(m>1){const t=Math.sqrt(m);i*=t,a*=t;const n=Math.abs(m);l*=n,g*=n}const b=u===f?-1:1,y=Math.sqrt((l*g-l*p-g*h)/(l*p+g*h)),x=b*y*(i*t[1]/a),w=b*y*(-a*t[0]/i);!function(t,n){if(t===n){var e=n[1];t[1]=n[2],t[2]=e}else t[0]=n[0],t[1]=n[2],t[2]=n[1],t[3]=n[3]}(n,n),E(e,s,d),v(e,e,.5),P(o,[x,w],n),E(o,o,e);const k=[(t[0]-x)/i,(t[1]-w)/a],B=Q([1,0],k);let F=Q(k,[(-t[0]-x)/i,(-t[1]-w)/a]);return!f&&F>0?F-=I:f&&F<0&&(F+=I),{center:[o[0],o[1]],theta1:B,deltaTheta:F,rx:i,ry:a,phi:c}}})(),W=(()=>{const t=[0,0],n=[0,0],e=b();return function({center:o,theta1:r,deltaTheta:s,rx:i,ry:a,phi:c}){M(e,c),k(t,i*Math.cos(r),a*Math.sin(r)),P(t,t,e),E(t,t,o),k(n,i*Math.cos(r+s),a*Math.sin(r+s)),P(n,n,e),E(n,n,o);const u=Math.abs(s)>Math.PI;return["A",[t[0],t[1]],i,a,c,u,s>0,[n[0],n[1]]]}})(),Z=(()=>{const t=[0,0],n=[0,0],e=[0,0],o=[0,0],r=[0,0],s=[0,0];return function(i,a){switch(i[0]){case"L":B(s,i[1],i[2],a);break;case"C":B(t,i[1],i[2],a),B(n,i[2],i[3],a),B(e,i[3],i[4],a),B(o,t,n,a),B(r,n,e,a),B(s,o,r,a);break;case"Q":B(t,i[1],i[2],a),B(n,i[2],i[3],a),B(s,t,n,a);break;case"A":{const t=D(i);if(!t){B(s,i[1],i[7],a);break}const{deltaTheta:n,phi:e,theta1:o,rx:r,ry:c,center:u}=t,f=o+a*n;k(s,r*Math.cos(f),c*Math.sin(f)),function(t,n,e,o){var r=n[0]-e[0],s=n[1]-e[1],i=Math.sin(o),a=Math.cos(o);t[0]=r*a-s*i+e[0],t[1]=r*i+s*a+e[1]}(s,s,[0,0],e),E(s,s,u);break}}return[s[0],s[1]]}})(),$=(()=>{const t=y(),n=y();return function(e,o=Math.PI/2){const r=D(e);if(!r)return[["L",e[1],e[7]]];const{center:s,theta1:i,deltaTheta:a,rx:c,ry:u}=r,f=Math.ceil(Math.abs(a)/o);!function(t,n){t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=n[0],t[5]=n[1]}(t,s),function(t,n,e){var o=n[0],r=n[1],s=n[2],i=n[3],a=n[4],c=n[5],u=Math.sin(e),f=Math.cos(e);t[0]=o*f+s*u,t[1]=r*f+i*u,t[2]=o*-u+s*f,t[3]=r*-u+i*f,t[4]=a,t[5]=c}(t,t,S(e[4])),function(t,n,e){var o=n[0],r=n[1],s=n[2],i=n[3],a=n[4],c=n[5],u=e[0],f=e[1];t[0]=o*u,t[1]=r*u,t[2]=s*f,t[3]=i*f,t[4]=a,t[5]=c}(t,t,[c,u]);const d=[],l=a/f,g=4/3*Math.tan(l/4),h=Math.sin(l),p=Math.cos(l);for(let e=0;e<f;e++){const o=[1,0],r=[1,g],s=[p+g*h,h-g*p],a=[p,h];x(n,i+e*l),w(n,t,n),F(o,o,n),F(r,r,n),F(s,s,n),F(a,a,n),d.push(["C",o,r,s,a])}return d}})();function j(t,n,e,o,r){const s=A(t,n,r),i=A(n,e,r),a=A(e,o,r),c=A(s,i,r),u=A(i,a,r);return A(c,u,r)}function z(t,n,e,o){let r=Math.min(t,o),s=Math.max(t,o);const i=3*(3*n-t-3*e+o),a=6*(t-2*n+e),c=a*a-4*i*(3*(n-t));if(c<0||0===i)return[r,s];const u=Math.sqrt(c),f=(-a-u)/(2*i);if(0<f&&f<1){const i=j(t,n,e,o,f);r=Math.min(r,i),s=Math.max(s,i)}const d=(-a+u)/(2*i);if(0<d&&d<1){const i=j(t,n,e,o,d);r=Math.min(r,i),s=Math.max(s,i)}return[r,s]}function R(t,n,e){let o=Math.min(t,e),r=Math.max(t,e);const s=t-2*n+e;if(0===s)return[o,r];const i=(t-n)/s;if(0<=i&&i<=1){const s=function(t,n,e,o){const r=A(t,n,o),s=A(n,e,o);return A(r,s,o)}(t,n,e,i);o=Math.min(o,s),r=Math.max(r,s)}return[o,r]}function H(t,n,e){const o=(t-n)/(e-n);return 0<=o&&o<=1}function U(t){switch(t[0]){case"L":return{top:Math.min(t[1][1],t[2][1]),right:Math.max(t[1][0],t[2][0]),bottom:Math.max(t[1][1],t[2][1]),left:Math.min(t[1][0],t[2][0])};case"C":{const[n,e]=z(t[1][0],t[2][0],t[3][0],t[4][0]),[o,r]=z(t[1][1],t[2][1],t[3][1],t[4][1]);return{top:o,right:e,bottom:r,left:n}}case"Q":{const[n,e]=R(t[1][0],t[2][0],t[3][0]),[o,r]=R(t[1][1],t[2][1],t[3][1]);return{top:o,right:e,bottom:r,left:n}}case"A":{const n=D(t);if(!n)return f(l(t[1],0),t[7]);const{theta1:e,deltaTheta:o,phi:r,center:s,rx:i,ry:a}=n;if(0===r||i===a){const n=e+o;let r=f(l(t[1],0),t[7]);return(H(-Math.PI,e,n)||H(Math.PI,e,n))&&(r=f(r,[s[0]-i,s[1]])),(H(-Math.PI/2,e,n)||H(3*Math.PI/2,e,n))&&(r=f(r,[s[0],s[1]-a])),(H(0,e,n)||H(2*Math.PI,e,n))&&(r=f(r,[s[0]+i,s[1]])),(H(Math.PI/2,e,n)||H(5*Math.PI/2,e,n))&&(r=f(r,[s[0],s[1]+a])),function(t,n){return{top:t.top-n,right:t.right+n,bottom:t.bottom+n,left:t.left-n}}(r,1e-11)}const c=$(t,Math.PI/16);let d=null;for(const t of c)d=u(d,U(t));return d||l(t[1],0)}}}function G(t,n){const e=t[1],o=t[2],r=B([0,0],e,o,n);return[["L",e,r],["L",r,o]]}function _(t,n){const e=t[1],o=t[2],r=t[3],s=t[4],i=B([0,0],e,o,n),a=B([0,0],o,r,n),c=B([0,0],r,s,n),u=B([0,0],i,a,n),f=B([0,0],a,c,n),d=B([0,0],u,f,n);return[["C",e,i,u,d],["C",d,f,c,s]]}function J(t,n){switch(t[0]){case"L":return G(t,n);case"C":return _(t,n);case"Q":return function(t,n){const e=t[1],o=t[2],r=t[3],s=B([0,0],e,o,n),i=B([0,0],o,r,n),a=B([0,0],s,i,n);return[["Q",e,s,a],["Q",a,i,r]]}(t,n);case"A":return function(t,n){const e=D(t);if(!e)return G(["L",t[1],t[7]],n);const o=e.deltaTheta*n;return[W({...e,deltaTheta:o}),W({...e,theta1:e.theta1+o,deltaTheta:e.deltaTheta-o})]}(t,n)}}const K=64*Number.MIN_VALUE;function X([[t,n],[e,o]],[[r,s],[i,a]],c){const u=e-t,f=r-i,d=r-t,l=o-n,g=s-a,h=s-n,p=u*g-l*f;if(Math.abs(p)<K)return null;const m=(d*g-h*f)/p,b=(u*h-l*d)/p;return-c<=m&&m<=1+c&&-c<=b&&b<=1+c?[m,b]:null}function Y(t){const[n,e]=J(t.seg,.5),o=(t.startParam+t.endParam)/2;return[{seg:n,startParam:t.startParam,endParam:o,boundingBox:U(n)},{seg:e,startParam:o,endParam:t.endParam,boundingBox:U(e)}]}function tt(t){switch(t[0]){case"L":return[t[1],t[2]];case"C":return[t[1],t[4]];case"Q":return[t[1],t[3]];case"A":return[t[1],t[7]]}}function nt({seg:t,boundingBox:n},{seg:e,boundingBox:o}){return"L"===t[0]?"L"===e[0]?function(t,n,e){return!!X(t,n,e)}([t[1],t[2]],[e[1],e[2]],1e-6):a([t[1],t[2]],o):"L"===e[0]?a([e[1],e[2]],n):c(n,o)}function et(t,n,e){const o=t[0];if(n[0]!==o)return!1;switch(o){case"L":return T(t[1],n[1],e)&&T(t[2],n[2],e);case"C":return T(t[1],n[1],e)&&T(t[2],n[2],e)&&T(t[3],n[3],e)&&T(t[4],n[4],e);case"Q":return T(t[1],n[1],e)&&T(t[2],n[2],e)&&T(t[3],n[3],e);case"A":return T(t[1],n[1],e)&&Math.abs(t[2]-n[2])<e&&Math.abs(t[3]-n[3])<e&&Math.abs(t[4]-n[4])<e&&t[5]===n[5]&&t[6]===n[6]&&T(t[7],n[7],e)}}function ot(t,n,e,o){if("L"===t[0]&&"L"===n[0]){const r=X([t[1],t[2]],[n[1],n[2]],o.param);if(r)return!e&&(r[0]<o.param||r[0]>1-o.param)&&(r[1]<o.param||r[1]>1-o.param)?[]:[r]}let r=[[{seg:t,startParam:0,endParam:1,boundingBox:U(t)},{seg:n,startParam:0,endParam:1,boundingBox:U(n)}]];const s=[];for(;r.length;){const t=[];for(const[n,e]of r){if(et(n.seg,e.seg,o.point))continue;const r=d(n.boundingBox)<=o.linear,i=d(e.boundingBox)<=o.linear;if(r&&i){const t=X(tt(n.seg),tt(e.seg),o.param);t&&s.push([A(n.startParam,n.endParam,t[0]),A(e.startParam,e.endParam,t[1])])}else{const o=r?[n]:Y(n),s=i?[e]:Y(e);for(const n of o)for(const e of s)nt(n,e)&&t.push([n,e])}}r=t}return e?s:s.filter((([t,n])=>t>o.param&&t<1-o.param||n>o.param&&n<1-o.param))}const rt=Object.hasOwn;function st(t){const n=new WeakMap;return(e,...o)=>{if(n.has(e))return n.get(e);{const r=t(e,...o);return n.set(e,r),r}}}function*it(t,n){let e=0;for(const o of t)yield n(o,e++)}const at=8,ct=8,ut={point:1e-6,linear:1e-4,param:1e-8};var ft,dt;function lt(){let t=0;return st((()=>t++))}function gt(t){return n=>({seg:n,parent:t})}function ht(t){return t.outgoingEdges.length}function pt({directionFlag:t,segments:n}){let e,o;const r=n[0];return t?(e=Z(r,1),o=Z(r,1-ut.param)):(e=Z(r,0),o=Z(r,ut.param)),Math.atan2(o[1]-e[1],o[0]-e[0])}function mt(t){const{outgoingEdges:n}=t.incidentVertices[1],e=n.findIndex((n=>n.twin===t));return n[(e+1)%n.length]}t.PathBooleanOperation=void 0,(ft=t.PathBooleanOperation||(t.PathBooleanOperation={}))[ft.Union=0]="Union",ft[ft.Difference=1]="Difference",ft[ft.Intersection=2]="Intersection",ft[ft.Exclusion=3]="Exclusion",ft[ft.Division=4]="Division",ft[ft.Fracture=5]="Fracture",t.FillRule=void 0,(dt=t.FillRule||(t.FillRule={}))[dt.NonZero=0]="NonZero",dt[dt.EvenOdd=1]="EvenOdd";const bt=st((t=>t.incidentEdges.flatMap((t=>{const n=[];for(const e of t.segments)for(let o=0;o<64;o++){const r=o/64,s=t.directionFlag?1-r:r;n.push(Z(e,s))}return n}))));function Mt(t,n,e){return t>=e==n<e}function yt(t,n,e){return!!Mt(t[1],n[1],e[1])&&(o=e[1],r=t[1],s=n[1],i=t[0],a=n[0],(o-r)/(s-r)*(a-i)+i>=e[0]);var o,r,s,i,a}function xt(t,n){if(t.length<=2)return 0;let e=t[t.length-1],o=0;for(const r of t)yt(e,r,n)&&(o+=r[1]>e[1]?-1:1),e=r;return o}function wt(t){const n=bt(t);for(let t=0;t<n.length;t++){const e=n[t],o=n[(t+1)%n.length],r=n[(t+2)%n.length],s=[(e[0]+o[0]+r[0])/3,(e[1]+o[1]+r[1])/3],i=xt(n,s);if(0!==i)return{winding:i,point:s}}}function kt(t,n){return Mt(t.top,t.bottom,n[1])&&t.right>=n[0]}function Et(t,n){const e=U(t);if(!kt(e,n))return 0;let o=[{boundingBox:e,seg:t}],r=0;for(;o.length>0;){const t=[];for(const{boundingBox:e,seg:s}of o)if(d(e)<ut.linear)yt(O(s),N(s),n)&&r++;else{const e=J(s,.5),o=U(e[0]);kt(o,n)&&t.push({boundingBox:o,seg:e[0]});const r=U(e[1]);kt(r,n)&&t.push({boundingBox:r,seg:e[1]})}o=t}return r}function vt(t,n){const e=O(t.edges[0].segments[0]);for(const t of n.vertices){if(t===n.outerFace)continue;let o=0;for(const n of t.incidentEdges)for(const t of n.segments)o+=Et(t,e);if(o%2==1)return t}return null}function Bt(n,e){switch(e){case t.FillRule.NonZero:return 0===n?0:1;case t.FillRule.EvenOdd:return n%2==0?0:1}}function*Pt(t){function n(n){return t.has(n.incidentVertex)===t.has(n.twin.incidentVertex)}const e=new WeakMap;for(const n of t){let t=n.incidentEdges[n.incidentEdges.length-1];for(const o of n.incidentEdges)e.set(t,o),t=o}const o=new WeakSet;for(const r of t)for(const t of r.incidentEdges){if(n(t)||o.has(t))continue;let r=t;do{for(r.directionFlag?yield*it(r.segments,q):yield*r.segments,o.add(r),r=e.get(r);n(r);)r=e.get(r.twin)}while(r!==t)}}const Ft={[t.PathBooleanOperation.Union]:({flag:t})=>t>0,[t.PathBooleanOperation.Difference]:({flag:t})=>1===t,[t.PathBooleanOperation.Intersection]:({flag:t})=>3===t,[t.PathBooleanOperation.Exclusion]:({flag:t})=>1===t||2===t,[t.PathBooleanOperation.Division]:({flag:t})=>!(1&~t),[t.PathBooleanOperation.Fracture]:({flag:t})=>t>0};function Lt(t,n){return[2*t[0]-n[0],2*t[1]-n[1]]}function*Ct(t){let n=null,e=null,o=null;function r(){throw new Error("Bad SVG path data sequence.")}for(const s of function*(t){let n=[0,0],e=n;for(const o of t)switch(o[0]){case"M":yield o,n=e=o[1];break;case"L":case"T":yield o,n=o[1];break;case"C":yield o,n=o[3];break;case"S":case"Q":yield o,n=o[2];break;case"A":yield o,n=o[6];break;case"Z":case"z":n=e,yield["Z"];break;case"H":n=[o[1],n[1]],yield["L",n];break;case"V":n=[n[0],o[1]],yield["L",n];break;case"m":n=e=[n[0]+o[1],n[1]+o[2]],yield["M",n];break;case"l":n=[n[0]+o[1],n[1]+o[2]],yield["L",n];break;case"h":n=[n[0]+o[1],n[1]],yield["L",n];break;case"v":n=[n[0],n[1]+o[1]],yield["L",n];break;case"c":yield["C",[n[0]+o[1],n[1]+o[2]],[n[0]+o[3],n[1]+o[4]],n=[n[0]+o[5],n[1]+o[6]]];break;case"s":yield["S",[n[0]+o[1],n[1]+o[2]],n=[n[0]+o[3],n[1]+o[4]]];break;case"q":yield["Q",[n[0]+o[1],n[1]+o[2]],n=[n[0]+o[3],n[1]+o[4]]];break;case"t":yield["T",n=[n[0]+o[1],n[1]+o[2]]];break;case"a":yield["A",o[1],o[2],o[3],o[4],o[5],n=[n[0]+o[6],n[1]+o[7]]]}}(t))switch(s[0]){case"M":e=n=s[1],o=null;break;case"L":e||r(),yield["L",e,s[1]],e=s[1],o=null;break;case"C":e||r(),yield["C",e,s[1],s[2],s[3]],e=s[3],o=s[2];break;case"S":e||r(),o||r(),yield["C",e,Lt(e,o),s[1],s[2]],e=s[2],o=s[1];break;case"Q":e||r(),yield["Q",e,s[1],s[2]],e=s[2],o=s[1];break;case"T":e||r(),o||r(),o=Lt(e,o),yield["Q",e,o,s[1]],e=s[1];break;case"A":e||r(),yield["A",e,s[1],s[2],s[3],s[4],s[5],s[6]],e=s[6],o=null;break;case"Z":case"z":e||r(),n||r(),yield["L",e,n],e=n,o=null}}function*Vt(t,n=1e-4){let e=null;for(const o of t)switch(e&&T(o[1],e,n)||(yield["M",o[1]]),o[0]){case"L":yield["L",e=o[2]];break;case"C":yield["C",o[2],o[3],e=o[4]];break;case"Q":yield["Q",o[2],e=o[3]];break;case"A":yield["A",o[2],o[3],o[4],o[5],o[6],e=o[7]]}}const It=Symbol();function*At(t){const n=/\s*,?\s*(-?\d*(?:\d\.|\.\d|\d)\d*(?:[eE][+\-]?\d+)?)/y,e=/\s*([MLCSQTAZHVmlhvcsqtaz])/y,o=/\s*,?\s*([01])/y;let r=0,s="M";function i(){if(r>=t.length-1)return It;e.lastIndex=r;const n=e.exec(t);if(!n)switch(s){case"M":return"L";case"m":return"l";default:return s}return r=e.lastIndex,n[1]}function a(){n.lastIndex=r;const e=n.exec(t);if(!e)throw new Error(`Invalid path data. Expected a number at index ${r}.`);return r=n.lastIndex,Number(e[1])}function c(){o.lastIndex=r;const n=o.exec(t);if(!n)throw new Error(`Invalid path data. Expected a flag at index ${r}.`);return r=o.lastIndex,"1"===n[1]}for(;;)switch(i()){case"M":yield[s="M",[a(),a()]];break;case"L":yield[s="L",[a(),a()]];break;case"C":yield[s="C",[a(),a()],[a(),a()],[a(),a()]];break;case"S":yield[s="S",[a(),a()],[a(),a()]];break;case"Q":yield[s="Q",[a(),a()],[a(),a()]];break;case"T":yield[s="T",[a(),a()]];break;case"A":yield[s="A",a(),a(),a(),c(),c(),[a(),a()]];break;case"Z":case"z":yield[s="Z"];break;case"H":yield[s="H",a()];break;case"V":yield[s="V",a()];break;case"m":yield[s="m",a(),a()];break;case"l":yield[s="l",a(),a()];break;case"h":yield[s="h",a()];break;case"v":yield[s="v",a()];break;case"c":yield[s="c",a(),a(),a(),a(),a(),a()];break;case"s":yield[s="s",a(),a(),a(),a()];break;case"q":yield[s="q",a(),a(),a(),a()];break;case"t":yield[s="t",a(),a()];break;case"a":yield[s="a",a(),a(),a(),c(),c(),a(),a()];break;case It:return}}t.arcSegmentToCubics=$,t.commandsFromPathData=At,t.pathBoolean=function(n,e,o,r,s){const i=[...it(n,gt(1)),...it(o,gt(2))];!function(t){for(let n=0;n<t.length;n++){const e=t[n];if("C"!==e.seg[0])continue;const o=p(e.seg);if(!o)continue;o[0]>o[1]&&o.reverse();const[r,s]=o;if(Math.abs(r-s)<ut.param){const[o,s]=_(e.seg,r);t[n]={seg:o,parent:e.parent},t.push({seg:s,parent:e.parent})}else{const[o,i]=_(e.seg,r),[a,c]=_(i,(s-r)/(1-r));t[n]={seg:o,parent:e.parent},t.push({seg:a,parent:e.parent},{seg:c,parent:e.parent})}}}(i);const{edges:a,totalBoundingBox:c}=function(t){const n=t.map((t=>({...t,boundingBox:U(t.seg)}))),e=n.reduce(((t,{boundingBox:n})=>u(t,n)),null);if(!e)return{edges:[],totalBoundingBox:null};const o=new g(e,at),r={};function s(t,n){rt(r,t)||(r[t]=[]),r[t].push(n)}for(let e=0;e<n.length;e++){const r=n[e],i=o.find(r.boundingBox);for(const n of i){const o=t[n],i=r.parent!==o.parent||!(T(N(o.seg),O(r.seg),ut.point)||T(O(o.seg),N(r.seg),ut.point)),a=ot(r.seg,o.seg,i,ut);for(const[t,o]of a)s(e,t),s(n,o)}o.insert(r.boundingBox,e)}const i=[];for(let t=0;t<n.length;t++){const e=n[t];if(!rt(r,t)){i.push(e);continue}const o=r[t];o.sort();let s=e.seg,a=0;for(let t=0;t<o.length;t++){const n=o[t];if(n>1-ut.param)break;const r=(n-a)/(1-a);if(a=n,r<ut.param)continue;if(r>1-ut.param)continue;const[c,u]=J(s,r);i.push({seg:c,boundingBox:U(c),parent:e.parent}),s=u}i.push({seg:s,boundingBox:U(s),parent:e.parent})}return{edges:i,totalBoundingBox:e}}(i);if(!c)return[];const f=function(t,n){const e=new g(n,ct),o=[];function r(t){const n=l(t,ut.point),r=e.find(n);if(r.size)return function(t){return t.values().next().value}(r);{const r={point:t,outgoingEdges:[]};return e.insert(n,r),o.push(r),r}}const s=lt(),i={};return{edges:t.flatMap((t=>{const n=r(O(t.seg)),e=r(N(t.seg));if(n===e)switch(t.seg[0]){case"L":return[];case"C":if(T(t.seg[1],t.seg[2],ut.point)&&T(t.seg[3],t.seg[4],ut.point))return[];break;case"Q":if(T(t.seg[1],t.seg[2],ut.point))return[];break;case"A":if(!1===t.seg[5])return[]}const o=`${s(n)}:${s(e)}`;if(rt(i,o)){const n=i[o].find((n=>et(n[0].seg,t.seg,ut.point)));if(n)return n[1].parent|=t.parent,n[2].parent|=t.parent,[]}const a={...t,incidentVertices:[n,e],directionFlag:!1,twin:null},c={...t,incidentVertices:[e,n],directionFlag:!0,twin:a};return a.twin=c,n.outgoingEdges.push(a),e.outgoingEdges.push(c),rt(i,o)?i[o].push([t,a,c]):i[o]=[[t,a,c]],[a,c]})),vertices:o}}(a,c),d=function({vertices:t}){const n=[],e=[],o=st((t=>{const n={outgoingEdges:[]};return e.push(n),n})),r=lt(),s={},i=new WeakSet;for(const e of t){if(2===ht(e))continue;const t=o(e);for(const a of e.outgoingEdges){const e=[];let c=a;for(;c.parent===a.parent&&c.directionFlag===a.directionFlag&&2===ht(c.incidentVertices[1]);){e.push(c.seg),i.add(c.incidentVertices[1]);const[t,n]=c.incidentVertices[1].outgoingEdges;c=t.twin===c?n:t}e.push(c.seg);const u=o(c.incidentVertices[1]),f=`${r(a)}-${r(c)}`,d=s[`${r(c.twin)}-${r(a.twin)}`]??null,l={segments:e,parent:a.parent,incidentVertices:[t,u],directionFlag:a.directionFlag,twin:d};d&&(d.twin=l),s[f]=l,t.outgoingEdges.push(l),n.push(l)}}const a=[];for(const n of t){if(2!==ht(n)||i.has(n))continue;let t=n.outgoingEdges[0];const e={segments:[],parent:t.parent,directionFlag:t.directionFlag};do{e.segments.push(t.seg),i.add(t.incidentVertices[0]);const[n,o]=t.incidentVertices[1].outgoingEdges;t=n.twin===t?o:n}while(t.incidentVertices[0]!==n);a.push(e)}return{edges:n,vertices:e,cycles:a}}(f);!function(t){function n(n){const e=new WeakSet,o=new WeakMap;function r(t,s,i){if(o.has(t))return o.get(t);o.set(t,i);let a=1/0;for(const e of t.outgoingEdges)e.parent&n&&e!==s&&(a=Math.min(a,r(e.incidentVertices[1],e.twin,i+1)));return a<=i&&e.add(t),a}for(const e of t.edges)e.parent&n&&r(e.incidentVertices[0],null,0);return e}const e=n(1),o=n(2);function r(t){return!(1&~t.parent)&&e.has(t.incidentVertices[0])&&e.has(t.incidentVertices[1])||!(2&~t.parent)&&o.has(t.incidentVertices[0])&&o.has(t.incidentVertices[1])}t.vertices=t.vertices.filter((function(t){return e.has(t)||o.has(t)}));for(const n of t.vertices)n.outgoingEdges=n.outgoingEdges.filter(r);t.edges=t.edges.filter(r)}(d),function({vertices:t}){const n=st(pt);for(const e of t)ht(e)>2&&e.outgoingEdges.sort(((t,e)=>n(t)-n(e)))}(d);const h=function(t){let n=[];function e(t,n){let o=!1;for(const r of t){const t=vt(n,r.component);if(t){if(r.outgoingEdges.has(t)){const o=r.outgoingEdges.get(t);r.outgoingEdges.set(t,e(o,n))}else r.outgoingEdges.set(t,[{component:n,outgoingEdges:new Map}]);o=!0;break}}if(o)return t;{const e={component:n,outgoingEdges:new Map},o=[e];for(const r of t){const t=vt(r.component,n);t?e.outgoingEdges.has(t)?e.outgoingEdges.get(t).push(r):e.outgoingEdges.set(t,[r]):o.push(r)}return o}}for(const o of t)n=e(n,o);return n}(function({edges:t,cycles:n}){const e=[],o=new WeakMap;for(const n of t){if(o.has(n))continue;const t={incidentEdges:[],flag:0};let r=n;do{const n=o.get(r.twin)??null,e={segments:r.segments,parent:r.parent,incidentVertex:t,directionFlag:r.directionFlag,twin:n};n&&(n.twin=e),o.set(r,e),t.incidentEdges.push(e),r=mt(r)}while(r.incidentVertices[0]!==n.incidentVertices[0]);e.push(t)}for(const t of n){const n={incidentEdges:[],flag:0},o={segments:t.segments,parent:t.parent,incidentVertex:n,directionFlag:t.directionFlag,twin:null},r={incidentEdges:[],flag:0},s={segments:[...t.segments].reverse(),parent:t.parent,incidentVertex:r,directionFlag:!t.directionFlag,twin:o};o.twin=s,n.incidentEdges.push(o),r.incidentEdges.push(s),e.push(n,r)}const r=[],s=new WeakSet,i=new WeakSet;for(const t of e){if(s.has(t))continue;const n=[],e=[],o=t=>{s.has(t)||n.push(t),s.add(t);for(const n of t.incidentEdges){if(i.has(n))continue;const{twin:t}=n;e.push(n,t),i.add(n),i.add(t),o(t.incidentVertex)}};o(t);const a=n.find((t=>wt(t).winding<0));r.push({vertices:n,edges:e,outerFace:a})}return r}(d));!function(t,n,e){function o(t,r,s){const i=new WeakSet;!function r(s,a,c){if(i.has(s))return;i.add(s);const u=Bt(a,n),f=Bt(c,e);s.flag=u|f<<1;for(const t of s.incidentEdges){const n=t.twin;let e=a;1&t.parent&&(e+=t.directionFlag?-1:1);let o=c;2&t.parent&&(o+=t.directionFlag?-1:1),r(n.incidentVertex,e,o)}if(t.outgoingEdges.has(s)){const n=t.outgoingEdges.get(s);for(const t of n)o(t,a,c)}}(t.component.outerFace,r,s)}for(const n of t)o(n,0,0)}(h,e,r);const m=Ft[s];switch(s){case t.PathBooleanOperation.Division:case t.PathBooleanOperation.Fracture:return function(t,n){const e=[];function o(t){for(const o of t.component.vertices){if(!n(o)||o===t.component.outerFace)continue;const r=[];for(const t of o.incidentEdges)t.directionFlag?r.push(...t.segments.map(q)):r.push(...t.segments);if(t.outgoingEdges.has(o))for(const n of t.outgoingEdges.get(o)){const{outerFace:t}=n.component;for(const n of t.incidentEdges)n.directionFlag?r.push(...n.segments.map(q)):r.push(...n.segments)}e.push(r)}for(const n of t.outgoingEdges.values())for(const t of n)o(t)}for(const n of t)o(n);return e}(h,m);default:{const t=new Set(function*(t,n){function*e(t){for(const e of t.component.vertices)n(e)&&(yield e);for(const n of t.outgoingEdges.values())for(const t of n)yield*e(t)}for(const n of t)yield*e(n)}(h,m));return[[...Pt(t)]]}}},t.pathCubicSegmentSelfIntersection=p,t.pathFromCommands=Ct,t.pathFromPathData=function(t){return[...Ct(At(t))]},t.pathSegmentBoundingBox=U,t.pathSegmentIntersection=ot,t.pathToCommands=Vt,t.pathToPathData=function(t,n=1e-4){function e(t){return"string"==typeof t?t:function(t){return"number"==typeof t}(t)?t.toFixed(12):function(t){return"boolean"==typeof t}(t)?t?"1":"0":t.map((t=>t.toFixed(12))).join(",")}return[...it(Vt(t,n),(t=>t.map(e).join(" ")))].join(" ")},t.samplePathSegmentAt=Z},"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((t="undefined"!=typeof globalThis?globalThis:t||self).PathBool={});

})();  //# sourceMappingURL=path-bool.umd.js.map

